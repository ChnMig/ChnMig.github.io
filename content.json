{"pages":[{"title":"å…³äºæˆ‘","text":"æ ¼è¨€ çŸ¥è¯† çŸ¥è¯†å°±æ˜¯åŠ›é‡, æ˜¯æˆåŠŸä¸å¯æˆ–ç¼ºçš„åŸºç¡€ å®è·µ å®è·µå‡ºçœŸçŸ¥, å¦åˆ™æ°¸è¿œæ˜¯çº¸ä¸Šè°ˆå…µ, ç°å®å¾€å¾€æ›´ä¸ºå¤æ‚ çµæ„Ÿ çµæ„Ÿå°±åœ¨é‚£ä¸€ç¬é—´, åŠªåŠ›æŠ“ä½å®ƒ æœºé‡ äººç”Ÿå……æ»¡æœºé‡, ä½†æ˜¯æœºä¼šæ€»æ˜¯ç•™ç»™æœ‰å‡†å¤‡çš„äºº","link":"/about/index.html"}],"posts":[{"title":"ä¸ªäººå¸¸ç”¨çš„gitignoreæ–‡ä»¶æ¨¡æ¿","text":"ä½œç”¨ gitæäº¤æ—¶å¿½ç•¥çš„æ–‡ä»¶ æ–‡ä»¶å .gitignore Python 1234567891011121314151617181920212223242526272829303132333435# Byte-compiled / optimized / DLL files__pycache__/*.py[cod]*$py.class# Distribution / packaging.Pythonenv/build/dist/*.log# pyenv.python-version# dotenv.env# virtualenv.venv/venv/ENV/# VSCode settings.vscode# IDEA files.idea# OSX dir files.DS_Store# Sublime Text settings*.sublime-workspace*.sublime-project Go 1234567891011121314151617181920212223242526# Buildbulid/*.exe# dotenv.env# venv/vendor/# Log*.log# VSCode settings.vscode# IDEA files.idea# OSX dir files.DS_Store# Sublime Text settings*.sublime-workspace*.sublime-project","link":"/2021/09/04/commonly_used_gitignore/"},{"title":"ä½¿ç”¨Cronå®šæ—¶ä»»åŠ¡æ¨¡å—","text":"ä½¿ç”¨Cronå®šæ—¶ä»»åŠ¡æ¨¡å— æ–°é¡¹ç›®æ˜¯Golangä½œä¸ºå¼€å‘è¯­è¨€, é‡åˆ°äº†äº›æ–°çš„å‘, ä¹Ÿå­¦åˆ°äº†æ–°çš„çŸ¥è¯†, æ”¶è·é¢‡ä¸° æœ¬ç« ä»‹ç»åœ¨Goä¸­ä½¿ç”¨Cronå®šæ—¶ä»»åŠ¡æ¨¡å—æ¥å®ç°é€»è¾‘ åœ¨é¡¹ç›®ä¸­, æˆ‘ä»¬å¾€å¾€éœ€è¦å®šæ—¶æ‰§è¡Œä¸€äº›é€»è¾‘, ä¸¾ä¸ªä¾‹å­, è´¢åŠ¡ç³»ç»Ÿæ¯æœˆéœ€è¦è‡ªåŠ¨çš„æ€»ç»“æŠ¥è¡¨å‘ç”Ÿåˆ°æŒ‡å®šé‚®ç®±, ç”Ÿæˆé¥¼å›¾å­˜å‚¨ç­‰é€»è¾‘, ä½œä¸ºæœåŠ¡æ–¹, æˆ‘ä»¬å¿…é¡»ç»´æŠ¤ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ç³»ç»Ÿæ¥åšåˆ°å®šæ—¶è§¦å‘ä»»åŠ¡æ‰§è¡Œ ä¸‹é¢ä»‹ç»Goé¡¹ç›®ä¸­å¾ˆå‡ºåçš„å®šæ—¶ä»»åŠ¡æ¨¡å—, Cron ä»–çš„starç›®å‰æœ‰7.2k(æˆªæ­¢åˆ°æœ¬ç« å‘å‡º) ä¸‹é¢æˆ‘ä»¬æ¥äº†è§£å¦‚ä½•ä½¿ç”¨, ä»¥Demoä¸ºä¾‹ 123456789101112131415161718192021222324252627282930313233package taskimport ( \"fmt\" \"remoteAdmin/tools\" \"github.com/robfig/cron/v3\")var myCron *cron.Cron// InitAndStart init cron taskfunc InitAndStart() { myCron = cron.New() defer myCron.Stop().Done() // c.AddFunc // https://en.wikipedia.org/wiki/Cron userOfflineDetectionTaskID, err := myCron.AddFunc(fmt.Sprintf(\"*/%v * * * *\", tools.EnvConfig.Cron.UserOffineRestartMinutes), userOfflineDetection) if err != nil { tools.Log.Panic(\"Cron AddFuncPanic\", zap.Error(err)) } tools.Log.Info(fmt.Sprintf(\"Successfully Add userOfflineDetection To Cron, ID: %v\", userOfflineDetectionTaskID)) // start myCron.Start()}// userOfflineDetection User offline detectionfunc userOfflineDetection() { fmt.Println(\"DEMO\")} è¿™é‡Œæˆ‘æ˜¯è®²å…¶ä½œä¸ºä¸€ä¸ªæ¨¡å—æ¥ä½¿ç”¨, å› ä¸ºåœ¨å®é™…ä½¿ç”¨ä¸­éœ€è¦æ‰§è¡Œçš„å®šæ—¶ä»»åŠ¡ä¸æ­¢ä¸€ä¸ª, è€Œä¸”ä»£ç é€»è¾‘å¯èƒ½æ¯”è¾ƒé•¿, æ‰€ä»¥æˆ‘å°† cron å¯¹è±¡å•ç‹¬ var å‡ºæ¥ä¾›å…¶ä»–å‡½æ•°ä½¿ç”¨ ä»£ç çš„å…¥å£åœ¨ InitAndStart å‡½æ•°, åœ¨ä¸€åˆ‡çš„å¼€å§‹, æˆ‘ä»¬éœ€è¦å…ˆ New å‡º *cron.Cron å¯„å­˜å™¨æ‰å¯ä»¥, ä½¿ç”¨ cron.New() ç”Ÿæˆä¸€ä¸ªä»»åŠ¡çš„å¯„å­˜å™¨å¯¹è±¡ æˆ‘ä»¬å¸Œæœ›åœ¨ä¸»ç¨‹åºè¿è¡Œç»“æŸæ—¶èƒ½ä¸»åŠ¨çš„å°†å¯„å­˜å™¨åœæ­¢, æ‰€ä»¥åœ¨ New å®Œåç«‹åˆ»ä½¿ç”¨ defer æ³¨å†Œå…³é—­é€»è¾‘ .Stop().Done() æ˜¯é€šçŸ¥ä¸‹æ¸¸è¦å…³é—­å¯„å­˜å™¨äº†, ç­‰å¾…ä¸‹æ¸¸æ‰‹ä¸Šçš„ä»»åŠ¡å…¨éƒ¨å¤„ç†å®Œæ¯•å³ç»“æŸ éšåå°±æ˜¯æ³¨å†Œä»»åŠ¡äº†, ä½¿ç”¨ AddFuncå‡½æ•°æ¥æ³¨å†Œä»»åŠ¡, ä»–æ¥å—ä¸¤ä¸ªå‚æ•°, å‚æ•°ä¸€æŒ‡å®šäº†è¯¥å‡½æ•°ä»€ä¹ˆæ—¶å€™å»è§¦å‘æ‰§è¡Œ, å‚æ•°äºŒå°±æ˜¯å…¶è¦æ‰§è¡Œçš„å‡½æ•°äº† å…³äºå‚æ•°ä¸€, é‡‡ç”¨çš„æ˜¯å’Œunixçš„ä»»åŠ¡å®šæ—¶ä»»åŠ¡ä¸€æ ·çš„æ ¼å¼, æ¯”å¦‚æˆ‘å†™çš„ä»£è¡¨æ¯tools.EnvConfig.Cron.UserOffineRestartMinutesåˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡, å…·ä½“çš„è§„åˆ™å¯æŸ¥çœ‹ wiki (éœ€FQ) æ­¤å¤„æˆ‘æ³¨å†Œçš„30ç§’æ‰§è¡Œä¸€æ¬¡ userOfflineDetection å‡½æ•° åŒæ—¶ cron å¯åŒæ—¶æ³¨å†Œå¾ˆå¤šä¸ªå®šæ—¶ä»»åŠ¡, åªéœ€ä½¿ç”¨ AddFunc æ³¨å†Œå³å¯ myCron.Start() åˆ™å¯åŠ¨å¯„å­˜å™¨, å¦‚æœè¿™ä¸ªGoroutineä¸­å·²ç»å¯åŠ¨äº† Cron, åˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œ éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨å¯„å­˜å™¨å¯åŠ¨åä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ AddFunc æ¥æ³¨å†Œæ–°çš„å®šæ—¶ä»»åŠ¡, ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸çš„æ³¨å†Œçš„, ä¾‹å¦‚ 12myCron.Start()myCron.AddFunc(\"* 1 * * *\", userOfflineDetection) å¦‚æœä½ æƒ³è¦å¯¹æ¯ä¸€ä¸ªæ³¨å†Œè¿‡çš„å®šæ—¶ä»»åŠ¡è¿›è¡Œæ§åˆ¶, è¿˜è®°å¾—AddFuncè¿”å›çš„ç»“æœå—, å…¶å‚æ•°1æ˜¯è¿™ä¸ªä»»åŠ¡çš„ID, å‚æ•°äºŒä¸ºå¯èƒ½çš„erré”™è¯¯ ä»¥ä¸Šä¸º Cron çš„åŸºæœ¬ç”¨æ³•, å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©","link":"/2021/09/04/cron/"},{"title":"Golangäº¤å‰ç¼–è¯‘","text":"å‰è¨€ ä»€ä¹ˆæ˜¯äº¤å‰ç¼–è¯‘? äº¤å‰ç¼–è¯‘æŒ‡åœ¨æŸä¸ªå¹³å°ç¼–è¯‘å¦ä¸€å¹³å°èƒ½ä½¿ç”¨çš„æ–‡ä»¶ æœ¬æ–‡åˆ—å‡ºäº¤å‰ç¼–è¯‘çš„å‘½ä»¤, å…¨ç¨‹å¹²è´§, ä¸å¤šBB æ­£æ–‡ æœ¬æ–‡å‚è€ƒå®˜æ–¹æ–‡æ¡£ 12https://golang.google.cn/doc/install/source#introductionhttps://golang.google.cn/doc/install/source#environment ä¸€æ¡åŸºæœ¬çš„ç¼–è¯‘å‘½ä»¤ç»“æ„å¦‚ä¸‹(mac/linux) 1GOOS=linux GOARCH=amd64 go build main.go windowsç‰ˆæ¯”è¾ƒç‰¹æ®Š(ç›®çš„ä¸€è‡´,åªæ˜¯winåŠ set) 123set GOOS=linuxset GOARCH=amd64go build main.go è¿™ä¸ªå‘½ä»¤æœ‰ä¸¤ä¸ªå‚æ•°(main.goä¸åšè§£é‡Šäº†) GOOS --&gt; GO,OS ç”Ÿæˆæ–‡ä»¶æ‰§è¡Œçš„å¹³å° GOPACH --&gt; GO,PACH å¹³å°çš„æ¶æ„ ä»¥ä¸Šè¿™æ¡å‘½ä»¤å°±æ˜¯ç”Ÿæˆåœ¨amd64æ¶æ„çš„linuxä¸Šçš„å¯æ‰§è¡Œæ–‡ä»¶ æ³¨æ„çš„æ˜¯, å¦‚æœä½ æ˜¯åœ¨åŒç­‰æ¶æ„å’Œç³»ç»Ÿä¸Šç¼–è¯‘,ä¾‹å¦‚åœ¨linuxä¸Šç¼–è¯‘linuxçš„æ–‡ä»¶,åˆ™ä»€ä¹ˆéƒ½ä¸ç”¨å¸¦,goä¼šè‡ªå·±åˆ¤æ–­ GOOSå’ŒGOARCHéƒ½æœ‰å¤šä¸ªé€‰é¡¹,å¯ç»„åˆ,å¯¹ç…§å¦‚ä¸‹ $GOOS $GOARCH aix ppc64 android 386 android amd64 android arm android arm64 darwin amd64 darwin arm64 dragonfly amd64 freebsd 386 freebsd amd64 freebsd arm illumos amd64 js wasm linux 386 linux amd64 linux arm linux arm64 linux ppc64 linux ppc64le linux mips linux mipsle linux mips64 linux mips64le linux riscv64 linux s390x netbsd 386 netbsd amd64 netbsd arm openbsd 386 openbsd amd64 openbsd arm openbsd arm64 plan9 386 plan9 amd64 plan9 arm solaris amd64 windows 386 windows amd64 å½“ç„¶,æœ‰äº›æ¶æ„ç¼–è¯‘å¯èƒ½ä¼šå‡ºç°é”™è¯¯,å› ä¸ºå¯¹ä»–çš„æ”¯æŒè¿˜ä¸å®Œå–„,å…·ä½“è¯·çœ‹æœ€ä¸Šæ–¹çš„å®˜æ–¹æ–‡æ¡£","link":"/2021/09/04/cross_compilation/"},{"title":"é»˜è®¤å‚æ•°çš„å‘","text":"åœ¨ https://docs.python.org/3/tutorial/controlflow.html#default-argument-values ä¸­,æœ‰è¿™æ ·ä¸€æ®µè¯ Important warning: The default value is evaluated only once. This makes a difference when the default is a mutable object such as a list, dictionary, or instances of most classes. For example, the following function accumulates the arguments passed to it on subsequent calls: å¤§è‡´æ„æ€ä¸º é‡è¦è­¦å‘Šï¼šé»˜è®¤å€¼ä»…è®¡ç®—ä¸€æ¬¡ã€‚ å½“é»˜è®¤å€¼æ˜¯å¯å˜å¯¹è±¡ï¼ˆä¾‹å¦‚åˆ—è¡¨ï¼Œå­—å…¸æˆ–å¤§å¤šæ•°ç±»çš„å®ä¾‹ï¼‰æ—¶ï¼Œè¿™ä¼šæœ‰æ‰€ä¸åŒã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹å‡½æ•°ç´¯ç§¯åœ¨åç»­è°ƒç”¨ä¸­ä¼ é€’ç»™å®ƒçš„å‚æ•°ï¼š ä¸‹é¢ç»™å‡ºäº†ä¸€ä¸ªä¾‹å­ 1234567def f(a, L=[]): L.append(a) return Lprint(f(1))print(f(2))print(f(3)) æ‰“å°å‡ºæ¥çš„ç»“æœæ˜¯ 123[1][1, 2][1, 2, 3] è¿™æ˜¯å› ä¸º, ä½œä¸ºé»˜è®¤å‚æ•°, pythonåœ¨å¯åŠ¨æ—¶å°±ä¼šå°†å˜é‡ L å»ºç«‹, æˆ‘ä»¬åœ¨å‡½æ•° f å†…å¯¹ L å¤„ç†å°±ä¼šå¯¼è‡´åæ¥è°ƒç”¨çš„ L å·²ç»æ˜¯ä¿®æ”¹è¿‡çš„ L äº†, æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“å° L çš„å†…å­˜åœ°å€æ¥éªŒè¯ 123456789def f(a, L=[]): print(id(L)) L.append(a) print(id(L)) return Lprint(f(1))print(f(2))print(f(3)) ç»“æœæ˜¯ 12345678945132896004513289600[1]45132896004513289600[1, 2]45132896004513289600[1, 2, 3] å½“ç„¶, pythonçš„æ–‡æ¡£ä¸­ä¹Ÿç»™å‡ºäº†ä¸€ä¸ªæ¨èçš„æ–¹æ³• If you donâ€™t want the default to be shared between subsequent calls, you can write the function like this instead: 12345def f(a, L=None): if L is None: L = [] L.append(a) return L å³: å°† L é»˜è®¤ä¸º None, å½“è¯¥å‚æ•°æœªä¼ æ—¶, å°† L è®¾ç½®ä¸ºç©ºåˆ—è¡¨, åœ¨Pythonå¯åŠ¨æ—¶ L ä¼šè®¾ç½®ä¸º None, è€Œå½“æˆ‘ä»¬è°ƒç”¨è€Œä¸ä¼ å‚æ•° L æ—¶, åœ¨å‡½æ•° f å†…éƒ¨é‡æ–°ç»™ L èµ‹å€¼, æ­¤æ—¶ L ä¸ºå‡½æ•° f å†…çš„ä¸€ä¸ªç§æœ‰å˜é‡, å…¶ä¸ä¼šå½±å“åˆ°å‚æ•° L æœ¬èº«, åŒæ ·çš„æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“å°å†…å­˜åœ°å€æ¥éªŒè¯ 1234567891011def f(a, L=None): print(id(L)) if L is None: L = [] print(id(L)) L.append(a) return Lprint(f(1))print(f(2))print(f(3)) è¾“å‡º 12345678944673957764469232960[1]44673957764469232960[2]44673957764469232960[3] å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸æ›´æ”¹å‡½æ•° f çš„æƒ…å†µä¸‹, åœ¨æ¯æ¬¡è°ƒç”¨ f çš„æ—¶å€™éƒ½ä¼ è¾“å‚æ•° L, å¦‚æœæƒ³è®©ä»–ä¸ºä¸€ä¸ªç©ºåˆ—è¡¨é‚£å°±ä¼ ä¸€ä¸ªç©ºåˆ—è¡¨åŒæ ·èƒ½è§£å†³é—®é¢˜, å› ä¸ºä½ æ¯æ¬¡æŒ‡å®šäº†å€¼, ä¾¿ä¼šåœ¨ä¼ å…¥æ—¶ä¿®æ”¹ L çš„å€¼ 123456789def f(a, L=[]): print(id(L)) L.append(a) print(id(L)) return Lprint(f(1, []))print(f(2, []))print(f(3, [])) è¾“å‡º 12345678944741681924474168192[1]44741681924474168192[2]44741681924474168192[3]","link":"/2021/09/04/default_param/"},{"title":"Dramatiqé‡åˆ°çš„å‘","text":"Dramatiq Bogdanp/dramatiq: A fast and reliable background task processing library for Python 3. (github.com) æ˜¯ä¸€ä¸ªPython3çš„ä»»åŠ¡é˜Ÿåˆ—æ¡†æ¶, æ¯”è¾ƒè½»é‡åŒ–, ä½¿ç”¨RabbitMQæˆ–Redisä½œä¸ºå­˜å‚¨ä»‹è´¨, å½“æ—¶çœ‹æœ‰2.xkçš„startå°±ä½¿ç”¨äº†, ç»“æœåœ¨ä½¿ç”¨ä¸­å‘ç°äº†å‡ ä¸ªé—®é¢˜, è¿™é‡Œè®°å½•ä¸€ä¸‹. ä»»åŠ¡\"ä¸å‘é€\" æµ‹è¯•æ—¶, å‘ç°æ€»æœ‰äº›ä»»åŠ¡ä¼šé—ç•™åœ¨ç®¡é“ä¸­, workå¥½åƒä¸æ¥æ”¶, ä¹Ÿæ²¡æœ‰æ‰§è¡Œ, å½“é‡å¯workåå°±ç«‹åˆ»æ¥å—äº†. å½“æ—¶ä½¿ç”¨çš„å­˜å‚¨ä»‹è´¨æ˜¯redis, æŸ¥çœ‹äº†æºä»£ç åå‘ç°é—®é¢˜ å› ä¸ºredisæœ¬èº«æ²¡æœ‰ackæœºåˆ¶, dramatiqå°±è‡ªå·±å®ç°äº†ACK, åœ¨æ¥å—åˆ°ä»»åŠ¡å, æ‰§è¡Œä»»åŠ¡, æ‰§è¡Œå®Œæˆåæ”¾å…¥åˆ°å¦ä¸€ä¸ªxx.ackç®¡é“ä¸­åŒæ—¶åˆ é™¤åŸæœ‰ç®¡é“çš„è¿™ä¸€æ¡æ•°æ®.(æ¶ˆè´¹è€…ç«¯å®ç°ACK) é‚£ä¹ˆé—®é¢˜å°±å‡ºç°äº†, é¦–å…ˆ, å¦‚æœä¸€ä¸ªä»»åŠ¡è¿è¡Œéœ€è¦1å°æ—¶, é‚£ä¹ˆåœ¨è¿™1å°æ—¶ä¸­, æŸ¥çœ‹redisä¼šå‘ç°ä¸€ç›´åœ¨åŸæœ‰ç®¡é“ä¸­, ä¸çŸ¥é“æ˜¯å¦æ˜¯æ­£åœ¨æ‰§è¡Œ. å¦å¤–, å¦‚æœåœ¨è¿™ä¸ªä»»åŠ¡æ‰§è¡Œä¸­, å› ä¸ºæŸäº›åŸå› å¯¼è‡´å½“å‰è¿›ç¨‹å´©æºƒäº†, å¦‚æœæ²¡æœ‰æ¥å¾—åŠå°†ä¸­æ–­çš„ä»»åŠ¡é‡æ–°æ”¾å…¥ç®¡é“ä¸­(dramatiqè™½ç„¶æœ‰å¤„ç†æªæ–½, ä½†æ˜¯æ¯•ç«Ÿæ˜¯Pythonçš„å¤šè¿›ç¨‹æ–¹å¼, å¹¶ä¸æ˜¯å¾ˆèƒ½ä¿è¯å¯é æ€§), å°±ä¼šé€ æˆè¿™ä¸ªä»»åŠ¡\"ä¸¢å¤±\" æœ€åå†³å®šæ›´æ¢å­˜å‚¨ä»‹è´¨ä¸ºRabbitMQ, Dramatiqåœ¨ä½¿ç”¨RabbitMQä½œä¸ºbrokeræ—¶ä½¿ç”¨çš„æ˜¯RabbitMQè‡ªå¸¦çš„ACKæœºåˆ¶, æ›´åŠ çš„æˆç†Ÿ ACKé”™è¯¯ å®¢æˆ·ç«¯æŠ¥é”™ 1Consumer encountered a connection error: (406, 'PRECONDITION_FAILED - delivery acknowledgement on channel 1 timed out...... æ›´æ¢ä¸ºRabbitMQä¹‹å, å‘ç°æ¶ˆè´¹è€…ä¼šæŠ¥ACKé”™è¯¯, åœ¨RabbitMQä¸­ä½“ç°ä¸ºç”Ÿäº§è€…è·å–äº†ä»»åŠ¡åæ²¡æœ‰è¿”å›ACK, åœ¨è¶…æ—¶åè¢«RabbitMQé‡æ–°æ”¾å›ä»»åŠ¡é˜Ÿåˆ— åœ¨ä¸Šä¸€æ¬¡æ’æŸ¥é—®é¢˜çš„è¿‡ç¨‹ä¸­, æˆ‘å‘ç°æ¶ˆè´¹è€…éœ€è¦ç­‰å¾…ä»£ç æ‰§è¡Œå®Œæ¯•åå†ACK, è¿™æœ¬èº«ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„, æˆ‘æ­é…Dramatiqè‡ªèº«çš„è¶…æ—¶æ¥è®¾ç½®RabbitMQçš„ACKè¶…æ—¶, æ¯”å¦‚è¿™ä¸ªä»»åŠ¡å¯èƒ½ä¼šæ‰§è¡Œ2å°æ—¶, æˆ‘è®¾ç½®Dramatiqçš„è¶…æ—¶ä¸º2.5å°æ—¶, è®¾ç½®RabbitMQçš„è¶…æ—¶ä¸º3å°æ—¶, è¿™æ ·è®©ç¨‹åºèƒ½è‡ªå·±å¤„ç†, ä½†æ˜¯è¿˜æ˜¯å‡ºç°é—®é¢˜ åæ¥æŸ¥çœ‹æºä»£ç æ—¶, å‘ç°, Dramatiqæœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯é¢„è¯», å³æ¯æ¬¡æå‰è·å–nä¸ªä»»åŠ¡, æ”¾åœ¨å†…å­˜ä¸­, å½“æŸä¸€ä¸ªä»»åŠ¡å®Œæˆåç›´æ¥ä»å†…å­˜ä¸­è·å–æ–°ä»»åŠ¡, çœå»ç½‘ç»œio. é‚£è¿™æ ·å°±ä¼šå‡ºç°é—®é¢˜, å› ä¸ºåœ¨è·å–åˆ°ä»»åŠ¡å, RabbitMQå°±ä¼šè®¤ä¸ºè¯¥ä»»åŠ¡å¤„äºç­‰å¾…ACKçš„çŠ¶æ€, å¦‚æœæ¯ä¸ªä»»åŠ¡éœ€è¦1å°æ—¶, Dramatiqè·å–äº†ä¸¤ä¸ªä»»åŠ¡, é‚£ä¹ˆç¬¬äºŒä¸ªä»»åŠ¡å°±ä¼šè¶…æ—¶, å½“ç¬¬äºŒä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆå, Dramatiqè¿›è¡ŒACKæ—¶å°±ä¼šè¢«RabbitMQæ‹¦æˆª çœ‹äº†ä»£ç åå‘ç°è¿™ä¸ªé¢„è¯»çš„æ•°é‡å‚æ•°å¯è°ƒ, ä»ç¯å¢ƒå˜é‡ä¸­è·å–, æˆ‘ä»¬è®¾ç½® 1export dramatiq_queue_prefetch=1 è®©ä»–åªè·å–ä¸€ä¸ªç„¶åç«‹åˆ»æ‰§è¡Œè¿™ä¸€ä¸ªå³å¯ å¿ƒè·³è¶…æ—¶ ä¿®å¤äº†ACKä¹‹å, åˆå‘ç°äº†ä¸€ä¸ªé—®é¢˜, éš”ä¸€æ®µæ—¶é—´RabbitMQå°±ä¼šæœ‰é”™è¯¯è¾“å‡º 1[erro] &lt;0.2398.0&gt; missed heartbeats from client, timeout: 60s è¿™ä»£è¡¨çš„æ˜¯å®¢æˆ·ç«¯çš„å¿ƒè·³å‡ºç°äº†é—®é¢˜, å½“å¿ƒè·³è¶…æ—¶å, RabbitMQä¼šä¸»åŠ¨æ–­å¼€ä¸è¿™ä¸ªå®¢æˆ·ç«¯çš„è¿æ¥ æŸ¥çœ‹é¡¹ç›®çš„æ—¥å¿—, æ²¡æœ‰å‘ç°æœ‰ä»»ä½•é”™è¯¯æˆ–è€…è­¦å‘Šè¾“å‡º ä¹‹å‰ä¸¤ä¸ªé—®é¢˜éƒ½æ˜¯æ¶ˆè´¹è€…çš„é”™è¯¯, äºæ˜¯å…ˆæ’æŸ¥çš„æ¶ˆè´¹è€…, å‘ç°æ¶ˆè´¹è€…æœ‰å¿ƒè·³çš„ç»´æŒä¸”æ­£å¸¸è¿è¡Œäº† åˆå›æ¥çœ‹ç”Ÿäº§è€…çš„æºä»£ç , å‘ç°**Dramatiqæ ¹æœ¬æ²¡æœ‰å®ç°ç”Ÿäº§è€…çš„å¿ƒè·³**, ä½†æ˜¯å› ä¸ºæ¯æ¬¡ç”Ÿäº§è€…å‘é€ä»»åŠ¡æ—¶, å‘é€ä»»åŠ¡çš„ä»£ç å†™çš„æ˜¯æ­»å¾ªç¯, è¿æ¥è¢«RabbitMQæ–­å¼€å,æˆ–è€…å› ä¸ºåˆ«çš„åŸå› æ²¡æœ‰è¢«å‘é€, å°±å†æ¬¡ç”Ÿæˆæ–°çš„è¿æ¥, å†æ¬¡å‘é€, è€Œå½“å‘é€å¤±è´¥æ—¶, åªæ‰“äº†ä¸€ä¸ªDebugæ¡£çš„æ—¥å¿—, å¯èƒ½ä½œè€…ä¹ŸçŸ¥é“è¿™ä¸ªé—®é¢˜, ç„¶åå°±ç²—æš´çš„ä½¿ç”¨æ•æ‰é”™è¯¯ç„¶åé‡æ–°å»ºç«‹è¿æ¥çš„æ–¹å¼å»åšäº†ğŸ˜… å¦‚æœè¦è§£å†³, å¯ä»¥è®¾ç½®å¿ƒè·³ä¸º0æ¥å»é™¤å¿ƒè·³æ£€æµ‹, urlè¿æ¥æ”¯æŒè¿™ä¸ªå‚æ•°, æ¯”å¦‚ 1amqp://worker:BEQFRAmC5@127.0.0.1:5672?heartbeat=0 åˆ›å»ºbrokerå¤±æ•ˆ æˆ‘ä»¬æ˜¯å°†FastApiä¸Dramatiqç»“åˆä½¿ç”¨, å½“æ¥å—åˆ°è¯·æ±‚ååšå¤„ç†, ç„¶åé€šè¿‡Dramatiqå‘é€å‡ºå» ä¸ºäº†æ›´å¥½çš„ä»£ç ç»“æ„, æˆ‘ä»¬å°†ä»£ç æ•´åˆäº†ä¸€ä¸‹, ç»“æœä¼šå‡ºç°è¿æ¥ä¸åˆ°RabbitMQçš„é—®é¢˜ Dramatiqçš„ä½¿ç”¨ä¸€èˆ¬æ˜¯ 12345import dramatiq@dramatiq.actor(max_retries=0, queue_name=\"test\", actor_name=\"test\")def scan(work): pass å»ºç«‹å¦‚ä¸Šçš„scanå‡½æ•°, ä¸»è¦æ˜¯åŠ å…¥è£…é¥°å™¨dramatiq.actor è°ƒç”¨æ—¶æ˜¯ 12from . import workworker.iot.scan.send(send_info) è®¾ç½®brokeræ˜¯ 12345import dramatiqrabbitmq_broker = RabbitmqBroker(url=RABBITMQ_URL)rabbitmq_broker.add_middleware(ConfigMiddleware())dramatiq.set_broker(rabbitmq_broker) æ”¹åŠ¨ä¸»è¦æ˜¯å°†è®¾ç½®brokerçš„éƒ¨åˆ†æ”¾ç½®è¿›äº†fastapiçš„å¯åŠ¨äº‹ä»¶, åŸå…ˆæ˜¯æ”¾ç½®è¿›äº†workæ–‡ä»¶å¤¹çš„__init__.pyé‡Œ åˆšå¼€å§‹ä»¥ä¸ºæ˜¯ä¸æ˜¯brokerçš„è®¾ç½®æ¯”è¾ƒæ™šäº†, å¯¼è‡´brokeræ²¡æœ‰æ­£å¸¸ç”Ÿæ•ˆ åæ¥å‘ç°åœ¨Dramatiqä¸­brokeræ˜¯ä¸€ä¸ªGolobalå˜é‡, æµ‹è¯•ä¹Ÿå‘ç°å³ä½¿åœ¨åé¢set_brokerä¹Ÿå¯ä»¥ ç»§ç»­æ·±å…¥, å‘ç°é—®é¢˜æ‰€åœ¨äº† å› ä¸ºdramatiq.actoræ˜¯ä½œä¸ºè£…é¥°å™¨ä½¿ç”¨, è€ŒPythonçš„è£…é¥°å™¨å†…çš„ä»£ç , å®é™…ä¸Šåœ¨å¯¼å…¥æ—¶ä¼šæ‰§è¡Œ, ä¸¾ä¸ªä¾‹å­ 123456789101112131415161718192021222324252627registry = []def register(func): print('running register(%s)' % func) registry.append(func) return func@registerdef f1(): print('running f1()')@registerdef f2(): print('running f2()')def f3(): print('running f3()')def main(): print('running main()') print('registry -&gt;', registry) f1() f2() f3()if __name__ == '__main__': main() æ‰“å°ç»“æœä¸º 1234567running register(&lt;function f1 at 0x0000027913AA8708&gt;)running register(&lt;function f2 at 0x0000027913AA8E58&gt;)running main()registry -&gt; [&lt;function f1 at 0x0000027913AA8708&gt;, &lt;function f2 at 0x0000027913AA8E58&gt;]running f1()running f2()running f3() æ²¡é”™, å‡å¦‚æœ‰ä¸ªè£…é¥°å™¨å‡½æ•° a, å°†å‡½æ•° b åŒ…è£¹åœ¨ a ä¸­, ä¹Ÿå°±æ˜¯ 123456def a(): pass@adef b(): pass åœ¨Pythonå¯¼å…¥åˆ°è¿™ä¸ªä»£ç æ—¶, ä¼šå°†è¢« a åŒ…è£¹çš„ b å˜æˆ a(b), ä¼šæ‰§è¡Œå‡½æ•° a, ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•° a(b), ç„¶åæ¯æ¬¡è°ƒç”¨ b æ—¶, å®é™…ä¸Šåœ¨è°ƒç”¨è¿™ä¸ªæ–°çš„å‡½æ•° è€ŒDramatiqä¸­, åœ¨è£…é¥°å™¨ dramatiq.actor ä¸­çš„ä»£ç è¿›è¡Œäº†åˆå§‹åŒ–æ“ä½œ, æ­¤æ—¶å°±å°†å…¨å±€çš„brokerç”Ÿæˆäº†å®¢æˆ·ç«¯ä¾›è‡ªå·±ä½¿ç”¨, æ­¤æ—¶çš„å…¨å±€brokerè¿˜æ²¡æœ‰äººä¸ºçš„è®¾ç½®, å˜æˆäº†é»˜è®¤çš„127.0.0.1çš„RabbitMQ, è€Œåè¿è¡Œsendæ—¶ç›´æ¥ä½¿ç”¨æ­¤å®¢æˆ·ç«¯å‘é€, å› ä¸ºæˆ‘ä»¬åœ¨ä¿®æ”¹ä»£ç å, å°†åˆ›å»ºbrokerçš„éƒ¨åˆ†æ”¾ç½®åœ¨äº†å¼•ç”¨workä¹‹å, å¯¼è‡´äº†å…ˆç”Ÿæˆäº†å®¢æˆ·ç«¯, è€Œåæ¥çš„è‡ªå®šä¹‰brokeræ²¡æœ‰æ­£ç¡®çš„è¢«actorä½¿ç”¨, ä½¿ç”¨çš„æ˜¯æœ¬åœ°çš„RabbitMQ, å› ä¸ºæœ¬åœ°æ²¡æœ‰, ç†æ‰€å½“ç„¶çš„å°±å‘é€å¤±è´¥äº† è§£å†³æ–¹æ³•æ˜¯æ’æŸ¥é¡¹ç›®çš„è¿è¡Œé¡ºåº, åœ¨å¯¼å…¥workä¹‹å‰å…ˆè¿›è¡Œset_brokeræ“ä½œ, åœ¨workçš„__init__.pyä¸­ 12from app.task.broker import setup_broker; setup_broker() # noqafrom . import xx å½“å¯¼å…¥åŒ…æ—¶è¿è¡Œ__init__.py, ä¼˜å…ˆset_broker","link":"/2021/09/09/dramatiq_pit/"},{"title":"è®°ä¸€æ¬¡flaskæ¡†æ¶è¿”å›200å‰ç«¯å´æ‹¿åˆ°äº†504çš„é—®é¢˜","text":"é—®é¢˜ ä»Šå¤©åœ¨è°ƒè¯•ä»£ç æ—¶, å‘ç°äº†ä¸€ä¸ªè¯¡å¼‚çš„é—®é¢˜, æˆ‘ä¹‹å‰å†™äº†ä¸€ä¸ªæ¥å£, ä½œç”¨æ˜¯æ¥æ”¶ä¸Šä¼ çš„æ–‡ä»¶, å› ä¸ºè¿™ä¸ªæ¥å£éœ€è¦ä¸€å®šçš„æƒé™æ§åˆ¶, æ‰€ä»¥æˆ‘å†™äº†3ä¸ªè£…é¥°å™¨åœ¨ä¸Šé¢, è¿™ä¸ªé¡¹ç›®æ˜¯ç”¨çš„ flask, ä»£ç ç±»ä¼¼äº 123456@app.route('/upload', methods=['POST'])@login_requireds@verify_requireds@upload_requiredsdef upload_file(): pass æ¯ä¸ªè£…é¥°å™¨ä»£ç ç±»ä¼¼äº 1234567891011def verify_requireds(func): # é˜»æ­¢æœªå®¡æ ¸çš„è´¦æˆ·è¿›è¡Œæ“ä½œ @functools.wraps(func) def inner(*args, **kwargs): pass if user_dict.get(\"verify\") != 1: response_msg = {\"status\": 300, \"msg\": \"Sorry, Your Â· account is not audited\", \"msg_zh\": \"è¯¥è´¦æˆ·æœªå®¡æ ¸\"} return jsonify(response_msg) return func(*args, **kwargs) return inner è€Œåœ¨æµ‹è¯•å½“ä¸­, å‘ç°å‰ç«¯çš„è¯·æ±‚ä¸€ç›´æ˜¯ 504 é”™è¯¯(æµè§ˆå™¨çš„f12è°ƒè¯•æ˜¾ç¤º), è€Œåç«¯çš„logæ˜¾ç¤ºæ¯æ¬¡éƒ½æ­£å¸¸è¿”å›äº†æ•°æ® ç„¶åå°±å¼€å§‹äº†æ¼«é•¿çš„æ‰è™« é¦–å…ˆé€šè¿‡postmanæµ‹è¯•å‘ç°postmanå¹¶æ²¡æœ‰é—®é¢˜, çŒœæµ‹æ˜¯ä¸æ˜¯è·¨åŸŸé—®é¢˜, æˆ‘ä»¬ä½¿ç”¨äº† flask-cors æ¥è¿›è¡Œè·¨åŸŸè®¾ç½®, æˆ‘ä»¬æ˜¯è¿™æ ·è®¾ç½®çš„ 123from flask_cors import CORSCORS(app, support_credentials=True) ä¸ºäº†å°è¯è¯¥çŒœæƒ³, æˆ‘ä»¬å¼€å¯äº† flask-cors çš„ debug æ¨¡å¼, 1logging.getLogger('flask_cors').level = logging.DEBUG çœ‹åˆ°äº†options è¯·æ±‚æ—¶, debug æ‰“å° 1DEBUG Request to '/upload' matches CORS resource '/*'. Using options: {'origins': ['.*'], 'methods': 'DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT', 'allow_headers': ['.*'], 'expose_headers': None, 'supports_credentials': False, 'max_age': None, 'send_wildcard': False, 'automatic_options': True, 'vary_header': True, 'resources': '/*', 'intercept_exceptions': True, 'always_send': True, 'support_credentials': True} æ‰€ä»¥åˆæ­¥æ’é™¤äº†æ˜¯è·¨åŸŸå¯¼è‡´çš„é—®é¢˜ åæ¥çŒœæµ‹æ˜¯ä¸æ˜¯å‰ç«¯çš„ä»£ç é—®é¢˜, åæ¥å‰ç«¯ debug è°ƒè¯•å‘ç°æ˜¯æµè§ˆå™¨å°±è¿”å›äº† 504 é”™è¯¯, å°±ç®—æ˜¯BUGä¹Ÿå¾ˆéš¾å»é€šè¿‡å‰ç«¯å»è§£å†³äº† åæ¥æ— æ„ä¸­å‘ç°, å…¶å®å¹¶ä¸æ˜¯æ¯æ¬¡éƒ½è¿”å› 504, å½“æ–‡ä»¶è¶³å¤Ÿå°æ—¶(1kå·¦å³), è¯·æ±‚éƒ½æ˜¯æ­£å¸¸çš„, è€Œæ–‡ä»¶å¤§æ—¶, åˆ™æœ‰ä¸€å®šå‡ ç‡ä¼šè¿”å›æ­£å¸¸, å‘ç°äº†è¿™ä¸ªç°è±¡æ—¶, æˆ‘ä»¬å¼€å§‹è€ƒè™‘æ˜¯ä¸æ˜¯åç«¯ä¼š â€œå¤¯ä½â€ æˆ–è€…å‰ç«¯çš„è¿æ¥å¹¶æ²¡æœ‰æ–­å¼€è€Œæ˜¯ä¸€ç›´ä¿æŒå‘¢? ä½†æ˜¯ç¡®å®postmanä¸€åˆ‡ok, æ‰€ä»¥æ˜¯ä¸æ˜¯è¯·æ±‚æœ‰äº›å¼‚å¸¸, è€Œæ¡†æ¶å¹¶æ²¡æœ‰å¾ˆå¥½çš„å¤„ç†, postmanå…¼å®¹æ€§å¾ˆå¥½, å¿½ç•¥äº†è¿™ä¸ªé”™è¯¯å‘¢? æˆ‘ä»¬ä½¿ç”¨è½¯ä»¶åœ¨æµè§ˆå™¨çš„å®¢æˆ·ç«¯è¿›è¡Œäº†æŠ“åŒ…, å‘ç°äº†é—®é¢˜ æˆ‘ä»¬å‘ç°, å…¶å®åœ¨å‰ç«¯å‘å‡ºè¯·æ±‚å, åç«¯ç¡®å®è¿”å›äº†200å¹¶ä¸”å·²ç»è¢«è¯»å–, ä½†æ˜¯åç»­åˆå‘å‰ç«¯å‘é€äº† RST çš„æ•°æ®åŒ… æœäº†ä¸€ä¸‹ RST çš„ä½œç”¨, å…¶å®å°±æ˜¯ä»£è¡¨æœåŠ¡ç«¯å‘Šè¯‰å®¢æˆ·ç«¯, æˆ‘è¦æ–­å¼€é“¾æ¥äº†, ä½ çš„è¿˜æ²¡å‘é€çš„æ•°æ®åŒ…ç›´æ¥ä¸¢æ‰å§, å¯èƒ½å°±æ˜¯è¿™æ ·çš„æ“ä½œè®©å‰ç«¯æ¡†æ¶ä»¥ä¸ºåç«¯æ–­å¼€é“¾æ¥äº†, æŠ¥äº† 504/502 é”™è¯¯ å…¶å®æ­£å¸¸æƒ…å†µä¸‹, è§¦å‘ RST çš„æƒ…å†µä¹Ÿåªæœ‰å»è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„ç«¯å£æˆ–æœåŠ¡æ—¶æ‰ä¼šæœ‰, æ‰€ä»¥å‰ç«¯æ¡†æ¶è¿™æ ·ç»Ÿä¸€åˆ¤æ–­ä¹Ÿæƒ…æœ‰å¯åŸ, è€Œä¸” RST çš„æ»¥ç”¨ä¹Ÿå¯èƒ½å¼•å‘å®‰å…¨é—®é¢˜ https://baike.baidu.com/item/RST%E6%94%BB%E5%87%BB å†ç»“åˆä¹‹å‰å‘ç°çš„, å¾ˆå°çš„æ–‡ä»¶å‡ ä¹æ¯æ¬¡éƒ½æ­£å¸¸, æˆ‘ä»¬å¤§è‡´æ‰¾åˆ°äº†åŸå›  å› ä¸ºæˆ‘ä»¬ç°æœ‰çš„é€»è¾‘, åœ¨è£…é¥°å™¨æ‰§è¡Œè¿‡ç¨‹ä¸­, è¿˜æ²¡æœ‰è·å– file æ–‡ä»¶, å¦‚æœè£…é¥°å™¨ç›´æ¥æ‹¦æˆª, æ­¤æ—¶å¯èƒ½ file è¿˜æ²¡æœ‰å®Œå…¨æ¥æ”¶å®Œæ¯•, æ­¤æ—¶ flask ä¼šå‘é€ RST å‘Šè¯‰å®¢æˆ·ç«¯æŠ›å¼ƒå‘é€, è€Œå‰ç«¯å°±ä¼šæŠ¥é”™, è€Œå°æ–‡ä»¶å‘é€ç‰¹åˆ«å¿«, ä¸å­˜åœ¨æ•°æ®æœªå‘é€å®Œæˆçš„æƒ…å†µ, æ‰€ä»¥å°æ–‡ä»¶æ˜¯ ok çš„ æ‰€ä»¥è§£å†³åŠæ³•å°±éå¸¸ç®€å•äº†, åœ¨è£…é¥°å™¨å‰å†åŠ ä¸€ä¸ªè£…é¥°å™¨, è¿™ä¸ªè£…é¥°å™¨çš„ä½œç”¨æ˜¯è·å– file æ–‡ä»¶, é¡ºä¾¿åšä¸€ä¸‹å¦‚æœæ²¡æœ‰ file æ–‡ä»¶è¿”å›ä¸€ä¸ªé”™è¯¯, ç¡®ä¿åœ¨æœåŠ¡ç«¯è¿”å›ä¹‹å‰å·²ç»å®Œå…¨æ¥æ”¶åˆ°äº† file æ–‡ä»¶å³å¯. æˆ‘ä»¬å¢åŠ ä¸€ä¸ª file è£…é¥°å™¨ 123456789def file_requireds(func): # å¯¹æ–‡ä»¶è¿›è¡Œæ ¡éªŒ @functools.wraps(func) def inner(*args, **kwargs): files = request.files.get('file') if not files: return jsonify({\"status\": 300, \"msg\": \"not find file\", \"msg_zh\": \"æ²¡æœ‰æ–‡ä»¶\"}) return func(*args, **kwargs) return inner åŠ å…¥åˆ°æ¥å£çš„è£…é¥°å™¨å¤§å†›ä¸­ 123456@app.route('/upload', methods=['POST'])@file_requireds@login_requireds@verify_requireds@upload_requiredsdef upload_file(): å†æµ‹è¯•å°±å®Œå…¨å¯ä»¥äº†, æŠ“åŒ…ä¹Ÿä¸€åˆ‡æ­£å¸¸äº† æ­¤ä¾‹è­¦é†’æˆ‘ä»¥åæ¥å—æ–‡ä»¶ç›¸å…³çš„æ¥å£ä¸€å®šè¦å°†æ–‡ä»¶å…¨éƒ¨è·å–åˆ°å†è¿›è¡Œæ“ä½œ, æˆ–è€…æ˜¯å‰ç«¯è€ƒè™‘è§£å†³åŠæ³•","link":"/2021/09/04/flask_upload_file_504/"},{"title":"gin æ¡†æ¶çš„è·¯ç”±æºä»£ç è§£æ","text":"å‰è¨€ çœ‹æºä»£ç å¯¹æˆ‘æ¥è®²è¿˜æ˜¯æœ‰äº›å›°éš¾, å› æ­¤æœ¬ç¯‡æ˜¯åœ¨ https://www.liwenzhou.com/posts/Go/read_gin_sourcecode/ çš„å¯å‘ä¸‹ç¼–å†™ æˆ‘è¿™é‡Œåªæ˜¯ç•¥å¾®çš„ä¿®æ”¹ ginçš„è·¯ç”±å®ç° ä½¿ç”¨ Radix Tree , ç®€æ´ç‰ˆçš„å‰ç¼€æ ‘ å‰ç¼€æ ‘ åˆ«å: å­—å…¸æ ‘ / å•è¯æŸ¥æ‰¾æ ‘ / é”®æ ‘ ä¸ºä»€ä¹ˆä½¿ç”¨å‰ç¼€æ ‘ urlæ˜¯æœ‰é™çš„,ä¸å¯èƒ½æ— é™é•¿ urlæ˜¯æœ‰è§„å¾‹çš„ urlæ˜¯ä¸€çº§ä¸€çº§çš„, restful æ›´æ˜¯å¦‚æ­¤ æ¯”å¦‚åšå®¢æœ‰çš„æ˜¯æŒ‰å¹´å’Œæœˆåˆ†å‰² /2020/3/aaaa.html /2020/3/bbbb.html æ­¤æ—¶ä½¿ç”¨å‰ç¼€æ ‘æ›´åˆé€‚ ginçš„è·¯ç”±æ ‘ åŸºæ•°æ ‘/PATä½æ ‘, æ˜¯ä¸€ç§æ›´èŠ‚çœç©ºé—´çš„å‰ç¼€æ ‘, å¯¹äºåŸºæ•°æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹æ˜¯å”¯ä¸€çš„å­æ ‘çš„è¯ï¼Œå°±å’Œçˆ¶èŠ‚ç‚¹åˆå¹¶ã€‚ è¶Šå¸¸åŒ¹é…çš„å‰ç¼€, æƒé‡è¶Šå¤§ å› ä¸ºå‰ç¼€æ ‘çš„æ„å»ºæ¨¡å¼å¯¼è‡´è¶Šé•¿çš„è·¯å¾„å®šä½çš„æ—¶é—´è¶Šé•¿, ginåœ¨æ³¨å†Œè·¯ç”±æ—¶è¶Šé•¿çš„è·¯ç”±æ’çš„è¶Šå‰, å¦‚æœæœ€é•¿çš„èŠ‚ç‚¹èƒ½ä¼˜å…ˆåŒ¹é…, é‚£ä¹ˆè·¯ç”±åŒ¹é…æ‰€èŠ±çš„æ—¶é—´ä¸ä¸€å®šæ¯”çŸ­è·¯ç”±æ›´é•¿ giné¦–å…ˆæŒ‰ç…§è¯·æ±‚ç±»å‹(POST/GET/â€¦), åˆ†ä¸ºå¤šä¸ªPATæ ‘, æ¯ä¸ªPATæ ‘å­˜å‚¨è¿™ä¸ªè¯·æ±‚ç±»å‹ä¸‹é¢æ³¨å†Œçš„è·¯ç”±, è·¯ç”±åˆæ ¹æ®æƒé‡è¿›è¡Œæ’åº è·¯ç”±æ ‘èŠ‚ç‚¹ è·¯ç”±æ ‘ç”±ä¸€ä¸ªä¸ªèŠ‚ç‚¹ç»„æˆ, ginçš„è·¯ç”±æ ‘èŠ‚ç‚¹ç”±ç»“æ„ä½“ node è¡¨ç¤º, å…¶æ„é€ ç»“æ„å¦‚ä¸‹ 12345678910111213141516171819202122232425262728// tree.gotype node struct { // èŠ‚ç‚¹è·¯å¾„ï¼Œæ¯”å¦‚ä¸Šé¢çš„sï¼Œearchï¼Œå’Œupport path string // å’Œchildrenå­—æ®µå¯¹åº”, ä¿å­˜çš„æ˜¯åˆ†è£‚çš„åˆ†æ”¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ // ä¾‹å¦‚searchå’Œsupport, é‚£ä¹ˆsèŠ‚ç‚¹çš„indiceså¯¹åº”çš„\"eu\" // ä»£è¡¨æœ‰ä¸¤ä¸ªåˆ†æ”¯, åˆ†æ”¯çš„é¦–å­—æ¯åˆ†åˆ«æ˜¯eå’Œu indices string // å„¿å­èŠ‚ç‚¹ children []*node // å¤„ç†å‡½æ•°é“¾æ¡ï¼ˆåˆ‡ç‰‡ï¼‰ handlers HandlersChain // ä¼˜å…ˆçº§ï¼Œå­èŠ‚ç‚¹ã€å­å­èŠ‚ç‚¹ç­‰æ³¨å†Œçš„handleræ•°é‡ priority uint32 // èŠ‚ç‚¹ç±»å‹ï¼ŒåŒ…æ‹¬static, root, param, catchAll // static: é™æ€èŠ‚ç‚¹ï¼ˆé»˜è®¤ï¼‰ï¼Œæ¯”å¦‚ä¸Šé¢çš„sï¼Œearchç­‰èŠ‚ç‚¹ // root: æ ‘çš„æ ¹èŠ‚ç‚¹ // catchAll: æœ‰*åŒ¹é…çš„èŠ‚ç‚¹ // param: å‚æ•°èŠ‚ç‚¹ nType nodeType // è·¯å¾„ä¸Šæœ€å¤§å‚æ•°ä¸ªæ•° maxParams uint8 // èŠ‚ç‚¹æ˜¯å¦æ˜¯å‚æ•°èŠ‚ç‚¹ï¼Œæ¯”å¦‚ä¸Šé¢çš„:post wildChild bool // å®Œæ•´è·¯å¾„ fullPath string} è¯·æ±‚çš„æ–¹æ³•æ ‘ åœ¨ginçš„è·¯ç”±ä¸­, æ¯ä¸€ä¸ª HTTP Method (GET/POST/PUT/â€¦) éƒ½å¯¹åº”äº†ä¸€æ£µPATæ ‘, åœ¨æ³¨å†Œè·¯ç”±æ—¶ä¼šè°ƒç”¨ addRoute å‡½æ•° 1234567891011121314// gin.gofunc (engine *Engine) addRoute(method, path string, handlers HandlersChain) { // è·å–è¯·æ±‚æ–¹æ³•å¯¹åº”çš„æ ‘ root := engine.trees.get(method) if root == nil { // å¦‚æœæ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ª root = new(node) root.fullPath = \"/\" engine.trees = append(engine.trees, methodTree{method: method, root: root}) } root.addRoute(path, handlers)} è€Œåœ¨ginä¸­, æ¯ä¸€ä¸ª Method å¯¹åº”çš„æ ‘å…³ç³»æ—¶æ˜¯å­˜æ”¾åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­, engine.trees çš„ç±»å‹æ˜¯ methodTrees , å…¶å®šä¹‰å¦‚ä¸‹ 123456type methodTree struct { method string root *node}type methodTrees []methodTree // slice è€Œ engine.trees.get æ–¹æ³•å¦‚ä¸‹,(å°±æ˜¯forå¾ªç¯) 12345678func (trees methodTrees) get(method string) *node { for _, tree := range trees { if tree.method == method { return tree.root } } return nil} ä½¿ç”¨åˆ‡ç‰‡è€Œä¸æ˜¯ä½¿ç”¨mapæ¥å­˜å‚¨, å¯èƒ½æ˜¯è€ƒè™‘åˆ°èŠ‚çœå†…å­˜, è€Œä¸”HTTPè¯·æ±‚ä¸€å…±å°±9ç§, ä½¿ç”¨åˆ‡ç‰‡ä¹Ÿæ¯”è¾ƒåˆé€‚, æ•ˆç‡ä¹Ÿé«˜, åˆå§‹åŒ–åœ¨ginçš„ engine ä¸­ 12345678910111213141516171819func New() *Engine { debugPrintWARNINGNew() engine := &amp;Engine{ RouterGroup: RouterGroup{ Handlers: nil, basePath: \"/\", root: true, }, // liwenzhou.com ... // åˆå§‹åŒ–å®¹é‡ä¸º9çš„åˆ‡ç‰‡ï¼ˆHTTP1.1è¯·æ±‚æ–¹æ³•å…±9ç§ï¼‰ trees: make(methodTrees, 0, 9), // liwenzhou.com... } engine.RouterGroup.engine = engine engine.pool.New = func() interface{} { return engine.allocateContext() } return engine} è·¯ç”±åŒ¹é… å½“æ–°çš„è¯·æ±‚è¿›å…¥ginæ—¶, ä¼šå…ˆç»è¿‡å‡½æ•° ServeHTTP 12345678910111213// gin.gofunc (engine *Engine) ServeHTTP(w http.ResponseWriter, req *http.Request) { // è¿™é‡Œä½¿ç”¨äº†å¯¹è±¡æ±  c := engine.pool.Get().(*Context) // è¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚å°±æ˜¯Getå¯¹è±¡ååšåˆå§‹åŒ– c.writermem.reset(w) c.Request = req c.reset() engine.handleHTTPRequest(c) // æˆ‘ä»¬è¦æ‰¾çš„å¤„ç†HTTPè¯·æ±‚çš„å‡½æ•° engine.pool.Put(c) // å¤„ç†å®Œè¯·æ±‚åå°†å¯¹è±¡æ”¾å›æ± å­} ServeHTTP è°ƒç”¨ handleHTTPRequest å‡½æ•°(èŠ‚é€‰) 123456789101112131415161718192021222324// gin.gofunc (engine *Engine) handleHTTPRequest(c *Context) { // æ ¹æ®è¯·æ±‚æ–¹æ³•æ‰¾åˆ°å¯¹åº”çš„è·¯ç”±æ ‘ t := engine.trees for i, tl := 0, len(t); i &lt; tl; i++ { if t[i].method != httpMethod { continue } root := t[i].root // åœ¨è·¯ç”±æ ‘ä¸­æ ¹æ®pathæŸ¥æ‰¾ value := root.getValue(rPath, c.Params, unescape) if value.handlers != nil { c.handlers = value.handlers c.Params = value.params c.fullPath = value.fullPath c.Next() // æ‰§è¡Œå‡½æ•°é“¾æ¡ c.writermem.WriteHeaderNow() return } c.handlers = engine.allNoRoute serveError(c, http.StatusNotFound, default404Body)} å¤§è‡´ä¸ºå…ˆCOPYä¸€ä»½è·¯ç”±çš„åˆ‡ç‰‡, å…ˆæ‰¾åˆ°ä¸è¯¥è¯·æ±‚å¯¹åº”çš„è¯·æ±‚ç±»å‹, ç„¶ååœ¨è¿™ä¸ªè¯·æ±‚ç±»å‹çš„è·¯ç”±æ ‘ç§ä½¿ç”¨ getValue æ–¹æ³•æŸ¥æ‰¾å¯¹åº”çš„è·¯ç”±, æ²¡æœ‰åˆ™è¿”å›404","link":"/2021/06/16/gin_router/"},{"title":"Golang Channel å®ç°åŸç†","text":"å‰è¨€ æœ€è¿‘çœŸé«˜äº§å•Š, æœç„¶æœ‰å‹åŠ›å°±æœ‰åŠ¨åŠ›äº†, ä¸çŸ¥é“èƒ½ä¿æŒå¤šä¹…, çœŸæ˜¯ç—›å¹¶å¿«ä¹ç€ ä»€ä¹ˆæ˜¯ Channel channelå¸¸ç”¨æ¥ä½œä¸ºå¤šä¸ªåç¨‹ç›´æ¥é€šä¿¡, åœ¨çœŸæ­£ç¼–å†™ä»£ç ä¸­ä½¿ç”¨é¢‘ç‡éå¸¸é«˜, ä»–å°±æ˜¯ä¸€ä¸ªç®¡é“, å…ˆè¿›å…ˆå‡º, é‚£ä¹ˆ, ä½œä¸ºç¨‹åºå‘˜, æœ‰å¿…è¦äº†è§£channelçš„å®ç°åŸç† æ•°æ®ç»“æ„ é‚£ä¹ˆ, å’Œå¾€å¸¸ä¸€æ ·, è¿˜æ˜¯ä»æ•°æ®ç»“æ„å¼€å§‹çœ‹èµ· 12345678910111213type hchan struct { qcount uint // å½“å‰é˜Ÿåˆ—ä¸­å‰©ä½™å…ƒç´ ä¸ªæ•° dataqsiz uint // ç¯å½¢é˜Ÿåˆ—é•¿åº¦ï¼Œå³å¯ä»¥å­˜æ”¾çš„å…ƒç´ ä¸ªæ•° buf unsafe.Pointer // ç¯å½¢é˜Ÿåˆ—æŒ‡é’ˆ elemsize uint16 // æ¯ä¸ªå…ƒç´ çš„å¤§å° closed uint32 // æ ‡è¯†å…³é—­çŠ¶æ€ elemtype *_type // å…ƒç´ ç±»å‹ sendx uint // é˜Ÿåˆ—ä¸‹æ ‡ï¼ŒæŒ‡ç¤ºå…ƒç´ å†™å…¥æ—¶å­˜æ”¾åˆ°é˜Ÿåˆ—ä¸­çš„ä½ç½® recvx uint // é˜Ÿåˆ—ä¸‹æ ‡ï¼ŒæŒ‡ç¤ºå…ƒç´ ä»é˜Ÿåˆ—çš„è¯¥ä½ç½®è¯»å‡º recvq waitq // ç­‰å¾…è¯»æ¶ˆæ¯çš„goroutineé˜Ÿåˆ— sendq waitq // ç­‰å¾…å†™æ¶ˆæ¯çš„goroutineé˜Ÿåˆ— lock mutex // äº’æ–¥é”ï¼Œchanä¸å…è®¸å¹¶å‘è¯»å†™} ç¯å½¢é˜Ÿåˆ— chan å†…éƒ¨å®ç°äº†ä¸€ä¸ªç¯å½¢é˜Ÿåˆ—ä½œä¸ºç¼“å†²åŒº, ä½ æŒ‡å®šçš„ç¼“å†²åŒºçš„é•¿åº¦å°±æ˜¯è¿™ä¸ªç¯å½¢é˜Ÿåˆ—çš„é•¿åº¦ æ¯”å¦‚make(chan int, 6), åœ¨å¤šæ¬¡è¿›è¡Œæ“ä½œä¹‹å, ä»–çš„æ•°æ®å¯èƒ½æ˜¯ 1234567{ qcount: 2, // ä»£è¡¨é˜Ÿåˆ—ä¸­è¿˜æœ‰2ä¸ªå…ƒç´  dataqsiz: 6, // ä»£è¡¨é˜Ÿåˆ—é•¿åº¦(ç¼“å†²åŒº)ä¸º6 buf: [0, 1, 1, 0, 0, 0], // çœŸæ­£çš„æ•°æ®, å‡è®¾ä¸¤ä¸ªæ•°æ®éƒ½æ˜¯1 sendx: 3, // åç»­éœ€è¦å¢åŠ æ•°æ®æ—¶, ä» buf ç´¢å¼•3å¼€å§‹ recvx: 1, // éœ€è¦è¯»å–æ•°æ®æ˜¯, ä» buf ç´¢å¼•1å¼€å§‹} ç­‰å¾…é˜Ÿåˆ— æˆ‘ä»¬çŸ¥é“, å¦‚æœç¼“å†²åŒºå·²æ»¡æˆ–è€…æ²¡æœ‰æ¶ˆè´¹è€…è·å–æ•°æ®æ—¶, å‘ channel å†™å…¥æ•°æ®ä¼šé˜»å¡ æˆ‘ä»¬ä¹ŸçŸ¥é“, å¦‚æœç¼“å†²åŒºå·²ç©ºæˆ–è€…æ²¡æœ‰ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®æ—¶, ä» channel è·å–æ•°æ®ä¹Ÿä¼šé˜»å¡ å¯¹äºä¸€ä¸ª channel æ¥è®², å…¶ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„ goroutine å­˜å‚¨åœ¨ hchan çš„recvqå’Œsendqä¸­ recvq: ç­‰å¾…ä» channel è¯»å–æ•°æ®çš„ goroutine sendq: ç­‰å¾…å‘ channel å†™å…¥æ•°æ®çš„ goroutine ä»–ä»¬æ˜¯äº’ç›¸å”¤é†’çš„, æ¯”å¦‚ å½“ goroutine å‘ channel å†™å…¥æ•°æ®æ—¶, ä¼šå”¤é†’recvqé‡Œçš„ goroutine å½“ goroutine ä» channel è¯»å–æ•°æ®æ˜¯, ä¼šå”¤é†’sendqé‡Œçš„ goroutine ä¸€èˆ¬æƒ…å†µä¸‹ recvqå’Œsendqè‡³å°‘æœ‰ä¸€ä¸ªä¸ºç©º, ä¹Ÿå°±æ˜¯è¯´ä¸€èˆ¬æƒ…å†µä¸‹ä¸å¯èƒ½å­˜åœ¨æ—¢æœ‰å‘ channel å†™å…¥æ•°æ®çš„ goroutine ç­‰å¾…, åˆæœ‰ä» channel è·å–æ•°æ®çš„ goroutine ç­‰å¾…. é™¤éåœ¨åŒä¸€ä¸ª goroutine ä¸­ä½¿ç”¨ selectå‘ channel ä¸€è¾¹å†™ä¸€è¾¹è¯» ç±»å‹ä¿¡æ¯ åœ¨ channel ä¸­, make çš„æ—¶å€™å°±å¿…é¡»è®¾å®šè¿™ä¸ª channel ä¸­å­˜å‚¨çš„å€¼çš„ç±»å‹, å¯¹åº”çš„å­—æ®µå¦‚ä¸‹ elemtype æ¯ä¸ªå…ƒç´ çš„ç±»å‹ elemsize ç±»å‹çš„å¤§å°, ä¸»è¦ç”¨æ¥åœ¨ buf é‡Œå®šä½å…ƒç´  é” channel å†…éƒ¨å®é™…ä¸Šæœ‰ä¸€ä¸ªäº’æ–¥é”æ¥ä¿è¯åŒæ—¶ä»…å…è®¸è¢«ä¸€ä¸ª goroutine è¿›è¡Œæ“ä½œ, å…³äºäº’æ–¥é”åŸç†å¯ä»¥æŸ¥çœ‹æˆ‘çš„åšå®¢, è¿™é‡Œä¸å¤šèµ˜è¿° é”åœ¨hchançš„å­—æ®µæ˜¯ lock åˆ›å»º channel åˆ›å»º channel ä½¿ç”¨ make, ä¾‹å¦‚make(chan int, 6), åœ¨ make æ—¶, å°±ç¡®å®šäº† hchan çš„buf/elemsize/elemtype/dadaqsizeå­—æ®µ å†™æ•°æ® å‘ channel ä¸­å†™å…¥æ•°æ®çš„ç®€å•è¿‡ç¨‹å¦‚ä¸‹: åˆ¤æ–­recvqæ˜¯å¦ä¸ºç©º, ä¸ä¸ºç©ºåˆ™ä»£è¡¨æœ‰ goroutine åœ¨ç­‰å¾…è¯»æ•°æ®, ä¹Ÿå°±æ˜¯è¯´ç¼“å†²åŒºä¸­æ²¡æœ‰æ•°æ®äº†æˆ–è€…æ²¡æœ‰ç¼“å†²åŒº, æ­¤æ—¶ä¼šç›´æ¥ä»recvqä¸­å–å‡º goroutine, ç›´æ¥æŠŠ goroutine å”¤é†’å¹¶ä¸”å°†æ•°æ®å†™å…¥, ç»“æŸå†™å…¥è¿‡ç¨‹ å¦‚æœrecvqä¸ºç©º, ä»£è¡¨æ­¤æ—¶æ²¡æœ‰ goroutine åœ¨è¯»æ•°æ®, æ­¤æ—¶, å¦‚æœ channel ä¸­æœ‰ç¼“å†²åŒºä¸”ç¼“å†²åŒºä¸­æœ‰ç©ºä½™ä½ç½®, åˆ™ç›´æ¥å°†æ•°æ®å†™å…¥ç¼“å†²åŒº, ç»“æŸè¿‡ç¨‹ å¦‚æœ channel ç¼“å†²åŒºå·²æ»¡æˆ–è€…æ²¡æœ‰ç¼“å†²åŒºæ—¶, å°†ç­‰å¾…å‘é€çš„æ•°æ®å†™å…¥å½“å‰ goroutine ä¸­, åŒæ—¶å°†å½“å‰ goroutine åŠ å…¥åˆ°sendq, ç­‰å¾…è¢«è¯»å–çš„goroutineå”¤é†’ è¯»æ•°æ® è¯»æ•°æ®ä¸å†™æ•°æ®ç±»ä¼¼, è¿‡ç¨‹å¦‚ä¸‹: åˆ¤æ–­sendqæ˜¯å¦ä¸ºç©º, ä¸ä¸ºç©ºåˆ™ä»£è¡¨æœ‰ goroutine åœ¨ç­‰å¾…å†™æ•°æ®, æ­¤æ—¶åˆ¤æ–­ç¼“å†²åŒºæ˜¯å¦æœ‰å€¼, å¦‚æœç¼“å†²åŒºæœ‰æ•°æ®, åˆ™ä»ç¼“å†²åŒºé¦–éƒ¨(recvx)è¯»å–ä¸€ä¸ªæ•°æ®, åŒæ—¶å”¤é†’sendqä¸­çš„ç­‰å¾…å†™å…¥ goroutine, é€šçŸ¥å…¶å†™å…¥æ•°æ®, ç»“æŸæµç¨‹ å¦‚æœæ²¡æœ‰ç¼“å†²åŒº, åˆ™ä»senqä¸­è·å–ç­‰å¾…å‘é€æ•°æ®çš„ goroutine, è·å–æ•°æ®å¹¶å”¤é†’è¿™ä¸ª goroutine, ç»“æŸæµç¨‹ å¦‚æœå½“å‰sendqä¸ºç©ºä¸”ç¼“å†²åŒºä¸ºç©º, ä»£è¡¨æ­¤æ—¶æ²¡æœ‰æ•°æ®, è¿™æ—¶å°† goroutine åŠ å…¥åˆ°recvqä¸­, ç­‰å¾…è¢«å†™ goroutine å”¤é†’ å…³é—­ å…³é—­ channel ä¼šæŠŠrecvqä¸­çš„ goroutine å…¨éƒ¨å”¤é†’, ç„¶åå°†é‡Œé¢å­˜å‚¨çš„æ•°æ®è®¾ç½®ä¸º nil. ç„¶åå°†senqä¸­çš„ goroutine å…¨éƒ¨å”¤é†’, ä½†æ˜¯è¿™äº› goroutine ä¼šå¯¼è‡´ panic, æ‰€ä»¥å¿…é¡»è¦ç¡®ä¿è¿™ä¸ª channel åœ¨å†™å…¥æ—¶éƒ½æ˜¯å¼€å¯çš„çŠ¶æ€","link":"/2022/02/13/go_channel_theory/"},{"title":"go åŸºç¡€ç¬”è®°å­˜æ¡£","text":"å‰è¨€ è€ƒè™‘åˆ°å°è±¡ç¬”è®°ä»¥åä¸ç»­è´¹äº†,è¿™é‡Œè½¬å­˜åˆ°åšå®¢å›­ä¸€ä»½ å› å†…å®¹æ˜¯è‡ªå·±å†™çš„ç¬”è®°, æœªä½œä»»ä½•æ¶¦è‰², æ‰€ä»¥çœ‹ç€å¾ˆç²¾ç®€, è¯·è§è°… æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ åœ¨æ–°çš„goå®‰è£…åŒ…ä¸­,ä¸ºäº†å‡å°ä½“ç§¯é»˜è®¤å»é™¤äº†go doc å®‰è£…goè¯­è¨€ååœ¨DOSä¸­è¾“å…¥ 1godoc -http=:9000 ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ 127.0.0.1:9000 å³å¯(ä¸èƒ½å…³é—­DOS) è¯¥ç³»åˆ—å‚ç…§äº†å¤§ä½¬çš„å­¦ä¹ è·¯çº¿,åŠ ä¸Šæœ¬äººçš„ä»£ç å®è·µ,å¤§ä½¬é“¾æ¥ https://www.liwenzhou.com/posts/Go/go_menu ç›®å½•ç»“æ„ GOPATH &gt; src ä»£ç (pkgåŒ…/binç¼–è¯‘åæ–‡ä»¶) &gt; åŸŸå &gt; ç”¨æˆ·å &gt; é¡¹ç›® &gt; æ¨¡å— åŒå¼•å·å•å¼•å· å•å¼•å·ä»£è¡¨å­—ç¬¦ &gt; â€˜aâ€™ åŒå¼•å·ä»£è¡¨å­—ç¬¦ä¸² &gt; â€œabcdâ€ ä¸­æ–‡æœ€å°‘3ä½æ‰€ä»¥åªèƒ½ç”¨åŒå¼•å· ç¼–è¯‘ä»£ç  è¿›å…¥ç›®å½•(é¡¹ç›®) go build -o æ–‡ä»¶å main.go main.goæ˜¯é¡¹ç›®ä¸»å…¥å£ è°ƒè¯•ä»£ç  1go run æ–‡ä»¶ è®¾ç½®ç”Ÿæˆæ–‡ä»¶çš„æ ¼å¼(è·¨å¹³å°) å‘½ä»¤è¡Œ 12345678// ç”Ÿæˆlinuxå¯æ‰§è¡Œæ–‡ä»¶SET CGO_ENABLED=0 //ç¦ç”¨CGOSET GOOS=linux //è®¾ç½®ç›®æ ‡å¹³å°ä¸ºlinuxSET GOARCH=amd64 //ç›®æ ‡æ¶æ„ä¸ºamd64// ç”ŸæˆwinSET GOOS=windows// ç”ŸæˆmacSET GOOS=darwin gitæ§åˆ¶ åªéœ€æ§åˆ¶ src ä¸‹å³å¯ å˜é‡ å˜é‡å£°æ˜åå¿…é¡»ä½¿ç”¨ä¸ç„¶ç¼–è¯‘å¤±è´¥ å˜é‡å¯ä»¥é‡å¤èµ‹å€¼ä½†æ˜¯æ— æ³•èµ‹å€¼å…¶ä»–å˜é‡ç±»å‹ å˜é‡å£°æ˜åœ¨å‡½æ•°å¤–ä»£è¡¨è¯¥æ–‡ä»¶çš„å…¨å±€å˜é‡ åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…ä¸èƒ½é‡å¤å£°æ˜åŒåå˜é‡ å˜é‡å£°æ˜åçš„æ“ä½œåªèƒ½åœ¨å‡½æ•°ä¸­å†™ å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹ å¼•ç”¨ç±»å‹ç©ºå€¼ä¸º niu å€¼ç±»å‹ç©ºå°±ä¸ºç©º å£°æ˜å•ä¸ªå˜é‡ 1var å˜é‡å å˜é‡ç±»å‹ å˜é‡å£°æ˜åå¿…é¡»è¦ä½¿ç”¨ä¸ç„¶ç¼–è¯‘å¤±è´¥ å£°æ˜å¤šä¸ªå˜é‡ å£°æ˜å¤šä¸ªå˜é‡ 12345var ( å˜é‡å å˜é‡ç±»å‹ å˜é‡å å˜é‡ç±»å‹ ...) å˜é‡é»˜è®¤å€¼ å‘½ä»¤å˜é‡åæœ‰é»˜è®¤å€¼ string - â€œâ€ int - 0 bool - false å˜é‡å£°æ˜æ—¶æŒ‡å®šå€¼ åˆ›å»ºå˜é‡æ—¶æŒ‡å®šå€¼ 1var å˜é‡å å˜é‡ç±»å‹ = å€¼ å£°æ˜å˜é‡æ—¶ç›´æ¥æŒ‡å®šå˜é‡ç±»å‹ è‡ªåŠ¨è¯†åˆ«å€¼çš„ç±»å‹å¹¶æŒ‡å®šå˜é‡ç±»å‹ 1var å˜é‡å = å€¼ fmtæ¨¡å— æ‰“å°è¾“å‡º å¯¼å…¥ 1import \"fmt\" å¸¦æ¢è¡Œè¾“å‡º å¯æ¢è¡Œ 1fmt.Println() æ ¼å¼åŒ–(å¸¦æ¢è¡Œ)è¾“å‡º å¯åŠ  %s ç­‰å ä½ 1fmt.Printf() çŸ­å˜é‡å£°æ˜ åœ¨[å‡½æ•°å†…éƒ¨]å£°æ˜åªèƒ½åœ¨è¯¥å‡½æ•°å†…ä½¿ç”¨çš„å˜é‡ å£°æ˜çŸ­å˜é‡ 1å˜é‡å := å€¼ ç­‰åŒäº 1var å˜é‡å å˜é‡ç±»å‹ = å€¼ å‡½æ•°è¿”å›å€¼ returnè¿”å› 123func foo()(è¿”å›å€¼1ç±»å‹, è¿”å›å€¼2ç±»å‹, ...){ return è¿”å›å€¼1, è¿”å›å€¼2, ...} åŒ¿åå˜é‡ æ¥æ”¶ä¸éœ€è¦çš„å€¼ ä¾‹å¦‚å‡½æ•°aè¿”å›ä¸¤ä¸ªå€¼,æˆ‘ä»¬åªéœ€è¦å€¼1,ä½†æ˜¯æˆ‘ä»¬è°ƒç”¨è¯¥å‡½æ•°å¿…é¡»è¦æ¥å—2ä¸ªå€¼ å¦‚æœæˆ‘ä»¬æ¥æ”¶å€¼2è€Œä¸ä½¿ç”¨åˆ™ä¼š ç¼–è¯‘å¤±è´¥(å®šä¹‰å˜é‡è€Œä¸ä½¿ç”¨) æ­¤æ—¶å¯ä»¥å°†å€¼2è®¾ä¸ºåŒ¿åå˜é‡ åŒ¿åå˜é‡å¯ä»¥é‡å¤å£°æ˜ å¸¸é‡ä¸­ä¹Ÿå¯ä»¥å£°æ˜åŒ¿åå˜é‡ 1234func foo()(string, int){ return \"aa\", 500}name, _ := foo() æ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨åŒ¿åå˜é‡å ä½ å¸¸é‡ ä¸€æ—¦èµ‹å€¼ä¸å¯æ›´æ”¹ å¸¸é‡åœ¨å®šä¹‰æ—¶å¿…é¡»èµ‹å€¼ å¦‚æ²¡æœ‰èµ‹å€¼å°±å’Œä¸Šä¸€è¡Œä¸€æ ·(å¿…é¡»ç»“æ„ä¸ä¸Šä¸€è¡Œä¸€æ ·ä¸ç„¶æŠ¥é”™) 1const å¸¸é‡å = å€¼ 123456const ( å¸¸é‡å1 = å€¼1 å¸¸é‡å2 = å€¼2 å¸¸é‡å3 // å¦‚ä¸èµ‹å€¼é»˜è®¤æ‹¿ä¸Šä¸€è¡Œçš„å€¼ å¸¸é‡å4) 1234const( a, b = 1, 2 c, d // 1, 2) æšä¸¾ iota å¸¸é‡è®¡æ•°å™¨,åªèƒ½åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­ä½¿ç”¨ åœ¨ä¸€ä¸ª const ä¸­,åˆå§‹å€¼æ˜¯0, å£°æ˜ä¸€ä¸ªå¸¸é‡åˆ™const+1 æ¯ä¸€ä¸ª const ä¸­, éƒ½ä¼šé‡æ–°åˆå§‹åŒ–ä¸º0 å°±ç®—æŸä¸€è¡Œå®šä¹‰å¤šä¸ªå¸¸é‡ iotaä¹Ÿåª+1 12345const ( a = iota // 0 b = iota // 1 c = iota // 2) ç»å…¸é¢˜ç›® 12345const ( a = iota // åˆå§‹åŒ–0 _ = iota // å£°æ˜åŒ¿åå¸¸é‡,æ‰€ä»¥+1 b = iota // 2) 1234567const ( a = iota // åˆå§‹åŒ–0 b = 100 // èµ‹å€¼100 c = iota // å®šä¹‰ä¸¤ä¸ªå¸¸é‡æ‰€ä»¥ä¸º2 d // ä¸å®šä¹‰é»˜è®¤è·Ÿä¸Šä¸€è¡Œä¹Ÿæ˜¯iotaæ‰€ä»¥ä¸º3)const e = iota // åˆå§‹åŒ–0 12345678const ( _ = iota // 0 KB = 1 &lt;&lt; (10 * iota) // 1&lt;&lt;10(ä½è¿ç®—,2è¿›åˆ¶å‘å·¦ç§»10ä½) == 2çš„10æ¬¡æ–¹ == 1024 MB = 1 &lt;&lt; (10 * iota) // 2çš„20æ¬¡æ–¹ GB = 1 &lt;&lt; (10 * iota) // 2çš„30æ¬¡æ–¹ TB = 1 &lt;&lt; (10 * iota) PB = 1 &lt;&lt; (10 * iota)) 12345const ( a, b = iota + 1, iota + 2 // iota=0, a=1, b=2 c, d // iota=1, c=2, d=3 iotaå£°æ˜å¸¸é‡ä¸€è¡Œå˜ä¸€æ¬¡,ä¸åˆ¤æ–­ä¸€è¡Œå®šä¹‰å‡ ä¸ª e, f // iota=2, e=3, f=4) æ•°æ®ç±»å‹1 æ•´å‹ int8, int16, int32, int64 int8: æœ€å¤§8ä½çš„äºŒè¿›åˆ¶æ•°, æœ€å¤§2çš„9æ¬¡æ–¹-1 å…¶ä½™ç±»ä¼¼ åœ¨32ä½ç³»ç»Ÿ, int == int32 64ä½, int == int64 unit8, uint16, uint32, uint64 åœ¨32ä½ç³»ç»Ÿ, uint == uint32 64ä½, uint == uint64 len è¿”å›å¯¹è±¡çš„é•¿åº¦ è¿›åˆ¶ Goä¸­,æ–°å»ºå˜é‡æ—¶,äºŒè¿›åˆ¶/å…«è¿›åˆ¶ç­‰ç­‰ éƒ½å¯ä»¥å†™æˆ int Goä¼šæ ¹æ®ç‰¹å¾åˆ¤æ–­è¿›åˆ¶ æ¯”å¦‚ å…«è¿›åˆ¶éƒ½æ˜¯ä»¥ 0 å¼€å¤´ åå…­è¿›åˆ¶ä»¥ 0x å¼€å¤´ æˆ‘ä»¬æƒ³æ‰“å°å‡ºæ¥å¯ä»¥ä½¿ç”¨ Printf 1234567891011121314package mainimport \"fmt\"func main() { var a int = 10 // äºŒè¿›åˆ¶ var b int = 077 // å…«è¿›åˆ¶ var c = 0xff // åå…­è¿›åˆ¶intå¯çœç•¥,å¯è‡ªå·±åˆ¤æ–­ fmt.Println(a, b) // è½¬æ¢æˆåè¿›åˆ¶ fmt.Printf(\"%b \\n\", a) // bä»£è¡¨äºŒè¿›åˆ¶ \\næ¢è¡Œ fmt.Printf(\"%o \\n\", b) // nä»£è¡¨å…«è¿›åˆ¶ fmt.Printf(\"%x \\n\", c) // xä»£è¡¨åå…­è¿›åˆ¶ fmt.Printf(\"%p\", &amp;a) // æ‰“å°æ•°æ®açš„å†…å­˜åœ°å€(åå…­è¿›åˆ¶)} æµ®ç‚¹ æµ®ç‚¹æ•°æ˜¯ä¸å‡†ç¡®çš„(Python: 0.1+0.2 = 0.30000000000000004) å¦‚æœæ¶‰åŠåˆ°é‡‘é’±ç­‰å¯¹å°æ•°æ•æ„Ÿçš„ä¸šåŠ¡ ä¸è¦ç”¨æµ®ç‚¹æ•° ä¸šå†…ä½¿ç”¨è¾ƒå¤šçš„ä¸¤ç§æ–¹æ³• æ–¹æ³•1 å°†æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²è¿›è¡Œé€»è¾‘ç¼–å†™ æ–¹æ³•2 å°†å°æ•°å˜æˆæ•´æ•°è®¡ç®—åå†å˜æˆå°æ•° æ•°æ®ç±»å‹1(è¡¥å……) å¸ƒå°” goè¯­è¨€ä¸å…è®¸å°†æ•´å½¢å¼ºåˆ¶è½¬æ¢ä¸ºå¸ƒå°”å‹ å¸ƒå°”é»˜è®¤ False å¸ƒå°”æ— æ³•å‚ä¸æ•°å€¼è¿ç®—,ä¹Ÿä¸èƒ½ä¸å…¶ä»–ç±»å‹è½¬æ¢ å­—ç¬¦ä¸² utf-8ç¼–ç  å­—ç¬¦ä¸²è½¬ä¹‰ \\r å›è½¦(å…‰æ ‡ç§»åŠ¨è‡³ä¸‹ä¸€è¡Œè¡Œé¦–) \\n æ¢è¡Œ(ç§»åŠ¨è‡³ä¸‹ä¸€è¡ŒåŒæ ·ä½ç½®) \\t åˆ¶è¡¨ç¬¦ \\â€™ å•å¼•å· \\â€˜â€™ åŒå¼•å· \\ åæ–œæ  å¤šè¡Œå­—ç¬¦ä¸² å¤šè¡Œå­—ç¬¦ä¸²é‡Œä¸å­˜åœ¨è½¬ä¹‰ `aa bb cc ` å­—ç¬¦ä¸²å¸¸ç”¨æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637package mainimport ( \"fmt\" \"strings\")// å­—ç¬¦ä¸²æ“ä½œfunc main() { // å­—ç¬¦ä¸²ä½æ•° s1 := \"æˆ‘æ˜¯å­—ç¬¦ä¸²1\" fmt.Println(len(s1)) // å­—ç¬¦ä¸²ä½æ•°(s1åŒ…å«ä¸­æ–‡è¿”å›16) // å­—ç¬¦ä¸²æ‹¼æ¥ s2 := \"æˆ‘æ˜¯å­—ç¬¦ä¸²2\" fmt.Println(s1+\"affag\"+s2) // æ¨èä½¿ç”¨+å· s3 := fmt.Sprintf(\"%safaf%s\", s1, s2) // Sprintfè¿”å›æ‹¼æ¥åçš„å­—ç¬¦ä¸² fmt.Println(s3) // å­—ç¬¦ä¸²åˆ†å‰² ret := strings.Split(s1, \"æ˜¯\") //ä¸­æ–‡ä¸èƒ½å•å¼•å· fmt.Println(ret) // åˆ¤æ–­æ˜¯å¦åŒ…å« ret2 := strings.Contains(s1, \"æ˜¯\") fmt.Println(ret2) // åˆ¤æ–­å‰ç¼€(ç¬¬ä¸€ä¸ªå­—ç¬¦) ret3 := strings.HasPrefix(s1, \"æˆ‘\") fmt.Println(ret3) // åˆ¤æ–­åç¼€(æœ€åä¸€ä¸ªå­—ç¬¦) ret4 := strings.HasSuffix(s1, \"1\") fmt.Println(ret4) // æ±‚å­ä¸²ä½ç½® s4 := \"123321\" fmt.Println(strings.Index(s4, \"1\")) // 1åœ¨s4ä¸­çš„ç¬¬ä¸€ä¸ªä½ç½® fmt.Println(strings.LastIndex(s4, \"1\")) // 1çš„æœ€åä¸€ä¸ªä½ç½® // join(åˆå¹¶åˆ‡ç‰‡ä¸ºstr) a1 := []string{\"a\", \"b\"} fmt.Println(strings.Join(a1, \"-\"))} byteå’Œruneç±»å‹ å½“æˆ‘ä»¬ä½¿ç”¨ Println è¾“å‡ºä¸­æ–‡æ—¶,å‘ç°æ‰“å‡ºæ¥çš„æ˜¯ä¸€ä¸²æ•°å­—,ä¾‹å¦‚ â€œä¸­æ–‡â€ æ‰“å°å‡ºæ¥æ˜¯ 20013 ,å®é™…ä¸Šæ˜¯å­—ç¬¦ä¸²å¯¹åº”çš„ ASCII ç  å½“æˆ‘ä»¬ä½¿ç”¨ len å‡½æ•°æ±‚å­—ç¬¦ä¸²çš„é•¿åº¦æ—¶,è¦æ ¼å¤–æ³¨æ„,åœ¨ UTF8 ä¸­ä¸­æ–‡æœ€å°‘å ç”¨3ä¸ªå­—èŠ‚ ä¸€ä¸ªå­—èŠ‚ç­‰äº8ä½(bit) byteç±»å‹, (unit8ç±»å‹), ä»£è¡¨ ASCIIç , è‹±æ–‡è¿™ç§å ä¸€ä¸ªå­—èŠ‚çš„å­—ç¬¦ runeç±»å‹, (int32), ä»£è¡¨UTF8, ä¸­æ–‡/æ—¥æ–‡ç­‰å¤åˆå­—ç¬¦ 1234567891011121314151617181920212223242526package main// å­—ç¬¦import \"fmt\"func main() { s1 := \"ChnMig\" c1 := 'A' fmt.Println(s1, c1) s2 := \"ä¸­æ–‡\" c2 := 'ä¸­' fmt.Println(s2, c2) fmt.Println(c2) s3 := \"Hello,ä¸­å›½\" // éå†å­—ç¬¦ä¸² for i:=0;i&lt;len(s3);i++{ fmt.Printf(\"%c\\n\", s3[i]) // ä¸­æ–‡ä¹±ç  } // for range ä¸ä¹±ç  for k, v := range s3{ fmt.Printf(\"%d%c\\n\", k, v) }} ç±»å‹å¼ºåˆ¶è½¬æ¢ 123456789101112package mainimport \"fmt\"// å¼ºåˆ¶ç±»å‹è½¬æ¢func main() { s1 := \"big\" // å»ºç«‹s1 ByteArray := []byte(s1) // å»ºç«‹ä¸€ä¸ªå­˜æ”¾ç±»å‹ä¸ºbyteçš„åˆ—è¡¨å°†s1èµ‹å€¼è¿›å»(èµ‹å€¼æ—¶ä¼šå¼ºåˆ¶è½¬æ¢ä¸ºbyte) ByteArray[0] = 'p' // æŒ‰ç´¢å¼•ä¿®æ”¹ s1 = string(ByteArray) // è½¬æ¢ä¸ºstré‡æ–°èµ‹å€¼ç»™s1 fmt.Println(s1)} æµç¨‹æ§åˆ¶ if åœ¨ifä¸­ä¹Ÿå¯ä»¥å†™èµ‹å€¼è¯­å¥ if age := 18{ â€‹ â€¦ } æ³¨æ„æ­¤å¤„ age å˜é‡ä½œç”¨åŸŸåªåœ¨è¯¥ifè¯­å¥ä¸­ 12345678910111213141516package mainimport \"fmt\"// if/ else iffunc main() { age := 19 if age &gt; 18{ fmt.Println(\"18+\") }else if age &lt; 18{ // else, else if ä¸èƒ½å†æ¢è¡Œå†™ fmt.Println(\"FBI WARING\") }else { fmt.Println(18) }} for for åˆå§‹è¯­å¥;æ¡ä»¶è¡¨è¾¾å¼;ç»“æŸè¯­å¥{ â€‹ å¾ªç¯ä½“è¯­å¥ } åˆå§‹è¯­å¥å’Œç»“æŸè¯­å¥å¯ä»¥çœç•¥ 123456789101112package mainimport \"fmt\"// åˆå§‹è¯­å¥ç»“æŸè¯­å¥çœç•¥func main() { age := 18 for age &gt; 0{ fmt.Println(age) age-- }} 12345678910package mainimport \"fmt\"// å®Œæ•´ç‰ˆfunc main() { for age:=18;age &gt; 0;age--{ fmt.Println(age) }} 123456789package main// æ­»å¾ªç¯func main() { for { //æ­»å¾ªç¯(æ…ç”¨) }} switch ç®€ç•¥åˆ¤æ–­ 12345678910111213141516package mainimport \"fmt\"// switchfunc main() { age := 18 switch age { // switch è¦åˆ¤æ–­çš„å€¼ case 1: // åˆ¤æ–­ fmt.Println(\"1\") case 18: // åˆ¤æ–­ fmt.Println(\"18\") default: // ä»¥ä¸Šåˆ¤æ–­éƒ½ä¸ç¬¦åˆ fmt.Println(\"ä»¥ä¸Šåˆ¤æ–­å…¨éƒ½ä¸ç¬¦åˆ\") }} switch ä¹Ÿå¯ä»¥ä¸€æ¬¡åˆ¤æ–­å¤šä¸ª 12345678910111213141516package mainimport \"fmt\"// switchfunc main() { age := 18 switch age { case 1, 2, 3, 4, 5: // åˆ¤æ–­ fmt.Println(\"1\") case 18, 19, 20: // åˆ¤æ–­ fmt.Println(\"18\") default: // ä»¥ä¸Šåˆ¤æ–­éƒ½ä¸ç¬¦åˆ fmt.Println(\"ä»¥ä¸Šåˆ¤æ–­å…¨éƒ½ä¸ç¬¦åˆ\") }} ä¹Ÿå¯ä»¥åœ¨caseé‡Œæ¯”è¾ƒ 1234567891011121314package mainimport \"fmt\"// switchfunc main() { age := 18 switch { case age &lt; 25: fmt.Println(\"&gt;25\") case age &gt; 25: fmt.Println(\"&lt;25\") }} break å’Œ continue break ç»ˆæ­¢å¾ªç¯/éå† continue è·³å‡ºä¸€æ¬¡å¾ªç¯/éå† fmtæ¨¡å— https://www.liwenzhou.com/posts/Go/go_fmt/ println è¡Œå†…è¾“å‡º printf å¸¦æ ¼å¼åŒ–å‚æ•°è¾“å‡º %d æ•´æ•° %.2f å°æ•°(ç²¾ç¡®å°æ•°ç‚¹ä¸¤ä½) %v ä¸‡èƒ½ %T å˜é‡ç±»å‹ %% ä¸€ä¸ª% æ•°ç»„ æ•°æ®ç±»å‹å…ƒç´ çš„é›†åˆ, åœ¨å®šä¹‰æ—¶æŒ‡å®šæ•°æ®ç±»å‹,ä¸å¯æ’å…¥å…¶ä»–çš„æ•°æ®ç±»å‹ æ•°ç»„å¯ä¿®æ”¹,ä½†æ˜¯æ•°ç»„é•¿åº¦æ— æ³•æ”¹å˜ æ•°ç»„çš„æ•°æ®åº“ç±»å‹æ˜¯é•¿åº¦+ç±»å‹,æ‰€ä»¥ä¸¤ä¸ªæ•°ç»„é•¿åº¦ä¸ä¸€è‡´åˆ™æ•°æ®ç±»å‹ä¸ä¸€è‡´ æ•°ç»„æ˜¯ å€¼ç±»å‹ çš„,å¦‚æœå°†æ•°ç»„aèµ‹å€¼ç»™æ•°ç»„b, å†æ›´æ”¹æ•°ç»„aä¸­çš„å€¼æ•°ç»„bä¸ä¼šæ›´æ”¹, ç­‰åŒäºPythonçš„æ·±Copy 12345678910111213141516171819package mainimport ( \"fmt\")func main() { a := [5]int{1, 2, 3, 4, 5} b := [10]int{1, 2} //å®šä¹‰10ä½ä½†æ˜¯åªå¡«äº†ä¸¤ä½é‚£ä¹‹åçš„é»˜è®¤0 fmt.Println(a) fmt.Println(b) var c [3]int //ç”¨varå®šä¹‰ var d [3]int = [3]int{1, 2, 3} //ç”¨varå®šä¹‰å¹¶èµ‹å€¼ fmt.Println(c) fmt.Println(d)} è‡ªåŠ¨åˆ¤æ–­å‡ ä½ 1234567891011package mainimport ( \"fmt\")func main() { a := [...]int{1, 2, 3, 4, 5} // [...]ä¼šè‡ªå·±æŸ¥è¯¢èµ‹å€¼å‡ ä½ç„¶åå¡«å……ä½æ•° fmt.Println(a)} æ ¹æ®ç´¢å¼•èµ‹å€¼ å¦‚æœæˆ‘ä»¬å®šä¹‰é•¿åº¦100çš„æ•°ç»„ç¬¬50ä½ä¸º3 a := [100]int{50: 3} æ•°ç»„çš„éå† 1234567891011121314151617181920package mainimport ( \"fmt\")func main() { a := [100]int{50: 3} //é€šè¿‡ç´¢å¼•éå† for i := 0; i &lt; len(a); i++ { fmt.Println(a[i]) } //é€šè¿‡rangeéå† for index, value := range a { fmt.Println(index, value) }} å¤šç»´æ•°ç»„ æ•°ç»„å¥—æ•°ç»„â€¦ ä¸€ä¸ªæ•°ç»„æ˜¯ä¸€ç»´ å¤šç»´æ•°ç»„åªæœ‰ç¬¬ä¸€å±‚èƒ½ä½¿ç”¨ â€¦ ç¡®å®šé•¿åº¦ å¤šç»´æ•°ç»„ä¹Ÿæ˜¯ å€¼ç±»å‹ 12345678910111213141516171819202122232425262728293031323334353637383940package mainimport ( \"fmt\")func main() { //å£°æ˜åèµ‹å€¼ var a [3][2]int //[[0, 0] [0, 0] [0, 0]] a = [3][2]int{ [2]int{1, 2}, //è¿™é‡Œç»™açš„ç¬¬ä¸€ä½[0, 0]èµ‹å€¼ [2]int{4, 5}, //ç¬¬äºŒä½ } fmt.Println(a) //[[1 2] [4 5] [0 0]] //å£°æ˜æ—¶èµ‹å€¼ var b = [3][2]int{ [2]int{1, 2}, [2]int{4, 5}, } fmt.Println(b) //å¤šç»´æ•°ç»„ç´¢å¼• fmt.Println(a[0][0]) //1 //å¤šç»´æ•°ç»„éå† for i := 0; i &lt; (len(a)); i++ { for k := 0; k &lt; (len(a[i])); k++ { fmt.Println(a[i][k]) } } //range for _, v1 := range a { for _, v2 := range v1 { fmt.Println(v2) } }} åˆ‡ç‰‡ æ•°ç»„å»ºç«‹æ—¶å°±éœ€è¦æŒ‡å®šé•¿åº¦,é•¿åº¦ä¸å¯æ›´æ”¹ åˆ‡ç‰‡å’Œæ•°ç»„ä¸€æ ·éƒ½åªèƒ½å­˜å‚¨ç›¸åŒæ•°æ®ç±»å‹,ä½†æ˜¯ä»–çš„é•¿åº¦æ˜¯å¯å˜çš„ åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ å¼•ç”¨ç±»å‹æŒ‡å…¬ç”¨ä¸€ä¸ªå†…å­˜åœ°å€ æ›´æ”¹ä¸€ä¸ªå€¼ä¼šé€ æˆæ‰€æœ‰å…±ç”¨è¯¥åœ°å€çš„å€¼å˜æ›´ åˆ‡ç‰‡æœ‰å®¹é‡çš„æ¦‚å¿µ,å®¹é‡ä»£è¡¨åˆ‡ç‰‡çš„æœ€å¤§é•¿åº¦,ä½†æ˜¯æ˜¯å¯æ‰©å……çš„ åˆ‡ç‰‡åˆå§‹å®¹é‡ä¸ºä»–ç”Ÿæˆæ—¶çš„é•¿åº¦ åˆ‡ç‰‡å¦‚æœæ˜¯ç”±æ•°ç»„äº§ç”Ÿ,é‚£ä¹ˆä»–çš„å®¹é‡ä¸º åˆ‡ç‰‡å¼€å§‹å¤„ åˆ° æ•°ç»„ç»“æŸå¤„ é•¿åº¦ åˆ‡ç‰‡å¤§å°: å½“å‰åˆ‡ç‰‡é•¿åº¦ åˆ‡ç‰‡åœ°å€: åˆ‡ç‰‡ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ åœ°å€ len() åˆ‡ç‰‡å®¹é‡: åº•å±‚æ•°ç»„æœ€å¤§èƒ½å­˜æ”¾çš„å…ƒç´ ä¸ªæ•° cap() åˆ‡ç‰‡æ‰©å®¹ åˆ‡ç‰‡æ‰©å®¹ç­–ç•¥æ˜¯å‘ç°ä¸å¤Ÿçš„æƒ…å†µä¸‹æ¯æ¬¡æ‰©å®¹åˆ°å‰å®¹é‡çš„ä¸¤å€(x2)(ä¸ä¸€å®š,å°äº1024æ—¶æ˜¯è¿™æ ·,å¤§äº1024æ˜¯1/4) å‘ç°é•¿åº¦è¶…å‡ºå®¹é‡ &gt; ä¸¢å¼ƒè€å†…å­˜ &gt; ç”Ÿæˆæ–°æ•°ç»„(å®¹é‡x2) &gt; åˆ‡ç‰‡ append å‘åˆ‡ç‰‡ä¸­è¿½åŠ å…ƒç´  1234567891011121314151617181920212223242526272829package mainimport \"fmt\"func main() { //ä¸»åŠ¨å£°æ˜ var a = []int{1, 2, 3} //ä¸è§„å®šé•¿åº¦å³ä¸ºåˆ‡ç‰‡(å†…éƒ¨å…¶å®æ˜¯å…ˆç”Ÿæˆä¸€ä¸ªæ•°ç»„ç„¶ååˆ‡ç‰‡) fmt.Printf(\"a:%T\", a) //ä»æ•°ç»„å¾—åˆ°åˆ‡ç‰‡ var b = [3]int{1, 2, 3} var c []int c = b[0:2] //ä»ç´¢å¼•0åˆ‡åˆ°1,c=b[:]ä»å¼€å§‹åˆ‡åˆ°ç»“æŸ,c=b[:2]ä»å¼€å§‹åˆ‡åˆ°ç´¢å¼•1,c=b[1:]ä»ç´¢å¼•1åˆ‡åˆ°æœ€å fmt.Println(c) //åˆ‡ç‰‡å¤§å°(å½“å‰) fmt.Println(len(c)) //å®¹é‡(åº•å±‚æ•°ç»„æœ€å¤§æ”¾å¤šå°‘) //åˆ‡ç‰‡åˆå§‹å®¹é‡ä¸ºä»–ç”Ÿæˆæ—¶çš„é•¿åº¦ fmt.Println(cap(c)) //capæŸ¥çœ‹å½“å‰åˆ‡ç‰‡çš„å®¹é‡ //åˆ‡ç‰‡è¿½åŠ  var d = []int{} //æ²¡æœ‰å¡«å……æ•°æ®æ—¶æ²¡æœ‰å†…å­˜åœ°å€ fmt.Println(d, len(d), cap(d)) //[] 0 0 d = append(d, 1) //append(d, 1, 2)ä»£è¡¨æ·»åŠ ä¸¤ä¸ª fmt.Println(d, len(d), cap(d)) //[1] 1 1} åˆ‡ç‰‡COPY åˆ‡ç‰‡æ˜¯æŒ‡å‘å‹æ•°æ®,æ‰€ä»¥å°†aåˆ‡ç‰‡èµ‹å€¼ç»™båbå˜åŠ¨ä¼šå½±å“åˆ°a å¦‚æœè§„é¿æ­¤é—®é¢˜å¯ä»¥ä½¿ç”¨ COPY å‡½æ•° 123456789101112131415161718package mainimport \"fmt\"func main() { a := []int{1, 2, 3} b := a b[0] = 100 fmt.Println(a) //[100 2 3] fmt.Println(b) //[100 2 3] var c []int //ä¸ºç©ºæ²¡æœ‰ç”³è¯·å†…å­˜ c = make([]int, 3, 3) //ä½¿ç”¨makeå‡½æ•°ç”³è¯·é•¿åº¦ä¸º3å®¹é‡ä¸º3çš„å†…å­˜ copy(c, a) //copy açš„å€¼åˆ°c,å¦‚æœcçš„å®¹é‡å°äºaåˆ™ä¼šæ•°æ®ä¸¢å¤± a[0] = 10 fmt.Println(a) //[10 2 3] fmt.Println(c) //[100 2 3]} åˆ‡ç‰‡å†…å®¹çš„åˆ é™¤ å¾ˆé—æ†¾,åˆ‡ç‰‡æš‚æ—¶æ²¡æœ‰æŸä¸ªæ–¹æ³•å¯ä»¥åˆ é™¤æŸä¸ªå…ƒç´  æˆ‘ä»¬åªèƒ½é€šè¿‡æ‰‹åŠ¨èµ‹å€¼çš„æ–¹å¼æ¥è¾¾åˆ°ç›®çš„ 123456789package mainimport \"fmt\"func main() { a := []int{1, 2, 3, 4} a = append(a[:2], a[3:]...) //å…ˆåˆ‡ç´¢å¼•1ä¹‹å‰çš„å…ƒç´ å†åˆ‡1ä¹‹åçš„å…ƒç´ ç„¶åé‡æ–°èµ‹å€¼ç»™a, ...æ˜¯å°†åˆ‡ç‰‡çš„å¤šä¸ªå†…å®¹åˆ‡åˆ†, ...å†™åœ¨è¿½åŠ çš„å‚æ•°å,å¤šä¸ªå‚æ•°å¤šä¸ª... fmt.Println(a) //[1 3 4]} éš¾é¢˜ 12345678910111213141516171819202122package mainimport \"fmt\"func main() { //åˆ‡ç‰‡åœ°å€æ°¸è¿œæŒ‡åˆ‡ç‰‡èµ·å§‹çš„åœ°å€å†…å­˜,ä¸åŒ…å«ç»“å°¾ a := [4]int{1, 2, 3, 4} //æ•°ç»„ b := a[:] //åˆ‡ç‰‡ b[0] = 100 fmt.Println(a[0]) //100,å› åˆ‡ç‰‡æ˜¯æŒ‡å‘æ€§æ•°æ®,bä¸aå…±ç”¨å†…å­˜ c := a[2:3] fmt.Println(c) fmt.Println(cap(c)) //åˆ‡ç‰‡å¦‚æœæ˜¯ç”±æ•°ç»„äº§ç”Ÿ,é‚£ä¹ˆä»–çš„å®¹é‡ä¸º åˆ‡ç‰‡å¼€å§‹å¤„ åˆ° æ•°ç»„ç»“æŸå¤„ é•¿åº¦ d := b[:] fmt.Println(d) //[100 2 3 4],å› æŒ‡å‘æ€§æ•°æ®,dcbéƒ½æ˜¯æŒ‡å‘æ•°ç»„a e := d[2:] fmt.Println(e) //åˆ‡ç‰‡ä¸æ˜¯ä»å¤´å¼€å§‹æ‰€ä»¥åœ°å€å‘ç”Ÿäº†å˜åŒ–} æ•°ç»„æ’åº æ–¹ä¾¿å¿«æ·çš„å°†æ•°ç»„æ’åº 12345678910111213package mainimport ( \"fmt\" \"sort\")func main() { a := [5]int{5, 6, 1, 3, 2} sort.Ints(a[:]) //sort.Intsæ–¹æ³•å°†åˆ‡ç‰‡æ’åº fmt.Println(a) //å› åˆ‡ç‰‡æ•°æ®æŒ‡å‘æ•°ç»„æ‰€ä»¥å®é™…ä¸Šæ’åºäº†æ•°ç»„} map å¼•ç”¨ç±»å‹ mapsæ˜¯æ— åºçš„ æœ‰kæœ‰v çš„æ•°æ®ç±»å‹ mapå¿…é¡»ç»è¿‡åˆå§‹åŒ–æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ 12345678910111213141516171819202122232425package mainimport ( \"fmt\")func main() { var a map[string]int //å£°æ˜map,kä¸ºstringç±»å‹,vä¸ºint,ä¸èµ‹å€¼ä¸ºnil fmt.Println(a) //map[] //åˆå§‹åŒ–(åˆå§‹åŒ–åéƒ¨ä½nilä½†æ˜¯è¿˜æ˜¯ç©º) a = make(map[string]int, 8) //mapå¯ä¸æŒ‡å®šå®¹é‡ä½†æ˜¯æ¨èæŒ‡å®š fmt.Println(a) //map[] //æ·»åŠ é”®å€¼å¯¹ a[\"one\"] = 1 a[\"two\"] = 2 fmt.Println(a) //map[one:1 two:2] //å£°æ˜+åˆå§‹åŒ– b := map[string]int{ \"one\": 1, \"two\": 2, } fmt.Println(b) //map[one:1 two:2]} mapå¸¸ç”¨æ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package mainimport ( \"fmt\" \"sort\")func main() { // åˆ¤æ–­æŸä¸ªé”®å­˜ä¸å­˜åœ¨ a := map[int]int{ 1: 1, 3: 3, 2: 2, } v, ok := a[1] //è¿”å›ä¸¤ä¸ªå€¼, å€¼1ä¸ºè¿™ä¸ªé”®çš„å€¼, 2ä¸ºè¿™ä¸ªé”®å­˜ä¸å­˜åœ¨ fmt.Println(v, ok) //1 true v1, ok1 := a[5] fmt.Println(v1, ok1) //0 false ä¸å­˜åœ¨å€¼1ä¸ºå€¼ç±»å‹çš„é»˜è®¤å€¼,2ä¸ºfalse //éå†map for k, v := range a { fmt.Println(k, v) } //åªéå†mapçš„key for k := range a { fmt.Println(k) } //éå†mapçš„v for _, v := range a { fmt.Println(v) } //æŒ‰ç…§æŸä¸ªé¡ºåºéå† // å–keyå­˜æ”¾è‡³åˆ‡ç‰‡ // åˆ‡ç‰‡æ’åº // æŒ‰keyå¯¹mapæ’åº keys := make([]int, 3) for k := range a { keys = append(keys, k) } sort.Ints(keys) for _, key := range keys { fmt.Println(key, a[key]) } // åˆ é™¤é”®å€¼å¯¹ delete(a, 1) //(map, é”®)} åˆ‡ç‰‡ä¸mapæ··åˆ 1234567891011121314151617181920package mainimport ( \"fmt\")func main() { //å…ƒç´ ç±»å‹ä¸ºmapçš„åˆ‡ç‰‡ var a = make([]map[string]int, 8) //åªå®Œæˆäº†åˆ‡ç‰‡çš„åˆå§‹åŒ– a[0] = make(map[string]int, 2) //åˆå§‹åŒ–åˆ‡ç‰‡[0]çš„map a[0][\"one\"] = 1 fmt.Println(a) //[map[one:1] map[] map[] map[] map[] map[] map[] map[]] //å€¼ä¸ºåˆ‡ç‰‡çš„map var b = make(map[int][]int, 8) // mapåˆå§‹åŒ– b[0] = make([]int, 5) //åˆ‡ç‰‡åˆå§‹åŒ– b[0][0] = 1 b[0][1] = 2 fmt.Println(b) //map[0:[1 2 0 0 0]]} å‡½æ•° å‡½æ•°æ˜¯GOè¯­è¨€çš„é‡è¦ç»„æˆéƒ¨åˆ† å‡½æ•°æœ‰ å‡½æ•°/åŒ¿åå‡½æ•°/é—­åŒ… å‡½æ•°åç”± å­—æ¯/æ•°å­—/ä¸‹åˆ’çº¿ ç»„æˆ,å‡½æ•°åçš„ç¬¬ä¸€ä¸ªå­—æ¯ä¸èƒ½æ˜¯æ•°å­—, åœ¨åŒä¸€ä¸ªåŒ…å†…å‡½æ•°åä¸èƒ½é‡å¤ å‚æ•°ç”±å‚æ•°å˜é‡å’Œç±»å‹ç»„æˆ,å¤šä¸ªå‚æ•°é€—å·åˆ†éš” è¿”å›å€¼ä¹Ÿç”±è¿”å›å˜é‡å’Œç±»å‹ç»„æˆ, ä¹Ÿå¯ä»¥åªå†™è¿”å›å€¼ç±»å‹,å¤šä¸ªè¿”å›å€¼ç”± () åŒ…è£¹,é€—å·åˆ†éš” è°ƒç”¨å‡½æ•°æ—¶,å¯ä»¥ä¸æ¥æ”¶å‡½æ•°çš„è¿”å›å€¼ è¿”å›å€¼å¦‚æœæŒ‡å®šäº†è¿”å›çš„å˜é‡å, å‡½æ•°ä½“å†…ä¸ç”¨å† var è¯¥å˜é‡, returnä¹Ÿä¸ç”¨æŒ‡å®šå˜é‡å å‡½æ•°æ²¡æœ‰é»˜è®¤å‚æ•° å‡½æ•°å¯ä»¥èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡,æ­¤æ—¶è¯¥å˜é‡å°±æ˜¯ä¸€ä¸ªå‡½æ•° å‡½æ•°ç»„æˆ 123func å‡½æ•°å(å‚æ•°)(è¿”å›å€¼){ å‡½æ•°ä½“} ä¾‹å¦‚ 1234567891011121314package mainimport \"fmt\"func sum(x int, y int) int { // æ±‚å’Œ return x + y}func main() { s := sum(1, 2) fmt.Println(s)} å‡½æ•°æ¥æ”¶nä¸ªå‚æ•° 1234567891011121314151617package mainimport \"fmt\"func sum(a ...int) int { //å‚æ•°åååŠ ...ä»£è¡¨æ¥æ”¶å¤šä¸ª,ä½†æ˜¯å‚æ•°ç±»å‹æ˜¯å®šæ­»çš„,è¿™æ ·æ¥å—çš„å‚æ•°ä¸ºä¸€ä¸ªåˆ‡ç‰‡,æ­¤æ—¶aå¯ä¸ä¼  ret := 0 for _, v := range a { ret = ret + v } return ret}func main() { s := sum(1, 2, 3) fmt.Println(s)} 1234567891011121314151617package mainimport \"fmt\"func sum(a int, b ...int) int { //ä¼ aä¸ºint,bä¸ºå¤šä¸ª,aå¿…ä¼  ret := a for _, v := range b { ret = ret + v } return ret}func main() { s := sum(1, 2, 3) fmt.Println(s)} 123456789101112package mainimport \"fmt\"func sum(a, b int) int { //å¦‚æœa,béƒ½ä¸ºinté‚£ä¹ˆå¯ä»¥ç®€å†™ a, b int return a + b}func main() { s := sum(1, 2) fmt.Println(s)} å‡½æ•°è¿”å›å¤šä¸ªå€¼ 123456789101112131415package mainimport \"fmt\"func calc(a, b int) (sum, sub int) { //å¤šè¿”å›å€¼ sum = a + b //sumä¸subå·²ç»å®šä¹‰ sub = a - b return //ç›´æ¥returnä¼šè‡ªå·±å¯»æ‰¾è¿”å›å€¼}func main() { a, b := calc(1, 2) fmt.Println(a, b)} defer é€šå¸¸ç”¨äºæ—¶é—´çš„è®°å½•/èµ„æºé‡Šæ”¾ç­‰ç­‰ 123456789101112package mainimport \"fmt\"func main() { // deferå»¶è¿Ÿæ‰§è¡Œ,ä»£ç å°†è¦ç»“æŸæ—¶å†æ‰§è¡Œ,æ‰§è¡Œé¡ºåºä¸ºå…ˆè¯»åˆ°çš„åæ‰§è¡Œ fmt.Println(\"go\") defer fmt.Println(1) defer fmt.Println(2) fmt.Println(\"on\") // go on 2 1} å˜é‡ä½œç”¨åŸŸ å¯ä»¥åœ¨å‡½æ•°ä¸­è®¿é—®å…¨å±€å˜é‡ ä¼˜å…ˆåœ¨å‡½æ•°ä¸­æ‰¾å˜é‡,æ‰¾ä¸åˆ°å†æ‰¾å…¨å±€å˜é‡ åœ¨å‡½æ•°å¤–æ— æ³•è®¿é—®å‡½æ•°å†…å®šä¹‰çš„å˜é‡ 1234567891011121314151617package mainimport \"fmt\"//å…¨å±€å˜é‡numvar num = 10//å®šä¹‰å‡½æ•°func a() { num := 100 //å¦‚å®šä¹‰äº†numåˆ™å…ˆç”¨å‡½æ•°å†…çš„num fmt.Println(num)}func main() { a()} å°†å‡½æ•°ä½œä¸ºå‚æ•° 123456789101112131415161718192021222324package mainimport \"fmt\"var num = 10func a(x, y int) int { return x + y}func b(x, y int) int { return x - y}func c(x, y int, op func(int, int) int) int { //ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå‡½æ•°funcç±»å‹,æ¥æ”¶ä¸¤ä¸ªå‚æ•°int return op(x, y)}func main() { a1 := c(50, 60, a) b1 := c(50, 60, b) fmt.Println(a1) fmt.Println(b1)} åŒ¿åå‡½æ•° åŒ¿åå‡½æ•°å°±æ˜¯æ²¡æœ‰å‡½æ•°åçš„å‡½æ•°,å¤šç”¨äºå›è°ƒ 12345678910111213141516package mainimport \"fmt\"func main() { //å®šä¹‰ç„¶åæ‰§è¡Œ a := func() { fmt.Println(\"åŒ¿åå‡½æ•°\") } a() //å®šä¹‰ç›´æ¥æ‰§è¡Œ(å‡½æ•°ååŠ ()) func() { fmt.Println(\"å®šä¹‰å¹¶æ‰§è¡Œ\") }()} é—­åŒ… é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°ä¸å…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆè€Œæˆçš„å®ä½“ 12345678910111213141516package mainimport \"fmt\"func a(name string) func(string) string { //è¿”å›å€¼ä¸ºå‡½æ•° return func(end string) string { return name + end }}func main() { r := a(\"name\") //rä¸ºå‡½æ•°(é—­åŒ…)å‡½æ•°å†…éƒ¨å¼•ç”¨å¤–éƒ¨å˜é‡ ret := r(\"end\") //æ‰§è¡ŒåŒ¿åå‡½æ•° fmt.Println(ret)} å†…ç½®å‡½æ•° close å…³é—­channel len æ±‚é•¿åº¦ new åˆ†é…å†…å­˜(å€¼ç±»å‹) make åˆ†é…å†…å­˜(å¼•ç”¨ç±»å‹) append è¿½åŠ  panicå’Œrecover é”™è¯¯å¤„ç† panic/recover é”™è¯¯æŠ›å‡º recoveréœ€è¦æ­é…defer panicç›´æ¥ç»ˆæ­¢,æ‰€ä»¥è¦åœ¨panicå‰å®šä¹‰recoverå’Œdefer 12345678910111213141516171819202122232425262728package mainimport \"fmt\"func a() { fmt.Println(\"a\")}func b() { defer func() { //deferæ”¾åˆ°bå‡½æ•°æœ€åæ‰§è¡Œ err := recover() //recoveræ•æ‰é”™è¯¯ä¿¡æ¯ if err != nil { //å¦‚æœerrä¸ä¸ºç©º fmt.Println(\"error\") } }() panic(\"b\") //panicæŠ¥å¼‚å¸¸,å‡†å¤‡ç»“æŸ,æ‰§è¡Œdefer}func c() { fmt.Println(\"c\")}func main() { a() b() c()} æŒ‡é’ˆ &amp; ä»£è¡¨å–åœ°å€ * æ ¹æ®åœ°å€å–å€¼ ä¸èƒ½æ“ä½œæŒ‡é’ˆ 123456789101112package mainimport \"fmt\"func main() { a := 1 fmt.Println(a) b := &amp;a fmt.Println(b) //0xc000010090 fmt.Printf(\"%T\\n\", b) //*int intç±»å‹çš„å†…å­˜åœ°å€(ä¸åŒç±»å‹ä¸èƒ½ç›¸äº’è½¬æ¢) fmt.Println(*b) //1 çŸ¥é“å†…å­˜åœ°å€æ¥å–å­˜å‚¨çš„å€¼} æŒ‡é’ˆä¸åœ°å€ åœ°å€: å†…å­˜åœ°å€ æŒ‡é’ˆ: å¸¦ç±»å‹çš„ é€šå¸¸çš„ä½¿ç”¨æ–¹æ³• 1234567891011121314package mainimport \"fmt\"func funA(a *[3]int) { //*ä»£è¡¨æ¥æ”¶æ•°ç»„çš„æŒ‡é’ˆ a[0] = 100 //æŒ‰æŒ‡é’ˆä¿®æ”¹æ•°æ® (*a)[0] = 100}func main() { l1 := [3]int{1, 2, 3} funA(&amp;l1) fmt.Println(l1) // [100 2 3]æˆåŠŸåœ¨å†…éƒ¨ä¿®æ”¹äº†å¤–éƒ¨å˜é‡} å»ºç«‹æŒ‡é’ˆ 12345678910111213141516package mainimport \"fmt\"func main() { var a = new(int) //newä¸€ä¸ªintç±»å‹æŒ‡é’ˆ fmt.Println(a) //0xc000064058 *a = 10 fmt.Println(a) //0xc000064058 fmt.Println(*a) // 10 var c = new([3]int) //newä¸€ä¸ªåˆ‡ç‰‡ fmt.Println(c) //&amp;[0 0 0] (*c)[0] = 1 //ç­‰åŒäº c[0] = 1 fmt.Println(*c) //[1 0 0]} ç»“æ„ä½“(struct)å’Œæ–¹æ³• åˆ›å»ºè‡ªå®šä¹‰ç±»å‹å’Œç»™ç±»å‹èµ·åˆ«å æœ‰å¯èƒ½å¢åŠ ä»£ç å¯è¯»æ€§ 1234567891011121314151617181920package mainimport \"fmt\"//NewInt åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å‹ NewInt å®é™…ä¸Šæ˜¯intç±»å‹type NewInt int // å®šä¹‰å˜é‡æ—¶é¦–å­—æ¯å¤§å†™ä»£è¡¨è¯¥å˜é‡æ˜¯å…¬å…±çš„,åˆ«äººå¯¼å…¥è¿™ä¸ªåŒ…æ—¶ä¹Ÿå¯ä½¿ç”¨å˜é‡,æ³¨é‡Šè¦æŒ‰ç…§æ ¼å¼ å˜é‡å æ³¨é‡Štype int1 = int //åˆ›å»ºç±»å‹åˆ«åfunc main() { var a NewInt fmt.Println(a) //0 åŸºäºintæ‰€ä»¥é»˜è®¤å€¼0 fmt.Printf(\"%T\\n\", a) //main.NewInt è‡ªå®šä¹‰ç±»å‹ var b int1 fmt.Println(b) //0 fmt.Printf(\"%T\\n\", b) //int èµ·åˆ«åæ‰€ä»¥è¿˜æ˜¯int var c int fmt.Printf(\"%T\\n\", c) //èµ·åˆ«åçš„æƒ…å†µä¸‹åŸåå­—ä¹Ÿæ˜¯å¯ç”¨çš„} ç»“æ„ä½“ Goè¯­è¨€æ²¡æœ‰é¢å‘å¯¹è±¡çš„è¯´æ³• å°½ç®¡å¯ä»¥é€šè¿‡æŸç§æ–¹å¼è¾¾åˆ°ç±»ä¼¼å¯¹è±¡çš„æ•ˆæœ ä½†æ˜¯å®˜æ–¹ä¸æ¨èé¢å‘å¯¹è±¡ç¼–ç¨‹, Goæ¨èé¢å‘æ¥å£ç¼–ç¨‹ ç»“æ„ä½“æ˜¯å€¼ç±»å‹,å°†å®ä¾‹åŒ–1èµ‹å€¼å®ä¾‹åŒ–2,ä¸¤è€…å†…å­˜åœ°å€æ˜¯ä¸ä¸€æ ·çš„ åŸºæœ¬å®ä¾‹åŒ– 1234567891011121314151617181920212223242526272829package mainimport \"fmt\"// å®šä¹‰ç»“æ„ä½“// ä½¿ç”¨typeå»ºç«‹ä¸€ä¸ªå­¦ç”Ÿç±»å‹type student struct { name string age int sex string hobby []string}func main() { //å®ä¾‹åŒ–æ–¹æ³•1 var s1 = student{} //å¦‚æœåªå®ä¾‹åŒ–ä¸èµ‹å€¼åˆ™é»˜è®¤ä¸ºè¯¥æ•°æ®ç±»å‹åˆå§‹å€¼ fmt.Printf(\"s1_name:%v\\n\", s1.name) //stringé»˜è®¤ä¸ºç©º //å®ä¾‹åŒ–æ–¹æ³•2 var s2 = new(student) fmt.Println(s2) // &amp;{ 0 []} ,newå‡ºæ¥çš„æ˜¯æŒ‡é’ˆ s2.name = \"s2\" // ç­‰åŒäº (*s2).name å–åœ°å€ fmt.Println(s2.name) //s3 //å®ä¾‹åŒ–æ–¹æ³•3 var s3 = &amp;student{} // ç­‰åŒäº2 fmt.Println(s3)} åŸºæœ¬åˆå§‹åŒ– 12345678910111213141516171819202122232425262728293031323334353637383940414243package mainimport \"fmt\"// å®šä¹‰ç»“æ„ä½“// ä½¿ç”¨typeå»ºç«‹ä¸€ä¸ªå­¦ç”Ÿç±»å‹type student struct { name string age int sex string hobby []string}func main() { // åˆå§‹åŒ–æ–¹æ³•1 var s1 = student{ //å°‘ä¼ åˆ™é»˜è®¤å€¼æ›¿ä»£ name: \"s1\", age: 18, sex: \"ç”·\", hobby: []string{\"A\", \"b\", \"c\"}, } fmt.Println(s1) fmt.Println(s1.name) //ç»“æ„ä½“å¯ä»¥é€šè¿‡ . çš„å½¢å¼æ‹¿å‡ºæ¥å±æ€§ //åˆå§‹åŒ–æ–¹æ³•2 var s2 = student{ //é¡ºåºä¸å®šä¹‰ç»“æ„ä½“æ—¶ç›¸åŒ,å¿…é¡»å…¨éƒ¨ä¼ é½ \"s2\", 18, \"ç”·\", []string{\"A\"}, } fmt.Println(s2.name) //åˆå§‹åŒ–æ–¹æ³•3 var s3 = &amp;student{ //é¡ºåºä¸å®šä¹‰ç»“æ„ä½“æ—¶ç›¸åŒ,å¿…é¡»å…¨éƒ¨ä¼ é½ \"s3\", 18, \"ç”·\", []string{\"A\"}, } fmt.Println(s3.name)} ç»“æ„ä½“å†…å­˜ ç»“æ„ä½“çš„æ¯ä¸ªå€¼æ˜¯æ’åœ¨ä¸€èµ·çš„ 1234567891011121314151617181920212223package mainimport \"fmt\"// ç»“æ„ä½“å†…å­˜å¸ƒå±€func main() { type test struct { a int8 b int8 c int8 } var t = test{ a: 1, b: 2, c: 3, } fmt.Println(&amp;(t.a)) //0xc000064058 fmt.Println(&amp;(t.b)) //0xc000064059 fmt.Println(&amp;(t.c)) //0xc00006405a} ç»“æ„ä½“åµŒå¥— ç»“æ„ä½“å¯ä»¥ç›¸äº’åµŒå¥— 123456789101112131415161718192021222324252627package mainimport \"fmt\"// ç»“æ„ä½“çš„åµŒå¥—type address struct {&nbsp;&nbsp;&nbsp;&nbsp;province string&nbsp;&nbsp;&nbsp;&nbsp;city string}type student struct {&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;age int&nbsp;&nbsp;&nbsp;&nbsp;addr address // åµŒå¥—ç»“æ„ä½“ address}func main() {&nbsp;&nbsp;&nbsp;&nbsp;s1 := student{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: \"s1\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;age: 22,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr: address{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;province: \"p\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;city: \"c\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(s1) // {s1 22 {p c}}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(s1.addr.city) // c} èµ‹å€¼ç»™æŒ‡é’ˆ å°†å®ä¾‹åŒ–1çš„æŒ‡é’ˆèµ‹å€¼ç»™å®ä¾‹åŒ–2,æ­¤æ—¶å®ä¾‹åŒ–2æ˜¯æŒ‡å‘ç±»å‹ 12345678910111213141516171819202122232425package mainimport \"fmt\"// ç»“æ„ä½“å†…å­˜å¸ƒå±€func main() {&nbsp;&nbsp;&nbsp;&nbsp;type test struct {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a int8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b int8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c int8&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;var t = test{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a: 1,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b: 2,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c: 3,&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&amp;(t.a)) //0xc000064058&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&amp;(t.b)) //0xc000064059&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&amp;(t.c)) //0xc00006405a&nbsp;&nbsp;&nbsp;&nbsp;t2 := &amp;t //å°†tçš„åœ°å€ç»™t2&nbsp;&nbsp;&nbsp;&nbsp;fmt.Printf(\"%T\\n\", t2) //*main.test&nbsp;&nbsp;&nbsp;&nbsp;t2.a = 5 //(*stu3).a,æ‰¾åˆ°å†…å­˜åœ°å€&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(t.a, t2.a) //5 5 ä¸¤ä¸ªéƒ½ä¿®æ”¹äº†} æ„é€ å‡½æ•° goè¯­è¨€çš„ç»“æ„ä½“æ²¡æœ‰æ„é€ å‡½æ•°,å¿…é¡»æˆ‘ä»¬è‡ªå·±å®ç° 123456789101112131415161718192021222324252627282930313233343536package mainimport \"fmt\"// æ„é€ å‡½æ•°type student struct {&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;age int&nbsp;&nbsp;&nbsp;&nbsp;gender string&nbsp;&nbsp;&nbsp;&nbsp;hobby []string}// æ„é€ å‡½æ•°(åå­—å¸¦newæ–¹ä¾¿ç†è§£)// 1ç‰ˆæœ¬,åˆå§‹åŒ–åè¿”å›æ¥æ”¶,å¦‚åˆå§‹åŒ–å†…å®¹è¾ƒå¤šè¿”å›å†æ¥å—è¾ƒå å†…å­˜func newStudent(name string, age int, gender string, hobby []string) student {&nbsp;&nbsp;&nbsp;&nbsp;return student{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;age: age,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gender: gender,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hobby: hobby,&nbsp;&nbsp;&nbsp;&nbsp;}}// 2ç‰ˆæœ¬,åˆå§‹åŒ–åè¿”å›åˆå§‹åŒ–çš„æŒ‡é’ˆ,å¤–é¢è°ƒç”¨ç›´æ¥æ“ä½œæŒ‡é’ˆ,é¿å…1çš„é—®é¢˜func newStudent2(name string, age int, gender string, hobby []string) *student {&nbsp;&nbsp;&nbsp;&nbsp;return &amp;student{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;age: age,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gender: gender,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hobby: hobby,&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;s1Hobby := []string{\"a\", \"b\"}&nbsp;&nbsp;&nbsp;&nbsp;s1 := newStudent(\"s1\", 18, \"ç”·\", s1Hobby)&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(s1)} æ–¹æ³•å’Œæ¥æ”¶è€… æ–¹æ³•æ˜¯ä½œç”¨äºç‰¹å®šç±»å‹å˜é‡çš„å‡½æ•°, å…¶ä¸­ç‰¹å®šç±»å‹çš„å˜é‡å« æ¥å—è€…, æ¥å—è€…ç±»ä¼¼å¯¹è±¡çš„ self å‡½æ•°è°éƒ½å¯ä»¥è°ƒç”¨,æ–¹æ³•æŒ‡å®šå¿…é¡»ç‰¹å®šç±»å‹å˜é‡è°ƒç”¨ 123func (æ¥å—è€…å˜é‡ æ¥å—è€…ç±»å‹) æ–¹æ³•å(å‚æ•°åˆ—è¡¨) (è¿”å›å‚æ•°) { å‡½æ•°ä½“} 12345678910111213141516171819202122232425262728293031package mainimport \"fmt\"// æ–¹æ³•type people struct {&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;gender int}// å‡½æ•°// func deram() {// &nbsp;fmt.Println(\"æ¢¦æƒ³\")// }// æŒ‡å®šæ¥å—ç±»å‹æ˜¯people// é€šå¸¸è¿™ä¸ªå‹å‚å‘½åä¸ºç±»å‹çš„é¦–å­—æ¯å°å†™, æ¯”å¦‚ peopleå« pfunc (p people) deram() {&nbsp;&nbsp;&nbsp;&nbsp;p.gender = 11 // è¿™é‡Œæ”¹å¹¶ä¸ä¼šå˜,å› ä¸ºpæ˜¯å€¼ç±»å‹,åœ¨å‡½æ•°å†…èµ‹å€¼æ— ç”¨&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"æ¢¦æƒ³\")}func (p *people) deram2() {&nbsp;&nbsp;&nbsp;&nbsp;p.gender = 11 // ä¼ å…¥æŒ‡é’ˆæ—¶å°±æœ‰ç”¨&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"æ¢¦æƒ³\")}func main() {&nbsp;&nbsp;&nbsp;&nbsp;var p1 = people{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: \"p1\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gender: 20,&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;p1.deram() // .deramä¼šè‡ªå·±æ‰¾æ–¹æ³•æ‰§è¡Œ&nbsp;&nbsp;&nbsp;&nbsp;p1.deram2() // åŸç‰ˆä¸º(&amp;p1.deram2), Goè¯­è¨€å¯ä»¥ç®€å†™} ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŒ‡é’ˆæ¥å—è€… é€šå¸¸ä½¿ç”¨æŒ‡é’ˆæ¥å—è€… æ–¹æ³•çš„è¿½åŠ  å¯ä»¥ç»™ä»»æ„ç±»å‹è¿½åŠ æ–¹æ³• ä¸èƒ½ç»™åˆ«çš„åŒ…å®šä¹‰çš„ç±»å‹æ·»åŠ æ–¹æ³• 12345678910111213package mainimport \"fmt\"// MyInt æ— æ³•ç»™å¤–åŒ…åŠ æ–¹æ³•ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å…ˆè‡ªå®šä¹‰ä¸€ä¸ªç±»å‹å†ç»™è‡ªå®šä¹‰ç±»å‹åŠ æ–¹æ³•type MyInt intfunc (m *MyInt) sayHi() {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"Hello\")}func main() {&nbsp;&nbsp;&nbsp;&nbsp;var a MyInt&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(a)&nbsp;&nbsp;&nbsp;&nbsp;a.sayHi()} ç»“æ„ä½“é•¶åµŒè¾¾åˆ°ç»§æ‰¿çš„æ•ˆæœ 12345678910111213141516171819202122232425262728package mainimport \"fmt\"type animal struct { // å»ºç«‹ä¸€ä¸ªç»“æ„ä½“&nbsp;&nbsp;&nbsp;&nbsp;name string}type dog struct {&nbsp;&nbsp;&nbsp;&nbsp;feet int&nbsp;&nbsp;&nbsp;&nbsp;*animal //é•¶åµŒç»“æ„ä½“çš„æŒ‡é’ˆ}func (a *animal) move() { //å»ºç«‹ä¸€ä¸ªæ–¹æ³•ä¼ å…¥ animal çš„æŒ‡é’ˆ&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(a.name)}func (d *dog) wang() { // å»ºç«‹ä¸€ä¸ªæ–¹æ³•ä¼ å…¥ dog æŒ‡é’ˆ&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(d.name)}func main() {&nbsp;&nbsp;&nbsp;&nbsp;var a = dog{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;feet: 4,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;animal: &amp;animal{ // æŒ‡é’ˆ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: \"dog1\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;a.wang()&nbsp;&nbsp;&nbsp;&nbsp;a.move()} è·å–ç”¨æˆ·è¾“å…¥ä¿¡æ¯ ç±»ä¼¼Pythonçš„input 123456789101112131415161718package mainimport \"fmt\"// DOSäº¤äº’func main() {&nbsp;&nbsp;&nbsp;&nbsp;// ä»DOSè·å–å€¼&nbsp;&nbsp;&nbsp;&nbsp;// varå˜é‡&nbsp;&nbsp;&nbsp;&nbsp;var (&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;age int&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;fmt.Scan(&amp;name, &amp;age) //ä¼ å…¥å˜é‡æŒ‡é’ˆ,ç”¨æˆ·è¾“å…¥ç›´æ¥èµ‹å€¼, ç©ºæ ¼æˆ–æ¢è¡Œåˆ†å‰²&nbsp;&nbsp;&nbsp;&nbsp;fmt.Scanf(\"name:%S age:%d \\n\", &amp;name, &amp;age) //ä¸å¸¸ç”¨,è§„å®šå¿…é¡»æŒ‰ç…§Scanfå†…å®¹æ ¼å¼è¾“å…¥&nbsp;&nbsp;&nbsp;&nbsp;fmt.Scanln(&amp;name, &amp;age) // ä¸1å·®ä¸å¤šä½†æ˜¯æ¢è¡Œå°±ç»“æŸ(åªèƒ½ç©ºæ ¼åˆ†éš”)&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(name, age)} ç¨‹åºçš„é€€å‡º os.Exit(0) åŒ¿åå­—æ®µ ä¸æ¨èä½¿ç”¨ åœ¨å®šä¹‰ç»“æ„ä½“æ—¶å¯ä»¥ä½¿ç”¨åŒ¿åå­—æ®µ åŒ¿åå­—æ®µå®é™…ä¸Šå°±æ˜¯ç®€å†™, æ¯”å¦‚å­—æ®µå« string å®é™…ä¸Šæ˜¯ä¸€ä¸ªå« string ç±»å‹ä¸º string çš„å­—æ®µ å› æ­¤åŒä¸€ç±»å‹çš„åŒ¿åå­—æ®µåªèƒ½æœ‰ä¸€ä¸ª 1234567891011121314151617package mainimport \"fmt\"// åŒ¿åå­—æ®µtype student struct { // ç»“æ„ä½“&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;string // åŒ¿åå­—æ®µ&nbsp;&nbsp;&nbsp;&nbsp;int}func main() {&nbsp;&nbsp;&nbsp;&nbsp;s1 := student{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: \"s1\",&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(s1.string) // ä¸ºç©º(stringçš„é»˜è®¤å€¼)} JSONåºåˆ—åŒ– Goè¯­è¨€è‡ªå¸¦JsonåŒ…,ä½†æ˜¯ä¸Šé¢è¯´è¿‡Goè¯­è¨€è·¨åŒ…ä½¿ç”¨å˜é‡å¿…é¡»é¦–å­—æ¯å¤§å†™ 123456789101112131415161718192021222324252627282930313233package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"encoding/json\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\")// åºåˆ—åŒ–// Student å­¦ç”Ÿtype Student struct {&nbsp;&nbsp;&nbsp;&nbsp;ID int `json:\"id\"` // å¦‚æƒ³æ”¹å˜jsonçš„k,è¯­æ³•åŒæœ¬è¡Œ,ä¸å¸¦ç©ºæ ¼&nbsp;&nbsp;&nbsp;&nbsp;Gender string `json:\"gender\"`&nbsp;&nbsp;&nbsp;&nbsp;Name string `json:\"name\"`}func main() {&nbsp;&nbsp;&nbsp;&nbsp;s1 := Student{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ID: 1,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gender: \"ç”·\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name: \"s1\",&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// åºåˆ—åŒ–&nbsp;&nbsp;&nbsp;&nbsp;v, err := json.Marshal(s1) // json.Marshalæ–¹æ³•,jsonåºåˆ—åŒ–,è¿”å›å€¼å’ŒæŠ¥é”™ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;if err != nil { // ä¸ä¸ºnilä»£è¡¨æŠ¥é”™&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(v) // [123 34 73 68 34 58 49 44 34 71 101 110 ...] æ¯ä¸ªå­—èŠ‚&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(string(v)) // []byteè½¬string, json&nbsp;&nbsp;&nbsp;&nbsp;// ååºåˆ—åŒ–&nbsp;&nbsp;&nbsp;&nbsp;j1 := string(v)&nbsp;&nbsp;&nbsp;&nbsp;s2 := &amp;Student{} //æŒ‡é’ˆèµ‹ç»™s2&nbsp;&nbsp;&nbsp;&nbsp;json.Unmarshal([]byte(j1), s2) // æ¥æ”¶ä¸¤ä¸ªå‚æ•°,ä¸€æ˜¯åˆ‡ç‰‡,äºŒæ˜¯è¦è½¬æ¢çš„ç±»å‹æŒ‡é’ˆ&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(s2) // &amp;{1 ç”· s1}, æŒ‡é’ˆ&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(*s2) // {1 ç”· s1}, å†…å®¹} deforeæ·±å…¥ç†è§£ 123456789101112131415161718192021222324252627282930313233343536373839package mainimport \"fmt\"// defore éš¾é¢˜// returnåœ¨æ±‡ç¼–ä¸Šæœ¬è´¨åˆ†ä¸º è·å–è¿”å›å€¼ &gt; RETæŒ‡ä»¤, åŠ ä¸Šdeforeæ˜¯ è·å–è¿”å›å€¼ &gt; defore &gt; RETæŒ‡ä»¤func f1() int {&nbsp;&nbsp;&nbsp;&nbsp;x := 5&nbsp;&nbsp;&nbsp;&nbsp;defer func() {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x++&nbsp;&nbsp;&nbsp;&nbsp;}()&nbsp;&nbsp;&nbsp;&nbsp;return x // è¿”å›å€¼ä¸ºint, èµ°åˆ°returnæ—¶å…ˆçœ‹åˆ°è¿”å›å€¼ä¸æ˜¯xè€Œæ˜¯intæ‰€ä»¥å…ˆæ‹¿åˆ°è¿”å›å€¼5, æ‰§è¡Œdefore x++, å¯¹è¿”å›å€¼æ— å½±å“, è¿”å›5}func f2() (x int) {&nbsp;&nbsp;&nbsp;&nbsp;defer func() {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x++&nbsp;&nbsp;&nbsp;&nbsp;}()&nbsp;&nbsp;&nbsp;&nbsp;return 5 // è¿”å›å€¼ä¸º x, funcæ—¶x=0, returnæ—¶5èµ‹å€¼ç»™x,ç„¶åæ‰§è¡Œdefore, x++=6, è¿”å›6}func f3() (y int) {&nbsp;&nbsp;&nbsp;&nbsp;x := 5&nbsp;&nbsp;&nbsp;&nbsp;defer func() {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x++&nbsp;&nbsp;&nbsp;&nbsp;}()&nbsp;&nbsp;&nbsp;&nbsp;return x // è¿”å›å€¼ä¸ºy, funcæ—¶y=0, yä¸ºå€¼ç±»å‹æ‰€ä»¥returnæ—¶å°†xçš„å€¼5copyç»™y, defore x++å¯¹yæ— å½±å“, è¿”å›5}func f4() (x int) {&nbsp;&nbsp;&nbsp;&nbsp;defer func(x int) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x++&nbsp;&nbsp;&nbsp;&nbsp;}(x)&nbsp;&nbsp;&nbsp;&nbsp;return 5 // è¿”å›å€¼ä¸ºx, funcæ—¶x=0, returnæ—¶5èµ‹å€¼ç»™x, æ‰§è¡Œdefore å°†xä¼ å…¥, ä½†æ˜¯Goå‡½æ•°æ˜¯å½¢å‚,æ‰€ä»¥deforeå‡½æ•°å†…éƒ¨æ–°å»ºä¸€ä¸ªx, x++å¯¹å¤–éƒ¨xæ— å½±å“, è¿”å›5}func main() {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(f1())&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(f2())&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(f3())&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(f4())} Goè¯­è¨€çš„åŒ… é€šå¸¸æƒ…å†µä¸‹, ä»£ç ä¸å¯èƒ½æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œ,è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦å°åŒ… ä¸€ä¸ªåŒ…(æ–‡ä»¶å¤¹)ä¸­æ°¸è¿œåªæœ‰ä¸€ä¸ªmainæ–‡ä»¶,è¿™æ˜¯è¿™ä¸ªåŒ…ä¸­çš„æ€»å…¥å£ å®šä¹‰åŒ… æ–‡ä»¶çš„ç¬¬ä¸€è¡Œ å¦‚æœåŒ…ä¸­æœ‰ä¸€ä¸ªå« mian çš„package,é‚£è¿™ä¸ªåŒ…æ˜¯å¯æ‰§è¡Œçš„æ–‡ä»¶ å¦‚æœæ²¡æœ‰ main ä»£è¡¨è¿™ä¸ªåŒ…æ˜¯å¯¼å…¥çš„åŒ…, ä¸èƒ½è‡ªå·±æ‰§è¡Œ ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹åªæœ‰ä¸€ä¸ªåŒ…, ä¸€ä¸ªåŒ…ä¸èƒ½æ‹†åˆ†æˆä¸¤ä¸ªæ–‡ä»¶å¤¹ åŒ…åå¯ä»¥ä¸ä¸æ–‡ä»¶å¤¹åå­—é‡å , åŒ…åä¸èƒ½æœ‰ - ç¬¦å· åŒ…åä¸º main æ˜¯è¿™ä¸ªç¨‹åºçš„å…¥å£åŒ…, ç¼–è¯‘æ—¶å»é™¤mainåŒ…å°±å¾—ä¸åˆ°å¯æ‰§è¡Œæ–‡ä»¶ 1package åŒ…å å¯è§æ€§ ä¸€ä¸ªåŒ…å¦‚æœæƒ³è®©å¤–éƒ¨è°ƒç”¨ä»–çš„æ ‡è¯†ç¬¦(å˜é‡/å¸¸é‡/ç±»å‹/å‡½æ•°â€¦),è¯¥æ ‡è¯†ç¬¦å¿…é¡»æ˜¯å¯¹å¤–å¯è§çš„(é¦–å­—æ¯å¤§å†™) å¯¼å…¥åŒ… è‡ªå·±å†™çš„æœ¬åœ°åŒ…å¯¼å…¥è·¯å¾„æ˜¯ GOPATH/src/è·¯å¾„ ä½¿ç”¨æ—¶æ˜¯æŒ‰ç…§åŒ…åè€Œä¸æ˜¯æ–‡ä»¶å¤¹å å¯¼å…¥åŒ…å¯ä»¥ç»™è¿™ä¸ªåŒ…èµ·åˆ«å,ç„¶åä½¿ç”¨åˆ«åå³å¯ 1import åˆ«å åŒ… åŒ¿åå¯¼å…¥åŒ… åªå¯¼å…¥åŒ…è€Œä¸é€‚ç”¨åŒ…å†…æ•°æ® åŒ¿åå¯¼å…¥çš„åŒ…ç¼–è¯‘æ—¶ä¹Ÿä¼šåŠ å…¥ 1import _ åŒ… åˆå§‹åŒ–å‡½æ•° åŒ…åœ¨è¢«å¯¼å…¥æ—¶ä¼šè§¦å‘åŒ…å†…éƒ¨çš„ init() å‡½æ•°,è¯¥å‡½æ•°æ²¡æœ‰å‚æ•°ä¹Ÿæ²¡æœ‰è¿”å›å€¼ init() ä¸èƒ½åœ¨ä»£ç ä¸­ä¸»åŠ¨è°ƒç”¨, åªèƒ½åœ¨ç¨‹åºè¿è¡Œæ—¶è‡ªåŠ¨è°ƒç”¨ å¤šç”¨æ¥åšåˆå§‹åŒ–æ“ä½œ é¡ºåº: å…¨å±€å£°æ˜ &gt; init &gt; main timeåŒ… Goè¯­è¨€ä¸­é¢„è®¾çš„å¤„ç†æ—¶é—´çš„åŒ… æ—¶é—´æˆ³ 1234567891011121314151617181920212223242526package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"time\")func myTimeStamp(timestamp int64) {&nbsp;&nbsp;&nbsp;&nbsp;timeObj := time.Unix(timestamp, 0) // æ—¶é—´æˆ³è½¬æ—¶é—´æ ¼å¼, 0æ˜¯çº³ç§’çš„åç§»é‡,é€šå¸¸ä¸º0(ä¸åç§»)&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(timeObj)}func main() {&nbsp;&nbsp;&nbsp;&nbsp;now := time.Now() // å½“å‰æ—¶é—´,å®ä¾‹åŒ–ä¸€ä¸ªtime.Nowç»“æ„ä½“&nbsp;&nbsp;&nbsp;&nbsp;fmt.Printf(\"%#v\", now) // time.Time{wall:0xbf3f74ec230757d8, ext:5984001, loc:(*time.Location)(0x57bfc0)}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Year()) // å¹´ 2019&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Month()) // æœˆ July&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Day()) // æ—¥ 4&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Hour()) // æ—¶ 9&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Minute()) // åˆ† 56&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Second()) // ç§’ 39&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Nanosecond()) // çº³ç§’ 531441700&nbsp;&nbsp;&nbsp;&nbsp;// æ—¶é—´æˆ³&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Unix()) // æ—¶é—´æˆ³ 1562205575&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.UnixNano()) // çº³ç§’çº§åˆ«æ—¶é—´æˆ³ 1562205575360303400} å®šæ—¶å™¨ æŒ‰ç…§æ—¶é—´é‡å¤æ‰§è¡Œ ä¸åœ¨ä¹ä¸Šä¸€ä¸ªæœ‰æ²¡æœ‰æ‰§è¡Œå®Œæ¯• 123456789101112131415161718package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"time\")// å®šæ—¶å™¨func tickDemo() {&nbsp;&nbsp;&nbsp;&nbsp;ticker := time.Tick(time.Second) // å®šä¹‰ä¸€ä¸ªé—´éš”1sçš„å®šæ—¶å™¨&nbsp;&nbsp;&nbsp;&nbsp;for i := range ticker {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(i)&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;tickDemo()} æ—¶é—´æ ¼å¼åŒ– å…¶ä»–è¯­è¨€é€šå¸¸ä½¿ç”¨ YYYY-MM-DDâ€¦ æ¥æ ¼å¼åŒ– Goè¯­è¨€ä½¿ç”¨Goçš„å‡ºç”Ÿæ—¶é—´ 2006å¹´1æœˆ2æ—¥15ç‚¹04åˆ† æ¥æ ¼å¼åŒ– 123456789101112131415161718package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"time\")func format() {&nbsp;&nbsp;&nbsp;&nbsp;now := time.Now()&nbsp;&nbsp;&nbsp;&nbsp;// æ ¼å¼åŒ–æ—¶é—´æ¨¡æ¿ä¸ºGoçš„å‡ºç”Ÿæ—¥æœŸ 2006å¹´1æœˆ2æ—¥15ç‚¹04åˆ†&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Format(\"2006-01-02 15:04:05\")) // 2019-07-04 15:54:22&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Format(\"2006/01/02 15:04:05\")) // 2019/07/04 15:54:22&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Format(\"2006-01-02\")) // 2019-07-04&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(now.Format(\"15:04\")) // 15:54}func main() {&nbsp;&nbsp;&nbsp;&nbsp;format()} æ¥å£ æ­¤æ¥å£ä¸æ˜¯webæ¥å£ æ­¤æ¥å£æŒ‡ä¸€ç§ç±»å‹(interface) æ˜¯æŠ½è±¡çš„ç±»å‹ æ¥å£æ˜¯ä¸€ç»„ method çš„ç»„åˆ, æ˜¯ä¸€ä¸ªåè®®, ä¸€ç§è§„èŒƒ Goè¯­è¨€æå€¡é¢å‘æ¥å£ç¼–ç¨‹ æ¥å£åä¸€èˆ¬æ˜¯å•è¯+er æ–¹æ³•åé¦–å­—æ¯å¤§å†™ä¸”æ¥å£åå¤§å†™çš„æƒ…å†µä¸‹è¯¥æ¥å£å¯ä»¥è¢«å¤–éƒ¨å¯¼å…¥ å¦‚æœæ¥å£æ¥å—çš„æ˜¯æŒ‡é’ˆ, é‚£ä¹ˆä¼ å…¥å€¼ç±»å‹ä¼šå‡ºé”™ å¦‚æœæ¥å£æ¥å—å€¼ç±»å‹, é‚£ä¹ˆå¦‚æœä¼ å…¥æŒ‡é’ˆç±»å‹Goè¯­è¨€ä¼šè‡ªå·±æ‰¾åˆ°å¯¹åº”çš„å€¼ä¼ å…¥ 1234type æ¥å£ç±»å‹å interface{ æ–¹æ³•å1(å‚æ•°åˆ—è¡¨1) è¿”å›å€¼åˆ—è¡¨1 æ–¹æ³•å2(å‚æ•°åˆ—è¡¨2) è¿”å›å€¼åˆ—è¡¨2} ä¸ºä»€ä¹ˆä½¿ç”¨æ¥å£ å°†æ‰€æœ‰æ‹¥æœ‰å…±åŒç‚¹çš„ç±»å‹ç»Ÿä¸€å¤„ç†,é¿å…ä»£ç é›ä½™ æ¯”å¦‚å¾®ä¿¡æ”¯ä»˜/æ”¯ä»˜å®æ”¯ä»˜/é“¶è”æ”¯ä»˜â€¦ éƒ½æ˜¯æ”¯ä»˜, æˆ‘ä»¬å¯ä»¥ç»Ÿç§°ä¸º æ”¯ä»˜æ–¹å¼ æ¥å£å®ç° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849package mainimport \"fmt\"// æ¥å£å®ç°// å°±è¿™é‡Œæ¥è¯´, åªè¦ä¸€ä¸ªç±»å‹å®ç°äº†wash å’Œ dry æ–¹æ³•,æˆ‘ä»¬å°±å«è¿™ä¸ªç±»å‹å®ç°äº† xiyiji è¿™ä¸ªæ¥å£type xiyiji interface {&nbsp;&nbsp;&nbsp;&nbsp;wash() // æ´—è¡£&nbsp;&nbsp;&nbsp;&nbsp;dry() // ç”©å¹²}type haier struct {&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;price float64}func (h haier) wash() {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"haier wash\")}func (h haier) dry() {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"haier price\")}type people struct {&nbsp;&nbsp;&nbsp;&nbsp;name string}func (p people) wash() {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"people wash\")}func (p people) dry() {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"people price\")}func (p people) dry1() {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"people price1\")}// haier å’Œ people éƒ½æœ‰dryå’Œwashæ–¹æ³•, æ¥å£èµ‹å€¼åå¯ä»¥åƒè°ƒç”¨æ–¹æ³•ä¸€æ ·ä½¿ç”¨, æ‰€ä»¥æ¥å£æ˜¯æŠ½è±¡çš„,ä¸å…³å¿ƒèµ‹å€¼çš„ç»“æ„ä½“ç±»å‹, åªè¦ä½ æœ‰æˆ‘è§„å®šçš„æ–¹æ³•å³å¯(å¯ä»¥æ¯”æˆ‘è§„å®šçš„æ–¹æ³•å¤š)func main() {&nbsp;&nbsp;&nbsp;&nbsp;var a xiyiji&nbsp;&nbsp;&nbsp;&nbsp;h1 := haier{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: \"å°ç¥ç«¥\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;price: 188.8,&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;a = h1 // æ¥å£æ˜¯æŠ½è±¡ç±»å‹,æ‰€ä»¥å¯ä»¥è¢«èµ‹å€¼ç»“æ„ä½“, å‰ææ˜¯ç»“æ„ä½“å¿…é¡»æœ‰æ¥å£è§„å®šçš„æ–¹æ³•&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(a)&nbsp;&nbsp;&nbsp;&nbsp;a.dry() // haier price è°ƒç”¨haierçš„dry&nbsp;&nbsp;&nbsp;&nbsp;p1 := people{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: \"p1\",&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;a = p1&nbsp;&nbsp;&nbsp;&nbsp;p1.dry() // people price è°ƒç”¨peopleçš„dry} 123456789101112131415161718192021222324252627282930313233343536package mainimport \"fmt\"// ä¸ºä»€ä¹ˆä½¿ç”¨æ¥å£,ç‹—å’ŒçŒ«éƒ½èƒ½å«, æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸èƒ½å°†å…¶åˆåœ¨ä¸€èµ·// Cat çŒ«ç»“æ„ä½“type Cat struct{}// Dog ç‹—ç»“æ„ä½“type Dog struct{}// Sayer ç»“æ„ä½“type Sayer interface {&nbsp;&nbsp;&nbsp;&nbsp;Say() string}// Say çŒ«å«func (c Cat) Say() string {&nbsp;&nbsp;&nbsp;&nbsp;return \"å–µå–µå–µ\"}// Say ç‹—å«func (d Dog) Say() string {&nbsp;&nbsp;&nbsp;&nbsp;return \"æ±ªæ±ªæ±ª\"}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// c := Cat{}&nbsp;&nbsp;&nbsp;&nbsp;// d := Dog{}&nbsp;&nbsp;&nbsp;&nbsp;// fmt.Println(c.Say())&nbsp;&nbsp;&nbsp;&nbsp;// fmt.Println(d.Say())&nbsp;&nbsp;&nbsp;&nbsp;// æ¥å£å½¢å¼&nbsp;&nbsp;&nbsp;&nbsp;var animalList []Sayer&nbsp;&nbsp;&nbsp;&nbsp;c := Cat{}&nbsp;&nbsp;&nbsp;&nbsp;d := Dog{}&nbsp;&nbsp;&nbsp;&nbsp;animalList = append(animalList, c, d)&nbsp;&nbsp;&nbsp;&nbsp;for _, i := range animalList {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(i.Say())&nbsp;&nbsp;&nbsp;&nbsp;}} ç±»å‹ä¸æ¥å£çš„å…³ç³» ä¸€ä¸ªç±»å‹å¯ä»¥å®ç°å¤šä¸ªæ¥å£ ä¸€ä¸ªæ¥å£å¯å¯¹æ¥å¤šç§ç±»å‹ æ¥å£çš„åµŒå¥— æ¥å£å¯ä»¥åµŒå¥— 12345678910111213141516171819202122232425262728293031323334package mainimport \"fmt\"// æ¥å£1type speaker interface {&nbsp;&nbsp;&nbsp;&nbsp;speak()}// æ¥å£2type mover interface {&nbsp;&nbsp;&nbsp;&nbsp;move()}// æ¥å£åµŒå¥—type animal interface {&nbsp;&nbsp;&nbsp;&nbsp;speaker // åµŒå¥—æ¥å£1&nbsp;&nbsp;&nbsp;&nbsp;mover // æ¥å£2}// ç»“æ„ä½“type cat struct {&nbsp;&nbsp;&nbsp;&nbsp;name string}func (c cat) speak() {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"speak\")}func (c cat) move() {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"move\")}func main() {&nbsp;&nbsp;&nbsp;&nbsp;var x animal&nbsp;&nbsp;&nbsp;&nbsp;x = cat{name: \"cat1\"}&nbsp;&nbsp;&nbsp;&nbsp;x.move() // ç›´æ¥.æ–¹æ³• å³å¯&nbsp;&nbsp;&nbsp;&nbsp;x.speak()} ç©ºæ¥å£ æ²¡æœ‰å®šä¹‰ä»»ä½•æ–¹æ³•çš„æ¥å£ ä»»ä½•ç±»å‹éƒ½æ»¡è¶³è§„åˆ™,å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å˜é‡ å¦‚æœæˆ‘ä»¬æƒ³å®šä¹‰ä¸€ä¸ªå‡½æ•°, å‚æ•°ä¸ºä»»æ„å€¼åˆ™éœ€è¦å®šä¹‰ä¼ å‚ä¸ºç©ºæ¥å£ å®šä¹‰ä¸€ä¸ªmapå€¼ä¸ºç©ºæ¥å£åˆ™mapå€¼ä¸ºä»»æ„ç±»å‹ 12345678910111213141516171819package mainimport \"fmt\"// ç©ºæ¥å£func showType(a interface{}) {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Printf(\"%T\\n\", a)}func main() {&nbsp;&nbsp;&nbsp;&nbsp;showType(1)&nbsp;&nbsp;&nbsp;&nbsp;showType(\"wwwaw\")&nbsp;&nbsp;&nbsp;&nbsp;showType(1.256)&nbsp;&nbsp;&nbsp;&nbsp;// å€¼ä¸ºç©ºæ¥å£çš„map&nbsp;&nbsp;&nbsp;&nbsp;var stuInfo = make(map[string]interface{}, 100)&nbsp;&nbsp;&nbsp;&nbsp;stuInfo[\"A\"] = 100&nbsp;&nbsp;&nbsp;&nbsp;stuInfo[\"B\"] = true&nbsp;&nbsp;&nbsp;&nbsp;stuInfo[\"C\"] = \"ahdha\"&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(stuInfo)} ç±»å‹æ–­è¨€ åˆ¤æ–­æŸä¸ªå˜é‡æ˜¯å¦æ˜¯æŸä¸ªç±»å‹ 1å€¼, åˆ¤æ–­æ˜¯å¦ç±»å‹å¯¹åº” := å˜é‡.(ç±»å‹) 123456789package mainimport \"fmt\"// ç±»å‹æ–­è¨€func main() {&nbsp;&nbsp;&nbsp;&nbsp;var x interface{}&nbsp;&nbsp;&nbsp;&nbsp;x = 100&nbsp;&nbsp;&nbsp;&nbsp;v, ok := x.(int)&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(v, ok) // 100 true} ç±»å‹æ–­è¨€ç®€å•ç‰ˆ(å¸¸ç”¨) vä¸éœ€è¦å¯ä»¥ä½¿ç”¨å ä½ç¬¦ 12345678910111213141516package mainimport \"fmt\"// ç±»å‹æ–­è¨€func main() {&nbsp;&nbsp;&nbsp;&nbsp;var x interface{}&nbsp;&nbsp;&nbsp;&nbsp;x = 100&nbsp;&nbsp;&nbsp;&nbsp;switch v := x.(type) {&nbsp;&nbsp;&nbsp;&nbsp;case string:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"string\", v)&nbsp;&nbsp;&nbsp;&nbsp;case int:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"int\", v)&nbsp;&nbsp;&nbsp;&nbsp;}} æ¥å£å€¼ ä¸€ä¸ªæ¥å£çš„å€¼ç”±ä¸€ä¸ª å…·ä½“ç±»å‹ å’Œ å…·ä½“å€¼ ç»„æˆ 1234567891011121314func main() {&nbsp;&nbsp;&nbsp;&nbsp;var x interface{}&nbsp;&nbsp;&nbsp;&nbsp;var a int64 = 100&nbsp;&nbsp;&nbsp;&nbsp;var b int32 = 10&nbsp;&nbsp;&nbsp;&nbsp;var c int8 = 1&nbsp;&nbsp;&nbsp;&nbsp;x = a // æ­¤æ—¶xä¸º &lt;int64, 100&gt;&nbsp;&nbsp;&nbsp;&nbsp;x = b // &lt;int32, 10&gt;&nbsp;&nbsp;&nbsp;&nbsp;x = c // &lt;int8, 10&gt;&nbsp;&nbsp;&nbsp;&nbsp;x = false // &lt;bool, false&gt;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(x)} Goå¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œ æ–‡æœ¬åˆ†ä¸ºæ–‡æœ¬æ–‡ä»¶å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ æ‰“å¼€æ–‡ä»¶ os.Open(æ–‡ä»¶è·¯å¾„) è¿”å›ä¸¤ä¸ªå‚æ•°, å‚æ•°1(file)ä¸ºè·å–çš„æ–‡ä»¶, å‚æ•°2ä¸ºé”™è¯¯ä¿¡æ¯ å…³é—­æ–‡ä»¶ å…ˆæ‰“å¼€æ–‡ä»¶è·å¾—å‚æ•°1(file), ç„¶åå‚æ•°1.Close()å³å¯ é€šå¸¸å°†å…³é—­æ–‡ä»¶å†™åœ¨ defore é‡Œ è¯»å–æ–‡ä»¶ file.Read() åˆå§‹ç‰ˆ å¾ªç¯è¯»å–128å­—èŠ‚ ä¼šå‡ºç°é—®é¢˜, ä¾‹å¦‚ä¸­æ–‡128å­—èŠ‚å¯èƒ½æˆªæ–­åˆ†éš”æ±‰å­—, å¯¼è‡´ä¹±ç  12345678910111213141516171819202122232425262728293031323334353637383940package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"io\"&nbsp;&nbsp;&nbsp;&nbsp;\"os\")// æ–‡ä»¶æ“ä½œ// æ‰“å¼€å…³é—­æ–‡ä»¶func open() {&nbsp;&nbsp;&nbsp;&nbsp;file, err := os.Open(\"./a.txt\") // æ‰“å¼€æ–‡ä»¶, å‚æ•°1ä¸ºæ–‡ä»¶, 2ä¸ºæŠ¥é”™ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;if err != nil { // ä¸ä¸ºnilä»£è¡¨å‡ºç°é”™è¯¯&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Printf(\"æ–‡ä»¶æ‰“å¼€å¤±è´¥,é”™è¯¯:%v\", err)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// æ–‡ä»¶å¯ä»¥æ‰“å¼€&nbsp;&nbsp;&nbsp;&nbsp;defer file.Close() // deferå»¶è¿Ÿå…³é—­æ–‡ä»¶&nbsp;&nbsp;&nbsp;&nbsp;// è¯»æ–‡ä»¶&nbsp;&nbsp;&nbsp;&nbsp;var tmp [128]byte // å®šä¹‰ä¸€ä¸ª128é•¿åº¦çš„å­—èŠ‚æ•°ç»„&nbsp;&nbsp;&nbsp;&nbsp;for { // æ¯æ¬¡è¯»å–128å­—èŠ‚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n, err := file.Read(tmp[:]) // å°†æ–‡ä»¶å†…å®¹èµ‹å€¼ç»™tmp, è¿”å›ä¸¤ä¸ªè¿”å›å€¼, nä¸ºæœ¬æ¬¡è¯»å–é•¿åº¦, errä»£è¡¨è¯»å–é”™è¯¯&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if err == io.EOF {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// æ–‡ä»¶è¯»å–å®Œæ¯•ä¼šæŠ¥å‡ºä¸€ä¸ª EOF é”™è¯¯, å¹¶ä¸”nä¸º0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"æ–‡ä»¶è¯»å–å®Œæ¯•\")&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// æ–‡ä»¶è¯»å–å¤±è´¥&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"err:\", err)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(n) // æœ¬æ¬¡é•¿åº¦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Print(string(tmp[:])) // æ–‡æœ¬å†…å®¹å°±åœ¨åˆ‡ç‰‡é‡Œ&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;open()} bufioè¯»å–æ–‡ä»¶ ä¸Šæ–¹çš„ä»£ç æ˜¯ç›´æ¥ä»ç¡¬ç›˜ä¸­è¯»å–æ•°æ® bufioå°è£…ä¸€å±‚, ç­‰åŒäºåœ¨ä»£ç å’Œç³»ç»Ÿä¹‹é—´åŠ ä¸€ä¸ªç¼“å†²åŒº 12345678910111213141516171819202122232425262728293031package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"bufio\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"io\"&nbsp;&nbsp;&nbsp;&nbsp;\"os\")// bufiofunc main() {&nbsp;&nbsp;&nbsp;&nbsp;file, err := os.Open(\"./a.txt\")&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;defer file.Close()&nbsp;&nbsp;&nbsp;&nbsp;// è¯»å–æ–‡ä»¶&nbsp;&nbsp;&nbsp;&nbsp;reader := bufio.NewReader(file)&nbsp;&nbsp;&nbsp;&nbsp;for { // ä¼šè‡ªå·±å¾ªç¯&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str, err := reader.ReadString('\\n') // è¯»å–åˆ°æŒ‡å®šå­—ç¬¦ç»“æŸ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if err == io.EOF {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Print(str)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Print(str)&nbsp;&nbsp;&nbsp;&nbsp;}} ioutilè¯»å–æ–‡ä»¶ æ›´é«˜çº§, ä¼šè‡ªå·±æ•æ‰EOFåŠerrå¼‚å¸¸ ä¹Ÿä¼šè‡ªå·±æ§åˆ¶æ‰“å¼€å’Œå…³é—­æ–‡ä»¶ 12345678910111213141516171819package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"io/ioutil\")func readFile(f string) { // ä¼ å…¥filename&nbsp;&nbsp;&nbsp;&nbsp;content, err := ioutil.ReadFile(f)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(string(content))}// ioutilfunc main() {&nbsp;&nbsp;&nbsp;&nbsp;readFile(\"./a.txt\")} OpenFileæ“ä½œæ–‡ä»¶ Openå‡½æ•°åŠŸèƒ½è¾ƒæµ…æ˜¾, å½“æˆ‘ä»¬éœ€è¦å®ç°æ–‡ä»¶çš„å†™å…¥æ—¶, å°±éœ€è¦ä½¿ç”¨ OpenFile å‡½æ•° OpenFileå‡½æ•°èƒ½ä»¥æŒ‡å®šæ¨¡å¼æ‰“å¼€æ–‡ä»¶, æ¨¡å¼æœ‰å¤šç§ OpenFileæºä»£ç å¦‚ä¸‹ 123func OpenFile(name string, flag int, perm FileMode) (*File, error){ ...} å…¶ä¸­, nameæ˜¯æ‰“å¼€çš„æ–‡ä»¶, flagä¸ºæ‰“å¼€æ–‡ä»¶çš„æ¨¡å¼ prmä¸ºæ–‡ä»¶æƒé™, å…«è¿›åˆ¶æ•°, r(è¯»)04, w(å†™)02, x(æ‰§è¡Œ)01 123456789101112131415package mainimport \"os\"// æ–‡ä»¶å†™func main() {&nbsp;&nbsp;&nbsp;&nbsp;file, err := os.OpenFile(\"x.txt\", os.O_CREATE|os.O_WRONLY, 0755) // æ‰“å¼€æ–‡ä»¶,æ²¡æœ‰åˆ™æ–°å»º&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;defer file.Close()&nbsp;&nbsp;&nbsp;&nbsp;str := \"æ¶é£æœºå•Š\" // å†™å…¥&nbsp;&nbsp;&nbsp;&nbsp;file.WriteString(str)} bufio.NewWriterå†™å…¥æ–‡ä»¶ 12345678910111213func main() { file, err := os.OpenFile(\"xx.txt\", os.O_CREATE|os.O_TRUNC|os.O_WRONLY, 0666) if err != nil { fmt.Println(\"open file failed, err:\", err) return } defer file.Close() writer := bufio.NewWriter(file) for i := 0; i &lt; 10; i++ { writer.WriteString(\"helloæ²™æ²³\\n\") //å°†æ•°æ®å…ˆå†™å…¥ç¼“å­˜ } writer.Flush() //å°†ç¼“å­˜ä¸­çš„å†…å®¹å†™å…¥æ–‡ä»¶} ioutil.WriteFileå†™å…¥æ–‡ä»¶ 1234567891011121314151617package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"io/ioutil\")// æ–‡ä»¶å†™func main() {&nbsp;&nbsp;&nbsp;&nbsp;str := \"hello æ²™æ²³\"&nbsp;&nbsp;&nbsp;&nbsp;err := ioutil.WriteFile(\"./xx.txt\", []byte(str), 0666) // åªæ”¯æŒåˆ‡ç‰‡&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"write file failed, err:\", err)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}} åå°„ é€šç”¨å·¥å…·ç±»å‹å¤ªå¤š, ç±»å‹æ–­è¨€çŒœä¸å…¨, ä½¿ç”¨åå°„æ‹¿åˆ°æ¥å£å€¼çš„åŠ¨æ€ç±»å‹å’ŒåŠ¨æ€å€¼ åå°„å¹³å¸¸ä¸å¸¸ç”¨ å„ç§æ¡†æ¶æºç æ¯”è¾ƒå¸¸ç”¨ åå°„ä½¿ä»£ç æ›´çµæ´»,ä½†æ˜¯æ‰§è¡Œæ•ˆç‡è¾ƒä½ åå°„ä»£ç éš¾æ‡‚, å®¹æ˜“panic, æ€§èƒ½å¾ˆä½ reflectåŒ… TypeOf reflect.TypeOf() å‡½æ•°å¯ä»¥è·å¾—ä»»æ„å€¼çš„ç±»å‹å¯¹è±¡ 12345678910111213141516171819202122232425package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"reflect\")// reflecttype cat struct {&nbsp;&nbsp;&nbsp;&nbsp;name string}func myTypeOf(i interface{}) {&nbsp;&nbsp;&nbsp;&nbsp;v := reflect.TypeOf(i) // è·å–å˜é‡içš„ç±»å‹&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(v, v.Name(), v.Kind()) // v.Name()è¾“å‡ºè¿™ä¸ªiçš„ç±»å‹å, v.Kind()è¾“å‡ºè¿™ä¸ªiçš„å¤§çš„ç§ç±»,æ¯”å¦‚æ‰€æœ‰ç»“æ„ä½“éƒ½æ˜¯ç»“æ„ä½“,å¼•ç”¨ç±»å‹çš„Nameä¸ºç©º}func main() {&nbsp;&nbsp;&nbsp;&nbsp;myTypeOf(\"jagjgag\") // string string string&nbsp;&nbsp;&nbsp;&nbsp;a := false&nbsp;&nbsp;&nbsp;&nbsp;myTypeOf(a) // bool bool bool&nbsp;&nbsp;&nbsp;&nbsp;var c1 = cat{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: \"èŠ±èŠ±\",&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;myTypeOf(c1) // main.cat cat struct (å¯ä»¥æŸ¥æ‰¾å‡ºå‡ºè‡ªå®šä¹‰çš„ç»“æ„ä½“ç­‰)} ValueOf è·å–åŠ¨æ€å€¼ 12345678910111213141516171819202122232425package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"reflect\")// å€¼è¿›å…¥è¯¥å‡½æ•°å˜æˆç©ºæ¥å£,ValueOfè·å–è¿™ä¸ªå‚æ•°åŸæœ‰çš„å€¼func reflectValue(x interface{}) {&nbsp;&nbsp;&nbsp;&nbsp;v := reflect.ValueOf(x) // è·å–æ¥å£å€¼ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;k := v.Kind() // kindè·å–å€¼å¯¹åº”ç±»å‹&nbsp;&nbsp;&nbsp;&nbsp;switch k { // å¯¹æ¯”åˆ¤æ–­&nbsp;&nbsp;&nbsp;&nbsp;case reflect.Int64:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Printf(\"Int64 %d\\n\", int64(v.Int()))&nbsp;&nbsp;&nbsp;&nbsp;case reflect.Float32:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Printf(\"float32 %f\\n\", float32(v.Float()))&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;var a float32 = 3.14&nbsp;&nbsp;&nbsp;&nbsp;var b int64 = 200&nbsp;&nbsp;&nbsp;&nbsp;reflectValue(a)&nbsp;&nbsp;&nbsp;&nbsp;reflectValue(b)} é€šè¿‡åå°„ä¿®æ”¹å¤–éƒ¨å˜é‡å€¼ 1234567891011121314151617181920212223package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"reflect\")// é€šè¿‡åå°„ä¿®æ”¹å€¼func editValue(x interface{}) {&nbsp;&nbsp;&nbsp;&nbsp;// æƒ³è¦åœ¨å‡½æ•°å†…ä¿®æ”¹å‡½æ•°å¤–çš„å€¼å¿…é¡»é€šè¿‡ä¿®æ”¹æŒ‡é’ˆå¯¹åº”å€¼çš„å½¢å¼&nbsp;&nbsp;&nbsp;&nbsp;v := reflect.ValueOf(x) // è·å–ä¼ å…¥çš„å€¼&nbsp;&nbsp;&nbsp;&nbsp;kind := v.Kind() // è·å–å€¼çš„ç±»å‹&nbsp;&nbsp;&nbsp;&nbsp;switch kind {&nbsp;&nbsp;&nbsp;&nbsp;case reflect.Ptr: // åˆ¤æ–­ä¸ºæŒ‡é’ˆ,ä¿®æ”¹&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.Elem().SetInt(500) // v.Elem()æ‰æ˜¯ä¼ å…¥å€¼çš„æŒ‡é’ˆ, SetInt()ä¸ºä¿®æ”¹å€¼ä¸ºInt&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;var a int64 = 100&nbsp;&nbsp;&nbsp;&nbsp;editValue(&amp;a)&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(a)} Tag Tagæ˜¯ç»“æ„ä½“ä¸­æŸä¸ªå­—æ®µåˆ«å, å¯ä»¥å®šä¹‰å¤šä¸ª, ç©ºæ ¼åˆ†éš”, å…¶ä¸­åä¸ºjsonçš„tagæ˜¯åºåˆ—åŒ–ååºåˆ—åŒ–çš„åå­— 123456type student struct {&nbsp;&nbsp;&nbsp;&nbsp;Name string `json:\"name\" a:\"b\"`} ç»“æ„ä½“åå°„æŸ¥çœ‹å­—æ®µ ç”¨çš„è¾ƒå¤š ä»»æ„å€¼é€šè¿‡ reflect.TypeOf() è·å¾—åå°„å¯¹è±¡çš„ä¿¡æ¯å,å¦‚æœå®ƒçš„ç±»å‹ä¸ºç»“æ„ä½“, å¯ä»¥é€šè¿‡åå°„å€¼å¯¹è±¡ çš„ NumField() å’Œ Field() æ–¹æ³•è·å¾—ç»“æ„ä½“æˆå‘˜çš„è¯¦ç»†ä¿¡æ¯ 1234567891011121314151617181920212223242526272829package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"reflect\")// ç»“æ„ä½“åå°„type student struct {&nbsp;&nbsp;&nbsp;&nbsp;Name string `json:\"name\"`}func main() {&nbsp;&nbsp;&nbsp;&nbsp;s1 := student{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name: \"s1\",&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;t := reflect.TypeOf(s1)&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(t.Name(), t.Kind()) // student struct&nbsp;&nbsp;&nbsp;&nbsp;// å¾ªç¯éå†ç»“æ„ä½“s1, NumField() ä¸ºç»“æ„ä½“é•¿åº¦&nbsp;&nbsp;&nbsp;&nbsp;for i := 0; i &lt; t.NumField(); i++ {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field := t.Field(i) // æ‹¿å‡ºæŸä¸ªå­—æ®µi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(field.Name, field.Index, field.Type, field.Tag.Get(\"json\")) // å­—æ®µå, ç´¢å¼•, ç±»å‹, jsonTag&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// é€šè¿‡å­—æ®µå&nbsp;&nbsp;&nbsp;&nbsp;scoreField, ok := t.FieldByName(\"Name\") // æŸ¥æ‰¾åä¸ºNameçš„å­—æ®µ, okä¸ºTrueä»£è¡¨æœ‰å­—æ®µ, æ­¤æ—¶scoreFieldä¸ºè¯¥å­—æ®µ&nbsp;&nbsp;&nbsp;&nbsp;if ok {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(scoreField.Name, scoreField.Index, scoreField.Type, scoreField.Tag.Get(\"json\")) // Name [0] string name&nbsp;&nbsp;&nbsp;&nbsp;}} ç»“æ„ä½“åå°„æŸ¥çœ‹æ–¹æ³• 123456789101112131415161718192021package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"reflect\")// æŸ¥çœ‹ç»“æ„ä½“çš„æ–¹æ³•func printMethod(x interface{}) {&nbsp;&nbsp;&nbsp;&nbsp;t := reflect.TypeOf(x)&nbsp;&nbsp;&nbsp;&nbsp;v := reflect.ValueOf(x)&nbsp;&nbsp;&nbsp;&nbsp;for i := 0; i &lt; v.NumMethod(); i++ { // éå†æ–¹æ³•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methodType := v.Method(i).Type() // æ‹¿åˆ°æ–¹æ³•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(t.Method(i).Name) // æ–¹æ³•å&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(methodType) // æ–¹æ³•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// é€šè¿‡åå°„è°ƒç”¨æ–¹æ³•, éœ€è¦ä¼ å€¼å¿…é¡»æ˜¯ []reflect.Value{} ç±»å‹&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var args = []reflect.Value{}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.Method(i).Call(args)&nbsp;&nbsp;&nbsp;&nbsp;}} å¹¶å‘ å¹¶å‘æ˜¯Goè¯­è¨€çš„ä¼˜åŠ¿ å¹¶å‘ä¸å¹¶è¡Œ å¹¶å‘: åŒä¸€æ—¶æ®µåšå¤šä¸ªäº‹æƒ… å¹¶è¡Œ: åŒä¸€æ—¶åˆ»åšå¤šä¸ªäº‹æƒ… è¿›ç¨‹,çº¿ç¨‹,åç¨‹ goåªéœ€è¦ goroutine è¿›ç¨‹: ä¸€ä¸ªç¨‹åºå¯åŠ¨ååˆ›å»ºä¸€ä¸ªè¿›ç¨‹ çº¿ç¨‹: æ“ä½œç³»ç»Ÿè°ƒåº¦çš„æœ€å°å•ä½ åç¨‹: ç”¨æˆ·æ€çš„çº¿ç¨‹ goroutine Goè¯­è¨€çš„ runtime è‡ªåŠ¨å†³å®šç¨‹åºåœ¨å“ªé‡Œè¿è¡Œ ä½¿ç”¨ go å…³é”®å­—åˆ›å»º goroutine ä¸€ä¸ªå‡½æ•°å¯ä»¥åˆ›å»ºå¤šä¸ª goroutine, ä¸€ä¸ªgoroutineå¿…å¯¹åº”ä¸€ä¸ªå‡½æ•° Goçš„ goroutine å¯åŠ¨ä¸€ä¸ªå ç”¨2KBå†…å­˜(çº¿ç¨‹å ç”¨2MB), è€Œä¸” goroutineå¯åŠ¨æ€æ‰©å……å¤§å°(æœ€å¤§1GB), goroutineå¯1wä¸ªä¹Ÿæ²¡é—®é¢˜ goroutineç›´æ¥é€šè®¯åªèƒ½ç”¨ channel 12345678910111213141516171819202122232425package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"sync\")// å¯åŠ¨ goroutine// goroutine é€šå¸¸å’Œ sync çš„ WaitGroup ç»“åˆä½¿ç”¨// WaitGroupæ˜¯ä¸€ä¸ªè®¡æ—¶å™¨var wg sync.WaitGroupfunc hello() {&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"hello\")&nbsp;&nbsp;&nbsp;&nbsp;defer wg.Done() // æ‰§è¡Œç»“æŸåå‘Šè¯‰wgæ‰§è¡Œå®Œæ¯•,æ¨èç”¨defer}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// å‡½æ•°å‰åŠ  go å°±æ˜¯è°ƒç”¨ goroutine æ‰§è¡Œ&nbsp;&nbsp;&nbsp;&nbsp;// 1. åˆ›å»ºgoroutine&nbsp;&nbsp;&nbsp;&nbsp;// 2. åœ¨goroutineæ‰§è¡Œhello&nbsp;&nbsp;&nbsp;&nbsp;wg.Add(1) // è®¡æ—¶å™¨åŠ 1, å¯åŠ¨ä¸€ä¸ª goroutine&nbsp;&nbsp;&nbsp;&nbsp;go hello()&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"func hello on\")&nbsp;&nbsp;&nbsp;&nbsp;wg.Wait() // ç­‰å¾…wgå…¨éƒ¨æ‰§è¡Œç»“æŸ(Done)æ‰ç»“æŸ} goroutineå’Œçº¿ç¨‹çš„åŒºåˆ« https://www.liwenzhou.com/posts/Go/14_concurrence/ Goçš„ goroutine å¯åŠ¨ä¸€ä¸ªå ç”¨2KBå†…å­˜(çº¿ç¨‹å ç”¨2MB), è€Œä¸” goroutineå¯åŠ¨æ€æ‰©å……å¤§å°(æœ€å¤§1GB), goroutineå¯10wä¸ªä¹Ÿæ²¡é—®é¢˜ å¼€å¯çº¿ç¨‹è°ƒåº¦æ˜¯ä»£ç è¯·æ±‚ç³»ç»Ÿåˆ›å»ºç„¶åæä¾›ç»™ä»£ç æ“ä½œ, goroutineæ˜¯ç”±Goçš„è¿è¡Œæ—¶(runtime)è‡ªå·±è°ƒåº¦, è¿™ä¸ªè°ƒåº¦å™¨ä½¿ç”¨ä¸€ä¸ª m:n è°ƒåº¦æŠ€æœ¯(å¤ç”¨/è°ƒåº¦mä¸ªgoroutineåˆ°nä¸ªosçº¿ç¨‹),æ‰€ä»¥ä¸éœ€è¦åˆ‡æ¢å†…æ ¸è¯­å¢ƒ,æˆæœ¬ä½,é€Ÿåº¦å¿« GOMAXPROCS(m:nçš„n) å†³å®šGoè¿è¡Œæ—¶ä½¿ç”¨å‡ ä¸ªçº¿ç¨‹æ¥æ‰§è¡ŒGoç¨‹åº, é»˜è®¤å€¼æ˜¯æœºå™¨ä¸Šçš„CPUæ ¸å¿ƒæ•° Goè¯­è¨€1.5ç‰ˆæœ¬åé»˜è®¤è·‘æ»¡æ ¸å¿ƒ, å¯ä»¥é€šè¿‡ runtime.GOMAXPROCS(æ ¸å¿ƒæ•°) æ¥è®¾ç½®æ ¸å¿ƒ ä¸€ä¸ªæ“ä½œç³»ç»Ÿå¯å¼€å¯å¤šä¸ª goroutine Goç¨‹åºå¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªç³»ç»Ÿçº¿ç¨‹ goroutineå’Œosçº¿ç¨‹æ˜¯å¤šå¯¹å¤šçš„å…³ç³», m:n(goroutine : CPUæ ¸å¿ƒ) channel ç®¡é“ ä¸€èˆ¬æ¥è¯´å…¶ä»–è¯­è¨€å¸¸ä½¿ç”¨å¤šä¸ªçº¿ç¨‹ä½¿ç”¨åŒä¸€ä¸ªå…±äº«å†…å­˜,ä½†æ˜¯è¦è€ƒè™‘åˆ°æ•°æ®çš„å®‰å…¨ä¸€è‡´æ€§å¿…é¡»è¦åŠ é”, è¿™å°±å¯¼è‡´äº†é€Ÿåº¦å’Œæ•ˆç‡ä¼šä¸‹é™ Goè¯­è¨€ä¸æå€¡ä½¿ç”¨å…±äº«å†…å­˜çš„æ–¹å¼ channelåˆ™æ˜¯åœ¨å¤šä¸ª goroutine ä¸­æ­å»ºç®¡é“äº’ä¼ æ¶ˆæ¯ channelæ˜¯å¼•ç”¨ç±»å‹ channelå¯ä»¥ä¸å…³é—­,Goçš„åƒåœ¾å›æ”¶ä¼šè‡ªå·±å…³é—­ 123456789101112131415package mainimport \"fmt\"// channelfunc main() {&nbsp;&nbsp;&nbsp;&nbsp;// c1ä¸ºchanç±»å‹çš„ç®¡é“, ä¼ è¾“1ä¸ªint&nbsp;&nbsp;&nbsp;&nbsp;c1 := make(chan int, 1) // chanæ˜¯å¼•ç”¨ç±»å‹æ‰€ä»¥éœ€è¦make&nbsp;&nbsp;&nbsp;&nbsp;// channel å‘é€å’Œæ¥æ”¶ &lt;-&nbsp;&nbsp;&nbsp;&nbsp;c1 &lt;- 10 // æŠŠ10å‘é€åˆ°c1&nbsp;&nbsp;&nbsp;&nbsp;ret := &lt;-c1 // æ¥æ”¶c1(ä¸å†™retåˆ™æ˜¯ä¸¢å¼ƒå€¼)&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(ret)&nbsp;&nbsp;&nbsp;&nbsp;close(c1) // å…³é—­ç®¡é“, å…³é—­çš„é€šé“å†æ¥å—å€¼ä¸æŠ¥é”™,å¦‚æœç®¡é“æœ‰å€¼,åˆ™ä¾æ¬¡å–å‡º,æ— å€¼ å–åˆ°å¯¹åº”å€¼çš„é›¶å€¼, ä¸å¯å‘é€å€¼, ä¸å¯é‡å¤å…³é—­ä¸€ä¸ªé€šé“} æ— ç¼“å†²é€šé“å’Œç¼“å†²é€šé“ åœ¨åˆ›å»º channel æ—¶, makeéœ€è¦å¸¦ä¸Šé•¿åº¦, è¿™ä¸ªé•¿åº¦å®é™…ä¸Šæ˜¯ä¸€ä¸ªç¼“å†²åŒº, å¯ä»¥ç†è§£ä¸ºç®¡é“é•¿åº¦, å¦‚æœä¸º10ä»£è¡¨å½“æ•°æ®æ²¡æœ‰æ¥æ”¶æ—¶, æ•°æ®å­˜å‚¨åœ¨ç®¡é“é‡Œå¯ä»¥å­˜å‚¨10ä¸ª ä¸å†™é•¿åº¦ä»£è¡¨æ— ç¼“å†², æ­¤æ—¶é€šè¿‡ç®¡é“ä¼ è¾“æ•°æ®æ—¶å¿…é¡»åŒæ—¶æœ‰äººåœ¨æ¥æ”¶å¦åˆ™ä¼šæŠ¥ æ­»é” é”™è¯¯ 1234567891011121314package mainimport \"fmt\"// channelfunc recv(ch chan bool) {&nbsp;&nbsp;&nbsp;&nbsp;&lt;-ch}func main() {&nbsp;&nbsp;&nbsp;&nbsp;c1 := make(chan bool) // åˆ›å»ºæ— ç¼“å†²é€šé“(ä¸è§„å®šé•¿åº¦)&nbsp;&nbsp;&nbsp;&nbsp;go recv(c1)&nbsp;&nbsp;&nbsp;&nbsp;c1 &lt;- false // ä¸ä¼šæŠ¥é”™å› ä¸ºrecvå‡½æ•°ä¸­å·²ç»åœ¨ç­‰å¾…æ¥æ”¶c1çš„å€¼&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(len(c1), cap(c1)) // len()è·å–å½“å‰ç®¡é“çš„å€¼é•¿åº¦, cap()è·å–ç®¡é“å®¹é‡} åˆ¤æ–­é€šé“æ˜¯å¦å…³é—­ ç”±äºé€šé“å…³é—­åä¹Ÿèƒ½å–å‡º0å€¼,æ‰€ä»¥æˆ‘ä»¬è¦å…ˆåˆ¤æ–­é€šé“æ˜¯å¦å·²å…³é—­ 12345678910111213141516171819202122232425262728package mainimport \"fmt\"// åˆ¤æ–­é€šé“æ˜¯å¦å…³é—­func send(ch chan int) {&nbsp;&nbsp;&nbsp;&nbsp;for i := 0; i &lt; 10; i++ {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch &lt;- i&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;defer close(ch)}func main() {&nbsp;&nbsp;&nbsp;&nbsp;var ch1 = make(chan int, 100)&nbsp;&nbsp;&nbsp;&nbsp;go send(ch1)&nbsp;&nbsp;&nbsp;&nbsp;// æ–¹æ³•1&nbsp;&nbsp;&nbsp;&nbsp;for {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret, ok := &lt;-ch1 // å¦‚é€šé“å…³é—­okä¸ºfalse&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if !ok {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(ret)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// æ–¹æ³•2&nbsp;&nbsp;&nbsp;&nbsp;for ret := range ch1 { // rangeè‡ªå·±åˆ¤æ–­&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(ret)&nbsp;&nbsp;&nbsp;&nbsp;}} selectå¤šè·¯å¤ç”¨ æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦æŒ‡å®šå¤šä¸ªé€šé“,å…¶ä¸­ä¸€ä¸ªé€šé“æœ‰å€¼å°±ç»§ç»­èµ°ä¸‹å» Goå†…ç½®äº† select æ–¹æ³•æ¥å¸®åŠ©æˆ‘ä»¬å®ç° 1234567891011121314151617181920212223242526272829303132333435package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"time\")// selectå¤šè·¯å¤ç”¨var ch1 = make(chan string, 100)var ch2 = make(chan string, 100)func f1(ch chan string) {&nbsp;&nbsp;&nbsp;&nbsp;for i := 0; i &lt; 10; i++ {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch1 &lt;- fmt.Sprintf(\"f1:%d\", i)&nbsp;&nbsp;&nbsp;&nbsp;}}func f2(ch chan string) {&nbsp;&nbsp;&nbsp;&nbsp;for i := 0; i &lt; 10; i++ {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch2 &lt;- fmt.Sprintf(\"f2:%d\", i)&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;go f1(ch1)&nbsp;&nbsp;&nbsp;&nbsp;go f2(ch2)&nbsp;&nbsp;&nbsp;&nbsp;for {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select { // selectå¤šä¸ªreté€šé“&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case ret := &lt;-ch1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(ret)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case ret := &lt;-ch2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(ret)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"å–ä¸åˆ°å€¼\")&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.Sleep(time.Millisecond * 500)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}} å•å‘é€šé“ è®¾ç½®é€šé“çš„ å¯è¯»/å¯å†™ 12345678910111213package main// ä¼ å…¥çš„chanåªèƒ½å†™func p(ch chan&lt;- int) {}// ä¼ å…¥çš„chanåªèƒ½è¯»func p1(ch &lt;-chan int) {}// ä¼ å…¥çš„chanå¯è¯»å†™func p2(ch chan int) {} å¹¶å‘æ§åˆ¶ä¸é” å¹¶å‘æ—¶,æœ‰å¯èƒ½é‡åˆ°å¤šä¸ª goroutine åŒæ—¶æ“ä½œä¸€ä¸ªå†…å­˜æ•°æ®çš„æƒ…å†µ, è¿™æ—¶å€™å°±ä¼šå‘ç”Ÿæ— æ³•é¢„æ–™çš„æ•°æ®ç´Šä¹±, æ­¤æ—¶æˆ‘ä»¬éœ€è¦ç»™è¿™ä¸ªæ•°æ®åŠ é”, åœ¨æŸä¸ª goroutine æ“ä½œæ•°æ®æ—¶å…¶ä»– goroutine ç­‰å¾…, è¿™æ ·å°±ä¿è¯äº†æ•°æ®çš„å®‰å…¨ https://www.liwenzhou.com/posts/Go/14_concurrence/ äº’æ–¥é” åŒæ—¶åªèƒ½ä¸€ä¸ª goroutine æ“ä½œä¸€ä¸ªæ•°æ® 123456789101112131415161718192021222324252627282930package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"sync\")var num intvar wg sync.WaitGroup// äº’æ–¥é”var lock sync.Mutexfunc add() {&nbsp;&nbsp;&nbsp;&nbsp;defer wg.Done()&nbsp;&nbsp;&nbsp;&nbsp;for i := 0; i &lt; 5000; i++ {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lock.Lock() // åŠ äº’æ–¥é”&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num = num + 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lock.Unlock() // è§£é”&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;wg.Add(5)&nbsp;&nbsp;&nbsp;&nbsp;go add()&nbsp;&nbsp;&nbsp;&nbsp;go add()&nbsp;&nbsp;&nbsp;&nbsp;go add()&nbsp;&nbsp;&nbsp;&nbsp;go add()&nbsp;&nbsp;&nbsp;&nbsp;go add()&nbsp;&nbsp;&nbsp;&nbsp;wg.Wait()&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(num)} è¯»å†™äº’æ–¥é” åŒä¸€æ—¶é—´åªèƒ½ä¸€ä¸ª goroutine å†™, ä½†æ˜¯ä¸é™åˆ¶è¯»çš„ goroutine æ­¤é”é€‚ç”¨äº è¯»æ¬¡æ•°å¤š, å†™æ¬¡æ•°å°‘ çš„æƒ…å†µä¸‹ å¦‚è¯»å†™é¢‘ç‡ä¸€è‡´æˆ–å†™å¤šäºè¯»åˆ™æ¨èä½¿ç”¨äº’æ–¥é” 123456789101112131415161718192021222324252627282930313233343536package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"sync\")var num intvar wg sync.WaitGroup// è¯»å†™é”var rwLock sync.RWMutexfunc add() {&nbsp;&nbsp;&nbsp;&nbsp;defer wg.Done()&nbsp;&nbsp;&nbsp;&nbsp;for i := 0; i &lt; 5000; i++ {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if i%2 == 0 {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rwLock.RLock() // åŠ è¯»é”&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rwLock.RUnlock() // é‡Šæ”¾è¯»é”&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rwLock.Lock() // åŠ å†™é”&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num = num + 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rwLock.Unlock() // é‡Šæ”¾å†™é”&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;wg.Add(5)&nbsp;&nbsp;&nbsp;&nbsp;go add()&nbsp;&nbsp;&nbsp;&nbsp;go add()&nbsp;&nbsp;&nbsp;&nbsp;go add()&nbsp;&nbsp;&nbsp;&nbsp;go add()&nbsp;&nbsp;&nbsp;&nbsp;go add()&nbsp;&nbsp;&nbsp;&nbsp;wg.Wait()&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(num)} mapçš„å¹¶å‘ å¹¶å‘æ—¶mapä¼šè‡ªä¸»æŠ¥é”™,è¿™æ˜¯ä¸€ä¸ªè‡ªå·±çš„ä¿æŠ¤æœºåˆ¶, é˜²æ­¢å¤šä¸ª foroutine å¯¼è‡´kvä¸ä¸€è‡´ Goå†…ç½®äº† sync.map ,å¹¶å‘å®‰å…¨/å¼€ç®±å³ç”¨ https://www.liwenzhou.com/posts/Go/14_concurrence/#autoid-4-3-0 12345678910111213141516171819202122232425package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"strconv\"&nbsp;&nbsp;&nbsp;&nbsp;\"sync\")// sync.mapvar m = sync.Map{} // è‡ªå·±åŠ äº†äº’æ–¥é”func main() {&nbsp;&nbsp;&nbsp;&nbsp;wg := sync.WaitGroup{}&nbsp;&nbsp;&nbsp;&nbsp;for i := 0; i &lt; 10; i++ {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wg.Add(1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;go func(n int) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key := strconv.Itoa(n)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m.Store(key, n)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v, _ := m.Load(key)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(key, v)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wg.Done()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}(i)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;wg.Wait()} å•å…ƒæµ‹è¯• å¼€å‘äººå‘˜è‡ªæµ‹ å¤§çš„ç¨‹åºåˆ†ä¸ºå¤šä¸ªåŠŸèƒ½å•å…ƒ, å¼€å‘å®Œä¸€ä¸ªå•å…ƒåè‡ªå·±è¿›è¡Œæµ‹è¯• https://www.liwenzhou.com/posts/Go/16_test/ Goè¯­è¨€å•å…ƒæµ‹è¯• Go å†…ç½®å•å…ƒæµ‹è¯•åŒ… testing ä¸€èˆ¬æˆ‘ä»¬ä¼šç¼–å†™ç›¸å…³çš„å‡½æ•°ä½œä¸ºæµ‹è¯•ä½¿ç”¨ æµ‹è¯•å‡½æ•°çš„å‘½åéœ€éµå®ˆç›¸å…³çº¦å®š æµ‹è¯•å‡½æ•°ç»Ÿä¸€å†™åœ¨ä¸€ä¸ªä»¥ _test.go ä¸ºåç¼€åçš„æ–‡ä»¶ä¸­, åœ¨ç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨å¿½ç•¥æ­¤ç±»æ–‡ä»¶ ä½¿ç”¨ go test å‘½ä»¤ä¼šè‡ªå·±å¯»æ‰¾å½“å‰åŒ…å†…çš„ *_test.go æ–‡ä»¶, ç„¶åç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„mainåŒ…ç”¨äºè°ƒç”¨ç›¸åº”çš„æµ‹è¯•å‡½æ•°ï¼Œç„¶åæ„å»ºå¹¶è¿è¡Œã€æŠ¥å‘Šæµ‹è¯•ç»“æœï¼Œæœ€åæ¸…ç†æµ‹è¯•ä¸­ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶ã€‚ åŸºå‡†æµ‹è¯• æµ‹è¯•è¿è¡Œæ—¶é—´/å ç”¨èµ„æºç­‰ç­‰æ•°æ® https://www.liwenzhou.com/posts/Go/16_test/#autoid-2-5-0 Setupå’ŒTearDown æµ‹è¯•å¼€å§‹å‰å’Œç»“æŸåæ‰§è¡Œçš„é€»è¾‘ https://www.liwenzhou.com/posts/Go/16_test/#autoid-3-5-0 ç½‘ç»œç¼–ç¨‹ https://www.liwenzhou.com/posts/Go/15_socket/ 123456789101112131415161718192021package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"net/http\")// HTTP serverfunc res(w http.ResponseWriter, r *http.Request) { // æ¥å—å‚æ•°&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(r.Method) // è¯·æ±‚æ–¹å¼&nbsp;&nbsp;&nbsp;&nbsp;r.ParseForm() // è§£ææ•°æ®&nbsp;&nbsp;&nbsp;&nbsp;r.Form.Get(\"name\") // è·å–formè¡¨å•ä¸­keyä¸ºnameçš„æ•°æ®}func main() {&nbsp;&nbsp;&nbsp;&nbsp;http.HandleFunc(\"/\", res) // è®¿é—®æ ¹è·¯å¾„èµ°reså‡½æ•°&nbsp;&nbsp;&nbsp;&nbsp;err := http.ListenAndServe(\":9090\", nil) // ç›‘å¬æœ¬åœ°ç«¯å£&nbsp;&nbsp;&nbsp;&nbsp;if err != nil { // é”™è¯¯æ•æ‰&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}} MySql https://www.liwenzhou.com/posts/Go/go_mysql/ é©±åŠ¨ä¸‹è½½ go get -u github.com/go-sql-driver/mysql æ™®é€šè¿æ¥ 12345678910111213141516171819202122232425262728package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"database/sql\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysqlfunc main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;// æ³¨å†Œmysqlä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;db, err := sql.Open(\"mysql\", dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// è¿™é‡Œçš„é”™è¯¯åªæ˜¯å‚æ•°æ ¼å¼é”™è¯¯&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"db err\")&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// å°è¯•è¿æ¥æ•°æ®åº“&nbsp;&nbsp;&nbsp;&nbsp;err = db.Ping()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(\"db filed\")&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}} è¿æ¥æ± è¿æ¥ åˆ›å»ºæ•°æ®åº“å¥æŸ„ä¸€èˆ¬æ¯”è¾ƒè€—æ—¶, æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨è¿æ¥æ±  123456789101112131415161718192021222324252627282930313233343536package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"database/sql\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysql(è¿æ¥æ± ç‰ˆ)// DB æ•°æ®åº“è¿æ¥å¥æŸ„var DB *sql.DBfunc initDB(dsn string) (err error) {&nbsp;&nbsp;&nbsp;&nbsp;DB, err = sql.Open(\"mysql\", dsn) // æ³¨æ„æ­¤å¤„æ˜¯å°†å…¨å±€å˜é‡DBèµ‹å€¼mysqlè¿æ¥,æ‰€ä»¥æ˜¯ = è€Œä¸æ˜¯ :=&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;err = DB.Ping()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;} // è®¾ç½®æœ€å¤§è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxOpenConns(100) // æœ€å¤§ç©ºé—²è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxIdleConns(20)&nbsp;&nbsp;&nbsp;&nbsp;return nil}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;err := initDB(dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}} å ä½ç¬¦ ä¸ºé˜²æ­¢SQLæ³¨å…¥, æˆ‘ä»¬é€šå¸¸å°†ç”¨æˆ·ä¿¡æ¯ç­‰å‰ç«¯ä¼ æ¥çš„å¯å˜æ•°æ®é€šè¿‡å ä½ç¬¦æ‹¼æ¥, éœ€è¦æ³¨æ„çš„æ˜¯, ä¸åŒæ•°æ®åº“é©±åŠ¨çš„å ä½ç¬¦ä¸ä¸€æ · æŸ¥è¯¢æ•°æ® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"database/sql\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysql(è¿æ¥æ± ç‰ˆ) å¢åˆ æ”¹æŸ¥// DB æ•°æ®åº“è¿æ¥å¥æŸ„var DB *sql.DB// User ç»“æ„ä½“type User struct {&nbsp;&nbsp;&nbsp;&nbsp;id int&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;age int}func initDB(dsn string) (err error) {&nbsp;&nbsp;&nbsp;&nbsp;DB, err = sql.Open(\"mysql\", dsn) // æ³¨æ„æ­¤å¤„æ˜¯å°†å…¨å±€å˜é‡DBèµ‹å€¼mysqlè¿æ¥,æ‰€ä»¥æ˜¯ = è€Œä¸æ˜¯ :=&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;err = DB.Ping()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æœ€å¤§è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxOpenConns(100)&nbsp;&nbsp;&nbsp;&nbsp;// æœ€å¤§ç©ºé—²è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxIdleConns(20)&nbsp;&nbsp;&nbsp;&nbsp;return nil}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;err := initDB(dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;var user User&nbsp;&nbsp;&nbsp;&nbsp;// æŸ¥è¯¢å•æ¡æ•°æ®&nbsp;&nbsp;&nbsp;&nbsp;sqlStr := \"SELECT id,name,age FROM `user` WHERE id=1\"&nbsp;&nbsp;&nbsp;&nbsp;err = DB.QueryRow(sqlStr).Scan(&amp;user.id, &amp;user.name, &amp;user.age)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(user.id, user.name, user.age)&nbsp;&nbsp;&nbsp;&nbsp;var user2 User&nbsp;&nbsp;&nbsp;&nbsp;// æŸ¥è¯¢å¤šæ¡&nbsp;&nbsp;&nbsp;&nbsp;sqlStr2 := \"SELECT id,name,age FROM `user` where id &gt; ?\" // ?æŒ‡å ä½ç¬¦&nbsp;&nbsp;&nbsp;&nbsp;rows, err := DB.Query(sqlStr2, 0) // å°†0æ›¿æ¢åˆ°?&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// rowsæœ€åè¦close,ä¸closeä¼šå¤¯ä½&nbsp;&nbsp;&nbsp;&nbsp;defer rows.Close()&nbsp;&nbsp;&nbsp;&nbsp;// å¾ªç¯è¯»å–æ•°æ®&nbsp;&nbsp;&nbsp;&nbsp;for rows.Next() {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err = rows.Scan(&amp;user2.id, &amp;user2.name, &amp;user2.age)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(user2)&nbsp;&nbsp;&nbsp;&nbsp;}} æ’å…¥æ•°æ® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"database/sql\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysql(è¿æ¥æ± ç‰ˆ) å¢åˆ æ”¹æŸ¥// DB æ•°æ®åº“è¿æ¥å¥æŸ„var DB *sql.DB// User ç»“æ„ä½“type User struct {&nbsp;&nbsp;&nbsp;&nbsp;id int&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;age int}func initDB(dsn string) (err error) {&nbsp;&nbsp;&nbsp;&nbsp;DB, err = sql.Open(\"mysql\", dsn) // æ³¨æ„æ­¤å¤„æ˜¯å°†å…¨å±€å˜é‡DBèµ‹å€¼mysqlè¿æ¥,æ‰€ä»¥æ˜¯ = è€Œä¸æ˜¯ :=&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;err = DB.Ping()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æœ€å¤§è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxOpenConns(100)&nbsp;&nbsp;&nbsp;&nbsp;// æœ€å¤§ç©ºé—²è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxIdleConns(20)&nbsp;&nbsp;&nbsp;&nbsp;return nil}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;err := initDB(dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// æ’å…¥æ•°æ®&nbsp;&nbsp;&nbsp;&nbsp;sqlStr := \"INSERT INTO `user`(`name`, age) VALUES(?, ?)\"&nbsp;&nbsp;&nbsp;&nbsp;name := \"u3\"&nbsp;&nbsp;&nbsp;&nbsp;age := \"33\"&nbsp;&nbsp;&nbsp;&nbsp;// æ‰§è¡Œ&nbsp;&nbsp;&nbsp;&nbsp;ret, err := DB.Exec(sqlStr, name, age)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è·å–åˆ°æ’å…¥æ•°æ®çš„id(ä¸åŒæ•°æ®åº“æœ‰ä¸åŒå®ç°)&nbsp;&nbsp;&nbsp;&nbsp;ID, err := ret.LastInsertId()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(ID)} æ›´æ–°æ•°æ® 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"database/sql\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysql(è¿æ¥æ± ç‰ˆ) å¢åˆ æ”¹æŸ¥// DB æ•°æ®åº“è¿æ¥å¥æŸ„var DB *sql.DB// User ç»“æ„ä½“type User struct {&nbsp;&nbsp;&nbsp;&nbsp;id int&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;age int}func initDB(dsn string) (err error) {&nbsp;&nbsp;&nbsp;&nbsp;DB, err = sql.Open(\"mysql\", dsn) // æ³¨æ„æ­¤å¤„æ˜¯å°†å…¨å±€å˜é‡DBèµ‹å€¼mysqlè¿æ¥,æ‰€ä»¥æ˜¯ = è€Œä¸æ˜¯ :=&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;err = DB.Ping()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æœ€å¤§è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxOpenConns(100)&nbsp;&nbsp;&nbsp;&nbsp;// æœ€å¤§ç©ºé—²è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxIdleConns(20)&nbsp;&nbsp;&nbsp;&nbsp;return nil}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;err := initDB(dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// æ›´æ–°æ•°æ®&nbsp;&nbsp;&nbsp;&nbsp;sqlStr := \"UPDATE `user` SET age=? WHERE id=?\"&nbsp;&nbsp;&nbsp;&nbsp;age := 222&nbsp;&nbsp;&nbsp;&nbsp;ID := 2&nbsp;&nbsp;&nbsp;&nbsp;ret, err := DB.Exec(sqlStr, age, ID)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è¿”å›å—å½±å“çš„è¡Œæ•°&nbsp;&nbsp;&nbsp;&nbsp;rowLen, err := ret.RowsAffected()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(rowLen)} åˆ é™¤æ•°æ® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"database/sql\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysql(è¿æ¥æ± ç‰ˆ) å¢åˆ æ”¹æŸ¥// DB æ•°æ®åº“è¿æ¥å¥æŸ„var DB *sql.DB// User ç»“æ„ä½“type User struct {&nbsp;&nbsp;&nbsp;&nbsp;id int&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;age int}func initDB(dsn string) (err error) {&nbsp;&nbsp;&nbsp;&nbsp;DB, err = sql.Open(\"mysql\", dsn) // æ³¨æ„æ­¤å¤„æ˜¯å°†å…¨å±€å˜é‡DBèµ‹å€¼mysqlè¿æ¥,æ‰€ä»¥æ˜¯ = è€Œä¸æ˜¯ :=&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;err = DB.Ping()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æœ€å¤§è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxOpenConns(100)&nbsp;&nbsp;&nbsp;&nbsp;// æœ€å¤§ç©ºé—²è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxIdleConns(20)&nbsp;&nbsp;&nbsp;&nbsp;return nil}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;err := initDB(dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// åˆ é™¤æ•°æ®&nbsp;&nbsp;&nbsp;&nbsp;sqlStr := \"DELETE FROM `user`WHERE id=?\"&nbsp;&nbsp;&nbsp;&nbsp;ID := 3&nbsp;&nbsp;&nbsp;&nbsp;ret, err := DB.Exec(sqlStr, ID)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è¿”å›å—å½±å“çš„è¡Œæ•°&nbsp;&nbsp;&nbsp;&nbsp;rowLen, err := ret.RowsAffected()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(rowLen)} é¢„å¤„ç† sqlyé¢„å¤„ç†æ˜¯åªä¸åœ¨æœ¬åœ°è¿›è¡ŒSQLè¯­å¥çš„æ‹¼æ¥, è€Œæ˜¯å°†sqlè¯­å¥å’Œæ›¿æ¢çš„å­—ç¬¦ä¸²åˆ†å¼€å‘é€è‡³sql server ,ç”±sql server å¯¹sqlè¯­å¥å’Œå­—ç¬¦ä¸²æ‹¼æ¥/æ›¿æ¢/æ‰§è¡Œ. é¢„å¤„ç†åœ¨åº”å¯¹å¤§é‡é‡å¤sqlè¯­å¥çš„æƒ…å†µä¸‹ä¼šæé«˜æ‰§è¡Œæ•ˆç‡(ä¾‹å¦‚æ‰§è¡ŒæŸä¸ªè¡¨çš„100æ¬¡ç›¸åŒæ“ä½œ), è€Œä¸”å¯ä»¥é¿å…SQLæ³¨å…¥(ä¸ä»£è¡¨ä¸é¢„å¤„ç†å°±ä¸åšé˜²sqlæ³¨å…¥) é¢„å¤„ç†å¢åˆ æ”¹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"database/sql\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysql(è¿æ¥æ± ç‰ˆ) å¢åˆ æ”¹æŸ¥// DB æ•°æ®åº“è¿æ¥å¥æŸ„var DB *sql.DB// User ç»“æ„ä½“type User struct {&nbsp;&nbsp;&nbsp;&nbsp;id int&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;age int}func initDB(dsn string) (err error) {&nbsp;&nbsp;&nbsp;&nbsp;DB, err = sql.Open(\"mysql\", dsn) // æ³¨æ„æ­¤å¤„æ˜¯å°†å…¨å±€å˜é‡DBèµ‹å€¼mysqlè¿æ¥,æ‰€ä»¥æ˜¯ = è€Œä¸æ˜¯ :=&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;err = DB.Ping()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æœ€å¤§è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxOpenConns(100)&nbsp;&nbsp;&nbsp;&nbsp;// æœ€å¤§ç©ºé—²è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxIdleConns(20)&nbsp;&nbsp;&nbsp;&nbsp;return nil}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;err := initDB(dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// é¢„å¤„ç†&nbsp;&nbsp;&nbsp;&nbsp;sqlStr := \"INSERT INTO `user`(`name`, age) VALUES(?, ?)\"&nbsp;&nbsp;&nbsp;&nbsp;// ä¸æ‹¼æ¥&nbsp;&nbsp;&nbsp;&nbsp;stmt, err := DB.Prepare(sqlStr)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// æ³¨å†Œå…³é—­&nbsp;&nbsp;&nbsp;&nbsp;defer stmt.Close()&nbsp;&nbsp;&nbsp;&nbsp;// æ‰§è¡Œé‡å¤çš„æ’å…¥å‘½ä»¤&nbsp;&nbsp;&nbsp;&nbsp;for i := 4; i &lt; 20; i++ {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name := fmt.Sprintf(\"u%d\", i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stmt.Exec(name, i)&nbsp;&nbsp;&nbsp;&nbsp;}} é¢„å¤„ç†æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"database/sql\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysql(è¿æ¥æ± ç‰ˆ) å¢åˆ æ”¹æŸ¥// DB æ•°æ®åº“è¿æ¥å¥æŸ„var DB *sql.DB// User ç»“æ„ä½“type User struct {&nbsp;&nbsp;&nbsp;&nbsp;id int&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;age int}func initDB(dsn string) (err error) {&nbsp;&nbsp;&nbsp;&nbsp;DB, err = sql.Open(\"mysql\", dsn) // æ³¨æ„æ­¤å¤„æ˜¯å°†å…¨å±€å˜é‡DBèµ‹å€¼mysqlè¿æ¥,æ‰€ä»¥æ˜¯ = è€Œä¸æ˜¯ :=&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;err = DB.Ping()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æœ€å¤§è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxOpenConns(100)&nbsp;&nbsp;&nbsp;&nbsp;// æœ€å¤§ç©ºé—²è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxIdleConns(20)&nbsp;&nbsp;&nbsp;&nbsp;return nil}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;err := initDB(dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// é¢„å¤„ç†&nbsp;&nbsp;&nbsp;&nbsp;sqlStr := \"SELECT id, name, age FROM user WHERE id=?\"&nbsp;&nbsp;&nbsp;&nbsp;// ä¸æ‹¼æ¥&nbsp;&nbsp;&nbsp;&nbsp;stmt, err := DB.Prepare(sqlStr)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// æ³¨å†Œå…³é—­&nbsp;&nbsp;&nbsp;&nbsp;defer stmt.Close()&nbsp;&nbsp;&nbsp;&nbsp;// æ‰§è¡Œé‡å¤çš„æ’å…¥å‘½ä»¤&nbsp;&nbsp;&nbsp;&nbsp;for i := 1; i &lt; 20; i++ {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rows, err := stmt.Query(i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defer rows.Close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var name string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var id int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var age int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for rows.Next() {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rows.Scan(&amp;id, &amp;name, &amp;age)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(id, name, age)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}} äº‹åŠ¡ äº‹åŠ¡å¼€å§‹å(Begin), å¿…é¡»ä»¥ å›æ»š(Rollback) æˆ– æäº¤(Commit) ç»“æŸ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"database/sql\"&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysql(è¿æ¥æ± ç‰ˆ) äº‹åŠ¡// DB æ•°æ®åº“è¿æ¥å¥æŸ„var DB *sql.DB// User ç»“æ„ä½“type User struct {&nbsp;&nbsp;&nbsp;&nbsp;id int&nbsp;&nbsp;&nbsp;&nbsp;name string&nbsp;&nbsp;&nbsp;&nbsp;age int}func initDB(dsn string) (err error) {&nbsp;&nbsp;&nbsp;&nbsp;DB, err = sql.Open(\"mysql\", dsn) // æ³¨æ„æ­¤å¤„æ˜¯å°†å…¨å±€å˜é‡DBèµ‹å€¼mysqlè¿æ¥,æ‰€ä»¥æ˜¯ = è€Œä¸æ˜¯ :=&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;err = DB.Ping()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æœ€å¤§è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxOpenConns(100)&nbsp;&nbsp;&nbsp;&nbsp;// æœ€å¤§ç©ºé—²è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxIdleConns(20)&nbsp;&nbsp;&nbsp;&nbsp;return nil}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;err := initDB(dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// å¼€å§‹äº‹åŠ¡&nbsp;&nbsp;&nbsp;&nbsp;tx, err := DB.Begin()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// æ‰§è¡Œäº‹åŠ¡å†…æ“ä½œ&nbsp;&nbsp;&nbsp;&nbsp;sqlStr := \"UPDATE user SET age=? WHERE id=?\"&nbsp;&nbsp;&nbsp;&nbsp;age := \"30\"&nbsp;&nbsp;&nbsp;&nbsp;ID := \"3\"&nbsp;&nbsp;&nbsp;&nbsp;// æ‰§è¡Œ&nbsp;&nbsp;&nbsp;&nbsp;_, err = tx.Exec(sqlStr, age, ID)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// å‡ºç°é”™è¯¯å›æ»š&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tx.Rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;age = \"40\"&nbsp;&nbsp;&nbsp;&nbsp;ID = \"4\"&nbsp;&nbsp;&nbsp;&nbsp;// æ‰§è¡Œ&nbsp;&nbsp;&nbsp;&nbsp;_, err = tx.Exec(sqlStr, age, ID)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// å‡ºç°é”™è¯¯å›æ»š&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tx.Rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// èµ°åˆ°è¿™é‡Œè¯æ˜ä¸¤æ¡è¯­å¥éƒ½æ‰§è¡ŒæˆåŠŸ&nbsp;&nbsp;&nbsp;&nbsp;// commitæäº¤äº‹åŠ¡&nbsp;&nbsp;&nbsp;&nbsp;err = tx.Commit()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// commitä¹Ÿå¯èƒ½å¤±è´¥&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tx.Rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}} ç¬¬ä¸‰æ–¹åº“ SQLX ç¬¬ä¸‰æ–¹åº“ sqlx èƒ½ç®€åŒ–æ“ä½œ, ç‰¹åˆ«æ˜¯æŸ¥è¯¢, èƒ½å¤Ÿæé«˜å¼€å‘æ•ˆç‡ å®‰è£… 1go get -u github.com/jmoiron/sqlx åŸºæœ¬ä½¿ç”¨ æŸ¥ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/jmoiron/sqlx\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysql(è¿æ¥æ± ç‰ˆ)// DB æ•°æ®åº“è¿æ¥å¥æŸ„var DB *sqlx.DB// User ç»“æ„ä½“type User struct {&nbsp;&nbsp;&nbsp;&nbsp;ID int `db:\"id\"` // dbçš„tagä¸ºsqlxæ‰€ç”¨,æ ‡è®°å¯¹åº”çš„å­—æ®µå&nbsp;&nbsp;&nbsp;&nbsp;Name string `db:\"name\"`&nbsp;&nbsp;&nbsp;&nbsp;Age int `db:\"age\"`}func initDB(dsn string) (err error) {&nbsp;&nbsp;&nbsp;&nbsp;DB, err = sqlx.Connect(\"mysql\", dsn) // æ³¨æ„æ­¤å¤„æ˜¯å°†å…¨å±€å˜é‡DBèµ‹å€¼mysqlè¿æ¥,æ‰€ä»¥æ˜¯ = è€Œä¸æ˜¯ :=&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æœ€å¤§è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxOpenConns(100)&nbsp;&nbsp;&nbsp;&nbsp;// æœ€å¤§ç©ºé—²è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxIdleConns(20)&nbsp;&nbsp;&nbsp;&nbsp;return nil}// æŸ¥è¯¢å•è¡Œfunc queryDemo() {&nbsp;&nbsp;&nbsp;&nbsp;sqlStr := \"SELECT id, name, age FROM user WHERE id=?\"&nbsp;&nbsp;&nbsp;&nbsp;var user User&nbsp;&nbsp;&nbsp;&nbsp;err := DB.Get(&amp;user, sqlStr, 1)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(user)}// æŸ¥è¯¢å¤šè¡Œfunc querysDemo() {&nbsp;&nbsp;&nbsp;&nbsp;sqlStr := \"SELECT id, name, age FROM user WHERE id&gt;?\"&nbsp;&nbsp;&nbsp;&nbsp;var users []User // åˆ‡ç‰‡æ¯ä¸ªéƒ½æ˜¯User&nbsp;&nbsp;&nbsp;&nbsp;err := DB.Select(&amp;users, sqlStr, 1)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;for _, user := range users {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(user)&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;err := initDB(dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// queryDemo()&nbsp;&nbsp;&nbsp;&nbsp;querysDemo()} å¢/åˆ /æ”¹ ä¸ä½¿ç”¨è‡ªå¸¦ sql æ— åŒºåˆ« äº‹åŠ¡ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/jmoiron/sqlx\"&nbsp;&nbsp;&nbsp;&nbsp;// å¯¼å…¥ä¸‹è½½çš„é©±åŠ¨åŒ…, å‰é¢åŠ _ ä»£è¡¨åªç”¨äº†init()&nbsp;&nbsp;&nbsp;&nbsp;_ \"github.com/go-sql-driver/mysql\")// è¿æ¥mysql(è¿æ¥æ± ç‰ˆ)// DB æ•°æ®åº“è¿æ¥å¥æŸ„var DB *sqlx.DB// User ç»“æ„ä½“type User struct {&nbsp;&nbsp;&nbsp;&nbsp;ID int `db:\"id\"` // dbçš„tagä¸ºsqlxæ‰€ç”¨,æ ‡è®°å¯¹åº”çš„å­—æ®µå&nbsp;&nbsp;&nbsp;&nbsp;Name string `db:\"name\"`&nbsp;&nbsp;&nbsp;&nbsp;Age int `db:\"age\"`}func initDB(dsn string) (err error) {&nbsp;&nbsp;&nbsp;&nbsp;DB, err = sqlx.Connect(\"mysql\", dsn) // æ³¨æ„æ­¤å¤„æ˜¯å°†å…¨å±€å˜é‡DBèµ‹å€¼mysqlè¿æ¥,æ‰€ä»¥æ˜¯ = è€Œä¸æ˜¯ :=&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æœ€å¤§è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxOpenConns(100)&nbsp;&nbsp;&nbsp;&nbsp;// æœ€å¤§ç©ºé—²è¿æ¥æ•°(æœ‰é»˜è®¤)&nbsp;&nbsp;&nbsp;&nbsp;DB.SetMaxIdleConns(20)&nbsp;&nbsp;&nbsp;&nbsp;return nil}// äº‹åŠ¡func transDemo() {&nbsp;&nbsp;&nbsp;&nbsp;// å¦‚æœMustExecå¼•å‘panic, Beginxä¼šè‡ªå·±Rollback&nbsp;&nbsp;&nbsp;&nbsp;tx, err := DB.Beginx()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;sqlStr := \"UPDATE user SET age=? WHERE id=?\"&nbsp;&nbsp;&nbsp;&nbsp;age := \"30\"&nbsp;&nbsp;&nbsp;&nbsp;ID := \"3\"&nbsp;&nbsp;&nbsp;&nbsp;tx.MustExec(sqlStr, age, ID) // å¸¦Mustæ–¹æ³•ä¸€èˆ¬æŒ‡ä¸€å‡ºé”™ç›´æ¥panic&nbsp;&nbsp;&nbsp;&nbsp;age = \"40\"&nbsp;&nbsp;&nbsp;&nbsp;ID = \"4\"&nbsp;&nbsp;&nbsp;&nbsp;tx.MustExec(sqlStr, age, ID) // å¸¦Mustæ–¹æ³•ä¸€èˆ¬æŒ‡ä¸€å‡ºé”™ç›´æ¥panic&nbsp;&nbsp;&nbsp;&nbsp;err = tx.Commit() // æäº¤&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tx.Rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// dsn := \"user:password@tcp(ip:port)/databasename\"&nbsp;&nbsp;&nbsp;&nbsp;dsn := \"root:pwd@tcp(cdb-ecfs2q68.bj.tencentcdb.com:10075)/go_test\" // è¿æ¥ä¿¡æ¯&nbsp;&nbsp;&nbsp;&nbsp;err := initDB(dsn)&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)&nbsp;&nbsp;&nbsp;&nbsp;}} Goä½¿ç”¨Redis https://www.liwenzhou.com/posts/Go/go_redis/ 12345678910111213141516171819202122232425262728293031package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/go-redis/redis\")// è¿æ¥æ± var redisDB *redis.Clientfunc initClient() (err error) {&nbsp;&nbsp;&nbsp;&nbsp;redisDB = redis.NewClient(&amp;redis.Options{ // æ›¿æ¢å…¨å±€å˜é‡ redisDB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Addr: \"127.0.0.1:6379\", // HOST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Password: \"\", // å¯†ç &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DB: 0, // æ•°æ®åº“&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;_, err = redisDB.Ping().Result() // è¿æ¥&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;return nil}func main() {&nbsp;&nbsp;&nbsp;&nbsp;err := initClient()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è·å–a1çš„å€¼&nbsp;&nbsp;&nbsp;&nbsp;ret := redisDB.Get(\"a1\").Val()&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(ret)} NSQæ¶ˆæ¯é˜Ÿåˆ— https://www.liwenzhou.com/posts/Go/go_nsq/ ä¾èµ–ç®¡ç†(old) https://www.liwenzhou.com/posts/Go/go_dependency/ å®‰è£… 1go get -u github.com/tools/godep ä¿å­˜ä¾èµ–ä¿¡æ¯ 1godep save ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶å¤¹ Godeps vendor Godeps å­˜æ”¾é¡¹ç›®ä¾èµ–çš„åŒ…ä¿¡æ¯ vendor å­˜æ”¾é¡¹ç›®ä¾èµ–åŒ…çš„å‰¯æœ¬ ä½¿ç”¨ goè¯­è¨€ç¼–è¯‘æ—¶ä¼šä¼˜å…ˆæ‰¾å½“å‰ç›®å½•ä¸‹çš„ vendor æ–‡ä»¶å¤¹,ä¼˜å…ˆä½¿ç”¨ä»–çš„æ¨¡å— ä¾èµ–ç®¡ç†(new) go model 1.1åå®˜æ–¹ä½¿ç”¨çš„ä¾èµ–ç®¡ç† https://www.liwenzhou.com/posts/Go/go_dependency/#autoid-2-5-0 go modå‘½ä»¤ æ‰“å¼€modæ”¯æŒ é»˜è®¤æƒ…å†µä¸‹ go mod æ˜¯å…³é—­çš„, æˆ‘ä»¬éœ€è¦å…ˆæ‰“å¼€æ”¯æŒ 1set GO111MODULE=on ç”Ÿæˆmod 1go mod init é¡¹ç›®å // åˆå§‹åŒ– åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ go.mod æ–‡ä»¶ ä¸‹è½½ä¾èµ– 1go mod download æ ¹æ® go.mod æ–‡ä»¶ä¸‹è½½ä¾èµ– Ginæ¡†æ¶ https://gin-gonic.com/zh-cn/ https://www.liwenzhou.com/posts/Go/Gin_framework/ å®‰è£…/æ›´æ–° 123go get -u github.com/gin-gonic/gin åŸºç¡€ç‰ˆ 12345678910111213141516171819202122232425262728package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"net/http\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/gin-gonic/gin\")func indexHandler(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;// è¿”å› json, çŠ¶æ€ç ä½¿ç”¨httpåŒ…ä¸­çš„StatusOK(200)&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"msg\": \"hello\",&nbsp;&nbsp;&nbsp;&nbsp;})}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// è·¯ç”±æ¨¡å¼ä¸º Default&nbsp;&nbsp;&nbsp;&nbsp;router := gin.Default()&nbsp;&nbsp;&nbsp;&nbsp;// /hello GET è¿”å›JSON çŠ¶æ€ç 200&nbsp;&nbsp;&nbsp;&nbsp;router.GET(\"/hello\", func(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(200, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"msg\": \"hello\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;// /index GET&nbsp;&nbsp;&nbsp;&nbsp;router.GET(\"/index\", indexHandler)&nbsp;&nbsp;&nbsp;&nbsp;// å¯åŠ¨&nbsp;&nbsp;&nbsp;&nbsp;router.Run(\"127.0.0.1:9000\")} Ginè¯·æ±‚æ–¹å¼ Ginæ”¯æŒæ¥å—æ‰€æœ‰è¯·æ±‚æ–¹æ³•, åŒ…æ‹¬GET/POST/PUTç­‰ç­‰ å½“æˆ‘ä»¬ä¸æƒ³åœ¨è·¯ç”±æ—¶å€™é™åˆ¶æŸä¸ªè¯·æ±‚çš„è¯·æ±‚æ–¹å¼æ—¶, é€‰æ‹© Any å³å¯ åœ¨å‡½æ•°å†…è·å–è¯¥è¯·æ±‚çš„æ–¹å¼ä¸º c.Request.Method 1234567891011121314151617181920package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/gin-gonic/gin\")func indexHandler(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;// å­—ç¬¦ä¸²å½¢å¼ POST/GET/PUT ...&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(c.Request.Method)}// è·¯ç”±ç»„func main() {&nbsp;&nbsp;&nbsp;&nbsp;// Defaulté»˜è®¤ä½¿ç”¨Use åŠ äº†ä¸¤ä¸ªå…¨å±€ä¸­é—´ä»¶, Logger(), Recovery(), Loggeræ˜¯æ‰“å°æ—¥å¿—, Recoveryæ˜¯panicè¿”å›500&nbsp;&nbsp;&nbsp;&nbsp;r := gin.Default()&nbsp;&nbsp;&nbsp;&nbsp;// Anyä»£è¡¨åŒ¹é…æ‰€æœ‰è¯·æ±‚æ–¹å¼&nbsp;&nbsp;&nbsp;&nbsp;r.Any(\"/index\", indexHandler)&nbsp;&nbsp;&nbsp;&nbsp;r.Run(\"127.0.0.1:9000\")} Ginçš„æ¸²æŸ“ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/gin-gonic/gin\")func indexHandler(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;// è¿”å› json, çŠ¶æ€ç ä½¿ç”¨httpåŒ…ä¸­çš„StatusOK(200)&nbsp;&nbsp;&nbsp;&nbsp;// c.JSON(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;// &nbsp;\"msg\": \"hello\",&nbsp;&nbsp;&nbsp;&nbsp;// })&nbsp;&nbsp;&nbsp;&nbsp;// è¿”å› HTMl(é…åˆæ¨¡æ¿è¯­æ³•) çŠ¶æ€ç , æ¨¡æ¿æ–‡ä»¶, æ¨¡æ¿æ–‡ä»¶ä¼ å€¼&nbsp;&nbsp;&nbsp;&nbsp;// c.HTML(http.StatusOK, \"web/login.html\", gin.H{&nbsp;&nbsp;&nbsp;&nbsp;// &nbsp;\"msg\": \"login\",&nbsp;&nbsp;&nbsp;&nbsp;// })&nbsp;&nbsp;&nbsp;&nbsp;// è¿”å›ç»“æ„ä½“å¯¹è±¡(ç»“æ„ä½“å­—æ®µé¦–å­—æ¯ä¸€å®šå¤§å†™)&nbsp;&nbsp;&nbsp;&nbsp;// type info struct {&nbsp;&nbsp;&nbsp;&nbsp;// &nbsp;Info string `json:\"info\"`&nbsp;&nbsp;&nbsp;&nbsp;// }&nbsp;&nbsp;&nbsp;&nbsp;// i1 := info{&nbsp;&nbsp;&nbsp;&nbsp;// &nbsp;Info: \"aaa\",&nbsp;&nbsp;&nbsp;&nbsp;// }&nbsp;&nbsp;&nbsp;&nbsp;// c.JSON(http.StatusOK, i1)&nbsp;&nbsp;&nbsp;&nbsp;// è¿”å› XML&nbsp;&nbsp;&nbsp;&nbsp;// c.XML(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;// &nbsp;\"msg\": \"hello\",&nbsp;&nbsp;&nbsp;&nbsp;// })&nbsp;&nbsp;&nbsp;&nbsp;// ç»“æ„ä½“çš„XML&nbsp;&nbsp;&nbsp;&nbsp;// type info struct {&nbsp;&nbsp;&nbsp;&nbsp;// &nbsp;Info string&nbsp;&nbsp;&nbsp;&nbsp;// }&nbsp;&nbsp;&nbsp;&nbsp;// i1 := info{&nbsp;&nbsp;&nbsp;&nbsp;// &nbsp;Info: \"aaa\",&nbsp;&nbsp;&nbsp;&nbsp;// }&nbsp;&nbsp;&nbsp;&nbsp;// c.XML(http.StatusOK, i1)&nbsp;&nbsp;&nbsp;&nbsp;// yaml&nbsp;&nbsp;&nbsp;&nbsp;// c.YAML(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;// &nbsp;\"msg\": \"hello\",&nbsp;&nbsp;&nbsp;&nbsp;// })}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// è·¯ç”±æ¨¡å¼ä¸º Default&nbsp;&nbsp;&nbsp;&nbsp;router := gin.Default()&nbsp;&nbsp;&nbsp;&nbsp;// åŠ è½½æ¨¡æ¿æ–‡ä»¶å¤¹(å½“å‰ç›®å½•ä¸‹çš„tpmplatesæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ¨¡æ¿æ–‡ä»¶)&nbsp;&nbsp;&nbsp;&nbsp;router.LoadHTMLGlob(\"templates/**/*\")&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®é™æ€æ–‡ä»¶ç›®å½•(ä»£ç ä½¿ç”¨è·¯å¾„(urlè®¿é—®), å®é™…è·¯å¾„)&nbsp;&nbsp;&nbsp;&nbsp;router.Static(\"static\", \"./statics\")&nbsp;&nbsp;&nbsp;&nbsp;// /index GET&nbsp;&nbsp;&nbsp;&nbsp;router.GET(\"/index\", indexHandler)&nbsp;&nbsp;&nbsp;&nbsp;// å¯åŠ¨&nbsp;&nbsp;&nbsp;&nbsp;router.Run(\"127.0.0.1:9000\")} Ginè·å–å‚æ•° 12345678910111213141516171819202122232425262728293031323334353637package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"net/http\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/gin-gonic/gin\")func indexHandler(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;// è·å–urlå‚æ•°&nbsp;&nbsp;&nbsp;&nbsp;// a := c.Query(\"a\") // æ²¡æœ‰å‚æ•°ä¸ºnil&nbsp;&nbsp;&nbsp;&nbsp;a := c.DefaultQuery(\"a\", \"av\") // æ²¡æœ‰å‚æ•°é»˜è®¤av&nbsp;&nbsp;&nbsp;&nbsp;// è·å–formå‚æ•°&nbsp;&nbsp;&nbsp;&nbsp;// f := c.PostForm(\"f\") // æ²¡æœ‰å‚æ•°ä¸ºnil&nbsp;&nbsp;&nbsp;&nbsp;f := c.DefaultPostForm(\"f\", \"fdef\") // æ²¡æœ‰å‚æ•°é»˜è®¤ fdef&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"a\": a,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"f\": f,&nbsp;&nbsp;&nbsp;&nbsp;})}func urlHandler(c *gin.Context){&nbsp;&nbsp;&nbsp;&nbsp;// æå–urlå‚æ•°&nbsp;&nbsp;&nbsp;&nbsp;u := c.Param(\"id\")&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"u\": u,&nbsp;&nbsp;&nbsp;&nbsp;})}func main() {&nbsp;&nbsp;&nbsp;&nbsp;// è·¯ç”±æ¨¡å¼ä¸º Default&nbsp;&nbsp;&nbsp;&nbsp;router := gin.Default()&nbsp;&nbsp;&nbsp;&nbsp;// /index GET&nbsp;&nbsp;&nbsp;&nbsp;router.GET(\"/index\", indexHandler)&nbsp;&nbsp;&nbsp;&nbsp;// è·å–URLä¸Šçš„å¯å˜å‚æ•° idä¸ºå¯å˜å‚æ•°&nbsp;&nbsp;&nbsp;&nbsp;router.GET(\"/urlget/:id\", urlHandler)&nbsp;&nbsp;&nbsp;&nbsp;// å¯åŠ¨&nbsp;&nbsp;&nbsp;&nbsp;router.Run(\"127.0.0.1:9000\")} Ginè·³è½¬ HTTPè·³è½¬ 1c.Redirect(çŠ¶æ€ç , \"åœ°å€\") è·¯ç”±è·³è½¬ 12c.Request.URL.Path = \"è·³è½¬è·¯ç”±\"r.HandleContext(c) Ginè·¯ç”±ç»„ å½“è·¯ç”±è¾ƒå¤šæ—¶, æˆ‘ä»¬é€šå¸¸å°†è·¯ç”±åˆ†ç»„ç®¡ç†(ç¾è§‚æ˜“ç»´æŠ¤) æ­¤æ—¶æˆ‘ä»¬å°†è·¯ç”±è¿›è¡Œåˆ†ç»„ å¯å¤šå±‚åµŒå¥—(å±‚è¶Šå¤šæ•ˆç‡è¶Šæ…¢) åœ¨HttpRouteråŒ…å°è£…(ä½¿ç”¨å‰ç¼€æ ‘åŒ¹é…æ¯”å…¶ä»–çš„ä½¿ç”¨åå°„é€Ÿåº¦å¿«å¾ˆå¤š) åŸç†æ˜¯åˆ›é€ äº†è·¯ç”±åœ°å€çš„å‰ç¼€æ ‘(æ‰€ä»¥å±‚è¶Šå¤šè·¯ç”±åŒ¹é…è¶Šæ…¢) 1234567891011121314151617// è·¯ç”±ç»„func main() {&nbsp;&nbsp;&nbsp;&nbsp;r := gin.Default()&nbsp;&nbsp;&nbsp;&nbsp;// æ™®é€šè·¯ç”±(å¤šäº†ä¸æ˜“ç»´æŠ¤)&nbsp;&nbsp;&nbsp;&nbsp;r.GET(\"/book\", bookListHandler)&nbsp;&nbsp;&nbsp;&nbsp;r.POST(\"/book\", bookInsertHandler)&nbsp;&nbsp;&nbsp;&nbsp;r.DELETE(\"/book/:ID\", bookDeleteHandler)&nbsp;&nbsp;&nbsp;&nbsp;// åˆ†ç»„è·¯ç”±(æ˜“ç»´æŠ¤,å¯å¤šå±‚åµŒå¥—)&nbsp;&nbsp;&nbsp;&nbsp;apiV1Group := r.Group(\"/api/v1\")&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apiV1Group.GET(\"/index\", v1IndexHandler) // URL: /api/v1/index&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apiV1Group.GET(\"/home\", v1HomeHandler) // URL: /api/v1/home&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;r.Run(\"127.0.0.1:9000\")} Ginä¸Šä¼ æ–‡ä»¶ å•æ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"net/http\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/gin-gonic/gin\")func fileHandler(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;fileObj, err := c.FormFile(\"file\") // fileä¸ºå­—æ®µå&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(http.StatusInternalServerError, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"err\": err,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// filePath è¦ä¿å­˜åœ¨æœ¬åœ°çš„è·¯å¾„(ç›¸å¯¹)&nbsp;&nbsp;&nbsp;&nbsp;filePath := fmt.Sprintf(\"./%s\", fileObj.Filename) // fileObj.Filename: ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å&nbsp;&nbsp;&nbsp;&nbsp;// ä¿å­˜æ–‡ä»¶åˆ°æœ¬åœ°&nbsp;&nbsp;&nbsp;&nbsp;c.SaveUploadedFile(fileObj, filePath)&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"data\": filePath,&nbsp;&nbsp;&nbsp;&nbsp;})}// è·¯ç”±ç»„func main() {&nbsp;&nbsp;&nbsp;&nbsp;r := gin.Default()&nbsp;&nbsp;&nbsp;&nbsp;// æäº¤æ–‡ä»¶é»˜è®¤æ˜¯32MBå¤§å°&nbsp;&nbsp;&nbsp;&nbsp;r.MaxMultipartMemory = 8&lt;&lt;20 // 8MB&nbsp;&nbsp;&nbsp;&nbsp;// æ¥å—æ–‡ä»¶&nbsp;&nbsp;&nbsp;&nbsp;r.POST(\"/file\", fileHandler)&nbsp;&nbsp;&nbsp;&nbsp;r.Run(\"127.0.0.1:9000\")} å¤šæ–‡ä»¶ 123456789101112131415161718192021222324252627282930package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/gin-gonic/gin\")func fileHandler(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;form, err := c.MultipartForm()&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;files := form.File[\"file\"]&nbsp;&nbsp;&nbsp;&nbsp;for index, file := range files {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// index é¡ºåº&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(index)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dst := fmt.Sprintf(\"./%s\", file.Filename)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.SaveUploadedFile(file, dst)&nbsp;&nbsp;&nbsp;&nbsp;}}// è·¯ç”±ç»„func main() {&nbsp;&nbsp;&nbsp;&nbsp;r := gin.Default()&nbsp;&nbsp;&nbsp;&nbsp;// æäº¤æ–‡ä»¶é»˜è®¤æ˜¯32MBå¤§å°&nbsp;&nbsp;&nbsp;&nbsp;r.MaxMultipartMemory = 8 &lt;&lt; 20 // 8MB&nbsp;&nbsp;&nbsp;&nbsp;// æ¥å—æ–‡ä»¶&nbsp;&nbsp;&nbsp;&nbsp;r.POST(\"/file\", fileHandler)&nbsp;&nbsp;&nbsp;&nbsp;r.Run(\"127.0.0.1:9000\")} Ginä¸­é—´ä»¶ æ¯”å¦‚æŸäº›æ¥å£æˆ‘ä»¬éœ€è¦ç”¨æˆ·ç™»é™†åæ‰å¯ä»¥è¿›è¡Œæ“ä½œ, è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªå‡½æ•°å†…å¼•ç”¨ä¸€æ¬¡åˆ¤æ–­, ä½†æ˜¯ä¸­é—´ä»¶å¯ä»¥ç»Ÿä¸€å¹¶è½»æ¾çš„åšåˆ°è¿™ä¸€ç‚¹. ä¸­é—´ä»¶çš„ä¿¡æ¯ä¼ é€’ä½¿ç”¨ c.Set(â€œkeyâ€, â€œvâ€), ä¸Šæ–‡è®¾ç½®k,v, ä¸‹æ–‡ä½¿ç”¨ c.MustGet(â€œkeyâ€) å³å¯è·å¾—åå°„çš„å€¼, ä½¿ç”¨ç±»å‹æ–­è¨€ æ¯”å¦‚ c.MustGet(â€œkeyâ€).(string)è½¬å­—ç¬¦ä¸²ç±»å‹ 12345678910111213141516171819202122232425262728293031323334353637package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"time\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/gin-gonic/gin\")func indexHandler(c *gin.Context) {}// ç»Ÿè®¡è€—æ—¶çš„ä¸­é—´ä»¶func castTime(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;// è·å–å½“å‰æ—¶é—´&nbsp;&nbsp;&nbsp;&nbsp;startTime := time.Now()&nbsp;&nbsp;&nbsp;&nbsp;// è¿è¡Œä¸‹ä¸€ä¸ªæ³¨å†Œçš„Handlerå‡½æ•°&nbsp;&nbsp;&nbsp;&nbsp;c.Next()&nbsp;&nbsp;&nbsp;&nbsp;// ç»Ÿè®¡è€—æ—¶&nbsp;&nbsp;&nbsp;&nbsp;cast := time.Since(startTime)&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(cast)}// è·¯ç”±ç»„func main() {&nbsp;&nbsp;&nbsp;&nbsp;// Defaulté»˜è®¤ä½¿ç”¨Use åŠ äº†ä¸¤ä¸ªå…¨å±€ä¸­é—´ä»¶, Logger(), Recovery(), Loggeræ˜¯æ‰“å°æ—¥å¿—, Recoveryæ˜¯panicè¿”å›500&nbsp;&nbsp;&nbsp;&nbsp;r := gin.Default()&nbsp;&nbsp;&nbsp;&nbsp;// (å…¨å±€ä¸­é—´ä»¶) r.Useä»£è¡¨å…¨å±€ä¸­é—´ä»¶&nbsp;&nbsp;&nbsp;&nbsp;r.Use(castTime)&nbsp;&nbsp;&nbsp;&nbsp;// (å•urlä¸­é—´ä»¶) è·¯ç”±æ³¨å†Œæ—¶å¯ä»¥å†™å¤šä¸ªå‡½æ•°, è¯·æ±‚è¿›å…¥å…ˆè¿›ç¬¬ä¸€ä¸ªå†å¾€åèµ°, å¯ä»¥åšä¸­é—´ä»¶&nbsp;&nbsp;&nbsp;&nbsp;r.GET(\"/index\", castTime, indexHandler)&nbsp;&nbsp;&nbsp;&nbsp;// (ç»„ä¸­é—´ä»¶)&nbsp;&nbsp;&nbsp;&nbsp;apiV1Group := r.Group(\"/api/v1\", castTime)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apiV1Group.GET(\"/index\", v1IndexHandler) // URL: /api/v1/index&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apiV1Group.GET(\"/home\", v1HomeHandler) // URL: /api/v1/home&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;r.Run(\"127.0.0.1:9000\")} å‚æ•°ç»‘å®š æˆ‘ä»¬å¤„ç†ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™, ä½¿ç”¨ç»“æ„ä½“ç»‘å®šçš„æ–¹æ³•æ¥ä¸ç”¨æˆ·å‘é€çš„æ•°æ®ç»“åˆ,å¾€å¾€èƒ½ä½¿ä»£ç æ›´åŠ ç®€æ´, è¿™å°±ä¹Ÿæ˜¯å‚æ•°ç»‘å®š 123456789101112131415161718192021222324252627282930313233343536373839package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"net/http\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/gin-gonic/gin\")// æ•°æ®ç»‘å®š// User structtype User struct {&nbsp;&nbsp;&nbsp;&nbsp;// form tag ä»£è¡¨è¯¥å­—æ®µå¯¹åº”çš„è¯·æ±‚å­—æ®µå, binding tag ä»£è¡¨æ²¡æ¥æ”¶åˆ°ä¼ é”™(ä¸å†™é»˜è®¤ä¸æŠ¥é”™)&nbsp;&nbsp;&nbsp;&nbsp;Username string `form:\"username\" json:\"username\" binding:\"required\"`&nbsp;&nbsp;&nbsp;&nbsp;Password string `form:\"password\" json:\"password\" binding:\"required\"`}func indexHandler(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;if c.Request.Method == \"POST\" {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// å®ä¾‹åŒ–&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var u User&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// å°†ç»“æ„ä½“uä¸ç”¨æˆ·ä¼ æ¥çš„å­—æ®µè¿›è¡Œç»‘å®š(æ ¹æ®Content-Typeæ¥æŒ‰æ ¼å¼è§£æ)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err := c.ShouldBind(&amp;u)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"err\": err.Error(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// ç»‘å®šæˆåŠŸ,æ‹¿åˆ°æ•°æ®&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(u)&nbsp;&nbsp;&nbsp;&nbsp;}}// è·¯ç”±ç»„func main() {&nbsp;&nbsp;&nbsp;&nbsp;// Defaulté»˜è®¤ä½¿ç”¨Use åŠ äº†ä¸¤ä¸ªå…¨å±€ä¸­é—´ä»¶, Logger(), Recovery(), Loggeræ˜¯æ‰“å°æ—¥å¿—, Recoveryæ˜¯panicè¿”å›500&nbsp;&nbsp;&nbsp;&nbsp;r := gin.Default()&nbsp;&nbsp;&nbsp;&nbsp;// Anyä»£è¡¨åŒ¹é…æ‰€æœ‰è¯·æ±‚æ–¹å¼&nbsp;&nbsp;&nbsp;&nbsp;r.Any(\"/index\", indexHandler)&nbsp;&nbsp;&nbsp;&nbsp;r.Run(\"127.0.0.1:9000\")} Ginè¿è¡¨æŸ¥è¯¢ å¤šè¡¨è”åˆæŸ¥è¯¢, ä¸šåŠ¡ä¸­å¸¸è§çš„æŸ¥è¯¢ è·¨è¡¨æŸ¥è¯¢æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šç§é€”å¾„åº”å¯¹ sqlxç»“æ„ä½“åµŒå¥— å› ä¸ºsqlxä¼ å…¥çš„æ˜¯ä¸€ä¸ªç»“æ„ä½“, è€Œä¸æ•°æ®åº“çš„åŒæ­¥éœ€è¦å¯¹ç…§ db çš„ tag, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»“æ„ä½“åµŒå¥— è¦æ³¨æ„çš„æ˜¯ç»“æ„ä½“åµŒå¥—è¿‡ç¨‹ä¸­åŠ¡å¿…é¿å…ç»“æ„ä½“çš„å­—æ®µç›¸åŒå¦åˆ™åªä¼šè¿”å›æœ€å¤–é¢çš„ç»“æ„ä½“(å®é™…ä¸Šåªæ˜¯ c.JSON æ—¶å‡ºç°çš„é”™è¯¯) sqlxç»“æ„ä½“ä¸é•¶åµŒ æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å°†æ‰€æœ‰è¿”å›å€¼å†™ä¸€ä¸ªç»“æ„ä½“é‡Œ sql æˆ‘ä»¬ä¸ä½¿ç”¨sqlxæ¨¡å—, è€Œæ˜¯ç›´æ¥èµ‹å€¼ç»™å˜é‡, å†ç»„åˆæ‹¿åˆ°æƒ³è¦çš„ç»“æœä¹Ÿæ˜¯å¯ä»¥çš„ logrusæ¨¡å—(æ—¥å¿—) https://www.liwenzhou.com/posts/Go/go_logrus/ ä½¿ç”¨ 123456789101112131415161718192021222324package main// logrousimport (&nbsp;&nbsp;&nbsp;&nbsp;log \"github.com/sirupsen/logrus\")func main() {&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æ­¤é¡¹è¾“å‡ºçš„æ—¥å¿—ä¸ºJSONæ ¼å¼&nbsp;&nbsp;&nbsp;&nbsp;log.SetFormatter(&amp;log.JSONFormatter{})&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®æ­¤é¡¹æœ‰å­—æ®µè¡¨ç¤ºæ‰“å°æ—¥å¿—çš„æ–‡ä»¶ä½ç½®(å¯¹æ€§èƒ½æœ‰å½±å“,ä¸æ¨èçº¿ä¸Šä½¿ç”¨)&nbsp;&nbsp;&nbsp;&nbsp;log.SetReportCaller(true)&nbsp;&nbsp;&nbsp;&nbsp;// ç»ˆç«¯æ‰“å°æ—¥å¿—&nbsp;&nbsp;&nbsp;&nbsp;Userinf := log.WithFields(log.Fields{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"name\": \"t1\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"age\": 3000,&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;// .InfoæŒ‡çº§åˆ«&nbsp;&nbsp;&nbsp;&nbsp;Userinf.Info(\"user info\")&nbsp;&nbsp;&nbsp;&nbsp;// time=\"2019-08-22T16:36:00+08:00\" level=info msg=\"user info\" age=3000 name=t1&nbsp;&nbsp;&nbsp;&nbsp;log.Info(\"info\") // å¯ä¸åŠ è‡ªå®šä¹‰key/v&nbsp;&nbsp;&nbsp;&nbsp;// time=\"2019-08-22T17:08:16+08:00\" level=info msg=info} æ­é…Ginä½¿ç”¨ https://www.liwenzhou.com/posts/Go/go_logrus/#autoid-0-12-0 å®‰è£… 1go get -u github.com/sirupsen/logrus Cookie/Session HTTP åè®®æ˜¯æ— çŠ¶æ€çš„, æ‰€ä»¥éœ€è¦Cookieå’ŒSessionæ¥ä¿å­˜ä¸€äº›çŠ¶æ€/æ ‡è¯† https://www.liwenzhou.com/posts/Go/Cookie_Session/ Cookie Cookie æœ¬è´¨ä¸Šæ˜¯å­˜å‚¨åœ¨æµè§ˆå™¨ä¸Šçš„å¤šä¸ªé”®å€¼å¯¹, æ˜¯ä¿å­˜äºæŸä¸ªæ–‡ä»¶ä¸­ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071package mainimport (&nbsp;&nbsp;&nbsp;&nbsp;\"fmt\"&nbsp;&nbsp;&nbsp;&nbsp;\"net/http\"&nbsp;&nbsp;&nbsp;&nbsp;\"github.com/gin-gonic/gin\")// Cookieç¤ºä¾‹// User structtype User struct {&nbsp;&nbsp;&nbsp;&nbsp;// form tag ä»£è¡¨è¯¥å­—æ®µå¯¹åº”çš„è¯·æ±‚å­—æ®µå, binding tag ä»£è¡¨æ²¡æ¥æ”¶åˆ°ä¼ é”™(ä¸å†™é»˜è®¤ä¸æŠ¥é”™)&nbsp;&nbsp;&nbsp;&nbsp;Username string `form:\"username\" json:\"username\" binding:\"required\"`&nbsp;&nbsp;&nbsp;&nbsp;Password string `form:\"password\" json:\"password\" binding:\"required\"`}func getCookie(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;username, err := c.Cookie(\"username\")&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"code\": 1005,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// è®¾ç½®usernameå¹¶æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°&nbsp;&nbsp;&nbsp;&nbsp;c.Set(\"username\", username)&nbsp;&nbsp;&nbsp;&nbsp;c.Next()}func cookieHandler(c *gin.Context) {&nbsp;&nbsp;&nbsp;&nbsp;// GETéªŒè¯Cookie&nbsp;&nbsp;&nbsp;&nbsp;if c.Request.Method == \"GET\" {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;username, ok := c.Get(\"username\")&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ok {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// å–åˆ°&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(username.(string))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// æ²¡å–åˆ°&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"code\": 1008,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;// POSTç”ŸæˆCookie&nbsp;&nbsp;&nbsp;&nbsp;if c.Request.Method == \"post\" {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// å‚æ•°ç»‘å®š&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var u User&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err := c.ShouldBind(&amp;u)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if err != nil {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"code\": 1001,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// èº«ä»½éªŒè¯&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if u.Username == \"t1\" &amp;&amp; u.Password == \"t1p\" {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// ç”ŸæˆCookie&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.SetCookie(\"username\", u.Username, 20, \"/\", \"127.0.0.1\", false, true)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.JSON(http.StatusOK, gin.H{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"code\": 1003,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}}func main() {&nbsp;&nbsp;&nbsp;&nbsp;r := gin.Default()&nbsp;&nbsp;&nbsp;&nbsp;r.Any(\"/cookie\", getCookie, cookieHandler)&nbsp;&nbsp;&nbsp;&nbsp;r.Run(\"127.0.0.1:9000\")} Session Cookieæ˜¯ä¿å­˜åœ¨æµè§ˆå™¨ç«¯çš„, æ‰€ä»¥Cookieæœ‰è¢«äººç¯¡æ”¹æˆ–ä»¿é€ çš„å±é™©, è€Œä¸”Cookieæœ€å¤§æ”¯æŒ4KBçš„æ•°æ®, æ‰€ä»¥Sessionå‡ºç°äº† Sessionå®é™…ä¸Šæ˜¯åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯, ç„¶åéšæœºç”Ÿæˆä¸€ä¸ªæ ‡è¯†è¿”å›ç»™æµè§ˆå™¨Cookie, Cookieç›¸å½“äºè¿™ä¸ªé’¥åŒ™, æ‹¿åˆ°é’¥åŒ™æ‰èƒ½è¯æ˜ä½ çš„èº«ä»½, è€Œä¸”æ‰€æœ‰æ•°æ®éƒ½åœ¨æœåŠ¡ç«¯, å®¢æˆ·ç«¯åªæœ‰é’¥åŒ™, åŠ å¤§äº†å®‰å…¨æ€§ Sessionæ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨çš„é”®å€¼å¯¹ Sessionå¿…é¡»ä¾èµ–Cookie","link":"/2021/09/04/go_base/"},{"title":"goè¯­è¨€çš„context","text":"å‰è¨€ å¬è¯´æ˜¯é¢è¯•å¿…é—®, ä¹‹å‰åªæœ‰æµ…æ˜¾çš„è®¤çŸ¥, ç”¨çš„æ—¶å€™æˆ‘ä¸€èˆ¬ä¼ ä¸€ä¸ªç©ºçš„è¿›å» ğŸ˜“, ä»Šå¤©éš¾å¾—æœ‰ä¼‘æ¯æ—¶é—´, æ¥å­¦ä¹ ä¸€ä¸‹ æœ¬æ–‡æ€»ç»“è‡ªä¸ƒç±³è€å¸ˆçš„æ—¥å¿—æœé›†é¡¹ç›®è§†é¢‘ ä¸ºä»€ä¹ˆéœ€è¦context goçš„ä»£ç é€šå¸¸ä½¿ç”¨ goroutine æ¥æé«˜ä»£ç é€Ÿåº¦, è¿™æ ·çš„è¯æ€ä¹ˆæ§åˆ¶ goroutine ç”Ÿæˆçš„åç¨‹å°±æˆäº†é—®é¢˜, å¦‚æœä¸å°å¿ƒå‡ºç°äº†ä»£ç é—®é¢˜å¯¼è‡´ goroutine é™·å…¥æ­»å¾ªç¯, æˆ–è€…å¤¯æ­», å°±ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„é—®é¢˜å‘ç”Ÿ. æ‰€ä»¥, contextå°±å‡ºç”Ÿäº†, ä»–ç±»ä¼¼ä¸€ä¸ªä¿¡å·, é€šè¿‡ä¼ å…¥çš„æ–¹å¼æ¥è®©å¤šä¸ªé€»è¾‘å—è¿›è¡Œè”ç³», ä»¥ä¾¿åšå‡ºæ“ä½œ æœ€åŸºæœ¬çš„ä¾‹å­å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536package mainimport ( \"context\" \"fmt\" \"sync\" \"time\")var wg sync.WaitGroup // wgç­‰å¾…func worker(ctx context.Context) { // context.Contextä¸€èˆ¬éƒ½å«ctxLOOP: for { fmt.Println(\"worker\") time.Sleep(time.Second) // ç­‰å¾…1s select { case &lt;-ctx.Done(): // å¦‚æœæ¥æ”¶åˆ°äº†ctxçš„Doneä¿¡å·, å°±é€€å‡ºå¾ªç¯ break LOOP default: } } wg.Done() // wgå®Œæˆ}func main() { ctx, cancel := context.WithCancel(context.Background()) // ç”Ÿæˆctxå’Œcancel wg.Add(1) go worker(ctx) time.Sleep(time.Second * 3) cancel() // è°ƒç”¨cancelå³å¯é€šçŸ¥ctxéœ€è¦Doneæ‰ wg.Wait() fmt.Println(\"over\")} å½“goroutineåµŒå¥—æ—¶, å¦‚æœéœ€è¦ä¸€èµ·ç›‘å¬åŒä¸€ä¸ªctx, åˆ™å¯ä»¥ä½¿ç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package mainimport ( \"context\" \"fmt\" \"sync\" \"time\")var wg sync.WaitGroup // wgç­‰å¾…func worker(ctx context.Context) { // context.Contextä¸€èˆ¬éƒ½å«ctx go worker1(ctx)LOOP: for { fmt.Println(\"worker\") time.Sleep(time.Second) // ç­‰å¾…1s select { case &lt;-ctx.Done(): // å¦‚æœæ¥æ”¶åˆ°äº†ctxçš„Doneä¿¡å·, å°±é€€å‡ºå¾ªç¯ break LOOP default: } }}func worker1(ctx context.Context) { // context.Contextä¸€èˆ¬éƒ½å«ctxLOOP: for { fmt.Println(\"worker1\") time.Sleep(time.Second) // ç­‰å¾…1s select { case &lt;-ctx.Done(): // å¦‚æœæ¥æ”¶åˆ°äº†ctxçš„Doneä¿¡å·, å°±é€€å‡ºå¾ªç¯ break LOOP default: } } wg.Done() // wgå®Œæˆ}func main() { ctx, cancel := context.WithCancel(context.Background()) // ç”Ÿæˆctxå’Œcancel wg.Add(1) go worker(ctx) time.Sleep(time.Second * 3) cancel() // è°ƒç”¨cancelå³å¯é€šçŸ¥ctxéœ€è¦Doneæ‰ wg.Wait() fmt.Println(\"over\")} contextæ´¾ç”Ÿ æˆ‘ä»¬çœ‹ä¹‹å‰çš„ä»£ç  1context.WithCancel(context.Background()) ä»”ç»†çœ‹, è¿™é‡Œåˆ†æˆäº†ä¸¤æ­¥, ä¸€ä¸ªæ˜¯é€šè¿‡ context.Background() ç”Ÿæˆäº†ä¸€ä¸ª emptyCtx æœ€ä¸Šå±‚çš„ctx ç„¶åé€šè¿‡context.WithCancelæ¥ä»è¿™ä¸ªæœ€ä¸Šå±‚çš„ctxæ´¾ç”Ÿä¸€ä¸ªæ–°çš„å­ctx, ctxå°±åƒæ ‘ä¸€æ ·, ä»ä¸€ä¸ªæ ¹ä¸€ç›´å‘æ•£ å››ç§context contextåˆ†ä¸ºå››ç§ä¸Šä¸‹æ–‡å¯ä»¥æ´¾ç”Ÿ, åˆ†åˆ«ä¸º WithCancel, WithDeadline, WithTimeout, WithValue, è¿™å››ç§æœ‰ä¸åŒçš„ä½œç”¨. éœ€è¦æ³¨æ„çš„æ˜¯, æ´¾ç”Ÿè¿™ä»¶äº‹, ctx å¯ä»¥ä¸åœçš„æ´¾ç”Ÿå­çš„context, å½“ä¸€ä¸ªè¢«å–æ¶ˆæ—¶, ä»–æ´¾ç”Ÿçš„ä¸Šä¸‹æ–‡ä¹Ÿä¼šè¢«å–æ¶ˆ WithCancel éœ€è¦æ‰‹åŠ¨çš„å‡ºå‘Doneæ‰ä¼šå–æ¶ˆ WithDeadline æŒ‡å®šä¸€ä¸ªç»ˆæ­¢æ—¶é—´(æ˜ç¡®çš„æ—¶é—´), å½“æ—¶é—´åˆ°å°±è‡ªåŠ¨å–æ¶ˆ WithTimeout æŒ‡å®šä¸€ä¸ªç»ˆæ­¢æ—¶é—´é—´éš”, å½“æ—¶é—´é—´éš”åˆ°æ—¶è‡ªåŠ¨å–æ¶ˆ WithValue è¿™ä¸ªç›®çš„ä¸æ˜¯å–æ¶ˆ, è€Œæ˜¯ä¸Šä¸‹æ–‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“ contextç»“æ„ contextå…¶å®æ˜¯æ¥å£, æˆ‘ä»¬æŸ¥çœ‹å…¶ç»“æ„ 1234567891011type Context interface { Deadline() (deadline time.Time, ok bool) Done() &lt;-chan struct{} Err() error Value(key interface{}) interface{}} å…¶ä¸­: Deadline æ–¹æ³•è¿”å›å½“å‰çš„è¿™ä¸ª ctx è¢«å–æ¶ˆçš„æ—¶é—´ Done è¿”å›çš„æ˜¯ä¸€ä¸ª channel Err è¿”å›ctxç»“æŸçš„åŸå› , åªæœ‰ç¡®å®ç»“æŸäº†æ‰ä¼šè¿”å›éç©ºçš„å€¼ ctx è¢«å–æ¶ˆå°±è¿”å› canceled é”™è¯¯ ctx è¶…æ—¶ç»“æŸåˆ™ä¼šè¿”å› DeadlineExceeded é”™è¯¯ value æ–¹æ³•åˆ™æ ¹æ® key è¿”å› value , è¿™ä¸ªæ˜¯ç”¨æ¥ä¼ é€’æ•°æ®ä½¿ç”¨çš„ background()å’ŒTODO() ä¹‹å‰æåˆ°è¿‡, ctxå®é™…ä¸Šæ˜¯å¯ä»¥æ´¾ç”Ÿçš„, é‚£ä¹ˆ, ä½œä¸ºæœ€é¡¶å±‚çš„ctx, æˆ‘ä»¬åªèƒ½é€‰æ‹©ä¸¤ç§, background å’Œ TODO, ç”±è¿™ä¸¤ä¸ªç”Ÿæˆçš„ctxæ¥æ´¾ç”Ÿæ›´å¤šçš„ctx backgroundç”¨äº åˆå§‹åŒ–/main/æµ‹è¯• ä¸­, ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ª, æœ€é¡¶å±‚çš„ctx TODOç›®å‰è¿˜æ²¡æœ‰å…·ä½“çš„ä½¿ç”¨åœºæ™¯, æˆ‘ä»¬çŸ¥é“, goè¯­è¨€çš„ä¼ å‚æ˜¯å¿…é¡»çš„, å¦‚æœä½ å¹¶ä¸æƒ³ä½¿ç”¨ctx, ä½†æ˜¯ç¬¬ä¸‰æ–¹çš„åˆéœ€è¦ä½ ä¼ , æˆ–è€…ä½ è¿˜æ²¡æƒ³å¥½å®ƒçš„ä½œç”¨, ä½ å¯ä»¥ä½¿ç”¨TODO è¿™ä¸¤ä¸ªç”Ÿæˆçš„ctxéƒ½æ˜¯ä¸å¯å–æ¶ˆ, æ²¡æœ‰æˆªæ­¢æ—¶é—´, æ²¡æœ‰æºå¸¦ä»»ä½•å€¼çš„emptyCtx å››ç§withå‡½æ•°æ´¾ç”Ÿ ä¹‹å‰ç®€å•çš„ä»‹ç»äº† WithCancel, WithDeadline, WithTimeout, WithValue, è¿™é‡Œåˆ†åˆ«ä¸¾å‡ºä¾‹å­ WithCancel WithCancel çš„å‡½æ•°å®šä¹‰ 1func WithCancel(parent Context) (ctx Context, cancel CancelFunc) è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªæ´¾ç”Ÿçš„æ–°ctxå’Œä¸€ä¸ªdoneçš„å‡½æ•°, å½“è°ƒç”¨è¿™ä¸ªå‡½æ•°, å°±ä¼šå…³é—­ä¸Šä¸‹æ–‡çš„Doneé€šé“ 12345678910111213141516171819202122232425262728293031323334package mainimport ( \"context\" \"fmt\")func gen(ctx context.Context) &lt;-chan int { dst := make(chan int) n := 1 go func() { for { select { case &lt;-ctx.Done(): return // ç›‘å¬åˆ°ç»“æŸå, é€€å‡ºå‡½æ•°, è¿›è¡Œåƒåœ¾å›æ”¶ case dst &lt;- n: n++ } } }() return dst}func main() { ctx, cancel := context.WithCancel(context.Background()) defer cancel() // å…³é—­ç®¡é“ for n := range gen(ctx) { fmt.Println(n) if n == 5 { break } }} WithDeadline WithDeadlineçš„å‡½æ•°å®šä¹‰ 1func WithDeadline(parent Context, deadline time.Time) (Context, CancelFunc) ä¼ å‚ä¸æ­¢ä¸€ä¸ªctx, è¿˜æœ‰ä¸€ä¸ªtime.Time, æ ‡è¯†è¿™ä¸ªctxçš„è¶…æ—¶æ—¶é—´, ä¾æ—§è¿”å›äº†doneå‡½æ•°, æ´¾ç”Ÿçš„ctxåœ¨ä»»åŠ¡åˆ°æœŸåä¼šè‡ªåŠ¨å…³é—­, è€Œåœ¨åˆ°æœŸä¹‹å‰å¯ä»¥é€šè¿‡æ‰‹åŠ¨è°ƒç”¨cancelå‡½æ•°æ¥å…³é—­ 123456789101112131415161718192021222324package mainimport ( \"context\" \"fmt\" \"time\")func main() { d := time.Now().Add(50 * time.Millisecond) // è·å–å½“å‰æ—¶é—´50msåçš„æ—¶é—´ ctx, cancel := context.WithDeadline(context.Background(), d) // æŠŠè¿‡æœŸæ—¶é—´ä¼ å…¥ // å°½ç®¡ctxä¼šè¿‡æœŸï¼Œä½†åœ¨ä»»ä½•æƒ…å†µä¸‹è°ƒç”¨å®ƒçš„cancelå‡½æ•°éƒ½æ˜¯å¾ˆå¥½çš„å®è·µã€‚ // å¦‚æœä¸è¿™æ ·åšï¼Œå¯èƒ½ä¼šä½¿ä¸Šä¸‹æ–‡åŠå…¶çˆ¶ç±»å­˜æ´»çš„æ—¶é—´è¶…è¿‡å¿…è¦çš„æ—¶é—´ã€‚ defer cancel() select { case &lt;-time.After(1 * time.Second): fmt.Println(\"overslept\") case &lt;-ctx.Done(): fmt.Println(ctx.Err()) }} éœ€è¦æ³¨æ„çš„æ˜¯, æ¨èä¾æ—§æ³¨å†Œä¸€ä¸ªcancelçš„æ‰§è¡Œ, è¿™æ˜¯ä¸ºäº†ä¿é™©èµ·è§ WithTimeout WithTimeoutçš„å‡½æ•°å®šä¹‰ 1func WithTimeout(parent Context, timeout time.Duration) (Context, CancelFunc) ä¸Deadlineä¸åŒçš„æ˜¯, è¿™é‡Œä¼ çš„æ˜¯ä¸€ä¸ªæ—¶é—´é—´éš”, ç­‰å¾…æ—¶é—´é—´éš”å®Œæˆåå‘èµ·å…³é—­ è¿™ç§æ–¹å¼åŒå¸¸ç”¨äºè¶…æ—¶æ§åˆ¶ 1234567891011121314151617181920212223242526272829303132333435363738package mainimport ( \"context\" \"fmt\" \"sync\" \"time\")var wg sync.WaitGroupfunc worker(ctx context.Context) {LOOP: for { fmt.Println(\"db connecting ...\") time.Sleep(time.Millisecond * 10) // å‡è®¾æ­£å¸¸è¿æ¥æ•°æ®åº“è€—æ—¶10æ¯«ç§’ select { case &lt;-ctx.Done(): // 50æ¯«ç§’åè‡ªåŠ¨è°ƒç”¨ break LOOP default: } } fmt.Println(\"worker done!\") wg.Done()}func main() { // è®¾ç½®ä¸€ä¸ª50æ¯«ç§’çš„è¶…æ—¶ ctx, cancel := context.WithTimeout(context.Background(), time.Millisecond*50) wg.Add(1) go worker(ctx) time.Sleep(time.Second * 5) cancel() // é€šçŸ¥å­goroutineç»“æŸ wg.Wait() fmt.Println(\"over\")} WithValue WithValueå¯ä»¥åœ¨ctxä¸­å†™å…¥æ•°æ®åº“, ä¹Ÿå¯ä»¥è¯»å–æ•°æ® 1func WithValue(parent Context, key, val interface{}) Context WithValueè¿”å›æ´¾ç”Ÿçš„ctx, ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package mainimport ( \"context\" \"fmt\" \"sync\" \"time\")type TraceCode stringvar wg sync.WaitGroupfunc worker(ctx context.Context) { key := TraceCode(\"TRACE_CODE\") traceCode, ok := ctx.Value(key).(string) // è·å–ctxä¸­å­˜å‚¨çš„\"TRACE_CODE\"çš„å€¼ if !ok { fmt.Println(\"invalid trace code\") }LOOP: for { fmt.Printf(\"worker, trace code:%s\\n\", traceCode) time.Sleep(time.Millisecond * 10) // å‡è®¾æ­£å¸¸è¿æ¥æ•°æ®åº“è€—æ—¶10æ¯«ç§’ select { case &lt;-ctx.Done(): // 50æ¯«ç§’åè‡ªåŠ¨è°ƒç”¨ break LOOP default: } } fmt.Println(\"worker done!\") wg.Done()}func main() { // è®¾ç½®ä¸€ä¸ª50æ¯«ç§’çš„è¶…æ—¶ ctx, cancel := context.WithTimeout(context.Background(), time.Millisecond*50) // å‘ctxæ·»åŠ å€¼ \"TRACE_CODE\": \"12512312234\" ctx = context.WithValue(ctx, TraceCode(\"TRACE_CODE\"), \"12512312234\") wg.Add(1) go worker(ctx) // ä¼ å…¥ time.Sleep(time.Second * 5) cancel() // é€šçŸ¥å­goroutineç»“æŸ wg.Wait() fmt.Println(\"over\")} æ³¨æ„äº‹é¡¹ context ä»¥å‚æ•°çš„æ–¹å¼ä¼ é€’ å¦‚æœéœ€è¦context, åº”è¯¥å§contextå½“åšç¬¬ä¸€ä¸ªå‚æ•°, ä¸”åˆ«åä¸º ctx å¦‚æœä¸€ä¸ªå‡½æ•°éœ€è¦context, è€Œä½ åˆæ²¡æœ‰, åˆä¸æƒ³ä½¿ç”¨, å¯ä»¥ä¼ å…¥context.TODO() contextçš„WithValueåº”å½“ä¼ é€’å¿…è¦çš„æ•°æ®, ä¸è¦ä»€ä¹ˆæ•°æ®éƒ½æ”¾é‡Œé¢. åˆ‡è®°ä¸è¦ç”¨ä»–æ¥æ›¿ä»£ä¼ å‚çš„æ–¹å¼ contextæ˜¯çº¿ç¨‹å®‰å…¨çš„, å¯ä»¥æ”¾å¿ƒçš„åœ¨å¤šä¸ªgoroutineä¸­ä¼ é€’ æ´¾ç”Ÿå‡½æ•°è¿”å›å€¼ç¬¬äºŒä¸ªéƒ½æ˜¯done, æ‰§è¡Œå¯ä»¥å…³é—­è¿™ä¸ªcontext","link":"/2021/10/16/go_context/"},{"title":"Golang å¸¸é—®çŸ¥è¯†ç‚¹(ç®€ç•¥)","text":"å‰è¨€ ç¨å¾®è®°å½•ä¸€ä¸‹é—®é¢˜ç‚¹å§, æ–‡ç« ä¼šä¸æ–­çš„ä¼˜åŒ–æ›´æ–° æœ‰äº›æ¯”è¾ƒå¤§çš„çŸ¥è¯†ç‚¹, æ¯”å¦‚é”åŸç†å•¥çš„, ä¼šå•ç‹¬æ‹å‡ºæ¥å†™ä¸€ç¯‡, è¿™é‡Œåªæ˜¯å¤§æ¦‚ Go è¯­è¨€çš„åŸºç¡€æ•°æ®ç±»å‹å ç”¨å¤§å° ç±»å‹ å¤§å°(å­—èŠ‚) Int8 1 Int16 2 Int32 4 Int64 8 int 4/8 Float32 4 Float64 8 string 1/2~4 bool 1 Go è¯­è¨€çš„å˜é‡åˆ†é…åœ¨æ ˆè¿˜æ˜¯å † Frequently Asked Questions (FAQ) - The Go Programming Language å¼•ç”¨ç±»å‹, æ¯”å¦‚ åˆ‡ç‰‡,map æ˜¯å † å¯¹äºå‡½æ•°å†…éƒ¨çš„å˜é‡, å…¶åˆ†é…è§„åˆ™ç”±ç¼–è¯‘å™¨è‡ªå·±å†³å®š, è§„åˆ™å¦‚ä¸‹: ç¼–è¯‘å™¨ä¼šè¿›è¡Œå˜é‡çš„é€ƒé€¸åˆ†æ. å½“æŸä¸ªå˜é‡åœ¨å‡½æ•°å¤–ä¹Ÿä½¿ç”¨æ—¶, ä½œç”¨åŸŸä¸ä»…ä»…åœ¨å‡½æ•°å†…æ—¶, æ¯”å¦‚ return å‡ºå˜é‡çš„å€¼çš„åœ°å€, è¿™ç§æƒ…å†µå°±ä¼šæŠŠæ•°æ®åˆ†é…åˆ°å †ä¸­. æ­¤å¤–, å¦‚æœæŸä¸ªå˜é‡çš„å€¼å¾ˆå¤§çš„æ—¶å€™, ä¹Ÿä¼šåˆ†é…åˆ°å †ä¸­. å…¶ä»–æ­£å¸¸æƒ…å†µ, å‡½æ•°å†…çš„å˜é‡éƒ½åœ¨æ ˆä¸­ selectæ˜¯éšæœºè¿˜æ˜¯é¡ºåº Why is the select statement non-deterministic? : golang (reddit.com) æ˜¯éšæœºçš„ åœ¨ select çš„æ‰§è¡Œå‡½æ•°selectgoä¸­, ä¼šå…ˆå°† case çš„é¡ºåºæ‰“ä¹± æ®è¯´æ˜¯ä¸ºäº†ä¿æŒå‡è¡¡, ä¸å‡ºç°æ¯”å¦‚æ€»æ˜¯å‘½ä¸­ç¬¬ä¸€ä¸ª case, å¯¼è‡´å…¶ä»–ä¸‹é¢çš„ case å®Œå…¨ä¸æ‰§è¡Œçš„æƒ…å†µ, å°¤å…¶æ˜¯ select è¿˜é€šå¸¸ç”¨æ¥ç›‘å¬å¤šä¸ª channel Go è¯­è¨€çš„åƒåœ¾å›æ”¶ ä¸‰è‰²æ ‡è®°æ³•ä¸è¯»å†™å±éšœ - ç®€ä¹¦ (jianshu.com) Golang åƒåœ¾å›æ”¶å‰–æ | Legendtkl ä»€ä¹ˆæ—¶å€™è¿›è¡Œåƒåœ¾å›æ”¶ è°ƒç”¨ runtime.GC() è¿›è¡Œä¸»åŠ¨åƒåœ¾å›æ”¶(ä¸»åŠ¨) å½“å †ä¸Šçš„æ´»è·ƒå¯¹è±¡å¤§äº 4M(é»˜è®¤) çš„æ—¶å€™è¿›è¡Œ GC ä¸Šæ¬¡ GC çš„2åˆ†é’Ÿå å½“å‰æ²¡æœ‰å¼€å¯ GC çš„æ—¶å€™ æ ‡è®° GC go è¯­è¨€ä½¿ç”¨çš„æ˜¯ä¸‰è‰²æ ‡è®°æ³• ä»–æœ‰ä¸‰ç§é¢œè‰²(æ ‡è®°): ç™½è‰²ä»£è¡¨è¿˜æœªè®¿é—®è¿‡ ç°è‰²ä»£è¡¨å¯¹è±¡å·²ç»è®¿é—®è¿‡, ä½†æ˜¯æœ¬å¯¹è±¡å¼•ç”¨åˆ°çš„å…¶ä»–å¯¹è±¡æ²¡æœ‰è®¿é—®å®Œ é»‘è‰²ä»£è¡¨å¯¹è±¡å’Œå¼•ç”¨åˆ°çš„å…¶ä»–å¯¹è±¡éƒ½å·²ç»è®¿é—®å®Œ 1.åˆå§‹æ—¶ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½åœ¨ ã€ç™½è‰²é›†åˆã€‘ä¸­ï¼› 2.å°†GC Roots ç›´æ¥å¼•ç”¨åˆ°çš„å¯¹è±¡ æŒªåˆ° ã€ç°è‰²é›†åˆã€‘ä¸­ï¼› 3.ä»ç°è‰²é›†åˆä¸­è·å–å¯¹è±¡ï¼š 3.1. å°†æœ¬å¯¹è±¡ å¼•ç”¨åˆ°çš„ å…¶ä»–å¯¹è±¡ å…¨éƒ¨æŒªåˆ° ã€ç°è‰²é›†åˆã€‘ä¸­ï¼› 3.2. å°†æœ¬å¯¹è±¡ æŒªåˆ° ã€é»‘è‰²é›†åˆã€‘é‡Œé¢ã€‚ 4.é‡å¤æ­¥éª¤3ï¼Œç›´è‡³ã€ç°è‰²é›†åˆã€‘ä¸ºç©ºæ—¶ç»“æŸã€‚ 5.ç»“æŸåï¼Œä»åœ¨ã€ç™½è‰²é›†åˆã€‘çš„å¯¹è±¡å³ä¸ºGC Roots ä¸å¯è¾¾ï¼Œå¯ä»¥è¿›è¡Œå›æ”¶ã€‚ å½“ CG è¿‡ç¨‹ä¸­, æ–°å¢äº†å˜é‡, æˆ–è€…æ‰‹åŠ¨æŠŠå˜é‡çš„å€¼è®¾ç½®æˆ nil, é»˜è®¤æŠŠä»–è®¾ç½®æˆé»‘è‰², ç•™ç»™ä¸‹ä¸€æ¬¡ GC å†å¤„ç† Go åç¨‹ Go è¯­è¨€è°ƒåº¦å™¨ä¸ Goroutine å®ç°åŸç† | Go è¯­è¨€è®¾è®¡ä¸å®ç° (draveness.me) Go åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šæ ¹æ®ç¡¬ä»¶çš„çŠ¶æ€å ç”¨å¯¹åº”çš„è¿›ç¨‹å’Œçº¿ç¨‹(é»˜è®¤1æ ¸1ä¸ª), ç„¶åé€šè¿‡å†…éƒ¨çš„è°ƒåº¦å™¨æ¥è¿›è¡Œåç¨‹çš„åˆ‡æ¢, å‡å°‘æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶çš„è´Ÿè½½. ä» 1.14 ç‰ˆæœ¬å¼€å§‹, ä½¿ç”¨çš„æ˜¯æŠ¢å å¼è°ƒåº¦. è°ƒåº¦å™¨ç”± 3 ä¸ªéƒ¨åˆ†ç»„æˆ, GMP æ¨¡å‹è¯´çš„å°±æ˜¯è¿™ä¸ª G - goroutine, å°±æ˜¯éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡, åŒ…å«äº†ä»»åŠ¡çš„æ‰§è¡Œå‡½æ•°, goroutine çŠ¶æ€å’Œä¸€äº›ä¿¡æ¯ M - æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹, è¿™ä¸ªæ˜¯ç”±æ“ä½œç³»ç»Ÿè¿›è¡Œè°ƒåº¦å’Œç®¡ç†, è¿™é‡Œæ˜¯çœŸæ­£æ‰§è¡Œè®¡ç®—çš„éƒ¨åˆ† P - è°ƒåº¦å™¨çš„é€»è¾‘. å­˜æ”¾çº¿ç¨‹ M æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ G G é‡ŒåŒ…å«äº†éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡, æ˜¯ Go ç»™ç”¨æˆ·æ€æä¾›çš„ç±»ä¼¼çº¿ç¨‹çš„ä¸œè¥¿, åªæ˜¯å› ä¸ºæ˜¯è‡ªå·±ç»´æŠ¤çš„, å¯ä»¥åšåˆ°æ›´å°çš„å ç”¨å†…å­˜ç©ºé—´, åŒæ—¶é™ä½äº†ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ M M æ˜¯çœŸæ­£çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹, æ¯”å¦‚è¯´ 4 æ ¸, å°±ä¼šæœ‰ 4 ä¸ªçº¿ç¨‹, ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¯åŠ¨å¾ˆå¤š goroutine, è€Œè°ƒåº¦å™¨å¸®åŠ©æˆ‘ä»¬æŠŠè¿™äº› goroutine è½åˆ°çº¿ç¨‹ä¸­, å¼€å‘è€…æ„Ÿè§‰åˆ° goroutine æ˜¯å¹¶è¡Œ, å®é™…ä¸Šæ˜¯è°ƒåº¦å™¨å°†å…¶è¿›è¡Œæ’é˜Ÿåæ”¾åˆ°çº¿ç¨‹é‡Œè¿è¡Œ P P æ˜¯è”é€š G å’Œ M çš„ä¸­é—´å±‚ä»–ä¼šå»å°†è‹¥å¹²ä¸ª goroutine è¿›è¡Œæ’é˜Ÿå’Œè°ƒåº¦, æ¯”å¦‚è¯´åœ¨æŸä¸€ä¸ª goroutine è¿›è¡Œ I/O æ“ä½œæ—¶è®©å‡ºèµ„æºç»™å¦ä¸€ä¸ª G GMP ä¼˜åŠ¿(ç›¸æ¯”å¤šçº¿ç¨‹å¼€å‘) goroutine æ›´åŠ è½»é‡(2kb), çº¿ç¨‹1~2M åˆ‡æ¢æ›´åŠ çš„å¿«é€Ÿ, å‡å°‘å†…æ ¸åˆ‡æ¢çš„èµ„æºæ¶ˆè€— GMP ä¸­ G çš„çŠ¶æ€ ç©ºé—²(Gidle): åˆšæ–°å»º, æœªåˆå§‹åŒ– ç­‰å¾…è¿è¡Œ(Grunnable): åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…è¿è¡Œ è¿è¡Œä¸­(Grunning): è¡¨ç¤ºæ“ä½œç³»ç»Ÿçº¿ç¨‹ M æ­£åœ¨è¿è¡Œè¿™ä¸ª G ç³»ç»Ÿè°ƒç”¨ä¸­(Gsyscall): M æ­£åœ¨è¿è¡Œè¿™ä¸ª G å‘èµ·çš„ç³»ç»Ÿè°ƒç”¨, æ­¤æ—¶ M å¹¶ä¸æ‹¥æœ‰ G ç­‰å¾…ä¸­(Gwaiting): G æ­£åœ¨ç­‰å¾…æŸäº›ä¸œè¥¿å®Œæˆ, è¿™æ—¶å€™ G æ²¡æœ‰è¿è¡Œä¹Ÿä¸åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­ å·²ç»ˆæ­¢(Gdead): G æ²¡æœ‰è¢«ä½¿ç”¨, å¯èƒ½å·²ç»æ‰§è¡Œå®Œæ¯• æ ˆå¤åˆ¶ä¸­(Gcopystack): Gæ­£åœ¨è·å–æ–°çš„æ ˆç©ºé—´å¹¶ä¸”æŠŠåŸæœ‰æ•°æ®å¤åˆ¶è¿›å»(é˜²æ­¢ GC æ¸…ç†) GMP ä¸­ M çš„çŠ¶æ€ è‡ªæ—‹ä¸­: M æ­£åœ¨ä»è¿è¡Œé˜Ÿåˆ—ä¸­è·å– G æ‰§è¡Œ Go ä»£ç ä¸­: æ­£åœ¨è¿è¡Œ G æ‰§è¡ŒåŸç”Ÿä»£ç ä¸­: æ­£åœ¨è¿è¡Œ G çš„ syscall ä¼‘çœ ä¸­: æ²¡æœ‰ G æ—¶è¿›è¡Œä¼‘çœ  GMP ä¸­ P çš„çŠ¶æ€ ç©ºé—²ä¸­: M æ²¡æœ‰ G éœ€è¦è¿è¡Œæ—¶, P ç©ºé—² è¿è¡Œä¸­: M æ­£åœ¨è¿è¡Œ G ç³»ç»Ÿè°ƒç”¨ä¸­: G æ­£åœ¨ syscall GC åœæ­¢ä¸­: GC å¯¼è‡´æ•´ä¸ªä¸–ç•Œåœæ­¢ ç»ˆæ­¢: å¤šä½™çš„ P ä¼šç»ˆæ­¢ GMP æŠ¢å å¼è°ƒåº¦ æœ‰ä¸€ä¸ªé¢å¤–çš„çº¿ç¨‹Mè¿›è¡Œæ­»å¾ªç¯, å»æ£€æŸ¥ G çš„è¿è¡Œæ—¶é—´, å¦‚æœè¶…è¿‡10ms, åˆ™å»æŠ¢å è¿™ä¸ª G ä½¿ç”¨çš„ P, äº¤ç»™å…¶ä»–çš„ G ä½¿ç”¨ é€šçŸ¥ G åœæ­¢ä½¿ç”¨çš„æ˜¯ä¿¡å·åä½œ Go ä¸¤ä¸ªç»“æ„ä½“ç”Ÿæˆçš„å¯¹è±¡èƒ½ä¸èƒ½ç›¸äº’æ¯”è¾ƒ åŒä¸€ä¸ªç»“æ„ä½“ç”Ÿæˆçš„å¯¹è±¡å¯ä»¥ç›¸äº’æ¯”è¾ƒ ä¸åŒçš„å¦‚æœç»“æ„å’Œé¡ºåºå®Œå…¨ä¸€è‡´ä¹Ÿå¯ä»¥ Go çš„ context goè¯­è¨€çš„context - ChnMigçš„ä¸ªäººç½‘ç«™ context ä¸»è¦æ˜¯ä¸ºäº†æ§åˆ¶ goroutine çš„ç”Ÿå‘½å‘¨æœŸ, ctx ä¼ è¿›å»ä¹‹å select ç›‘å¬ Done ä¿¡å·å°±è¡Œ å¦å¤– redis åŒ…ç­‰ä¸€äº›åŒ…åœ¨è°ƒç”¨æ—¶éœ€è¦ä¼ å…¥ctx å‚æ•°, ä¸€èˆ¬ä½¿ç”¨ TODO contextæœ‰å››ç§, åˆ†åˆ«æ˜¯: WithCancel éœ€è¦æ‰‹åŠ¨çš„å‡ºå‘Doneæ‰ä¼šå–æ¶ˆ WithDeadline æŒ‡å®šä¸€ä¸ªç»ˆæ­¢æ—¶é—´(æ˜ç¡®çš„æ—¶é—´), å½“æ—¶é—´åˆ°å°±è‡ªåŠ¨å–æ¶ˆ WithTimeout æŒ‡å®šä¸€ä¸ªç»ˆæ­¢æ—¶é—´é—´éš”, å½“æ—¶é—´é—´éš”åˆ°æ—¶è‡ªåŠ¨å–æ¶ˆ WithValue è¿™ä¸ªç›®çš„ä¸æ˜¯å–æ¶ˆ, è€Œæ˜¯ä¸Šä¸‹æ–‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“ context å†…æœ‰ä¸€ä¸ª channel, å½“éœ€è¦å…³é—­æ—¶, å‘è¿™ä¸ª channel å‘é€æ•°æ®é€šçŸ¥å…³é—­ interface interface è™½ç„¶è¯´å¯ä»¥æ”¾è¿›ä»»æ„çš„æ•°æ®, æ¯”å¦‚è¯´ä¸€ä¸ªåˆ‡ç‰‡çš„ value æ˜¯ interface ç±»å‹, ä½†æ˜¯æ”¾è¿›å»ä¹‹åå°±å˜æˆäº† interface ç±»å‹, å³ä½¿æ‹¿å‡ºæ¥è¿˜è¦é€šè¿‡æ–­è¨€æ¥è½¬, æ‰€ä»¥åŸºæœ¬ä¸ç”¨ ç”¨æ¥å£çš„ç¨å¾®å¤šä¸€äº›, æ¯”å¦‚ç»Ÿä¸€çš„æ¨é€æ¥å£, è®©é’‰é’‰åŒ…å’Œé‚®ä»¶åŒ…éƒ½å®ç°è¿™ä¸ªæ¥å£, ç„¶åéœ€è¦å‘é€æ—¶ for è¿™å‡ ä¸ªå¯¹è±¡, è°ƒç”¨æ¥å£å³å¯ goroutine æ§åˆ¶ wg æ¥è¿›è¡Œå¤¯ä½æ•´ä¸ªç¨‹åºæ“ä½œ, Addä¹‹åDoneè¿›è¡Œå¤¯ä½ç¨‹åºç»“æŸ ä½¿ç”¨ context ç”Ÿæˆ ctx, ç›‘å¬ Done é˜Ÿåˆ—å¯ä»¥åœ¨å¤–å±‚è¿›è¡Œé€šçŸ¥å…³é—­, goroutine å†…è¿›è¡Œå…³é—­æ“ä½œ, ä¸»åŠ¨é€€å‡º å †å’Œæ ˆ Golangå†…å­˜åˆ†é…é€ƒé€¸åˆ†æ (driverzhang.github.io) åˆ†é…è§„åˆ™ æ ˆå­˜æ”¾å ç”¨å°çš„æ•°æ®, æ ˆå…ˆè¿›å…ˆå‡º, è€Œä¸”æ ˆåœ¨åˆ†é…æ—¶å¿…é¡»è¦æŒ‡å®šé•¿åº¦ å½“åœ¨å‡½æ•°å†…éƒ¨ç”³è¯·æ ˆçš„å†…å­˜æ—¶, å½“å‡½æ•°ç»“æŸ, æ ˆå†…å­˜ä¼šç›´æ¥é‡Šæ”¾è€Œä¸é€šè¿‡ GC, ä¸ä¼šå½±å“æ€§èƒ½ å½“å‡½æ•°å†…éƒ¨çš„å˜é‡, ä½œä¸ºè¿”å›å€¼è¿”å›äº†, ä¹Ÿå°±æ˜¯è¯´å…¶ä½œç”¨åŸŸä¸ä»…ä»…åœ¨å‡½æ•°å†…éƒ¨, é‚£ä¹ˆå³ä½¿å ç”¨å°è¿˜æ˜¯ä¼šåˆ†é…åˆ°å †ä¸Š, å¼•èµ· GC å¦‚æœç”³è¯·çš„å†…å­˜æ¯”è¾ƒå¤§, æ¯”å¦‚é•¿åº¦ä¸º20000çš„åˆ‡ç‰‡, å³ä½¿ä½œç”¨åŸŸåªåœ¨å†…éƒ¨, ä¹Ÿä¼šç”³è¯·åˆ°å †ä¸Š å¯¹äºåœ¨ç¼–è¯‘æ—¶ä¸èƒ½ç¡®å®šé•¿åº¦çš„æ•°æ®, ä¹Ÿä¼šåˆ†é…åˆ°å †ä¸Š é€ƒé€¸åˆ†æ å†³å®šåˆ†é…åˆ°å †è¿˜æ˜¯æ ˆçš„ä¸æ˜¯å¼€å‘è€…è€Œæ˜¯ go çš„ç¼–è¯‘å™¨, å½“ç¼–è¯‘å™¨æ£€æµ‹åˆ°æŸä¸ªå˜é‡ä¼šå‘ç”Ÿé€ƒé€¸, å°±ä¸€å®šä¼šå­˜æ”¾åˆ°å †ä¸Š æŒ‡é’ˆé€ƒé€¸: å‡½æ•°è¿”å›å±€éƒ¨å˜é‡çš„æŒ‡é’ˆæ—¶ æ ˆç©ºé—´ä¸è¶³: å±€éƒ¨å˜é‡çš„æ•°æ®é•¿åº¦è¿‡å¤§æ—¶ åŠ¨æ€ç±»å‹é€ƒé€¸: å‡½æ•°çš„å‚æ•°ä¸º interface è¿™ç§, ç¼–è¯‘å™¨æ— æ³•ç¡®è®¤å¤§å°æ—¶ é—­åŒ…å¼•ç”¨å¯¹è±¡é€ƒé€¸: å˜é‡è¢«é—­åŒ…å¼•ç”¨æ—¶ ä¼˜é›…çš„ç»“æŸç¨‹åº è®¾ç½®ä¸€ä¸ªç®¡é“ç›‘å¬å¼ºåˆ¶ç»“æŸçš„ os ä¿¡å·, åŒæ—¶è®¾ç½® defer çš„ ctx 12345ctx, cancel := context.WithCancel(context.Background())defer cancel() // å…³é—­ç®¡é“c := make(chan os.Signal, 1)signal.Notify(c, os.Interrupt)&lt;-c CSP å¹¶å‘æ¨¡å‹ ä¸è¦ä»¥å…±äº«å†…å­˜çš„æ–¹å¼æ¥é€šä¿¡, ç›¸å, è¦é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜ ä¾‹å¦‚Python, Javaè¿™ç§è¯­è¨€, ä»–ä»¬ä¸€èˆ¬ä½¿ç”¨çº¿ç¨‹è¿›è¡Œå¹¶å‘, å› ä¸ºéƒ½æ˜¯å±äºä¸€ä¸ªè¿›ç¨‹, æ‰€ä»¥é€šè¿‡å…±äº«çš„å†…å­˜æ¥è¿›è¡Œé€šä¿¡, æ¯”å¦‚è¯´å¦‚ä½•æ§åˆ¶å…³é—­pythonä¸‹çš„æŸä¸€ä¸ªçº¿ç¨‹, æ›´å®‰å…¨çš„åšæ³•å¯èƒ½æ˜¯ç»´æŠ¤ä¸€ä¸ªå­—å…¸ä¿å­˜å¯¹åº”çŠ¶æ€, è®©æ¯ä¸ªçº¿ç¨‹å»è·å–å­—å…¸æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦åœæ­¢, è¿™ç§é€šè¿‡å…±äº«å†…å­˜çš„æ–¹å¼è¿›è¡Œé€šä¿¡, è¦è€ƒè™‘ä¸€äº›é—®é¢˜ ä¾‹å¦‚æ•°æ®è¯»å†™æŠ¢å é—®é¢˜, æ¯”å¦‚Pythonåœ¨å¿…è¦çš„æ—¶å€™ä¼šåŠ ä¸€ä¸ªé”æ¥é˜²æ­¢èµ„æºç«äº‰, è¿™æ ·å…¶å®å°±æé«˜äº†ç¼–å†™æ—¶çš„é€»è¾‘å¤æ‚åº¦, å› ä¸ºä½ è¦è€ƒè™‘åˆ°æ­»é”çš„å¯èƒ½æ€§ è€Œå¯¹äºGolangæ¥è®², ä»–ä½¿ç”¨ GMP æ¨¡å‹ç»™å¼€å‘è€…åŒ…è£…æˆäº†goroutine, è®©å¼€å‘è€…èƒ½å¾ˆå®¹æ˜“çš„å¯ç”¨å¹¶å‘, è€Œå¯¹äºæ¯ä¸ª goroutineä¹‹é—´çš„é€šä¿¡, Golangæ¨èä½¿ç”¨channelç®¡é“æ¥å¤„ç†, è€Œä¸æ˜¯å…±äº«å†…å­˜ ä¸€èˆ¬çš„, é€»è¾‘å¯ä»¥æŠ½è±¡æˆæµæ°´å¼, å¯èƒ½ä¸­é—´çš„æŸä¸€æ­¥, éœ€è¦é€šè¿‡å¹¶å‘çš„æ–¹å¼æ¥æé«˜æ•ˆç‡, ç„¶ååˆ°æŸä¸€æ­¥çš„æ—¶å€™, åˆéœ€è¦è¿›è¡Œæµæ§, æ¯”å¦‚è¯´æ•°æ®çš„å…¥åº“ç­‰, ä½¿ç”¨å…±äº«å†…å­˜çš„æ–¹å¼, å¯èƒ½æ˜¯å‘åŒä¸€ä¸ªå˜é‡å­˜å‚¨æ•°æ®, è€Œåœ¨Golangä¸­, æˆ‘ä»¬å°±å¯ä»¥è®©å¹¶å‘çš„é‚£ä¸€æ­¥æ•°æ®å‘channelé‡Œå‘é€, è€Œä¸‹ä¸€æ­¥ä»channelä¸­è¯»å–, ä»è€Œè¿›è¡Œæµæ§ é” å½“ä»£ç ä¸­ç¡®å®å¯èƒ½å­˜åœ¨å¤šä¸ªgoroutineè¯•å›¾ä¿®æ”¹åŒä¸€ä¸ªæ•°æ®æ—¶, å°±éœ€è¦åŠ é”, é”åˆ†ä¸ºä¸¤ç§ äº’æ–¥é” äº’æ–¥é”åœ¨è¢«å ç”¨å, å…¶ä»–åç¨‹å®Œå…¨æ— æ³•è®¿é—®, ä¸å¯è¯»æ›´ä¸å¯å†™ 1234// äº’æ–¥é”, å ç”¨åä¸å¯è¯»ä¹Ÿä¸å¯å†™var lock sync.Mutexlock.Lock() // åŠ é”lock.Unlock() // è§£é” äº’æ–¥é”å†…éƒ¨ä½¿ç”¨ä¿¡å·é‡+è‡ªæ—‹çš„æ–¹å¼æ¥è¿›è¡Œé”çš„å¤„ç† è¯»å†™é” è¯»å†™äº’æ–¥é”å¯ä»¥æ·»åŠ ä¸¤ç§é”, è¯»é”å’Œå†™é”, åœ¨è¯»é”ä¸Šé”æ—¶å…¶ä»–åç¨‹å¯è¯»ä¸å¯å†™, å†™é”ä¸Šé”æ—¶å…¶ä»–åç¨‹ä¸å¯å†™ä¸å¯è¯» 1234567// è¯»å†™äº’æ–¥é”var rwlock sync.RWMutexrwlock.RLock() // è¯»é”, æ­¤æ—¶å…¶ä»–åç¨‹ä¸å¯å†™, ä¸å¯è¯»rwlock.RUnlock()rwlock.Lock() // å†™é”, æ­¤æ—¶å…¶ä»–åç¨‹æ— æ³•å†™, å¯ä»¥è¯»rwlock.Unlock() è¯»å†™é”ä¸­å†™é”ä¸ºäº’æ–¥é”, è€Œè¯»é”å°±æ˜¯ä¸€ä¸ªæ•°å­—, å› ä¸ºå…¶å¹¶ä¸äº’æ–¥, åªæ˜¯åœ¨åŠ å†™é”æ—¶æœ‰ç”¨ å•ä¾‹ åœ¨å¾ˆå¤šæ—¶å€™, æˆ‘ä»¬éœ€è¦ä¿è¯æŸä¸ªæ“ä½œåªæ‰§è¡Œä¸€æ¬¡, ä¾‹å¦‚ç”Ÿæˆé…ç½®æ–‡ä»¶, ä½ å¯èƒ½æŠŠä»–åŒ…è£…æˆä¸€ä¸ªæ¨¡å—è®©åˆ«äººä½¿ç”¨, è€Œä½ æ— æ³•æ§åˆ¶ä½¿ç”¨è€…åªè°ƒç”¨ä¸€æ¬¡ä½ çš„è¯»å–å‡½æ•°, æœ‰ä¸€ç§æ–¹æ³•æ˜¯åœ¨å†…éƒ¨ç”Ÿæˆå¯¹è±¡, åœ¨è°ƒç”¨è¯»å–å‡½æ•°æ—¶å…ˆæŸ¥çœ‹æ˜¯å¦ä¸ºnil, ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ sync.Once 1234567891011121314151617package configimport ( \"sync\")type Config struct {}var config *Configvar once sync.Once // ç”Ÿæˆåªæ‰§è¡Œä¸€æ¬¡çš„\"é”\"func InitConfig() *Config { once.Do(func() { // Do æ¥æ”¶ä¸€ä¸ªå‡½æ•° config = &amp;Config{} // åœ¨å‡½æ•°å†…è¿›è¡Œåˆå§‹åŒ– }) return config // è¿”å›} sync.Onceå†…éƒ¨åŒ…å«äº†ä¸€ä¸ªäº’æ–¥é”å’Œä¸€ä¸ªå¸ƒå°”å€¼, äº’æ–¥é”ä¿è¯äº†åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ä¸ä¼šæœ‰æŠ¢å , å¸ƒå°”å€¼ä¿è¯äº†åªä¼šæ‰§è¡Œä¸€æ¬¡ map å¹¶å‘ åœ¨å¤šä¸ªgoroutine æ“æ§åŒä¸€ä¸ª map æ—¶, å¯èƒ½ä¼šå‡ºç°å¹¶å‘æ•°æ®äº‰æŠ¢é—®é¢˜, å®˜æ–¹ä¸ºæˆ‘ä»¬æä¾›äº†sync.Map, æ˜¯å¹¶å‘å®‰å…¨çš„, ä½¿ç”¨æ—¶ä¸éœ€è¦ make, ä»–æ˜¯å¹¶å‘å®‰å…¨çš„ sync.mapç”Ÿæˆçš„ map æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³• store: æ›´æ–°/æ’å…¥ load: è·å– delete: åˆ é™¤ loadOrStore: æœ‰åˆ™è¿”å›, æ²¡æœ‰åˆ™æ’å…¥ range: éå†è¾“å‡º sync.mapä¸»è¦é€šè¿‡ä¸¤ä¸ªæ•°æ®é›†çš„æ–¹å¼, æ¥è¯»å†™åˆ†ç¦», æé«˜æ•ˆç‡ åŸå­æ“ä½œ go å½“ç„¶ä¹Ÿæœ‰å¾ˆå¤šçš„åŸå­æ“ä½œ, ä¿è¯ä¸ä¼šå‡ºç°æŠ¢å é—®é¢˜, åœ¨åŒ… sync/atomic ä¸­ æ¯”å¦‚ AddInt64 å°±æ˜¯å‘ä¸€ä¸ª int64 å€¼ä¸­å¢åŠ æŸæ•° ç›´æ¥ä½¿ç”¨åŸå­æ“ä½œè¦æ¯”è‡ªå·±åŠ é”æ¥å®ç°çš„æ•ˆç‡é«˜ map çš„åº•å±‚å®ç° go è¯­è¨€çš„ map æ˜¯ hashmap, ä½¿ç”¨æ•°ç»„+é“¾è¡¨çš„å½¢å¼å®ç° å°†keyç»è¿‡å“ˆå¸Œå¹¶åˆ‡åˆ†ç”Ÿæˆé«˜ä½å’Œä½ä½æ•°, é€šè¿‡ä½ä½æ•°å¯»æ‰¾å­˜å‚¨åœ¨å“ªä¸ªæ•°ç»„, é€šè¿‡é«˜ä½æ•°å¯»æ‰¾å­˜å‚¨åœ¨è¿™ä¸ªæ•°ç»„çš„å“ªä¸€ä¸ªåœ°æ–¹ map å†…çš„keyå’Œvalueå­˜å‚¨æ’åˆ—æ˜¯ 1key0, key1, key2, value0, value1, value2 è¿™æ˜¯å› ä¸ºkeyå’Œvalueåˆ†åˆ«ä¸ºä¸åŒçš„æ•°æ®ç»“æ„, å°†è‡³åˆ†åˆ«æ”¾åœ¨ä¸€èµ·å¯ä»¥è¾¾åˆ°å†…å­˜å¯¹é½çš„ç›®çš„ sort æ’åºç®—æ³• è‡ªå¸¦çš„sortåŒ…ä½¿ç”¨ç®€å•, å®ç°å¯¹åº”æ¥å£å³å¯ 12345type Interface interface { Len() int // Lenæ–¹æ³•è¿”å›é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•° Less(i, j int) bool // i&gt;jï¼Œè¯¥æ–¹æ³•è¿”å›ç´¢å¼•içš„å…ƒç´ æ˜¯å¦æ¯”ç´¢å¼•jçš„å…ƒç´ å°ã€ Swap(i, j int) // äº¤æ¢i, jçš„å€¼} sortå†…éƒ¨æ ¹æ®ä¸åŒæƒ…å†µé€‰æ‹©ä¸åŒçš„æ’åºç®—æ³• å½“é•¿åº¦å°äº12æ—¶è¿›è¡Œå¸Œå°”æ’åº é•¿åº¦å¤§äº12æ—¶, ä½¿ç”¨å¿«é€Ÿæ’åº å¸Œå°”æ’åº å¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n^(1.3-2)), åœ¨åº”å¯¹æ•°æ®ä¸é•¿çš„æ—¶å€™é€Ÿåº¦è¾ƒå¿«, å…¶æ­¥éª¤å¦‚ä¸‹ è®¡ç®—å¢é‡, åˆå§‹æ˜¯gap=length/2, å¦‚æœåˆ—è¡¨é•¿åº¦æ˜¯12å°±æ˜¯6 å°†åŸæœ¬çš„åˆ—è¡¨æŒ‰ç…§æ­¥é•¿è·³è·ƒ, åˆ†ä¸º6ä¸ªå­åˆ—è¡¨, æ¯ä¸ªåˆ—è¡¨æœ‰2ä¸ªæ•°æ®, ä¾‹å¦‚[1, 3, 2, 4]å°±å°†å…¶æ‹†åˆ†ä¸º[1, 2]å’Œ[3, 4] å°†è¿™å‡ ä¸ªå­åˆ—è¡¨è¿›è¡Œæ’åºæ¯”è¾ƒ(å½“ç„¶å¹¶ä¸æ˜¯çœŸçš„ç‹¬ç«‹å‡ºæ¥, åªæ˜¯åœ¨åŸåˆ—è¡¨ä¸­æ ¹æ®ç´¢å¼•æ¯”å¯¹) ç¼©å°å¢é‡, gap=gap/2 é‡å¤æ­¥éª¤2, 3, 4 å¢é‡ç¼©å°ä¸º1, ç»“æŸ åœ¨é•¿åº¦ä¸å¤šçš„æ—¶å€™, å¢é‡ä¸ä¼šå¾ˆå¤§, ç¼©å°èµ·æ¥å¾ˆå¿«, é€Ÿåº¦è¾ƒå¿« å¿«é€Ÿæ’åº åœ¨æ•°æ®è¾ƒå¤§çš„æ—¶å€™, å¿«æ’çš„é€Ÿåº¦æ›´å¿«, æ—¶é—´å¤æ‚åº¦ä¸ºo(nlogn) å¿«é€Ÿæ’åºæ˜¯æœ‰L(ç´¢å¼•)å’ŒR(ç´¢å¼•)å’Œtemp(å›ºå®šå€¼), ç”±æ­¤æ¥è¿›è¡Œåˆ†åŒº, æ­¥éª¤å¦‚ä¸‹ Lå¼€å§‹æ˜¯ç¬¬0ä½(ç´¢å¼•), Rå¼€å§‹æ˜¯æœ€åä¸€ä½(ç´¢å¼•), tempä¸ºç¬¬0ä½ å°†Lå‘åç§»åŠ¨, å¦‚æœæ‰«æåˆ°Lçš„å€¼å°äºtempçš„å€¼, åˆ™å°†tempçš„ä½ç½®ä¸Lå½“å‰çš„ä½ç½®è¿›è¡Œè°ƒæ¢ Lä¸åŠ¨, å°†Rå‘å‰ç§»åŠ¨, å¦‚æœæ‰«æåˆ°Rçš„å€¼å°äºtempçš„å€¼, åˆ™å°†tempçš„ä½ç½®ä¸Rå½“å‰çš„ä½ç½®è¿›è¡Œè°ƒæ¢ å¾ªç¯æ­¥éª¤2, 3ä¸€ç›´åˆ°Lå’ŒRç›¸ç­‰, æ­¤æ—¶ä»¥tempä¸ºç•Œ, å·¦è¾¹æ¯”tempå°, å³è¾¹æ¯”tempå¤§ æŒ‰ç…§tempä¸ºç•Œ, å°†å·¦è¾¹å’Œå³è¾¹åˆ†åˆ«é‡å¤æ­¥éª¤1åˆ°4, ä¸€ç›´åˆ°åˆ†ä¸å‡ºæ¥, ç»“æŸ å¿«æ’ä¸»è¦æ˜¯é€šè¿‡åˆ†ç•Œ, å°†åˆ—è¡¨åˆ‡åˆ†, ç„¶åå¯¹åˆ‡åˆ†çš„å­åˆ—è¡¨å†åˆ‡åˆ†, è¾¾åˆ°æ’åºçš„ç›®çš„ Defer defer ä¸»è¦ç”¨äºå»¶è¿Ÿè°ƒç”¨, defer ä¼šåœ¨å‡½æ•°è¿”å›ä¹‹å‰æ‰§è¡Œ defer æ³¨å†Œçš„å‡½æ•° defer çš„æ³¨å†Œé¡ºåºå’Œæ‰§è¡Œé¡ºåºæ˜¯ç›¸åçš„, ä¹Ÿå°±æ˜¯å…ˆè¿›åå‡º å¦å¤–, defer å¯ä»¥ä¸recoverä¸€èµ·ä½¿ç”¨, ç±»ä¼¼äº python çš„try, æ¥æ•æ‰ç¨‹åºçš„panic, ä»è€Œé˜²æ­¢ç¨‹åºç›´æ¥é€€å‡º 12345defer func() { if r := recover(); r != nil { // æ•æ‰ fmt.Println(\"Recovered in f\", r) }}() goroutineå¦‚ä½•é˜»å¡ WaitGroupè¿›è¡Œç­‰å¾… ç›‘å¬ctx.Done()ç®¡é“ forå¾ªç¯ å‘ä¸€ä¸ªæ²¡æœ‰æ¥å—è€…å¹¶ä¸”ç¼“å†²åŒºå·²æ»¡çš„ chan å‘é€æ•°æ® ä»ä¸€ä¸ªæ²¡æœ‰å‘é€è€…å¹¶ä¸”ç¼“å†²åŒºä¸ºç©ºçš„ chan è¯»å–æ•°æ® goroutine ä»€ä¹ˆæ—¶å€™å‘ç”Ÿé˜»å¡ ç­‰å¾… channel å‘ç”Ÿä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨ç­‰å¾…å›è°ƒç»“æœ â€¦ goroutine é˜»å¡æ—¶è°ƒåº¦å™¨æ€ä¹ˆåš è°ƒåº¦å™¨å°†é˜»å¡çš„ goroutine æ”¾åˆ°ä¸€è¾¹, åˆ‡æ¢åˆ°å…¶ä»– goroutine ç»§ç»­æ‰§è¡Œ, ç›´åˆ°è¿™ä¸ª goroutine ç»“æŸé˜»å¡ channel è‡ªåŠ¨å…³é—­ åœ¨è¿™ä¸ª channel æ²¡æœ‰goroutine æŒæœ‰æ—¶, ä¼šè‡ªåŠ¨å…³é—­ goroutine çš„æœ€å¤§æ•°é‡ åœ¨1.4ç‰ˆæœ¬ä¹‹å, ä¸€ä¸ª goroutine å ç”¨2kbçš„å†…å­˜å¤§å° é™åˆ¶åç¨‹æ•°é‡ ä½¿ç”¨ channel æ¥é™åˆ¶åç¨‹æ•°é‡, channel ç¼“å†²åŒºçš„é•¿åº¦å°±æ˜¯åç¨‹æœ€å¤§æ•°é‡ 12345678910111213var ch chan intfunc test(i int) { fmt.Println(i) time.Sleep(1 * 1e9) &lt;-ch // goroutine è¿è¡Œç»“æŸåå°†æŒ‡æ ‡è¿”å›}func main() { ch = make(chan int, 10) // æœ€å¤šå…è®¸10ä¸ª goroutine for i:=0; i&lt;1000; i++ { ch&lt;-i // æœ‰æŒ‡æ ‡å†è¿›è¡Œ goroutine å¯åŠ¨, æ²¡æœ‰å°±ä¸€ç›´å¤¯ä½ go test(i) }} new å’Œ make åŒºåˆ« new åˆ†é…å†…å­˜ new ä¸ºæ–°çš„ç±»å‹åˆ†é…å†…å­˜, è¿”å›å¯¹åº”çš„æŒ‡é’ˆ, æ¯”å¦‚åˆ›å»º å¯¹è±¡, struct ç­‰ new è¿”å›çš„æ˜¯æŒ‡é’ˆ, ä¸ä½¿ç”¨æŒ‡é’ˆçš„æ—¶å€™ä¸€èˆ¬ä¸ä½¿ç”¨ new make åˆå§‹åŒ– è¿”å›ç±»å‹çš„åˆå§‹å€¼, åªé€‚ç”¨äºåˆ‡ç‰‡/map/channel go çš„å†…å­˜åˆ†é… åˆ†ä¸º3å— spans: 512MB bitmap: 16GB arena: 512GB arena å †åŒº, åŠ¨æ€åˆ†é…çš„å†…å­˜åœ¨è¿™é‡Œ, go æŠŠå†…å­˜åˆ†å‰²æˆæ¯ä¸ª 8kb çš„è‹¥å¹²é¡µ(page) bitmap æ ‡è®° arena å¯¹è±¡çš„åœ°å€, å¹¶æœ‰4bit æ ‡å¿—ä½æ ‡è¯†äº†å¯¹è±¡æ˜¯å¦åŒ…å«æŒ‡é’ˆå’Œ GC æ ‡è®°ä¿¡æ¯ bitmap ä¸­ä¸€ä¸ª bytes(8bit) å¤§å°çš„å†…å­˜å¯¹åº” arena é‡Œ4ä¸ªæŒ‡é’ˆå¤§å°(32bit)çš„å†…å­˜, spans span æ˜¯ go å†…å­˜ç®¡ç†çš„åŸºæœ¬å•ä½, span æœ‰å¤šç§è§„æ ¼, æ¯ä¸ªè§„æ ¼å ç”¨è‹¥å¹²ä¸ª page, æœ€å¤§çš„ span æ˜¯32kb, è¶…è¿‡32kb åˆ™æ˜¯ç‰¹æ®Šçš„ class ç»“æ„ä½“ä½œä¸ºå‚æ•°ä¼ å…¥æ—¶, ä¼ å€¼è¿˜æ˜¯æŒ‡é’ˆ go éƒ½æ˜¯å€¼ä¼ é€’, åªæ˜¯å‚æ•°å¯ä»¥é€‰å€¼ç±»å‹è¿˜æ˜¯å¼•ç”¨ç±»å‹ çœ‹å…·ä½“çš„é€»è¾‘, å¦‚æœéœ€è¦ä¿®æ”¹ç»“æ„ä½“çš„å€¼æ—¶, éœ€è¦ä¼ å…¥æŒ‡é’ˆæ¥ä¿®æ”¹æ•°æ® å…¶ä»–æ—¶å€™ä¼ å€¼, å› ä¸ºç»“æ„ä½“ä¸€èˆ¬å­˜å‚¨åœ¨æ ˆä¸Š(å‰ææ˜¯ç»“æ„ä½“ä¸æ˜¯ç‰¹åˆ«å¤§), æ ˆçš„ä»£ä»·å¾ˆå°, è€Œä¼ æŒ‡é’ˆæœ‰å¯èƒ½ä¼šå¼•å‘å†…å­˜é€ƒé€¸ go ä¸­ä½¿ç”¨è¿‡çº¿ç¨‹å— GMP æ¨¡å‹ä¸­ M ä¸ºæ“ä½œç³»ç»Ÿçº¿ç¨‹, ç”± go è°ƒåº¦, å®é™…çš„åº”ç”¨å¼€å‘ä¸­æ²¡æœ‰ç›´æ¥ä½¿ç”¨è¿‡ linux æœ‰å‡ ç§çº¿ç¨‹æ¨¡å‹ ä¸€å¯¹ä¸€(M:1) å¤šå¯¹ä¸€(1:1) å¤šå¯¹å¤š(M:N) go çº¿ç¨‹ä¸­æŸä¸€ä¸ªå‘ç”Ÿäº† OOM(å†…å­˜æ³„éœ²) ä¼šæ€æ · kill æ‰è¿™ä¸ªçº¿ç¨‹, ä¸å½±å“å…¶ä»–çº¿ç¨‹ goroutine å‘ç”Ÿ OOM ä»€ä¹ˆæƒ…å†µ æ²¡é‡åˆ°è¿‡, æœ¬åœ°å†™ä»£ç å‘ç”Ÿè¿‡å†…å­˜é€ƒé€¸, å‘ç°æ˜¯ slice çš„å‘ OOM æ’æŸ¥ ä¸ªäººç»éªŒæ˜¯ OOM åŸºæœ¬éƒ½æ˜¯ giroutine æ³„éœ², ä½¿ç”¨ pprof å®šä½é—®é¢˜ç„¶åæ’æŸ¥ é”™è¯¯å¤„ç†æ€ä¹ˆåš ä¸æ˜¯ç‰¹åˆ«ç®€å•çš„é€»è¾‘, ç‰µæ‰¯åˆ°è°ƒç”¨å…¶ä»–æœåŠ¡çš„å‡½æ•°, ä¸€å®šæœ‰ error è¿”å›å€¼ å¤–é¢é€šè¿‡åˆ¤æ–­ err!=nil è¿›è¡Œé”™è¯¯æ•æ‰, é€šè¿‡fmt.Errorf(\"test\")è¿›è¡Œ error åˆ›å»º goroutine å‘ç”Ÿ panic ä¼šæ€æ · å¦‚æœæ²¡æœ‰è®¾ç½®recoveræ•æ‰, ä¼šå¯¼è‡´æ•´ä¸ªç¨‹åºå´©æºƒ goroutine æ˜¯äº’ç›¸ç‹¬ç«‹çš„, recoverå¿…é¡»åœ¨æœ¬å±‚, å¦åˆ™æ— æ³•æ•æ‰ panic æ€ä¹ˆç®¡ç†çš„ proto æ–‡ä»¶ å•ç‹¬çš„ä»“åº“å­˜æ”¾, é€šè¿‡ git ç®¡ç† gin æ¡†æ¶ä½¿ç”¨å‚æ•°æ ¡éªŒ gin å†…ç½®äº† go-playground/validator: ğŸ’¯Go Struct and Field validation, including Cross Field, Cross Struct, Map, Slice and Array diving (github.com) æ’ä»¶, å…ˆå®šä¹‰æ ¡éªŒçš„ç»“æ„ä½“, é€šè¿‡tagçš„æ–¹å¼æŒ‡å®šå­—æ®µåå­—, æ˜¯å¦å¿…å¡«ç­‰ä¿¡æ¯, é€šè¿‡ c.ShouldBindæ¥è¿›è¡Œå‚æ•°çš„æ ¡éªŒ gin çš„ä¸­é—´ä»¶ ç»å¸¸ä½¿ç”¨è‡ªå·±å†™çš„åŒæ„è·¨åŸŸä¸­é—´ä»¶ gin.Default()é»˜è®¤å¸¦ä¸¤ä¸ªä¸­é—´ä»¶, ä¸€ä¸ªæ˜¯æ‰“å°æ—¥å¿—, ä¸€ä¸ªæ˜¯æ•æ‰ panic å¤„ç†æˆ500é”™è¯¯ ä½¿ç”¨router.Use()æ·»åŠ è‡ªå®šä¹‰ä¸­é—´ä»¶ gin è·¨åŸŸä¸­é—´ä»¶ è·¨åŸŸä¸»è¦æ˜¯æµè§ˆå™¨ä»æœåŠ¡ç«¯è¿”å›çš„ Header ä¸­è·å–æŒ‡å®šçš„ key, æ¥åˆ¤æ–­æ˜¯å¦æ˜¯è·¨åŸŸçš„ æµè§ˆå™¨å°†è¯·æ±‚åˆ†ä¸ºä¸¤ç§: ç®€å•è¯·æ±‚ ä½¿ç”¨ GETã€POSTã€HEAD å…¶ä¸­ä¸€ç§è¯·æ±‚æ–¹æ³•ã€‚ HTTPçš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µï¼š Accept Accept-Language Content-Language Last-Event-ID Content-Typeï¼šåªé™äºä¸‰ä¸ªå€¼ application/x-www-form-urlencodedã€multipart/form-dataã€text/plain ç®€å•è¯·æ±‚çš„åŒæ„è·¨åŸŸ, ç›´æ¥åœ¨è¿”å›å€¼çš„ header ä¸­æ’å…¥Access-Control-Allow-Origin: *å³å¯ éç®€å•è¯·æ±‚ è¯·æ±‚æ–¹æ³•æ˜¯ put æˆ– delete, æˆ–è€… content-type çš„ç±»å‹æ˜¯ application/json å…¶å®ç®€å•è¯·æ±‚ä¹‹å¤–çš„éƒ½æ˜¯éç®€å•è¯·æ±‚äº† æµè§ˆå™¨åœ¨å¤„ç†éç®€å•è¯·æ±‚æ—¶, ä¼šå…ˆå‘é€OPTIONSæ–¹æ³•, æŸ¥çœ‹è¿”å›å€¼çš„ header å­—æ®µ, ç¬¦åˆè¦æ±‚åˆ™åŒæ„è·¨åŸŸ gin ä½¿ç”¨ä¸­é—´ä»¶æ—¶, ä½¿ç”¨c.Headeræ·»åŠ Headeræ•°æ®, ä½¿ç”¨c.Next()å°†è¯·æ±‚å¤„ç†ç§»äº¤åˆ°ä¸‹ä¸€éƒ¨åˆ† go æ€ä¹ˆè§£æ tag ä½¿ç”¨åå°„è¿›è¡Œ tag çš„è§£æ åå°„åŸç† go çš„reflectåŒ…æä¾›äº†åå°„çš„æ”¯æŒ è·å–å¯¹è±¡çš„ type å’Œ value çš„å…ƒæ•°æ®å’Œä¸€äº›æ–¹æ³•, è¿›è¡Œè°ƒç”¨ åå°„ä¸€èˆ¬ä¸ä½¿ç”¨ å¯è¯»æ€§å·® å¯èƒ½ä¼š panic å½±å“æ•ˆç‡ channelçš„å‘ å‘ä¸€ä¸ªå·²ç» close çš„ chan å†™å…¥æ•°æ®ä¼š panic ä»ä¸€ä¸ªå·²ç» close çš„ chan è¯»å–æ•°æ®ä¼šè·å–åˆ° chan æ•°æ®ç±»å‹çš„é»˜è®¤å€¼ æ¨èä½¿ç”¨for i := range chanæˆ–è€…selectæ¥è¯»å– chan æ•°æ®, è¿™æ ·åœ¨å…³é—­åè‡ªåŠ¨é€€å‡º æœ‰å¯èƒ½é€ æˆ goroutine é˜»å¡ è´Ÿè½½å‡è¡¡ç®—æ³• å“ˆå¸Œ æ ¹æ® hash å–æ¨¡è¿›è¡Œåˆ†é…, ä¿è¯åŒä¸€ä¸ª key ä¼šåˆ†é…åˆ°åŒä¸€ä¸ªèŠ‚ç‚¹ å¯èƒ½ä¼šå¯¼è‡´ä¸å‡è¡¡ è½®è¯¢ æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œè½®è¯¢, æ’åºé€‰æ‹©åˆ†é…çš„èŠ‚ç‚¹ è¯·æ±‚å‡è¡¡, ä½†æ˜¯è´Ÿè½½ä¸ä¸€å®š éšæœº éšæœºé€‰ä¸€ä¸ªèŠ‚ç‚¹ ç±»ä¼¼è½®è¯¢ åŠ æƒè½®è¯¢ æ ¹æ®æƒé‡ä¼˜å…ˆåˆ†é…ç»™æƒé‡é«˜çš„èŠ‚ç‚¹ select æ‰§è¡ŒåŸç† å…·ä½“çš„ä»£ç åœ¨selectgoä¸­ å…ˆå°† case æ‰“ä¹±é¡ºåº, ç„¶åå°è¯•ä» chan è·å–å€¼, æ²¡æœ‰åˆ™è¿è¡Œ default, æ²¡æœ‰å®šä¹‰ default æ—¶å°†æ‰€åœ¨çš„ G åŠ å…¥åˆ°å¯¹åº”çš„ N ä¸ª chan ç›‘å¬é˜Ÿåˆ—ä¸­ç­‰å¾…å”¤é†’ channel å…³é—­åå¯¹ channel æ“ä½œä¼šå‡ºç°ä»€ä¹ˆ ä½¿ç”¨clse(ch1)æ¥å…³é—­ç®¡é“ åœ¨ close æ—¶, go ä¼šå°† chan ä¸­ç­‰å¾…æ’å…¥æ•°æ®çš„ goroutine å…¨éƒ¨å”¤é†’, å¹¶ä¸”è®¾ç½®æ’å…¥çš„å€¼ä¸º nil å¦‚æœä» chan ä¸­å°è¯•å‘é€æ•°æ®, ä¼šå¯¼è‡´ç¨‹åºpanic å¦‚æœä» chan ä¸­å°è¯•è¯»å–æ•°æ®, ä¼šè¯»å–å‡ºå­˜å‚¨ç±»å‹çš„é»˜è®¤å€¼, ä¸ä¼š panic å¤§å¯¹è±¡/å°å¯¹è±¡/å¾®å¯¹è±¡ å¤§å¯¹è±¡ å ç”¨å†…å­˜&gt;32kb æ—¶, è®¤ä¸ºä»–æ˜¯å¤§å¯¹è±¡ å¤§å¯¹è±¡åˆ†é…ä¸èµ° mcache å’Œ mcentral, ç›´æ¥é€šè¿‡ mheap åˆ†é… å°å¯¹è±¡ 16b&lt;å ç”¨å†…å­˜&lt;32kb æ—¶, è®¤ä¸ºä»–æ˜¯å°å¯¹è±¡ å°å¯¹è±¡å…ˆè·å–åˆ°åˆé€‚å¤§å°çš„çš„ mspan, å¹¶å­˜å‚¨åˆ° mheap ä¸­ å¾®å¯¹è±¡ å ç”¨å†…å­˜&lt;16b æ—¶, è®¤ä¸ºä»–æ˜¯å¾®å¯¹è±¡ å¾®å¯¹è±¡ç›´æ¥å­˜å‚¨åœ¨ mcache ä¸Š, æ¯ä¸ªå¾®å¯¹è±¡çš„å¤§å°æ˜¯16b","link":"/2022/01/20/go_interview/"},{"title":"Golang çš„é”","text":"å‰è¨€ go è¯­è¨€çš„é”, ä¸€è¯´å¤§å®¶éƒ½çŸ¥é“, ä¸€ä¸ªæ˜¯äº’æ–¥é”Mutex, ä¸€ä¸ªæ˜¯è¯»å†™äº’æ–¥é”RWMutex, ç”¨èµ·æ¥å¾ˆç®€å•, ä½†æ˜¯è¦æƒ³åœ¨æŠ€æœ¯ä¸Šæ›´è¿›ä¸€æ­¥, è¿˜æ˜¯éœ€è¦äº†è§£å…¶åŸç† åŸºç¡€çŸ¥è¯† è¿›ç¨‹åŒæ­¥ æ—¢ç„¶æ˜¯é”, å°±æ„å‘³ç€åœ¨åŠ é”ä¹‹å, å…¶ä»–goroutineè·å–é”, å°±éœ€è¦ç­‰å¾…, è¿™é‡Œå°±éœ€è¦äº†è§£æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹åŒæ­¥æœºåˆ¶ è¿›ç¨‹åŒæ­¥å…¶å®æ˜¯æ§åˆ¶ä¸´ç•ŒåŒºå†…çš„æƒé™, å½“ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºæ—¶, å…¶ä»–æƒ³è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹åªèƒ½ç­‰å¾…, ä¹Ÿå°±æ˜¯è¯´, ä¸´ç•ŒåŒºæ˜¯äº’æ–¥çš„, è€Œä¸´ç•ŒåŒºå†…çš„èµ„æº, åˆ™æ˜¯ä¸´ç•Œèµ„æº è®¿é—®ä¸´ç•ŒåŒºæœ‰å‡ ç§æƒ…å†µ: ç©ºé—²è®©è¿›: å½“æ²¡æœ‰è¿›ç¨‹åœ¨ä¸´ç•ŒåŒºæ—¶, ä»£è¡¨ä¸´ç•ŒåŒºæ˜¯ç©ºé—²çš„, æ­¤æ—¶ä¸€ä¸ªè¿›ç¨‹å¯ä»¥ç«‹å³è¿›å…¥ä¸´ç•ŒåŒº, è®¿é—®ä¸´ç•Œèµ„æº å¿™ç­‰: å½“å·²ç»æœ‰è¿›ç¨‹åœ¨ä¸´ç•ŒåŒºå†…æ—¶, ä»£è¡¨ä¸´ç•ŒåŒºæœ‰äººæ­£åœ¨è®¿é—®, æ‰€ä»¥å…¶ä»–æƒ³è¦è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾… æœ‰é™ç­‰å¾…: å½“è¿›ç¨‹ç­‰å¾…è®¿é—®ä¸´ç•ŒåŒºæ—¶, è®¾ç½®ä¸€å®šçš„è¶…æ—¶æ—¶é—´, é¿å…ä¸€ç›´ç­‰å¾… è®©æƒ: å½“è¿›ç¨‹è®¿é—®ä¸´ç•ŒåŒºå‘ç°éœ€è¦ç­‰å¾…æ—¶, ç«‹åˆ»é‡Šæ”¾èµ„æº, é¿å…å¤¯ä½ ä¿¡å·é‡ é‚£ä¹ˆåœ¨ä¸€ä¸ªè¿›ç¨‹ç»“æŸå, æ€ä¹ˆé€šçŸ¥å…¶ä»–è¿›ç¨‹è¿›å…¥å‘¢? è¿™å°±éœ€è¦ä¿¡å·é‡ ä¿¡å·é‡åˆ†ä¸ºå››ç§ç±»å‹: æ•´å½¢ä¿¡å·é‡ è®°å½•å‹ä¿¡å·é‡ AND å‹ä¿¡å·é‡ ä¿¡å·é‡é›† ä»¥æ•´å½¢ä¿¡å·é‡ä¸ºä¾‹, æ ¸å¿ƒæ˜¯è®¾ç½®ä¸€ä¸ªç”¨äºè¡¨ç¤ºèµ„æºæ•°é‡çš„æ•´å½¢ A, è¿™ä¸ª A æœ‰ä¸¤ç§æ“ä½œ, ä¸€ä¸ªæ˜¯å‡å°(wait), ä¸€ä¸ªæ˜¯å¢å¤§(signal) åœ¨è¿›å…¥èµ„æºåŒºæ—¶è¿›è¡Œwaitæ“ä½œ, åœ¨é€€å‡ºæ—¶è¿›è¡Œsignalæ“ä½œ é€šè¿‡å¯¹ä¿¡å·é‡çš„å¤§å°å¯¹æ¯”, å¯ä»¥è·å–å½“å‰ç­‰å¾…è¿›ç¨‹å’Œæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ•°é‡ä¸å½“å‰çš„çŠ¶æ€ è‡ªæ—‹ åœ¨è¿›ç¨‹ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºæ—¶, ä¼šè¿›è¡Œç­‰å¾…, ä½†æ˜¯å¹¶ä¸æ˜¯ç«‹åˆ»å°±è¿›å…¥ç­‰å¾…äº†, è€Œæ˜¯å…ˆä¸åœçš„å»ä¾¦æµ‹è¿™ä¸ªé”æ˜¯å¦æœ‰è¢«é‡Šæ”¾æ‰, è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä½œè‡ªæ—‹, è¿™ä¹Ÿæ˜¯é”çš„ä¸€ç§, åœ¨è‡ªæ—‹è¿‡ç¨‹ä¸­, å¦‚æœå‘ç°ä¸´ç•ŒåŒºç©ºç½®äº†, å°±ç«‹åˆ»è¿›å…¥ä¸´ç•ŒåŒº. è‡ªæ—‹å…¶å®å°±æ˜¯éš”ä¸€æ®µæ—¶é—´è®¿é—®ä¸€æ¬¡ä¸´ç•ŒåŒºæŸ¥çœ‹æ˜¯å¦ç©ºé—², æ‰€ä»¥è‡ªæ—‹è¿‡ç¨‹ä¸­, è¿™ä¸ªè¿›ç¨‹å¹¶ä¸æ˜¯ç­‰å¾…çš„ è‡ªæ—‹çš„å­˜åœ¨ç›®çš„æ˜¯ä¸ºäº†æ›´åŠ çš„é«˜æ•ˆ, å› ä¸ºæœ‰å¯èƒ½åœ¨ç­‰å¾…æ—¶é—´å¾ˆçŸ­, è‡ªæ—‹å¯ä»¥è®©è¿›ç¨‹ä¸å¿…åˆ‡æ¢çŠ¶æ€ è€Œç¼ºç‚¹æ˜¯å› ä¸ºè¿›ç¨‹ä¸æ˜¯ç­‰å¾…, è¿˜åœ¨è¿ä½œ, ä¼šå¯¼è‡´èµ„æºæŸè€—, æ‰€ä»¥åœ¨ç­‰å¾…æ—¶, å…ˆä½¿ç”¨è‡ªæ—‹è¿›è¡Œè·å–é”, åœ¨å‡ æ¬¡ä¹‹åä¾æ—§è·å–ä¸åˆ°, åˆ™å˜ä¸ºç­‰å¾…çŠ¶æ€ è‡ªæ—‹çš„é—®é¢˜ å¦‚æœæ¯ä¸€ä¸ªæ–°æ¥çš„è¿›ç¨‹éƒ½åœ¨è·å–ä¸åˆ°é”æ—¶, è¿›è¡Œå›æ—‹, å°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜, æ¯”å¦‚ä¹‹å‰æœ‰3ä¸ªè¿›ç¨‹åœ¨è‡ªæ—‹åä¾æ—§æ²¡æœ‰è·å–åˆ°é”, è¿›å…¥åˆ°äº†ç­‰å¾…çŠ¶æ€, æ­¤æ—¶ä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥äº†, ä»–åœ¨è·å–ä¸åˆ°é”æ—¶, è¿›å…¥äº†è‡ªæ—‹çŠ¶æ€, è€Œæ­¤æ—¶å ç”¨é”çš„è¿›ç¨‹é€€å‡ºäº†, é‚£ä¹ˆè¿™ä¸€ä¸ªæ–°çš„è¿›ç¨‹å°±ä¼šæœ€å…ˆè·å–åˆ°é”, ç±»ä¼¼äºæ’é˜Ÿçš„é—®é¢˜, è¿™æ ·æ˜¾ç„¶æ˜¯ä¸å…¬å¹³çš„, ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, ä¸€èˆ¬æ˜¯ä¸ºé”å¢åŠ é¥¥é¥¿çŠ¶æ€, åœ¨é¥¥é¥¿çŠ¶æ€ä¸‹, ä¸å…è®¸è¿›ç¨‹è¿›å…¥è‡ªæ—‹, ç›´æ¥ç­‰å¾… äº’æ–¥é” åœ¨äº†è§£åŸºæœ¬çš„çŸ¥è¯†å, æˆ‘ä»¬æ¥å¥—å…¥åˆ° go è¯­è¨€ä¸­ äº’æ–¥é”åœ¨è¢«å ç”¨å, å…¶ä»–åç¨‹å®Œå…¨æ— æ³•è®¿é—®, ä¸å¯è¯»æ›´ä¸å¯å†™ 1234// äº’æ–¥é”, å ç”¨åä¸å¯è¯»ä¹Ÿä¸å¯å†™var lock sync.Mutexlock.Lock() // åŠ é”lock.Unlock() // è§£é” ç»“æ„ sync.Mutexçš„æ•°æ®ç»“æ„å¦‚ä¸‹ 1234type Mutex struct { state int32 // å½“å‰äº’æ–¥é”çš„çŠ¶æ€ sema uint32 // é”çš„ä¿¡å·é‡} state stateè®°å½•äº†å››ä¸ªçŠ¶æ€. åˆ†åˆ«æ˜¯: waiter_num(29bit): å½“å‰ç­‰å¾…æŠ¢å è¿™ä¸ªé”çš„goroutineæ•°é‡ starving(1bit): å½“å‰é”æ˜¯å¦å¤„äºé¥¥é¥¿çŠ¶æ€(0:æ— /1:æœ‰) woken(1bit): å½“å‰é”æ˜¯å¦æœ‰goroutineå·²ç»è¢«å”¤é†’(0:æ— /1:æœ‰) locked(1bit): å½“å‰é”æ˜¯å¦è¢«goroutineæŒæœ‰(0:æ— /1:æœ‰) sema sema è®°å½•äº†ä¿¡å·é‡, å½“é”è¢«ä¸€ä¸ªgoroutineé‡Šæ”¾æ—¶, ä¼šé‡Šæ”¾è¿™ä¸ªä¿¡å·é‡, å”¤é†’ä¹‹å‰æŠ¢é”çš„æ­£åœ¨é˜»å¡çš„goroutineæ¥è·å–é” è¿è¡Œæµç¨‹ æ­£å¸¸æ¨¡å¼ åœ¨æ­£å¸¸æ¨¡å¼ä¸‹, ç­‰å¾…çš„åç¨‹æŒ‰ç…§å…ˆå…¥å…ˆå‡ºçš„æ–¹å¼æ’åˆ—, å½“ä¸€ä¸ªåç¨‹è¢«ä¿¡å·å”¤é†’å, è¿™ä¸ªåç¨‹å¹¶ä¸æ˜¯ç›´æ¥è·å–åˆ°é”, è€Œæ˜¯å’Œåˆšåˆšåˆ°è¾¾çš„åç¨‹ä¸€èµ·ç«äº‰é”çš„æ‰€æœ‰æƒ. æ–°åˆ°çš„åç¨‹æœ‰ä¸€ä¸ªä¼˜åŠ¿, å°±æ˜¯ä»–å› ä¸ºåˆšåˆ°, ç°åœ¨è¿˜åœ¨ CPU ä¸Šè¿è¡Œ, è€Œå”¤é†’çš„åç¨‹, åˆšä»ç­‰å¾…çŠ¶æ€å‡†å¤‡å¯åŠ¨, è€Œä¸”æ–°åˆ°çš„åç¨‹æœ‰å¯èƒ½ä¸æ­¢ä¸€ä¸ª, æ‰€ä»¥è¿™ä¸ªè¢«å”¤é†’çš„åç¨‹å¾ˆå¤§æ¦‚ç‡æŠ¢ä¸åˆ°é”. ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, è¢«å”¤é†’çš„è¿™ä¸ªåç¨‹ä¼šè¢«æ”¾åˆ°ç­‰å¾…é˜Ÿåˆ—çš„ç¬¬ä¸€ä½. ç”±ä»–æ¥ç¬¬ä¸€ä¸ªè·å–é”, å¦‚æœç­‰å¾…çš„åç¨‹è¶…è¿‡1ms å†…æ²¡æœ‰è·å–åˆ°é”, æ­¤æ—¶ä¼šæŠŠè¿™ä¸ªé”è®¾ç½®ä¸ºé¥¥é¥¿æ¨¡å¼ é¥¥é¥¿æ¨¡å¼ åœ¨é¥¥é¥¿æ¨¡å¼ä¸‹, è§£é”çš„åç¨‹ä¼šå°†é”çš„æ‰€æœ‰æƒç›´æ¥äº¤ç»™ç­‰å¾…é˜Ÿåˆ—ç¬¬ä¸€ä½çš„åç¨‹. å¹¶ä¸”æ–°çš„åç¨‹åˆ°è¾¾ä¹Ÿä¸ä¼šè¿›è¡Œè‡ªæ—‹æ¥è·å–é”, è€Œæ˜¯ç›´æ¥åŠ å…¥ç­‰å¾…é˜Ÿåˆ—çš„é˜Ÿå°¾. è€Œç­‰å¾…é˜Ÿåˆ—ä¸­çš„åç¨‹è·å–åˆ°é”çš„æ—¶å€™, ä¼šæŸ¥çœ‹ è‡ªå·±æ˜¯å¦æ˜¯ç­‰å¾…é˜Ÿåˆ—çš„æœ€åä¸€ä¸ªåç¨‹ è‡ªå·±çš„ç­‰å¾…æ—¶é—´æ˜¯å¦å°äº1ms å¦‚æœæœ‰ä»»æ„ä¸€ä¸ªæ»¡è¶³è¦æ±‚, åˆ™å°†é”ä¿®æ”¹ä¸ºæ­£å¸¸æ¨¡å¼ é”åœ¨åˆå§‹æ—¶, ä¸ºæ­£å¸¸æ¨¡å¼, æ­£å¸¸æ¨¡å¼ä¸‹æ•ˆç‡æ›´é«˜, å› ä¸ºåœ¨é‡Šæ”¾é”çš„ä¸€ç¬é—´æ–°çš„åç¨‹å¯ä»¥è¿…é€Ÿè·å–é”, è€Œé¥¥é¥¿æ¨¡å¼åˆ™åœ¨æœ‰åç¨‹ç­‰å¾…1ms ä¹‹åè¿è¡Œ, å¯ä»¥è®©ç­‰å¾…çš„åç¨‹ä¼˜å…ˆè·å–åˆ°é” è¯»å†™é” è¯»å†™äº’æ–¥é”å¯ä»¥æ·»åŠ ä¸¤ç§é”, è¯»é”å’Œå†™é”, åœ¨è¯»é”ä¸Šé”æ—¶å…¶ä»–åç¨‹å¯è¯»ä¸å¯å†™, å†™é”ä¸Šé”æ—¶å…¶ä»–åç¨‹ä¸å¯å†™ä¸å¯è¯» 1234567// è¯»å†™äº’æ–¥é”var rwlock sync.RWMutexrwlock.RLock() // è¯»é”, æ­¤æ—¶å…¶ä»–åç¨‹ä¸å¯å†™, ä¸å¯è¯»rwlock.RUnlock()rwlock.Lock() // å†™é”, æ­¤æ—¶å…¶ä»–åç¨‹æ— æ³•å†™, å¯ä»¥è¯»rwlock.Unlock() ç»“æ„ 1234567type RWMutex struct { w Mutex // å†™é”(äº’æ–¥) writerSem uint32 // å†™é”ä¿¡å·é‡ readerSem uint32 // è¯»é”ä¿¡å·é‡ readerCount int32 // è¯»é”è®¡æ•°å™¨ readerWait int32 // ç­‰å¾…è¯»é”é‡Šæ”¾çš„åç¨‹æ•°} è¯»å†™é”ä¸­ç­‰çº§æœ€é«˜çš„é”è¿˜æ˜¯å†™é”, å½“åŠ ä¸Šå†™é”åå…¶ä»–åç¨‹æ— è®ºæ˜¯è¯»è¿˜æ˜¯å†™éƒ½ä¼šé˜»å¡, æ‰€ä»¥å†™é”ä¹Ÿæ˜¯äº’æ–¥çš„ è¿è¡Œæµç¨‹ è¿™é‡Œå°±åˆ†ä¸ºè¯»é”å’Œå†™é”äº†, å½“ç”¨æˆ·ä¸Šå†™é”, å…¶å®å°±æ˜¯ä¸Šäº†ä¸ªäº’æ–¥é”, æ­¤æ—¶æ‰€æœ‰æ–°çš„åç¨‹éƒ½ä¼šé˜»å¡, ç±»ä¼¼äºä¸Šé¢çš„äº’æ–¥é”, è¿™é‡Œä¸è¿‡å¤šçš„èµ˜è¿° è€ŒåŠ è¯»é”, å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ•°å­—, readerCountè‡ªå¢, æ­¤æ—¶å¦‚æœåŠ å†™é”, ä¼šåˆ¤æ–­è¯»é”è®¡æ•°å™¨æ˜¯å¦ä¸º0, ä¸º0åˆ™ä¸Šå†™é”(äº’æ–¥), å¦‚æœåŠ è¯»é”, å°±æ˜¯readerCountè‡ªå¢ å¦‚æœå†™é”é‡Šæ”¾äº†, æ­¤æ—¶æœ‰ä¸€äº›åç¨‹è¯·æ±‚åŠ å†™é”, ä¸€äº›è¯·æ±‚åŠ è¯»é”, ä¼šä¼˜å…ˆå°†é”åˆ†é…ç»™å†™é” å¦‚æœè¯»é”é‡Šæ”¾äº†, æ­¤æ—¶æœ‰ä¸€äº›åç¨‹è¯·æ±‚åŠ å†™é”, ä¼šç­‰å¾…readerCountä¸º0æ—¶åŠ å†™é”","link":"/2022/02/11/go_lock/"},{"title":"Golang map çš„åº•å±‚åŸç†","text":"å‰è¨€ æœ¬æ–‡ä»‹ç» golang ä¸­ map çš„å®ç°æ–¹å¼, å¸Œæœ›å¯¹è¯»è€…å’Œæˆ‘æœ‰æ‰€å¸®åŠ© ç»“æ„ mapæ˜¯ go è¯­è¨€ä¸­çš„åŸºç¡€çš„æ•°æ®ç»“æ„, åœ¨å¯»æ‰¾æŒ‡å®škeyæ—¶, å¤æ‚åº¦æ˜¯O(1), åœ¨æŸäº›åœºæ™¯èƒ½å‘æŒ¥å¾ˆå¤§çš„ä½œç”¨ golang çš„ map æ˜¯ hashmap, å®ç°æ–¹å¼æ˜¯æ•°ç»„+é“¾è¡¨, å¹¶ä¸”ä½¿ç”¨æ‹‰é“¾æ³•æ¥å–æ¶ˆ hash çš„å†²çª map ä¸»è¦æœ‰ä¸¤ä¸ªæ ¸å¿ƒçš„æ•°æ®ç»“æ„, hmapå’Œbmap(bucket), ä¸ºä»€ä¹ˆè¯´ä»–æ ¸å¿ƒå‘¢? å› ä¸º map çš„å®ç°å°±æ˜¯ä¾é è¿™ä¸¤ä¸ªç»“æ„ä½“ hmapçš„ç»“æ„æœ‰ä»¥ä¸‹å‡ ä¸ªå­—æ®µ å…ƒç´ ä¸ªæ•°: int flags: uint8 æ‰©å®¹å­—æ®µ: uint8 æº¢å‡ºçš„ bucket æ•°é‡: uint16 ç”¨äºæ‰©å®¹çš„æŒ‡é’ˆ: *mapextra buckets æ•°ç»„æŒ‡é’ˆ: unsafa.Pointer æ¬è¿è¿›åº¦: uintptr æ‰©å®¹æ—¶ç”¨äºå¤åˆ¶çš„ buckets æ•°ç»„: unsafe.Pointer hash seed: uint32 è¿™é‡Œä½ éœ€è¦é‡ç‚¹äº†è§£çš„æ˜¯buckets æ•°ç»„æŒ‡é’ˆ, ä¹Ÿå°±æ˜¯bmap, é‚£ä¹ˆbmapçš„ç»“æ„å¦‚ä¸‹ é«˜ä½å“ˆå¸Œ: [8]uint8 å­—èŠ‚æ•°ç»„(å­˜å‚¨ key å’Œ value çš„æ•°ç»„): []bytes æŒ‡å‘æ‰©å®¹ bucket çš„æŒ‡é’ˆ: pointer åœ¨bmapçš„å­—èŠ‚æ•°ç»„ä¸­, å­˜å‚¨äº†æˆ‘ä»¬çœŸæ­£çš„keyå’Œvalue è€Œé«˜ä½å“ˆå¸Œä¸­å­˜å‚¨äº†keyçš„ç´¢å¼• æŒ‡å‘æ‰©å®¹ bucket çš„æŒ‡é’ˆåˆ™å­˜å‚¨äº†ä¸‹ä¸€ä¸ªbmapçš„ä½ç½®, æ‰€ä»¥è¯´ bucket æ˜¯é“¾è¡¨å½¢å¼ å¯¹äºbmapä¸­çš„å­—èŠ‚æ•°ç»„éƒ¨åˆ†å­˜å‚¨è¿™ä¸ªbmapé‡Œé¢çš„æ‰€æœ‰keyå’Œvalue, ä»–æ˜¯ä¸€ä¸ªæ•°ç»„, é‡Œé¢å­˜å‚¨çš„ç»“æ„æ˜¯è¿™æ ·çš„ 1key0, key1, key2, value0, value1, value2 æ˜¯å°†æ‰€æœ‰çš„ keyå’Œkeyæ’åœ¨ä¸€èµ·,valueå’Œvalueæ’åœ¨ä¸€èµ· è¿™æ˜¯ä¸ºäº†å†…å­˜å¯¹é½, ç›®çš„æ˜¯å‡å°‘ç©ºé—´æµªè´¹ ä¹Ÿå°±æ˜¯è¯´, hmapçš„ç»“æ„åº”è¯¥æ˜¯ 123456 hmap bmap0 bmap1 bmap2| | |bmap3 bmap4 bmap5| | | è¿™ç§å…³ç³»(æˆ‘çœŸæ˜¯çµé­‚ç”»æ‰‹ğŸ˜˜) å¤§è‡´ç†è§£ä¸€ä¸‹, å°±æ˜¯ä¸€ä¸ªhmapé‡Œé¢åŒ…å«äº†ä¸€ä¸ªåˆ‡ç‰‡, åˆ‡ç‰‡çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯bmap, è€Œæ¯ä¸€ä¸ªbmapé‡Œå«æœ‰è¿™ä¸ªbmapçš„keyå’Œvalue(å¤šä¸ª), è¿˜æœ‰ä¸‹ä¸€ä¸ªbmapçš„æŒ‡é’ˆåœ°å€ æ–°å¢ key æ—¶ å½“æ–°å¢ä¸€ä¸ªkeyå’Œvalueæ—¶, ä¼šå…ˆå¯¹è¿™ä¸ªkeyè¿›è¡Œå“ˆå¸Œå‡½æ•°è®¡ç®—, å¾—åˆ°ä¸€ä¸ªå”¯ä¸€çš„å€¼, æ˜¯ä¸€ä¸ªæ•°å­—, å°†è¿™ä¸ªæ•°å­—åˆ‡åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†é«˜ä½å’Œä½ä½, ä½¿ç”¨ä½ä½å¯»æ‰¾è¿™ä¸ªkeyåº”è¯¥å­˜å‚¨åˆ°å“ªä¸ªbmapä¸­, é«˜ä½åˆ™è®°å½•äº†è¿™ä¸ªkeyåœ¨bmapçš„ä½ç½® map æ‰©å®¹ å½“ map ç©ºé—´ä¸å¤Ÿæ—¶, ä¼šå°†bmapçš„æ•°ç»„æ•°é‡æ‰©å……ä¸€å€, äº§ç”Ÿä¸€ä¸ªæ–°çš„bmapæ•°ç»„ ç„¶åæŠŠè€çš„æ•°æ®è¿ç§»åˆ°æ–°çš„æ•°ç»„ä¸­ è¿™ä¸ªè½¬ç§»å¹¶ä¸æ˜¯ç«‹åˆ»å®Œæˆçš„, è€Œæ˜¯å½“è®¿é—®åˆ°å…·ä½“çš„æŸä¸ªbmapçš„æ—¶å€™, æ‰ä¼šæŠŠè¿™ä¸ªbmapä¸­çš„æ•°æ®è½¬ç§»åˆ°æ–°çš„æ•°ç»„ è€Œä¸”, å°†è€çš„bmapè½¬ç§»åˆ°æ–°çš„åˆ—è¡¨ä¹‹å, å¹¶ä¸ä¼šå°†è€çš„bmapåˆ é™¤, è€Œæ˜¯ç•™ç»™ GC å»æ¸…ç† æŸ¥æ‰¾ key æ—¶ è·å–éœ€è¦æŸ¥æ‰¾çš„key, è½¬æˆæ•°å­—å¹¶åˆ‡åˆ†ä¸ºé«˜ä½å’Œä½ä½, é€šè¿‡ä½ä½å®šä½bmapä½ç½®. é€šè¿‡é«˜ä½åœ¨bmapä¸­å¯»æ‰¾å…·ä½“çš„å€¼","link":"/2022/02/10/go_map_theory/"},{"title":"Golang å†…å­˜åˆ†é…","text":"ä¸€èˆ¬çš„å†…å­˜åˆ†é… ä¸€èˆ¬è€Œè¨€, å†…å­˜éƒ½ä¼šè¢«ç¨‹åºåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé€»è¾‘å— å…¨å±€åŒº: å­˜æ”¾å…¨å±€å˜é‡ æ ˆåŒº: å­˜æ”¾å‡½æ•°ä¸­çš„åŸºç¡€ç±»ç±»å‹å˜é‡ å †åŒº: åŠ¨æ€åˆ†é…çš„å†…å­˜, æ¯”å¦‚ go çš„åˆ‡ç‰‡ å¸¸é‡åŒº: å­˜æ”¾å¸¸é‡æ•°æ® ç¨‹åºä»£ç åŒº: å­˜æ”¾ç¨‹åºæœ¬èº«çš„ä»£ç  go å†…å­˜åˆ†é…æ€æƒ³ go å†…ç½®äº†è¿è¡Œæ—¶çš„ç¼–ç¨‹è¯­è¨€(runtime), æ‰€è°“è¿è¡Œæ—¶, å°±æ˜¯åœ¨ç¨‹åºå¼€å§‹æ—¶å°±ç”³è¯·äº†ä¸€å¤§å—çš„è™šæ‹Ÿå†…å­˜, ç”± go è‡ªå·±è¿›è¡Œåˆ†é…å’Œç®¡ç†. ç”¨æ¥é¿å…åœ¨è¿è¡Œçš„æ—¶å€™å†å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜, å¸¦æ¥æ€§èƒ½é—®é¢˜. go çš„å†…å­˜åˆ†é…æ ¸å¿ƒæ€æƒ³æ˜¯: æ¯æ¬¡ä»æ“ä½œç³»ç»Ÿç”³è¯·ä¸€å¤§å—å†…å­˜, ç”± go æ¥å¯¹å†…å­˜è¿›è¡Œåˆ†é…å’Œç®¡ç†, å‡å°‘ç³»ç»Ÿè°ƒç”¨ å†…å­˜åˆ†é…ç®—æ³•é‡‡ç”¨ google çš„ TCMalloc ç®—æ³•, æŠŠå†…å­˜åˆ‡åˆ†çš„å¾ˆç»†, å†é€šè¿‡å¤šçº§è¿›è¡Œç®¡ç†, é™ä½é”ç²’åº¦ å›æ”¶å¯¹è±¡å†…å­˜æ—¶, å¹¶ä¸æ˜¯çœŸæ­£çš„å°†å†…å­˜è¿”å›ç»™æ“ä½œç³»ç»Ÿ, è€Œæ˜¯æ”¾å›è‡ªå·±çš„å¤§å—å†…å­˜ä¸­ç­‰å¾…å¤ç”¨, åªæœ‰é—²ç½®è¿‡å¤šæ—¶æ‰ä¼šå°è¯•è¿”å›éƒ¨åˆ†å†…å­˜ç»™æ“ä½œç³»ç»Ÿ. go çš„å†…å­˜ç»“æ„ go çš„å†…å­˜ç»“æ„åˆ†ä¸ºä¸‰å¤§å—: spans(512MB): å­˜æ”¾ span æŒ‡é’ˆ, æ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ arena çš„ä¸€ä¸ª page bitmap(16GB): ä¿å­˜ arena å¯¹åº”çš„æŸä¸ªåœ°å€æ˜¯å¦å­˜åœ¨å¯¹è±¡, å’Œå¯¹è±¡æ˜¯å¦ GC ä¿¡æ¯ arena(512GB): çœŸæ­£å­˜æ”¾å€¼çš„åœ°æ–¹, area æŒ‰ç…§8KB åˆ†é…è‹¥å¹²ä¸ª page arena arena å­˜æ”¾äº†çœŸæ­£çš„å€¼, å¾ˆå¤šäººä¹ŸæŠŠä»–ç§°ä¹‹ä¸ºheap, heap ä»ä¸¤ä¸ªè§’åº¦æ¥çœ‹, æœ‰ä¸¤ç§è¯´æ³• ä»å†…å­˜åˆ†é…è§’åº¦: æŒ‰ç…§ 8KB åˆ†é…è‹¥å¹²ä¸ª page, pageåˆåœ¨ä¸€èµ·ç»„æˆäº† heap ä»ä½¿ç”¨è§’åº¦: heap å­˜æ”¾è‹¥å¹²ä¸ªå¯¹è±¡ spans spans å¯ä»¥ç†è§£ä¸º heap çš„æˆ·å£ä¿¡æ¯, ç”¨æ¥ç®¡ç† heap åŒºåŸŸçš„æ•°æ®, spans å­˜æ”¾çš„æ˜¯mspanæŒ‡é’ˆ, æ¯ä¸ª pageéƒ½å±äºæŸä¸ªmspan bitmap bitmapå­˜æ”¾äº† arena ä¸­çš„å¯¹è±¡æ ‡è®°, æ¯”å¦‚æ ‡è®°å¯¹åº”çš„åœ°å€ä¸­æ˜¯å¦å­˜åœ¨å¯¹è±¡, æ˜¯å¦è¢« GC æ ‡è®° å› æ­¤, bitmap ä¸»è¦è¿˜æ˜¯ä¸ºäº†æœåŠ¡ GC go å†…å­˜ç®¡ç†ç»„ä»¶ go å†…å­˜ç®¡ç†ç»„ä»¶æœ‰ä»¥ä¸‹å‡ ä¸ª: mspan: å†…å­˜ç®¡ç†åŸºæœ¬å•å…ƒ, ç®¡ç† mcache: ç¼“å­˜, æ¯ä¸ªè¿è¡Œæ—¶çš„ goroutine éƒ½ä¼šç»‘å®šä¸€ä¸ª mcache, mcache ä¼šåˆ†é…è¿™ä¸ª goroutine è¿è¡Œæ—¶éœ€è¦çš„å†…å­˜ç©ºé—´(mspan) mcentral: ä¸ºæ‰€æœ‰ mcache åˆ‡åˆ†å¥½åå¤‡çš„ mspan, æ”¶é›†ç»™å®šå¤§å°å’Œç™»è®°çš„æ‰€æœ‰ span mheapä»£è¡¨Goç¨‹åºæŒæœ‰çš„æ‰€æœ‰å †ç©ºé—´ã€‚è¿˜ä¼šç®¡ç†é—²ç½®çš„spanï¼Œéœ€è¦æ—¶å‘æ“ä½œç³»ç»Ÿç”³è¯·æ–°å†…å­˜ mspan ä¸Šé¢æåˆ°äº†åè¯mspan, mspan å¯ä»¥è¯´æ˜¯ go å†…å­˜ç®¡ç†çš„åŸºæœ¬å•å…ƒ, è€Œ page æ˜¯å†…å­˜å­˜å‚¨çš„åŸºæœ¬å•å…ƒ mspan å¯ä»¥è§£å†³å†…å­˜ç¢ç‰‡é—®é¢˜, æˆ‘ä»¬çŸ¥é“, å†…å­˜çš„åœ°å€éƒ½æ˜¯è¿åˆ°ä¸€èµ·çš„, è¿ç»­çš„, ä¸¾ä¸ªä¾‹å­, åŒä¸€æ—¶é—´ç”³è¯·äº†ä¸¤ä¸ªå†…å­˜, a å’Œ b, a å’Œ b æ˜¯è¿ç»­çš„, ä¸¤è€…åœ¨å†…å­˜ä¸­æ˜¯æŒ¨ç€çš„, æ­¤æ—¶ b è¢«æ¸…ç†äº†, b çš„åœ°å€å†…æ•°æ®å˜æˆç©º, æ­¤æ—¶ç”³è¯·å­˜æ”¾æ–°çš„æ•°æ®, å¹¶ä¸ä¼šæ£€æµ‹åˆ° b æ˜¯ç©ºäº†å°±ç›´æ¥æ”¾åˆ° b, è€Œæ˜¯ä¼šåœ¨ b åé¢ç”³è¯· c, è¿™å°±é€ æˆäº†åœ¨å†…å­˜ä¸­å¾ˆå¯èƒ½æœ‰å¾ˆå¤šç©ºä½, è¿™å°±æ˜¯å†…å­˜ç¢ç‰‡ go ä¸ºäº†è§£å†³å†…å­˜ç¢ç‰‡é—®é¢˜. å°†å†…å­˜åˆ†ä¸º67ç§, æ¯ç§æœ‰ä¸åŒæ•°é‡çš„ page, è¿™æ¯ä¸€ç§å°±æ˜¯ mspan.æ¯æ¬¡åˆ†é…æ—¶, æ ¹æ®æ•°æ®çš„ä¸åŒ, åˆ†é…ç»™ä¸åŒçš„ mspan. å½“æŸä¸ª mspan è¢«æ¸…ç†å, åœ¨è¯­è¨€å†…éƒ¨å°†è¿™ä¸ªæ ‡è®°ä¸ºå·²æ¸…ç†, ç­‰å¾…ä¸‹ä¸€æ¬¡é‡æ–°ä½¿ç”¨ mchahe ä¸ºäº†é¿å…å¤šçº¿ç¨‹ç”³è¯·å†…å­˜æ—¶ä¸æ–­çš„åŠ é”, goroutineä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…äº† span å†…å­˜å—çš„ç¼“å­˜, è¿™ä¸ªç¼“å­˜å³æ˜¯ mcache, æ¯ä¸ªgoroutineéƒ½ä¼šç»‘å®šçš„ä¸€ä¸ª mcache, é¿å…äº†å„ä¸ªgoroutineç”³è¯·å†…å­˜æ—¶å­˜åœ¨é”ç«äº‰çš„æƒ…å†µ åœ¨ GMP å¹¶å‘è°ƒåº¦æ¨¡å‹ä¸­, æ¯ä¸ª G éƒ½ç»‘å®šä¸€ä¸ª mcache, å› æ­¤ä¸ä¼šå‡ºç°å¤§å®¶ä¸€èµ·å ç”¨ä¸€ä¸ªå†…å­˜, å¯¼è‡´éœ€è¦åŠ é”ç«äº‰çš„æƒ…å†µ, æé«˜é€Ÿåº¦ mcentral mcentralä¿å­˜ä¸€ç§ç‰¹å®šç±»å‹çš„å…¨å±€ mspan åˆ—è¡¨ï¼ŒåŒ…æ‹¬å·²åˆ†é…å‡ºå»çš„å’Œæœªåˆ†é…å‡ºå»çš„, ç›®çš„æ˜¯ä¸ºæ‰€æœ‰ mcache æä¾›åˆ‡åˆ†å¥½çš„ mspan æœ‰67ç§ mspan, ä¹Ÿå°±æœ‰67ç§ mcentral æ¯ä¸ª mcentral éƒ½ä¼šåŒ…å«ä¸¤ä¸ª mspançš„åˆ—è¡¨ï¼š æ²¡æœ‰ç©ºé—²å¯¹è±¡æˆ– mspanå·²ç»è¢« mcacheç¼“å­˜çš„ mspanåˆ—è¡¨ æœ‰ç©ºé—²å¯¹è±¡çš„ mspanåˆ—è¡¨ ç”±äº mspanæ˜¯å…¨å±€çš„ï¼Œä¼šè¢«æ‰€æœ‰çš„ mcacheè®¿é—®ï¼Œæ‰€ä»¥ä¼šå‡ºç°å¹¶å‘æ€§é—®é¢˜ï¼Œå› è€Œ mcentralä¼šå­˜åœ¨ä¸€ä¸ªé”ã€‚ mheap mheapå¯ä»¥è®¤ä¸ºæ˜¯Goç¨‹åºæŒæœ‰çš„æ•´ä¸ªå †ç©ºé—´ï¼Œ mheapå…¨å±€å”¯ä¸€ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸ªå…¨å±€å˜é‡ mheap åŒ…å«äº†æ•´ä¸ª go å†…éƒ¨çš„ heap æ•°æ®ä¿¡æ¯, é™¤äº† mcache, mcacheè¢«åŒ…å«åœ¨GMP ä¸­çš„ G é‡Œ å› ä¸ºæœ‰äº›å¯¹è±¡é€šè¿‡ mheap åˆ†é…(å¤§äº32kb), è€Œ mheap å…¨å±€å”¯ä¸€, è€Œ mcacheæœ‰æ—¶å€™éœ€è¦è¿›è¡Œç”³è¯·å†…å­˜åˆ†é…, å› ä¸º GMP ä¸­ G ä¸æ­¢ä¸€ä¸ª, æ‰€ä»¥ä¸ºäº†é˜²æ­¢èµ„æºç«äº‰, åœ¨ mheap ä¸­æœ‰ä¸€ä¸ªäº’æ–¥é”, ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ª G å¯ä»¥ç”³è¯·å†…å­˜","link":"/2022/02/20/go_memory_theory/"},{"title":"go select åŸç†è§£æ","text":"æ¦‚è¿° go çš„ select è¯­å¥æ˜¯ä¸“é—¨ä¸ºäº† channel å‘é€å’Œæ¥æ”¶æ¶ˆæ¯è€Œè¯ç”Ÿçš„ä¸“ç”¨è¯­å¥(ä¸è¦å’Œ switch ææ··äº†), åœ¨è¯­å¥çš„è¿è¡ŒæœŸé—´, è¯¥ goroutine æ˜¯é˜»å¡çš„. select åœ¨ golang çš„è¯­è¨€å±‚æä¾›äº†I/O å¤šè·¯å¤ç”¨, å¯ä»¥åŒæ—¶æ£€æµ‹å¤šä¸ª channel I/O å¤šè·¯å¤ç”¨ æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ I/O å¤šè·¯å¤ç”¨æ¦‚å¿µ åœ¨ä¸ä½¿ç”¨ select æ—¶, å¦‚æœè¦ç›‘å¬ N ä¸ª channel. å¯¹äºæ™®é€šçš„å¤šçº¿ç¨‹å¤„ç†, å¯èƒ½éœ€è¦å¯åŠ¨ N ä¸ª goroutine, æ¯ä¸ª goroutine ç›‘å¬ä¸€ä¸ª channel, è¿™æ ·çš„ç¼ºç‚¹æ˜¾è€Œæ˜“è§: ç³»ç»Ÿéœ€è¦é¢å¤–çš„åˆ›å»ºå’Œç»´æŠ¤goroutine, å› ä¸ºå¤§å¤šæ•°æ—¶å€™, channel éƒ½ä¼šé˜»å¡, åªæœ‰å°‘éƒ¨åˆ†ä¼šæ¥å—åˆ°æ•°æ® è€Œä½¿ç”¨ select æ—¶, å¯ä»¥åšåˆ°åœ¨ä¸€ä¸ª goroutine é‡Œç›‘å¬å¤šä¸ª channel, ç³»ç»Ÿåªéœ€è¦ç»´æŠ¤ä¸€ä¸ª goroutine, N ä¸ª channel éƒ½ä¾é è¿™ä¸€ä¸ª goroutine è¿›è¡Œæ•°æ®çš„\"è¿è¾“\", å½“å…¶ä¸­æŸä¸€ä¸ª channel æœ‰æ•°æ®æ—¶, æ ¹æ®å¯¹åº”çš„ channel èµ°ä¸åŒçš„æµç¨‹, æ— éœ€å¯¹é¢å¤–çš„ goroutine è¿›è¡Œç®¡ç†, æ— ç–‘æé«˜äº†æ•ˆç‡ å½“ç„¶, select ä¹Ÿä¸è¦æ— èŠ‚åˆ¶çš„ä½¿ç”¨, æœ€å¥½æ˜¯åœ¨é€»è¾‘ä¸Šæœ‰ä¸€å®šçš„å…³è”æ€§, å¦åˆ™ä¼šç ´åä»£ç çš„å¯è¯»æ€§. demo ä¸¾ä¸ªä¾‹å­ 12345678910111213141516func main() { ch1 := make(chan int, 1) ch2 := make(chan int, 1) select { case v := &lt;-ch1: // å¦‚æœch1é€šé“æˆåŠŸè¯»å–æ•°æ®ï¼Œåˆ™æ‰§è¡Œè¯¥caseå¤„ç†è¯­å¥ fmt.Printf(\"ch1 = %v\", v) case v := &lt;-ch2: // å¦‚æœch2é€šé“æˆåŠŸè¯»å–æ•°æ®ï¼Œåˆ™æ‰§è¡Œè¯¥caseå¤„ç†è¯­å¥ fmt.Printf(\"ch2 = %v\", v) default: // å¦‚æœä¸Šé¢caseéƒ½æ²¡æœ‰æˆåŠŸï¼Œåˆ™è¿›å…¥defaultå¤„ç†æµç¨‹ // å¦‚æœæ²¡æœ‰ default, ä¼šä¸€ç›´é˜»å¡ç­‰å¾…æŸä¸ª case æˆåŠŸ fmt.Println(\"default!\") }} æ³¨æ„ä¸¤ä¸ªé—®é¢˜: select å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ªç¯, å¦‚æœä½ éœ€è¦åå¤çš„ç›‘å¬å¤šä¸ª channel, æ­é… for{}ä½¿ç”¨ default ä½œç”¨æ˜¯å½“ case éƒ½ä¸æˆåŠŸæ—¶, ç«‹åˆ»è¿›å…¥ default æµç¨‹, ç»“æŸ select, å¦‚æœä½ éœ€è¦é˜»å¡ä½, å°±ä¸è¦ä½¿ç”¨ default å½“æ­é…for{}åå¤çš„æ‰§è¡Œ slelct æ—¶, å¦‚éä¸šåŠ¡è¦æ±‚, å¦åˆ™ä¸è¦ä½¿ç”¨ default, ä¼šé€ æˆselect ç«‹å³é€€å‡ºåé‡æ–°å¾ªç¯ æ‰€ä»¥, å¸¸ç”¨çš„æ–¹å¼å¦‚ä¸‹ 1234567891011for { select { case v := &lt;-ch1: // å¦‚æœch1é€šé“æˆåŠŸè¯»å–æ•°æ®ï¼Œåˆ™æ‰§è¡Œè¯¥caseå¤„ç†è¯­å¥ fmt.Printf(\"ch1 = %v\", v) case v := &lt;-ch2: // å¦‚æœch2é€šé“æˆåŠŸè¯»å–æ•°æ®ï¼Œåˆ™æ‰§è¡Œè¯¥caseå¤„ç†è¯­å¥ fmt.Printf(\"ch2 = %v\", v) } // ä¸€æ¬¡è¯»å–ä¹‹åç«‹åˆ»å†æ¬¡ç›‘å¬} æ•°æ®ç»“æ„ select åº•å±‚ç”±ä¸¤éƒ¨åˆ†ç»„æˆ, case è¯­å¥å’Œæ‰§è¡Œå‡½æ•° æ¯ä¸€ä¸ª case è¯­å¥ç»“æ„å¦‚ä¸‹ 1234type scase struct { c *hchan // chan elem unsafe.Pointer // è¯»æˆ–è€…å†™çš„ç¼“å†²åŒºåœ°å€} è¿™é‡Œçš„ hchan, å­˜æ”¾äº†ç›‘å¬çš„ channel, åœ¨ä¸€ä¸ª select ä¸­, åŒ…å«äº†å¤šä¸ª case. è¿™äº› case ç»„æˆäº†ä¸€ä¸ªæ•°ç»„ selectgo è€Œæ‰§è¡Œçš„ select è¯­å¥, å®é™…ä¸Šè°ƒç”¨äº†å‡½æ•°func selectgo(cas0 *scase, order0 *uint16, ncases int) (int, bool) å‚æ•°æ„ä¹‰å¦‚ä¸‹: cas0: case æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªcaseçš„åœ°å€ order0: caseæ•°ç»„ä¸¤å€é•¿çš„ç¼“å†²åŒº ncases: case æ•°ç»„çš„é•¿åº¦ selectgo è¿”å›çš„è¯´æ‰€é€‰çš„ scase çš„ç´¢å¼•, è€Œå¦‚æœ scase æ˜¯æ¥æ”¶æ“ä½œ, åˆ™è¿”å›æ˜¯å¦æ”¶åˆ°å€¼ æµç¨‹ æˆ‘ä»¬åœ¨è¿è¡Œä¸€ä¸ª select æ—¶, å‡½æ•°çš„è°ƒç”¨é¡ºåºå¦‚ä¸‹ func Select(cases []SelectCase) (chosen int, recv Value, recvOK bool) func rselect([]runtimeSelect) (chosen int, recvOK bool) func selectgo(cas0 *scase, order0 *uint16, ncases int) (int, bool) å‰ä¸¤ä¸ªéƒ½æ˜¯ç®€å•çš„åˆå§‹åŒ–å‚æ•°, é‡ç‚¹å…¶å®å°±åœ¨selectgoé‡Œ selectgo çš„å¤„ç†æµç¨‹å¦‚ä¸‹: æ ¹æ® cas0 è·å– case æ•°ç»„ å°† case æ•°ç»„é¡ºåºæ‰“ä¹± å°† case æ•°ç»„å†…çš„æ¯ä¸ª chan å…¨éƒ¨ä¸Šé” éå†æ‰€æœ‰çš„ case æ•°ç»„å…ƒç´ , æŸ¥çœ‹å…¶æ˜¯å¦å¯è¯»å’Œå¯å†™ å¦‚æœæœ‰å¯è¯»æˆ–å¯å†™ case, è§£é”æ‰€æœ‰çš„ chan, è¿”å›å¯¹åº”çš„ chan æ•°æ® å¦‚æœæ²¡æœ‰å¯è¯»æˆ–å¯å†™, æœ‰ defalut, è§£é”æ‰€æœ‰çš„ chan, è¿”å› default å¯¹åº”çš„ case å¦‚æœä¸¤è€…éƒ½æ²¡æœ‰, åˆ™å°†å½“å‰çš„ goroutine é˜»å¡, å°†å½“å‰ goroutineçš„ GåŠ å…¥åˆ°case æ•°ç»„å†…çš„æ‰€æœ‰ chan çš„ç­‰å¾…é˜Ÿåˆ—ä¸­, ç„¶åæ‰€æœ‰ chan è§£é” å¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ª chan å¯è¯»æˆ–è€…å¯å†™æ—¶, å¹¶ä¸”è½®åˆ°è¿™ä¸ª G è¿›è¡Œæ“ä½œæ—¶, å°† goroutine å”¤é†’ æ‰§è¡Œæ­¥éª¤3-7","link":"/2022/02/22/go_select_theory/"},{"title":"go è¯­è¨€çš„ slice æ³¨æ„ç‚¹","text":"å‰è¨€ èµ·å› æ˜¯åœ¨ç¼–å†™æŸä¸ªæ¨¡å—æ—¶, è€ƒè™‘åˆ°sliceè‰¯å¥½çš„ä¼¸ç¼©æ€§, ä¾¿ä½¿ç”¨sliceæ¥å­˜å‚¨å¤§é‡çš„æ•°æ®, ä¸šåŠ¡æ˜¯sliceçš„æ•°æ®ä¼šæ…¢æ…¢çš„å¼¹å‡ºå‡å°‘, ç†æƒ³çŠ¶æ€ä¸‹å†…å­˜å ç”¨ä¼šè¶Šæ¥è¶Šå°‘, ç»“æœå‘ç°, å ç”¨çš„å†…å­˜å¹¶ä¸ä¼šè¿”è¿˜, äºæ˜¯æŸ¥äº†ä¸€ä¸‹, å¥½å®¶ä¼™ ğŸ˜µâ€ğŸ’«, å‘è¿˜ä¸å°‘, ç´¢æ€§è¿™é‡Œè®°å½•ä¸€ä¸‹å‘å§ slice sliceå…¶å®æ˜¯ä¸€ä¸ªæŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆç»“æ„ä½“, è¿™ä¸ªç»“æ„ä½“æœ‰ä¸‰ä¸ªå±æ€§, åˆ†åˆ«æ˜¯: æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ å…ƒç´ çš„é•¿åº¦ åº•å±‚æ•°ç»„çš„é•¿åº¦ æˆ‘ä»¬éƒ½çŸ¥é“, æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„, è€Œåˆ‡ç‰‡æ˜¯åŠ¨æ€æ‰©å®¹çš„, æ‰€ä»¥, åˆ‡ç‰‡ç»“æ„æœ‰ä¸€ä¸ªåº•å±‚æ•°ç»„çš„é•¿åº¦, ä½¿ç”¨cap()å¯ä»¥æŸ¥çœ‹, å½“å‘ç°æ’å…¥åçš„é•¿åº¦å¤§äºåŸå…ˆçš„åº•å±‚æ•°ç»„çš„é•¿åº¦æ—¶, ä¼šè¿›è¡Œæ‰©å®¹, å³å°†ç”³è¯·ä¸€ä¸ªæ–°çš„æ•°ç»„,å°†åŸæ¥çš„æ•°æ®æ”¾ç½®åˆ°æ–°çš„æ•°ç»„ä¸­, å°†æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆä¹Ÿä¿®æ”¹ä¸ºæ–°çš„æŒ‡é’ˆ sliceæ‰©å®¹çš„ç­–ç•¥æ˜¯: åŸå…ˆçš„æ•°ç»„é•¿åº¦ &lt; 1024 æ—¶, æ‰©å®¹åçš„å®¹é‡ä¸ºåŸå…ˆçš„2å€ åŸå…ˆçš„æ•°ç»„é•¿åº¦ &gt; 1024 æ—¶, æ‰©å®¹åçš„å®¹é‡ä¸ºåŸå…ˆçš„1.25å€ æ•°æ®å…±äº«é—®é¢˜ çœ‹ä»¥ä¸‹ä»£ç  123456789func t1() { a1 := []int{1, 2, 3, 4} a2 := a1 a3 := a1[:3] a1[0] = 5 fmt.Println(a1, a2, a3)} è¿è¡Œç»“æœæ˜¯ 1[5 2 3 4] [5 2 3 4] [5 2 3] å¯ä»¥çœ‹åˆ°, åªä¿®æ”¹äº†a1, å´é€ æˆäº†a2å’Œa3ä¸€èµ·æ”¹å˜, è¿™ä»£è¡¨æ­¤æ—¶a1/a2/a3å…±äº«äº†æ•°æ® æˆ‘ä»¬å†çœ‹ä»£ç  123456789func t2() { a1 := []int{1, 2, 3, 4} a2 := append(a1, 6) a3 := a1[:3] a1[0] = 5 fmt.Println(a1, a2, a3)} ç»“æœæ˜¯ 1[5 2 3 4] [1 2 3 4 6] [5 2 3] è¿™é‡Œçš„a1/a3å…±äº«äº†æ•°æ®, a2å°±å•ç‹¬ä½¿ç”¨äº†, è¿™æ˜¯å› ä¸ºappend()ä¼šé¢ä¸´å†…å­˜çš„é‡æ–°åˆ†é…é—®é¢˜, åœ¨a2è¿›è¡Œappend()æ—¶å€™, é‡æ–°ç”³è¯·äº†å†…å­˜ç©ºé—´, å°†a1æŒ‡å‘çš„æ•°æ®æ‹·è´ä¸€ä»½, ç„¶åå¢åŠ äº†æ–°å€¼5, æ”¾å…¥äº†æ–°çš„åœ°å€ä¸­, æ­¤æ—¶a2çš„åœ°å€ä¸a1/a3ä¸ä¸€æ ·, æ‰€ä»¥å¯¹a1è¿›è¡Œä¿®æ”¹åªå½±å“åˆ°äº†a1/a2 å†çœ‹ä»£ç  123456789101112func t3() { a1 := []int{1, 2, 3, 4} a2 := append(a1, 6) a3 := a1[:1] fmt.Println(cap(a3)) a3 = append(a3, 6) fmt.Println(cap(a3)) a1[0] = 5 fmt.Println(a1, a2, a3)} è¿è¡Œç»“æœ 12344[5 6 3 4] [1 2 3 4 6] [5 6] æˆ‘ä»¬è¿™é‡Œå‘ç°äº†ä¸¤ä¸ªç–‘ç‚¹ a3ç»è¿‡append()è¿˜æ˜¯ä¸a1å…±äº«æ•°æ® è¿˜è®°å¾—æœ€å¼€å§‹æåˆ°çš„åˆ‡ç‰‡æ‰©å®¹æœºåˆ¶å—? æ²¡é”™, å¯¹äºappend(), åœ¨æ‰§è¡Œæ—¶ä¹Ÿä¼šæœ‰ä¸¤ç§åˆ†æ”¯åŒºåˆ«, åªæœ‰å®¹é‡ä¸å¤Ÿæ‰ä¼šè¿›è¡Œé‡æ–°åˆ†é…, æ­¥éª¤ä¸æ™®é€šçš„åˆ‡ç‰‡æ‰©å®¹ä¸€è‡´ å¦‚æœå®¹é‡å¤Ÿ, æ¯”å¦‚è¿™é‡Œ, a3çš„å®¹é‡ä¸a1ä¸€è‡´æ˜¯4, è€Œa3é•¿åº¦ç”±1å¢åŠ åˆ°2, æ²¡æœ‰è¶…è¿‡4, å› æ­¤æ²¡æœ‰è¿›è¡Œå†…å­˜çš„é‡æ–°åˆ†é…, å¯¼è‡´a3/a1ç»§ç»­å…±äº«æ•°æ® è€Œa2åœ¨append()æ—¶, é•¿åº¦å˜æˆ5, åŸæœ‰çš„å®¹é‡ä¸å¤Ÿ, å› æ­¤è¿›è¡Œäº†å†…å­˜çš„é‡æ–°åˆ†é… å¯¹a3è¿›è¡Œappend()åœ¨a1çš„ä¸­é—´è¿›è¡Œäº†æ•°å€¼æ’å…¥ å› ä¸ºa3æ˜¯æˆªå–çš„a1[:1], æ‰€ä»¥å¯¹a3è¿›è¡Œappend()åœ¨ä¸é‡æ–°åˆ†é…å†…å­˜çš„æ—¶å€™å°±ä¼šåœ¨a[0]åæ·»åŠ æ•°æ® å˜é‡é€ƒé€¸é—®é¢˜ å› ä¸ºå­˜åœ¨å˜é‡å…±äº«çš„é—®é¢˜, é‚£ä¹ˆå˜é‡é€ƒé€¸ä¹Ÿå°±å‡ºç°äº† ä¸¾ä¸ªä¾‹å­ 123456func t5() { a1 := []int{1, 2, 3, 4, 5, 6} b1 := a1[:2] // a1 ä¸å†ä½¿ç”¨ fmt.Println(b1)} å‡å¦‚a1å¾ˆå¤§, å ç”¨å¾ˆå¤šå†…å­˜, æ­¤æ—¶ä½ åªæƒ³è·å–a1çš„æŸä¸€æ®µæ•°æ®, è€Œa1ä»¥åä¸å†ä½¿ç”¨, å› ä¸ºå˜é‡å…±äº«, æ­¤æ—¶å°±ä¼šå¯¼è‡´ GC æ—¶a1çš„é•¿åˆ‡ç‰‡ä¸ä¼šè¢«å›æ”¶, ä»ç„¶å­˜åœ¨ä¸å†…å­˜ä¸­, å¦‚æœè¿™ä¸ªå‡½æ•°ä¸€ç›´è¿è¡Œ, è¿™å°†æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„éšæ‚£ æ­£ç¡®åšæ³•æ˜¯, åœ¨æ˜ç¡®a1ä¸ä½¿ç”¨æ—¶, å°†a1èµ‹å€¼æˆnil, ä¾‹å¦‚ 12345678func t5() { a1 := []int{1, 2, 3, 4, 5, 6} b1 := []int{} // åˆ›å»ºä¸€ä¸ªç©ºåˆ‡ç‰‡ b1 = append(b1, a1[:2]...) // é€šè¿‡ append æ·»åŠ éœ€è¦çš„å…ƒç´  a1 = nil // å°† a1 è®¾ç½®ä¸º nil // a1 ä¸å†ä½¿ç”¨ fmt.Println(b1, cap(b1))} è¿è¡Œç»“æœä¸º 1[1 2] 2","link":"/2022/02/14/go_slice_memory/"},{"title":"sync.map åŸç†åˆ†æ","text":"æ™®é€šçš„ map æ™®é€šçš„mapå¹¶ä¸æ˜¯å¹¶å‘å®‰å…¨çš„, ä½†æ˜¯åœ¨ go çš„1.6ä¹‹å‰ä¸ä¼šæŠ¥é”™, ä½†æ˜¯ä¼šå‡ºç°é—®é¢˜, 1.6ä¹‹åä¼šç›´æ¥æŠ¥é”™.ä¾‹å¦‚ä»¥ä¸‹ä»£ç : 12345678910111213141516171819202122232425262728293031package mainimport ( \"fmt\" \"time\")func main() { m := map[string]int{\"age\": 10} // æ™®é€šçš„ map // å¯åŠ¨åç¨‹å¯¹ map ä¿®æ”¹æ•°æ® go func() { i := 0 for i &lt; 1000 { m[\"age\"] = i i++ } }() // å¯åŠ¨åç¨‹å¯¹map ä¿®æ”¹æ•°æ® go func() { i := 0 for i &lt; 1000 { m[\"age\"] = 100001 i++ } }() time.Sleep(time.Second * 3) fmt.Println(m)} è¿è¡Œæ—¶å‡ºç°é”™è¯¯fatal error: concurrent map writes: 123456789101112131415161718192021âœ task_test go run main.gofatal error: concurrent map writesgoroutine 19 [running]:runtime.throw({0x10a49a0, 0x0}) /usr/local/Cellar/go/1.17.6/libexec/src/runtime/panic.go:1198 +0x71 fp=0xc000052f38 sp=0xc000052f08 pc=0x102f691runtime.mapassign_faststr(0x0, 0x0, {0x10a1edc, 0x3}) /usr/local/Cellar/go/1.17.6/libexec/src/runtime/map_faststr.go:211 +0x39c fp=0xc000052fa0 sp=0xc000052f38 pc=0x100ff3cmain.main.func2() /Users/chenming/Work/Code/Go/task_test/main.go:24 +0x3f fp=0xc000052fe0 sp=0xc000052fa0 pc=0x108a4ffruntime.goexit() /usr/local/Cellar/go/1.17.6/libexec/src/runtime/asm_amd64.s:1581 +0x1 fp=0xc000052fe8 sp=0xc000052fe0 pc=0x105b421created by main.main /Users/Work/Code/Go/task_test/main.go:21 +0xc8goroutine 1 [sleep]:time.Sleep(0xb2d05e00) /usr/local/Cellar/go/1.17.6/libexec/src/runtime/time.go:193 +0x12emain.main() /Users/Work/Code/Go/task_test/main.go:29 +0xd2exit status 2 è¿™å°±ä»£è¡¨å‡ºç°äº†å†²çª, å¯¹äºæ™®é€šçš„ map æ¥è®², å¦‚æœæœ‰å¤šä¸ªåç¨‹å¯¹åŒä¸€ä¸ª map è¿›è¡Œä¿®æ”¹, å°±ä¼šå‡ºç°é”™è¯¯. äºæ˜¯ go æä¾›äº†sync.map, æˆ‘ä»¬åœ¨é¢å¯¹æœ‰å¤šä¸ªåç¨‹å¯¹ä¸€ä¸ª map è¿›è¡Œå¤„ç†çš„æ—¶å€™, å¿…é¡»è¦ä½¿ç”¨sync.map, å½“ç„¶, ä¸è¿‡å¦‚æœä¸æ¶‰åŠåˆ°å¤šåç¨‹å¤„ç†, è¿˜æ˜¯ä½¿ç”¨æ™®é€šçš„ map, å› ä¸ºæ™®é€šçš„ map æ¯”sync.mapæ•ˆç‡æ›´é«˜ sync.map ä¼˜ç‚¹ sync.mapçš„ä¸»è¦æ€è·¯æ˜¯è¯»å†™åˆ†ç¦», ä½¿ç”¨ç©ºé—´æ¢æ—¶é—´, ç›¸æ¯”è‡ªå·±ä½¿ç”¨é”æ¥å®ç°, æœ‰ä¸€å®šçš„ä¼˜åŒ– Demo 12345678910111213141516171819202122232425262728293031323334package mainimport ( \"fmt\" \"sync\" \"time\")func main() { smap := sync.Map{} // sync.Map smap.Store(\"age\", 10) // æ·»åŠ  key/value // åç¨‹ go func() { i := 0 for i &lt; 1000 { smap.Store(\"one\", i) // smap ä¿®æ”¹æ•°æ®, key ä¸å­˜åœ¨æ˜¯æ–°å¢ i++ } }() // åç¨‹ go func() { i := 0 for i &lt; 1000 { smap.Store(\"one\", 1001) // smap ä¿®æ”¹æ•°æ®, key ä¸å­˜åœ¨æ˜¯æ–°å¢ i++ } }() time.Sleep(time.Second * 2) fmt.Println(smap.Load(\"one\")) // æŸ¥çœ‹ key one æ•°æ®} è¿™æ—¶å€™å°±ä¸ä¼šæŠ¥é”™ æ•°æ®ç»“æ„ 123456type Map struct { mu Mutex // å¦‚æœæœ‰è„æ•°æ®æ“ä½œæ—¶, ä½¿ç”¨è¿™ä¸ªäº’æ–¥é” read atomic.Value // åªè¯»çš„æ•°æ®, ä¿å­˜äº†ä¸€éƒ¨åˆ†é”®å€¼å¯¹, åªè¯»å¹¶ä¸éœ€è¦åŠ é” dirty map[interface{}]*entry // ä¿å­˜äº†ä¸€éƒ¨åˆ†é”®å€¼å¯¹, å¯¹è¿™éƒ¨åˆ†æ“ä½œéœ€è¦è·å–äº’æ–¥é” misses int // è®¡æ•°å™¨, è®°å½•è·å– read æ•°æ®æ—¶ä¸å­˜åœ¨çš„æ¬¡æ•°} è¿™é‡Œçš„muæ˜¯äº’æ–¥é”, ç›®çš„æ˜¯ä¿æŠ¤readå’Œdirty readæ˜¯ä¿å­˜äº†åªè¯»çš„æ•°æ®, å…¶ä¸­çš„æ•°æ®æ“ä½œæ˜¯ go å†…éƒ¨çš„è¿›è¡Œæ“ä½œ, å…·æœ‰åŸå­æ€§ readçš„æ•°æ®ç»“æ„å¦‚ä¸‹ 1234type readOnly struct { m map[interface{}]*entry // åŒ…å«æ‰€æœ‰çš„åªè¯»é”®å€¼å¯¹ amended bool // æ ‡å¿—ä½, ä¸º true åˆ™ä»£è¡¨ read çš„æ•°æ®å¹¶ä¸å®Œæ•´} readOnly ä½œä¸ºåªè¯» map å­˜åœ¨, è¿™ä¸ª map çš„å…ƒç´ å¢åŠ æ˜¯ç”± dirty ä¸­è¿ç§»è¿‡æ¥çš„, ç”± go æ¥è¿›è¡Œæ•°æ®æ§åˆ¶, ä¸éœ€è¦åŠ é” dirtyæ˜¯éçº¿ç¨‹å®‰å…¨çš„åŸå§‹ map, å…¶ä¸­å­˜å‚¨äº†æ–°å†™å…¥çš„æ•°æ®, å’Œreadä¸­æ‰€æœ‰æœªè¢«åˆ é™¤çš„æ•°æ® dirtyçš„æ•°æ®ç»“æ„å¦‚ä¸‹(dirtyä¸read.mapéƒ½æ˜¯) 123type entry struct { p unsafe.Pointer // p ä¿å­˜äº†æ•°æ®çš„æŒ‡é’ˆ} è¿™é‡Œçš„ p æœ‰ä¸‰ç§å¯èƒ½ nil: entryå·²ç»è¢«åˆ é™¤, å¹¶ä¸” m.dirty ä¸º nil expunged: entryå·²ç»è¢«åˆ é™¤äº†, å¹¶ä¸” m.dirty ä¸ä¸º nil å…¶ä»–: entryæ˜¯æ­£å¸¸å€¼ æµç¨‹ Store store æ˜¯æ›´æ–°æ•°æ®, key å·²ç»å­˜åœ¨åˆ™æ›´æ–° value, ä¸å­˜åœ¨åˆ™æ’å…¥ 1smap.Store(\"one\", i) // ç»™ smap æ›´æ–° key ä¸º one çš„å€¼ä¸º i store æµç¨‹å¦‚ä¸‹: å¦‚æœåœ¨ read é‡Œèƒ½å¤Ÿæ‰¾åˆ°å¾…å­˜å‚¨çš„ keyï¼Œå¹¶ä¸”å¯¹åº”çš„ entry çš„ p å€¼ä¸ä¸º expungedï¼Œä¹Ÿå°±æ˜¯æ²¡è¢«åˆ é™¤æ—¶ï¼Œç›´æ¥æ›´æ–°å¯¹åº”çš„ entry å³å¯ã€‚ ç¬¬ä¸€æ­¥æ²¡æœ‰æˆåŠŸï¼šè¦ä¹ˆ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œè¦ä¹ˆ key è¢«æ ‡è®°ä¸ºåˆ é™¤ã€‚åˆ™å…ˆåŠ é”ï¼Œå†è¿›è¡Œåç»­çš„æ“ä½œã€‚ å†æ¬¡åœ¨ read ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¿™ä¸ª keyï¼Œä¹Ÿå°±æ˜¯ double check ä¸€ä¸‹ï¼Œè¿™ä¹Ÿæ˜¯ lock-free ç¼–ç¨‹é‡Œçš„å¸¸è§å¥—è·¯ã€‚å¦‚æœ read ä¸­å­˜åœ¨è¯¥ keyï¼Œä½† p == expungedï¼Œè¯´æ˜ m.dirty != nil å¹¶ä¸” m.dirty ä¸­ä¸å­˜åœ¨è¯¥ key å€¼ æ­¤æ—¶: a. å°† p çš„çŠ¶æ€ç”± expunged æ›´æ”¹ä¸º nilï¼›b. dirty map æ’å…¥ keyã€‚ç„¶åï¼Œç›´æ¥æ›´æ–°å¯¹åº”çš„ valueã€‚ å¦‚æœ read ä¸­æ²¡æœ‰æ­¤ keyï¼Œé‚£å°±æŸ¥çœ‹ dirty ä¸­æ˜¯å¦æœ‰æ­¤ keyï¼Œå¦‚æœæœ‰ï¼Œåˆ™ç›´æ¥æ›´æ–°å¯¹åº”çš„ valueï¼Œè¿™æ—¶ read ä¸­è¿˜æ˜¯æ²¡æœ‰æ­¤ keyã€‚ æœ€åä¸€æ­¥ï¼Œå¦‚æœ read å’Œ dirty ä¸­éƒ½ä¸å­˜åœ¨è¯¥ keyï¼Œåˆ™ï¼ša. å¦‚æœ dirty ä¸ºç©ºï¼Œåˆ™éœ€è¦åˆ›å»º dirtyï¼Œå¹¶ä» read ä¸­æ‹·è´æœªè¢«åˆ é™¤çš„å…ƒç´ ï¼›b. æ›´æ–° amended å­—æ®µï¼Œæ ‡è¯† dirty map ä¸­å­˜åœ¨ read map ä¸­æ²¡æœ‰çš„ keyï¼›c. å°† k-v å†™å…¥ dirty map ä¸­ï¼Œread.m ä¸å˜ã€‚æœ€åï¼Œæ›´æ–°æ­¤ key å¯¹åº”çš„ valueã€‚ ç®€å•æ¥è®², å°±æ˜¯åœ¨æ’å…¥çš„æ—¶å€™, å»readä¸­æŸ¥çœ‹key æ˜¯å¦å­˜åœ¨, å¦‚æœå·²ç»å­˜åœ¨åˆ™ç›´æ¥æ›´æ–°readä¸­çš„ value, å¦‚æœä¸å­˜åœ¨åˆ™å…ˆä¸Šé”, ç„¶åæ–°å¢åˆ°dirtyä¸­, ä¸å†™å…¥åˆ°readä¸­ Load load æ˜¯è·å– map ä¸­çš„å€¼ 12345v, ok := smap.Load(\"one\") // è·å– key ä¸º one çš„å€¼if !ok { fmt.Println(\"key ä¸å­˜åœ¨\") // key å¹¶ä¸å­˜åœ¨}fmt.Println(v) // value å¤„ç†è·¯å¾„åˆ†ä¸º fast path å’Œ slow pathï¼Œæ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š é¦–å…ˆæ˜¯ fast pathï¼Œç›´æ¥åœ¨ read ä¸­æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°äº†ç›´æ¥è°ƒç”¨ entry çš„ load æ–¹æ³•ï¼Œå–å‡ºå…¶ä¸­çš„å€¼ã€‚ å¦‚æœ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œä¸” amended ä¸º faseï¼Œè¯´æ˜ dirty ä¸ºç©ºï¼Œé‚£ç›´æ¥è¿”å› ç©ºå’Œ falseã€‚ å¦‚æœ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œä¸” amended ä¸º trueï¼Œè¯´æ˜ dirty ä¸­å¯èƒ½å­˜åœ¨æˆ‘ä»¬è¦æ‰¾çš„ keyã€‚å½“ç„¶è¦å…ˆä¸Šé”ï¼Œå†å°è¯•å» dirty ä¸­æŸ¥æ‰¾ã€‚åœ¨è¿™ä¹‹å‰ï¼Œä»ç„¶æœ‰ä¸€ä¸ª double check çš„æ“ä½œã€‚è‹¥è¿˜æ˜¯æ²¡æœ‰åœ¨ read ä¸­æ‰¾åˆ°ï¼Œé‚£ä¹ˆå°±ä» dirty ä¸­æ‰¾ã€‚ä¸ç®¡ dirty ä¸­æœ‰æ²¡æœ‰æ‰¾åˆ°ï¼Œéƒ½è¦\"è®°ä¸€ç¬”(misses+1)\"ï¼Œå› ä¸ºåœ¨ dirty è¢«æå‡ä¸º read ä¹‹å‰ï¼Œéƒ½ä¼šè¿›å…¥è¿™æ¡è·¯å¾„ ç®€å•æ¥è®², å°±æ˜¯åœ¨è·å–å€¼æ—¶, å…ˆåœ¨readä¸­æŸ¥æ‰¾, æœ‰å°±ç›´æ¥è¿”å›, æ²¡æœ‰åˆ™åŠ é”åå»dirtyä¸­æŸ¥æ‰¾, åŒæ—¶å°† misses+1, å¦‚æœ misses å¤§äºæˆ–ç­‰äºdirtyçš„é•¿åº¦, å°±å°†dirtyå˜æˆread, ç„¶åå»ºç«‹æ–°çš„ç©ºçš„dirty,åŒæ—¶missesè®¾ç½®ä¸º0 Delete Delete å¯ä»¥åˆ é™¤è¿™ä¸ª map ä¸­çš„ key 1smap.Delete(\"one\") // ä» smap ä¸­åˆ é™¤ key one éƒ½æ˜¯å…ˆä» read é‡ŒæŸ¥æ˜¯å¦æœ‰è¿™ä¸ª keyï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œ entry.delete æ–¹æ³•ï¼Œå°† p ç½®ä¸º nilï¼Œè¿™æ · read å’Œ dirty éƒ½èƒ½çœ‹åˆ°è¿™ä¸ªå˜åŒ–ã€‚ å¦‚æœæ²¡åœ¨ read ä¸­æ‰¾åˆ°è¿™ä¸ª keyï¼Œå¹¶ä¸” dirty ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå°±è¦æ“ä½œ dirty äº†ï¼Œæ“ä½œä¹‹å‰ï¼Œè¿˜æ˜¯è¦å…ˆä¸Šé”ã€‚ç„¶åè¿›è¡Œ double checkï¼Œå¦‚æœä»ç„¶æ²¡æœ‰åœ¨ read é‡Œæ‰¾åˆ°æ­¤ keyï¼Œåˆ™ä» dirty ä¸­åˆ æ‰è¿™ä¸ª keyã€‚ä½†ä¸æ˜¯çœŸæ­£åœ°ä» dirty ä¸­åˆ é™¤ï¼Œè€Œæ˜¯æ›´æ–° entry çš„çŠ¶æ€ã€‚ ç®€å•æ¥è®², å°±æ˜¯å…ˆæŸ¥æ‰¾readä¸­æ˜¯å¦å­˜åœ¨, ä¸å­˜åœ¨åˆ™åŠ é”åå»dirtyåˆ é™¤ LoadOrStore LoadOrStore ç»“åˆäº† Load å’Œ Store åŠŸèƒ½, å¦‚æœå­˜åœ¨è¿™ä¸ª key å°±è¿”å›, ä¸å­˜åœ¨åˆ™æ–°å¢ å…·ä½“è¿‡ç¨‹ç®€å•æ¥è®², å°±æ˜¯å…ˆreadä¸­æŸ¥è¯¢, æœ‰å°±è¿”å›, æ— å°±å»dirtyæŸ¥è¯¢, æœ‰å°±è¿”å›, æ— å°±æ’å…¥ Range Range ä½œç”¨æ˜¯è¾“å‡ºæ‰€æœ‰çš„ key å’Œ value, ç”¨èµ·æ¥æ¯”è¾ƒç‰¹æ®Š, éœ€è¦è‡ªå·±ä¼ å…¥ä¸€ä¸ªå¤„ç†å‡½æ•° 123456smap.Range(func(key, value interface{}) bool { name := key.(string) age := value.(int) fmt.Println(name, age) return true}) åªè¦ return true, å°±ä¼šåœæ­¢éå† å…·ä½“è¿‡ç¨‹ç®€å•çš„è¯´, å°±æ˜¯å…ˆåŠ é”, ç„¶åå°†dirtyçš„æ•°æ®æå‡åˆ°read, ç„¶åéå†readä¸­çš„æ•°æ® ä¼˜ç‚¹ sync.mapæ˜¯çº¿ç¨‹å®‰å…¨çš„ é€šè¿‡è¯»å†™åˆ†ç¦»(readå’Œdirty), é™ä½é”çš„ä½¿ç”¨æ¬¡æ•°, æé«˜é€Ÿåº¦, é€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯","link":"/2022/02/12/go_sync_map_theory/"},{"title":"sync.waitGroup åŸç†åˆ†æ","text":"å‰è¨€ syncçš„å¸¸ç”¨åŒ…å¥½åƒéƒ½å¿«è®²å®Œäº†, æœ€è¿‘å‡ å¤©è¿›åº¦å¾ˆå¿«å•Š, å¸Œæœ›èƒ½å¤šå¤šä¿æŒ. sync.WaitGroupæ˜¯ä¸ºäº†è§£å†³ä»»åŠ¡ç¼–æ’è€Œå‡ºç°çš„, ä¸»è¦å°±æ˜¯è§£å†³å¹¶å‘-ç­‰å¾…é—®é¢˜, å› æ­¤åœ¨çœŸæ­£ç¼–å†™è¿‡ç¨‹ä¸­ä¹Ÿå¾ˆå¸¸ç”¨, æœ¬ç¯‡å¤§è‡´è®²è§£å…¶å†…éƒ¨å®ç°çš„æ–¹å¼ Demo ç®€å•ä»‹ç»ä¸€ä¸‹ç”¨æ³• 123456789func main() { wg := sync.WaitGroup{} wg.Add(1) // wgè®¡æ•°+1 go func() { defer wg.Done() // wgè®¡æ•°-1 time.Sleep(3 * time.Second) }() wg.Wait() // ç­‰å¾… wg ç»“æŸ(wgè®¡æ•°ä¸º0)} å¯¹åº”sync.WaitGroupæ¥è®², åªæœ‰ä¸‰ç§æ–¹æ³•: Add(delta int): ä¸ºè®¡æ•°å™¨æ·»åŠ ä¸€å®šçš„æ•°å­— Done(): ä¸ºè®¡æ•°å™¨æ•°å­—å‡å»1 Wait(): å¤¯ä½ç­‰å¾…è®¡æ•°å™¨æ•°å­—å˜æˆ0 ç»“æ„ å’Œå¾€å¸¸ä¸€æ ·, å…ˆä»ç»“æ„å¼€å§‹çœ‹èµ· 123456789type WaitGroup struct { // é¿å…å¤åˆ¶ä½¿ç”¨çš„ä¸€ä¸ªæŠ€å·§ï¼Œå¯ä»¥å‘Šè¯‰vetå·¥å…·è¿åäº†å¤åˆ¶ä½¿ç”¨çš„è§„åˆ™ noCopy noCopy // 64bit(8bytes)çš„å€¼åˆ†æˆä¸¤æ®µï¼Œé«˜32bitæ˜¯è®¡æ•°å€¼ï¼Œä½32bitæ˜¯waiterçš„è®¡æ•° // å¦å¤–32bitæ˜¯ç”¨ä½œä¿¡å·é‡çš„ // å› ä¸º64bitå€¼çš„åŸå­æ“ä½œéœ€è¦64bitå¯¹é½ï¼Œä½†æ˜¯32bitç¼–è¯‘å™¨ä¸æ”¯æŒï¼Œæ‰€ä»¥æ•°ç»„ä¸­çš„å…ƒç´ åœ¨ä¸åŒçš„æ¶æ„ä¸­ä¸ä¸€æ ·ï¼Œå…·ä½“å¤„ç†çœ‹ä¸‹é¢çš„æ–¹æ³• // æ€»ä¹‹ï¼Œä¼šæ‰¾åˆ°å¯¹é½çš„é‚£64bitä½œä¸ºstateï¼Œå…¶ä½™çš„32bitåšä¿¡å·é‡ state1 [3]uint32} noCopy: è¿™ä¸ªæ˜¯ä¸€ä¸ªä½¿ç”¨æŠ€å·§, å¦‚æœä¸€ä¸ªç»“æ„ä½“ä¸­æœ‰æ­¤å­—æ®µ, vet å·¥å…·ä¼šåœ¨ç¼–è¯‘æ—¶æ£€æŸ¥é¿å…è¢« copy ä½¿ç”¨ state1: ä»å®šä¹‰å¯ä»¥çœ‹å‡º, å…¶é•¿åº¦ä¸º3, æ¯ä¸ª32bit, é‡Œé¢åŒ…å«äº†waitGroupçš„è®¡æ•°å€¼å’Œä¿¡å·é‡å’Œ waiter è®¡æ•° state1 ç»“æ„ 123state[0] // è°ƒç”¨ wait ç­‰å¾…çš„ goroutine æ•°é‡state[1] // è®¡æ•°state[2] // ä¿¡å·é‡ Add Addä¸»è¦æ˜¯å¯¹state1å­—æ®µä¸­çš„è®¡æ•°å€¼éƒ¨åˆ†è¿›è¡Œæ“ä½œ, æ­¥éª¤å¦‚ä¸‹: å°†å‚æ•°deltaå·¦ç§»32ä½ å°†å€¼åŠ åˆ°è®¡æ•°å€¼ä¸Š(state1[1]), è¿™ä¸ªå€¼æ˜¯å¯è´Ÿå¯æ­£ Done Doneå®é™…ä¸Šå°±æ˜¯è°ƒç”¨Add(-1) è€Œæ£€æµ‹åˆ°-1ä¹‹åçš„è®¡æ•°å€¼ä¸º0æ—¶, é€šè¿‡ä¿¡å·é‡å”¤é†’æ­£åœ¨waitçš„é˜»å¡åç¨‹ Wait è°ƒç”¨waitæ—¶, ä¼šå°†waiter+1, ç„¶åå°†è‡ªèº«åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­å¹¶é˜»å¡, ç­‰å¾…Doneæ—¶çš„å”¤é†’","link":"/2022/02/15/go_sync_waitgroup_theory/"},{"title":"å¥½çš„ç¤¼ä»ª","text":"å‰è¨€ è¿™å‡ å¤©è€å¦ˆçš„å•ä½åœ¨æçº¿ä¸ŠåŸ¹è®­, è¦å¬è¯¾, å¥¹è‡ªå·±ä¸æƒ³çœ‹, æˆ‘å°±è¶ç€å‘¨æœ«åœ¨å®¶ç”¨ç”µè„‘ç»™å¥¹æŒ‚ä¸€ä¸‹, è¯¾ç¨‹åŒ…æ‹¬äº†ç”Ÿäº§å®‰å…¨, é˜²ç–«çŸ¥è¯†, excel æ“ä½œ, ç¤¾ä¿ ç­‰è§†é¢‘, æœ€åä¸€éƒ¨åˆ†æ˜¯è®²æ€æ ·åšå¥½è‡ªå·±çš„ç¤¼ä»ª, çœ‹äº†ä¸¤èŠ‚è§‰å¾—æŒºå¯¹çš„, æˆ‘ä¸ªäººè§‰å¾—ä¹Ÿæ˜¯æœ‰å¿…è¦ç®€å•çš„äº†è§£ä¸€ä¸‹ç›¸å…³çš„çŸ¥è¯†, æ‰€ä»¥è¿™é‡Œç®€å•çš„è®°å½•ä¸€ä¸‹æ€»ç»“, æœ¬èº«è¯¾å°±ä¸‰ä¸ªå°æ—¶, æ‰€ä»¥æœ¬ç¯‡å†…å®¹ä¸å¤š æ¥æº è¿™ä¸ªè¯¾æ˜¯æˆªå–çš„è§†é¢‘, ä¸çŸ¥é“æ¥æº, è®²è§£äººæ˜¯ é€¯ç‘¶ (bjwbh.cn), ç®€å†çœ‹èµ·æ¥å¾ˆå‰å®³ ä»€ä¹ˆæ˜¯ç¤¼ä»ª å°Šé‡, é€‚åˆ ç¤¼ä»ªæ˜¯è®©äººå¾—åˆ°å°Šé‡, ç¤¼ä»ªéœ€è¦é€‚åˆè‡ªå·±å’Œå¯¹æ–¹, è€Œä¸æ˜¯åˆ»æ„çš„å»è£… ç¤¼ä»ªä¸æ˜¯ç”¨æ¥è£…çš„, è€Œæ˜¯å»ç”¨çš„ å­”å­çš„è®ºè¯­ä¸­æœ‰è¯´ æ­è€Œæ— ç¤¼åˆ™åŠ³ï¼Œæ…è€Œæ— ç¤¼åˆ™è‘¸ï¼Œå‹‡è€Œæ— ç¤¼åˆ™ä¹±ï¼Œç›´è€Œæ— ç¤¼åˆ™ç», å¼ºè°ƒäº†ç¤¼ä»ªéœ€è¦æŒæ¡å¯¹çš„æ–¹æ³•, å¦åˆ™ä¼šé€‚å¾—å…¶å ä½œè€…è®¤ä¸º äººç”Ÿå°±æ˜¯ä¸€åœºæˆäº¤, äººç”Ÿæ— å¤„ä¸æˆäº¤, è¿™é‡Œçš„æˆäº¤å¹¶ä¸æ˜¯æŒ‡çš„åŒæ–¹è¿›è¡Œäº¤æ˜“, è€Œæ˜¯å¹¿ä¹‰çš„æˆäº¤, æŒ‡åŒæ–¹è¾¾æˆäº†å…±è¯†. å©´å„¿åœ¨ç”Ÿä¸‹æ¥ä¹‹åç¬¬ä¸€ä»¶äº‹å°±æ˜¯å“­, ç›®çš„æ˜¯æ‰¾åˆ°å…¶æ¯äº², å‘Šè¯‰å¥¹æˆ‘å¾ˆå¥åº·, è¿™å°±æ˜¯äººç”Ÿçš„ç¬¬ä¸€åœºæˆäº¤ å¦‚æœä¸€ä¸ªäºº, å‘¨å›´äººç»™ä»–çš„è¯„ä»·éƒ½æ˜¯å¥½çš„, æ­£é¢çš„, è¯´æ˜è¿™ä¸ªäººæœ‰å¾ˆå¼ºçš„æˆäº¤èƒ½åŠ›, è¿™å°±æ˜¯æˆåŠŸçš„, æ‰€ä»¥, å­¦ä¹ ç¤¼ä»ªæ˜¯è®©åŒæ–¹è¾¾æˆåè®®, ä¿ƒæˆæˆäº¤ å­¦å¥½ç¤¼ä»ª, å¯ä»¥åŠ å¼ºä¸ªäººå“ç‰Œçš„å¡‘é€ å’Œè¥é”€ äº”æ„Ÿå¼€å…³ è¦æƒ³æˆäº¤, å¿…é¡»è¦å…ˆç»™å¯¹æ–¹ç•™ä¸‹å°è±¡, äººæ¯å¤©ä¼šåšå¾ˆå¤šäº‹æƒ…, å¤§è„‘ä¼šæŠ›å¼ƒæ‰å¤§éƒ¨åˆ†è®°å¿†, ä¸ºä»€ä¹ˆæœ‰äº›è®°å¿†æ˜¯å¾ˆæ·±åˆ»çš„å‘¢? åœ¨è„‘ç™½é‡‘ç–¯ç‹‚æ‰“å¹¿å‘Šçš„æ—¶å€™, ç›¸ä¿¡ç»å†è¿‡çš„äººéƒ½å¯¹å…¶å°è±¡æ·±åˆ», ç”šè‡³ç°åœ¨è¿˜å¿˜ä¸äº†. è¿™æ˜¯ä¸€ä¸ªæˆåŠŸçš„è¥é”€, æˆåŠŸçš„è®©ç”¨æˆ·è®°ä½äº†è‡ªå·±. äººçš„è„‘è¢‹åˆ†ä¸ºå·¦å³, å·¦è„‘æ˜¯ç†æ€§è„‘, å­˜æ”¾æµ…å±‚çš„è®°å¿†. å³è„‘æ˜¯æ„Ÿæ€§è„‘, å­˜æ”¾æ·±åº¦çš„è®°å¿†. å½“æŸä»¶äº‹æƒ…è¢«åˆ†åˆ°å·¦è„‘å­˜æ”¾æ—¶, å¤šåŠæ˜¯ä¸ä¼šè¢«è®°ä½çš„. ä¸¾ä¸ªä¾‹å­, ä¸€ä¸ªé”€å”®é¢å¯¹å®¢æˆ·æ¨é”€å•†å“. å½“é”€å”®ä¸€ç›´åœ¨è¯´è¯, è€Œå®¢æˆ·å¾ˆå°‘è¯´è¯çš„æ—¶å€™, ä¸€èˆ¬æˆåŠŸç‡éƒ½ä¸é«˜, å› ä¸ºé”€å”®çš„è¯å·²ç»è¢«å®¢æˆ·æ”¾åˆ°äº†å·¦è„‘è¿›è¡Œå¤„ç†. åŒæ ·çš„, ä¸ºä»€ä¹ˆå¾ˆå¤šäººä¸å¬è€å¦ˆçš„å” å¨, ä¹Ÿæ˜¯å› ä¸ºæ˜¯\"å” å¨\", è¢«æ”¾è¿›äº†å·¦è„‘ æƒ³è¦æ”¾åˆ°å³è„‘ä¸­, éœ€è¦æ‰“å¼€å³è„‘çš„\"å¼€å…³\", æœ‰é‚£äº›å‘¢? è§†è§‰, å¬è§‰, å—…è§‰, å‘³è§‰, è§¦è§‰. æˆ‘ä»¬ç°åœ¨æƒ³åˆ°è„‘ç™½é‡‘, è„‘å­é‡Œä¼šæœ‰ä¸€ä¸ªè€å¤´ä¸€ä¸ªè€å¤ªåœ¨æ‰­åŠ¨, åŒæ—¶\"ä»Šå¹´è¿‡èŠ‚ä¸æ”¶ç¤¼, æ”¶ç¤¼åªæ”¶è„‘ç™½é‡‘\"ä¹Ÿå‡ºç°åœ¨è„‘å­é‡Œ, è¿™å°±æ˜¯è§†è§‰å’Œå¬è§‰, ä¸€èˆ¬çš„å¯¹æŸä¸€ä»¶äº‹æƒ…å°è±¡æ·±åˆ», å¿…å®šæ˜¯å¤šäºå…¶ä¸­æŸä¸€ä¸ªå¼€å…³çš„. å¯ä»¥å›é¡¾ä¸€ä¸‹æœ€è¿‘å‘ç”Ÿçš„äº‹æƒ…è®°å¾—æ¸…æ¥šçš„æ˜¯ä¸æ˜¯è¿™æ ·. æŒ‰ç…§å ç”¨æ¯”ä¾‹æ¥è¿›è¡ŒåŒºåˆ†çš„è¯, è§†è§‰è¯­è¨€å äº† 55%, å£°éŸ³è¡¨æƒ…å äº† 38%, æ–‡å­—è¯­è¨€åªå  7%. æ–‡å­—è¯­è¨€ æ–‡å­—æ˜¯éœ€è¦é€šè¿‡ä»‹è´¨å»ä¼ æ’­çš„, å¯èƒ½æ˜¯å£°éŸ³, å¯èƒ½æ˜¯çº¸, å¯èƒ½æ˜¯å¾®ä¿¡. æ–‡å­—è¯­è¨€å®é™…ä¸Šæ˜¯å¾ˆé‡è¦çš„, æ˜¯æ ¸å¿ƒéƒ¨åˆ†, ç›´æ¥ä½“ç°äº†ä½ çš„æ€åº¦, é€»è¾‘æ€ç»´ç­‰ç­‰, ä»–æ˜¯èµ·åˆ°äº†ç”»é¾™ç‚¹ç›çš„ä½œç”¨, ä½†æ˜¯å…‰æœ‰æ–‡å­—è¯­è¨€ä¹Ÿæ˜¯ä¸è¡Œçš„, åˆšæ‰ä¹Ÿè¯´äº†, æ–‡å­—è¯­è¨€éœ€è¦é€šè¿‡ä»‹è´¨å»ä¼ æ’­, é‚£ä¹ˆå‰©ä¸‹çš„93%å°±æ˜¯ä½ éœ€è¦é€šè¿‡ä»‹è´¨å»å°†ä½ çš„è¯­è¨€, ä½ çš„æ€æƒ³è¡¨è¾¾å‡ºæ¥. ä½œè€…ä¸¾äº†ä¾‹å­, å½“ä½ å¬åˆ°ä½ å‘å‡ºå»çš„è¯­éŸ³å¾®ä¿¡, æˆ–è€…å½•éŸ³çš„æ—¶å€™, ä¼šæƒŠè®¶è‡ªå·±çš„å£°éŸ³æ€ä¹ˆä¸è‡ªå·±è®¾æƒ³çš„ä¸ä¸€è‡´, è¿™æ˜¯å› ä¸ºä½ çš„å‘å£°æ²¡æœ‰å—åˆ°è¿‡ä¸“ä¸šçš„è®­ç»ƒ åŒæ ·çš„ä¸€å¥è¯, æˆ–è€…è¯´å‡ ä¸ªå­—, é…åˆå‘å£°äººçš„è¡¨æƒ…, è¯­è°ƒç­‰å°±ä¼šæœ‰ä¸åŒçš„è¡¨ç°, åŒæ ·æ˜¯å‡ ä¸ªå­— ä½ æ€ä¹ˆå›æ¥äº†, å¯ä»¥è¡¨ç°å‡º å¤±æœ›/ æƒŠè®¶/ æƒŠå–œ/ å‘æ€’ ç­‰å¿ƒç†, è¿™æ˜¯å› ä¸ºä½ çš„å¿ƒç†é€šè¿‡ è¡¨æƒ…/ åŠ¨ä½œ/ è¯­è°ƒ ç­‰ä»‹è´¨æ•£å‘å‡ºæ¥çš„. è§†è§‰è¯­è¨€ æœ‰äº›äºº, ä½ ä¸ä»–æ²Ÿé€šæ—¶, ä¼šè§‰å¾—ä»–æœ‰ä¸€ç§ æ°”åœº, è¿™å°±æ˜¯é€šè¿‡è§†è§‰è¯­è¨€è¡¨è¾¾çš„. è§†è§‰è¯­è¨€æœ‰ä¸‰ç§ç±»å‹, ä»ªå®¹/ ä»ªè¡¨/ ä»ªæ€ ä»ªå®¹æ˜¯æŒ‡çš„èº«ä½“æ‰€æœ‰éœ²å‡ºæ¥è‡ªå·±åŸç”Ÿæ€çš„åœ°æ–¹, æ¯”å¦‚ å¤´å‘, çœ¼ç›, é¼»å­ ç­‰ ä»ªè¡¨æŒ‡çš„æ˜¯ç›–ä½èº«ä½“çš„æ‰€æœ‰éåŸç”Ÿæ€çš„åœ°æ–¹, æ¯”å¦‚ çœ¼é•œ, æ‰‹è¡¨, ä¸Šè¡£ ç­‰ ä»ªæ€æŒ‡çš„æ˜¯æ‰€æœ‰ä¼šåŠ¨çš„, æ¯”å¦‚ èµ°, è·‘, è¹², ç¬‘ ä½œè€…è®¤ä¸ºè¿™ä¸‰ä¸ªæœ€é‡è¦çš„å¾€å¾€æ˜¯ ä»ªæ€, å› ä¸ºä½ æƒ³è¡¨è¾¾æ€æƒ³, æœ€ç›´æ¥çš„å°±æ˜¯ä»ªæ€ è€Œè¦æé«˜è‡ªå·±çš„ä»ªæ€, ä¸€å®šè®°å¾—éœ€è¦æé«˜è‡ªå·±çš„æ„è¯†, å› ä¸º æ„è¯†å†³å®šè¡ŒåŠ¨, è¡ŒåŠ¨å†³å®šç»“æœ æˆ‘ä»¬éœ€è¦æœ‰ æ­æ•¬å¿ƒ, æ¯”å¦‚å»æ‹œä½›çš„åœ°æ–¹, å¤§å®¶éƒ½å¾ˆå®‰é™(é™¤äº†ç‰¹åˆ«çš„äºº), æœ‰å¾ˆå¥½çš„æ°›å›´, é‚£ä¸ºä»€ä¹ˆå¤§å®¶éƒ½ä¸ç”±è‡ªä¸»çš„ç»´æŒç§©åºå‘¢? å› ä¸ºå¯¹è¿™é‡Œæœ‰ æ­æ•¬å¿ƒ, é‚£å…¶å®æˆ‘ä»¬åº”è¯¥å¯¹ä¸‡äº‹ä¸‡ç‰©æœ‰æ­æ•¬å¿ƒ, è€Œä¸æ˜¯åœ¨ç‰¹å®šçš„åœ°æ–¹. æ¯”å¦‚åœ¨å…¬å…±åœºåˆ, ä¸æŠ½çƒŸ, åƒåœ¾ä¸è¦éšåœ°æ‰”, è¿™å…¶å®å°±æ˜¯ç¤¼ä»ª, å°±æ˜¯ä½ å¯¹æœ‰äº›ä¸œè¥¿å¿ƒå­˜æ­æ•¬, ä¸ºä»€ä¹ˆåƒåœ¾ä¸éšåœ°æ‰”, å› ä¸ºä½ çŸ¥é“æ¸…æ´å·¥ä»¬å¾ˆè¾›è‹¦, å¯¹ä»–å¿ƒå­˜æ­æ•¬, è¿™æ˜¯å¾ˆå¥½çš„äº‹æƒ…, æˆ‘ä»¬å¸¸è¯´ å¾·è¡Œ, äººæœ‰é“å¾·, å°±ä¼šé€šè¿‡è¡Œä¸ºæ¥é‡Šæ”¾, å°±ä¼šè®©è‡ªå·±çš„ä»ªæ€å˜å¾—æ›´å¥½, ä¿®èº«é½å®¶æ²»å›½å¹³å¤©ä¸‹, ä¿®èº«æ˜¯åœ¨æœ€å‰é¢çš„, éšåæ˜¯è‡ªå·±çš„å°å®¶, åæ¥æ‰æ˜¯å¯¹ç¤¾ä¼šæœ‰è´¡çŒ®. å¾®è¡¨æƒ…/å¾®åŠ¨ä½œ æŒæ§æˆ‘ä»¬çš„å¾®è¡¨æƒ…, è¿™å±äºä»ªæ€çš„ä¸€éƒ¨åˆ†, å¦‚ä½•é¢å¯¹æœ‰æ°”åœºçš„äºº? çœ¼ç› é¦–å…ˆæ˜¯çœ¼ç›, çœ¼ç›æ˜¯å¿ƒçµçš„çª—æˆ·, æˆ‘ä»¬å¾ˆå°‘ä¸äººå¯¹è§†, è€Œå¯¹äºæœ‰æ°”åœºçš„äºº, ä½ æ›´éš¾ä¸ä»–å¯¹è§†, ä¼šä¸çŸ¥ä¸è§‰çš„åˆ«å¼€çœ¼ç›, è¿™æ—¶å€™å°±ä»£è¡¨ä½ ç¤ºå¼±äº†. ä¸»è¦æ˜¯è®©æˆ‘ä»¬æœ‰äº†å‹è¿«æ„Ÿ, æ€ä¹ˆæ¥å‡è½»å‹è¿«æ„Ÿå‘¢? æˆ‘ä»¬å¯ä»¥äº¤è°ˆæ—¶ç›¯ç€ä»–ä»¬çš„å°ä¸‰è§’åŒºçœ‹, å°ä¸‰è§’åŒºæŒ‡çš„æ˜¯ ä¸¤åªçœ¼ç›ä¸é¼»æ¢ è¿æ¥å½¢æˆçš„å€’ä¸‰è§’, è¿™æ ·ä¼šç¼“è§£ä¸€äº›å‹åŠ›, æå‡è‡ªå·±çš„æ°”åœº. åŒæ—¶è¦æ³¨æ„, ä¸è¦é¢‘ç¹çš„, æˆ–è€…åŠ¨ä½œå¹…åº¦è¿‡å¤§çš„, å°†è§†çº¿ç¦»å¼€ å¤§ä¸‰è§’åŒº, å¤§ä¸‰è§’åŒºæŒ‡çš„æ˜¯, å¤´é¡¶åˆ°ä¸¤è‚©å½¢æˆçš„ä¸‰è§’å½¢, å°¤å…¶æ˜¯ä¸å¼‚æ€§äº¤è°ˆçš„æ—¶å€™, å¦‚æœä¸éµå®ˆ, å¾ˆå¯èƒ½è®©å¯¹æ–¹è§‰å¾—ä½ æœ‰åˆ«çš„æƒ³æ³•. çœ¼ç›å‘ä¸‹ä¸åˆ«äººè¯´è¯, ä¼šè®©äººè§‰å¾— è½»è”‘, åŠ¨æœºä¸çº¯ å‘ä¸Šè®©äººè§‰å¾—æ˜¯ è‹¥æœ‰æ‰€æ€, ä¸è‡ªä¿¡ æ‰€ä»¥é¢å¯¹é¢†å¯¼æˆ–è€…å®¢æˆ·æ—¶, åƒä¸‡è¦è®°ä½ è€Œå‘å·¦å³æ—¶ä¼šè®©äººè§‰å¾— ä¸è¢«å°Šé‡, æ²¡æœ‰å…³æ³¨å¯¹æ–¹ æ‰‹ æ‰‹éƒ¨åŠ¨ä½œä¹Ÿæ˜¯éå¸¸é‡è¦çš„, åŒæ ·è¯´ä¸€å¥è¯, å½“ä½ è¯´è¯æ—¶ç«–èµ·å¤§æ‹‡æŒ‡, å°±è®©äººè§‰å¾—æ˜¯åœ¨å¤¸èµ, è€Œç«–èµ·é£ŸæŒ‡åˆ™è®©äººè§‰å¾—åœ¨æŒ‡è´£ åœ¨äº¤æµæ—¶, é£ŸæŒ‡ä»£è¡¨ æŒ‡è´£, æŒ‘è¡…å’Œè·ç¦»æ„Ÿ åœ¨äº¤æµæ—¶, æŒå¿ƒå¯¹ç€äººä»£è¡¨ é«˜é«˜åœ¨ä¸Šå’Œè·ç¦» åœ¨äº¤æµæ—¶, æŠ±ç€æ”¶ä»£è¡¨é«˜å‚² æˆ‘ä»¬å‘ç°é¢†å¯¼åœ¨å¼€ä¼šåä¸‹æ—¶, æœ‰äº›å–œæ¬¢å‰æ‰‹æŠ±èƒ¸, è¿™æ˜¯å› ä¸ºäººä½“æœ‰ä¸‰æŠŠé”, çœ‰é”, æ‰‹é”, è„šé”, è¿™ç§è¢«ç§°ä¸º å°é—­å¼å§¿åŠ¿ çœ‰é”å¾€å¾€è®©äººè§‰å¾—åœ¨ä¸ºäº‹æƒ…å‘æ„, æœ‰äº›äººä¼šåœ¨æ€è€ƒé—®é¢˜æ—¶çš±ç€çœ‰å¤´, è¿™æ˜¯ä¸å¥½çš„, ä¼šè®©äººè§‰å¾— å½¢è±¡ä¸ä½³, å¿ƒäº‹é‡ ä¸Šæ‰‹é”(å‰æ‰‹æŠ±èƒ¸)åˆ™è®©äººæ„Ÿè§‰ä¸æ»¡æ„, é«˜é«˜åœ¨ä¸Š, é”è„šåŒæ ·è¿™æ · åœ¨å¿ƒç†å­¦ä¸­, æ‰‹ä»£è¡¨å¯¹äººçš„è®¤å¯ç¨‹åº¦, è„šä»£è¡¨å¯¹äº‹æƒ…çš„è®¤å¯ç¨‹åº¦. è€Œä¸€åªæ‰‹æ¨ªç€èƒ¸å‰, ä¸€åªæ‰‹ç«–ç€, è¿™å°±ä»£è¡¨æ­£åœ¨æ€è€ƒé—®é¢˜, æ­£åœ¨çº ç»“. å½“ä¸€å¯¹å¤šè®²è¯æ—¶, æ‰‹æ”¾åœ¨è‚šå­ä¸Š, å°±ä»£è¡¨ä¸è‡ªä¿¡å’Œç´§å¼  ä¸ªäººä¿®ä¸º(ä¿®å…»)è¶Šé«˜, åç€è¶Šå››å¹³å…«ç¨³, æ²¡æœ‰è¿‡å¤šçš„åŠ¨ä½œ å‘äººé€’äº¤èµ„æ–™çš„æ—¶å€™. éœ€è¦æ³¨æ„: åŒæ‰‹é€’é€ ä¹¦æœ¬ä¸Šçš„å­—æœå‘å¯¹æ–¹ çœ¼ç›è¦ç›¯ç€å¯¹æ–¹çš„å°ä¸‰è§’, å¯¹æ–¹æ‹¿åˆ°åå†ç§»å¼€ å‘äººé€’é€ç¬”æ—¶, éœ€è¦æ³¨æ„: æ‹”ä¸‹ç¬”å¸½(å¦‚æœ‰) ç¬”å°–æœå‘è‡ªå·± çœ¼ç›ç›¯ç€å¯¹æ–¹å°ä¸‰è§’ å¦‚æœéœ€è¦å¯¹æ–¹ç­¾å­—, åŒæ—¶æ³¨æ„è¦è§£é‡Šå’ŒæŒ‡å¯¼å¯¹æ–¹åœ¨å“ªé‡Œç­¾, æ‰‹æŒ‡å‘ç­¾å­—çš„åœ°æ–¹, æ³¨æ„å¤§æ‹‡æŒ‡æ”¶èµ·æ¥, éšè—åœ¨æ‰‹æŒä¸­. æ¡æ‰‹ æ¡æ‰‹æ˜¯éå¸¸é‡è¦çš„, æ€ä¹ˆæ ·æ¡æ‰‹ è·ç¦»ä¸€ç±³ä¹‹å†…, ä¸åˆ«äººä¿æŒä¸€æ ·çš„ç«™å§¿æˆ–è€…åå§¿ åŠ›é‡å‡å½“æˆ–è€…ç¨ç¨ç”¨åŠ›, ä»£è¡¨çƒ­æƒ… ä¸¤è€…ä¹‹é—´ä¸è¦æœ‰æ¡Œå­æˆ–è€…æ¤…å­çš„é˜»éš” å¦‚æœä¸¤è€…ä¹‹é—´éš”äº†ä¸€ä¸ªäºº, è¦å…ˆä¸è¿™ä¸ªäººæ‰“æ‹›å‘¼æ¡æ‰‹, ç„¶åå†ä¸ä»–æ‰“æ‹›å‘¼æ¡æ‰‹ å’Œä»–æ‰“æ‹›å‘¼è¦è€ƒè™‘å…¶ä»–äººçš„æ„Ÿå— ä¸å¯¹æ–¹æ¡æ‰‹ä¸è¦æ˜¯\"ç©ºå¿ƒ\"çš„, å°±æ˜¯ä½ å’Œå¯¹æ–¹çš„æ‰‹æŒå¿ƒç›´æ¥æ˜¯ç©ºçš„, è¿™å«ç•™ä¸€æ‰‹, åº”è¯¥ä¸å¯¹æ–¹è´´åˆ æ¡æ‰‹æ—¶é¢ ä¸¤ä¸‹, åŒæ—¶æ‰“æ‹›å‘¼ æ¡æ‰‹æ—¶å¦ä¸€åªæ‰‹ä¸è¦æ’å…œæˆ–è€…èƒŒåé¢, è‡ªç„¶å‚ä¸‹å³å¯ ä¸€èˆ¬çš„, è¢«å°Šæ•¬è€…å…ˆä¼¸æ‰‹, å½“æ‹œè®¿æ—¶, æ˜¯ä¸»äººå…ˆä¼¸æ‰‹, ç¦»å¼€æ—¶, å®¢äººå…ˆä¼¸æ‰‹ èŒåœºä¸­é¢†å¯¼å…ˆä¼¸æ‰‹ ç¤¾äº¤æ—¶, å¥³æ€§å…ˆä¼¸æ‰‹ æ­£ç¡®åå§¿ åœ¨äº¤æµæ—¶. æŠŠè‚˜å…³èŠ‚åˆ°æ‰‹æŒ‡çš„ 2/3 æ”¾åˆ°æ¡Œé¢ä¸Š, æ˜¾å¾—æœ‰äº²å’ŒåŠ› èº«ä½“å¾®å¾®å‰å€¾ åä¸‹æ—¶, å±è‚¡è¶Šé å‰è¶Šæ˜¾å¾—è°¦æ­, è¶Šé åè¶Šè‡ªä¿¡ å¦‚æœè¦é åå, ç›´æ¥é åˆ°èƒŒé ä¸Š, æ³¨æ„ä¸è¦å°¾æ¤éª¨å’Œæ¤…å­ç›´æ¥æœ‰ç©ºéš™, æ˜¾å¾—åŠå„¿éƒå½“ä¸”å¯¹èº«ä½“ä¸å¥½ ç”·ç”Ÿåç€ä¸è¦ä¸¤è…¿å¹¶ç›´åˆåœ¨ä¸€èµ·, æ˜¾å¾—é˜´æ°”é‡ ç”·ç”Ÿä¸¤è…¿åˆ†å¼€, ä½†æ˜¯ä¸è¦å®½è¿‡è‚©è†€ å¯ä»¥ä¸€ä¸ªè„šåœ¨å‰ä¸€ä¸ªåœ¨å, ä¸è¦è·ç¦»å¤ªè¿œ, ä¸è¦é åœ¨ä¸€èµ·(è„šé”) ä¸è¦å‡ºç°è„šé”, æ˜¾å¾—éš”é˜‚ é¤æ¡Œåº§æ¬¡ ä¸»ä¸€: å®´è¯·æ–¹ ä¸»äºŒ: é™ªåŒæ–¹, å¤„ç†çäº‹çš„ æŒ‰ç…§åœ†æ¡Œä¸¾ä¾‹, ä¸€èˆ¬ä¸»ä¸€ååœ¨æ­£å¯¹é—¨, æœ€é‡Œé¢, ä¸»äºŒååœ¨é—¨å£, èƒŒå¯¹é—¨, æ–¹ä¾¿äº¤é™… å®¢ä¸€ååœ¨ä¸»ä¸€å³æ‰‹è¾¹ç¬¬ä¸€ä¸ª, å®¢äºŒåå·¦æ‰‹è¾¹ç¬¬ä¸€ä¸ªè¿™æ ·æ’åº ç«™å§¿ç”· æŠ¬å¤´, æŒºèƒ¸, æ”¶è…¹, æ”¶ä¸‹å·´ å¤§æ‹‡æŒ‡æ°¸è¿œä¸è¦æ’è¿›å¦ä¸€åªæ‰‹ æ–¹æ¡ˆ1 æ‰‹æ”¾ä¸¤ä¾§, æ‰‹å¼€æ”¾å¼ æ–¹æ¡ˆ2 åº„é‡ç«™å§¿ ä»ªå¼æ„Ÿå¼º, ä½†æ˜¯æ˜¾å¾—æœ‰è·ç¦»æ„Ÿ å³æ‰‹åŠæ¡, å·¦æ‰‹æ­å³æ‰‹æ‰‹è…• å·¦æ‰‹å¤§æ‹‡æŒ‡ä¸è¦å•ç‹¬å¼ å¼€, å¼ å¼€æ˜¾å¾—å¼ æ‰¬ å·¦æ‰‹å¤§æ‹‡æŒ‡ä¸è¦æ¡ç€æ‰‹è…•, æ¡ä½æ˜¾å¾—ä¸è‡ªä¿¡ å½“å¯ä»¥æ”¾æ¾çš„æ—¶å€™(è®¤è¯†ä¹‹å), å¯åŒæ‰‹æ­åœ¨ä¸€èµ·äº†, æ˜¾å¾—æ”¾æ¾, æ‹‰è¿‘è·ç¦» æ‹›æ‰‹ è‚˜å…³èŠ‚åœ¨è‚©ä»¥ä¸Š, æ˜¾å¾—çƒ­æƒ…å¼€æ”¾, ä¼‘é—²è‡ªç”± è‚˜å…³èŠ‚åœ¨è‚©è†€å’Œè‚šè„ä¹‹é—´, æ˜¾å¾—æ²‰ç¨³å¤§æ°”, ä¼˜é›…ç«¯åº„ ä»ªå®¹(ç”·) æ‰‹æŒ‡ç”²ä¸è¦é•¿, æ˜¾å¾—é˜´æ°”é‡ å¤´å‘å‰ä¸é®çœ‰, ä¾§ä¸ç›–è€³, åä¸åŠé¢†, ä¸è¦å¤¸å¼ ","link":"/2021/09/04/good_etiquette/"},{"title":"è®°ä¸€æ¬¡goroutineä¸wgä¸€èµ·ä½¿ç”¨å¯¼è‡´çš„é—®é¢˜","text":"Send Closed Chan é—®é¢˜æ¦‚è¿° ä»£ç é€»è¾‘æ˜¯å¯åŠ¨æ—¶å¯åŠ¨å¤šä¸ª channel, channel1 è·å–æ•°æ®ç›‘å¬æ•°æ®å¤„ç†åå‘é€ç»™ channel2 , channel2 å¤„ç†åå†ç»™ channel3 ç­‰ç­‰ åœ¨ channel1 å†™å®Œæ•°æ®åå°†é€šé“ channel1 å…³é—­, channel1 å…³é—­å channel2 ä¹Ÿå…³é—­, è¾¾åˆ°ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åé€šé“å…¨éƒ¨å…³é—­çš„æ•ˆæœ æˆ‘ä¹‹å‰çš„ä»£ç æ˜¯ 12345678910111213141516171819func StartVerify() { wg := sync.WaitGroup{} for { data, ok := &lt;-TypicalResChan if !ok { wg.Wait() close(VerifyBossDNSChan) break } go func() { wg.Add(1) ok := Verify(data) if ok { VerifyBossDNSChan &lt;- data } wg.Done() }() }} åæ¥ä½¿ç”¨ä¸­å‘ç°æœ‰æ—¶å€™ä¼šæŠ¥ send closed channel çš„é”™è¯¯,å¤§ä½¬çœ‹äº†ä¸€çœ¼å°±å‘ç°äº†é—®é¢˜ é—®é¢˜å‰–æ å°±ä»¥ä¸Šé¢çš„ä¸¾ä¾‹, ä¸Šæ¸¸å‘ TypicalResChan å‘é€æ•°æ®æ—¶, å¦‚æœä¸æ˜¯ close è¯·æ±‚, ä¼šå¯åŠ¨ä¸€ä¸ª goroutine å»å¤„ç†é€»è¾‘, è€Œåœ¨ å¯åŠ¨è¿™ä¸ª goroutine ååœ¨å†…éƒ¨è¿›è¡Œ wg çš„ Add æ³¨å†Œ, æ³¨æ„è¿™ä¸ªè¿‡ç¨‹æ˜¯æœ‰è€—æ—¶çš„, æ‰€ä»¥é—®é¢˜æ¥äº†, å½“ä¸Šæ¸¸å‘ TypicalResChan å‘é€ close æ—¶, è¿›å…¥ !ok çš„é€»è¾‘, æ­¤æ—¶ç­‰å¾… wg é‡Šæ”¾, æ­¤æ—¶æœ‰å¯èƒ½ä¸Šä¸€ä¸ªæ•°æ®æ¥æ”¶åˆ°åè¿˜åœ¨å¯åŠ¨ä¸€ä¸ª goroutine ,è¿˜æ²¡æœ‰ Addæ³¨å†Œ, æ­¤æ—¶wgæ²¡æœ‰ç›‘å¬åˆ°è¿™ä¸ª goroutine çš„æ³¨å†Œ, é€ æˆä¸ä¼šç­‰å¾…è¿™ä¸ª goroutine ,ç›´æ¥å°±å…³é—­äº† TypicalResChan, è€Œè¿™ä¸ª goroutine æ‰§è¡Œåå‘ TypicalResChan å‘é€æ•°æ®æ—¶ TypicalResChan å·²ç»å…³é—­, æ‰€ä»¥ä¼šæŠ¥é”™å¯¼è‡´ panic å¦å¤–, è¿˜éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ wg æ²¡æœ‰æ³¨å†Œå‰å°± wait æ˜¯ä¸æ¨èçš„, å¾ˆå®¹æ˜“å‡ºç°é—®é¢˜ è¿˜æœ‰å°±æ˜¯åˆ¤æ–­é€šé“å…³é—­æ›´æ¨èä½¿ç”¨ range çœå»åˆ¤æ–­ !ok çš„æ­¥éª¤ä¿æŒä»£ç æ•´æ´ é—®é¢˜è§£å†³ ä¿®æ”¹æˆè¿™æ ·å³å¯ 123456789101112131415func StartVerify() { wg := sync.WaitGroup{} for data := range TypicalResChan { wg.Add(1) go func(data Result) { defer wg.Done() ok := Verify(data) if ok { VerifyBossDNSChan &lt;- data } }(data) } wg.Wait() close(VerifyBossDNSChan)} åœ¨ä¸Šæ¸¸ close æ—¶ range ä¼šè‡ªåŠ¨ç»“æŸ, è€Œå—åˆ°æ­£å¸¸æ•°æ®å…ˆ Add é˜²æ­¢æ—¶é—´å·®å¯¼è‡´çš„ Add å¤±è´¥é—®é¢˜, åœ¨ 1.14 å go ä¼˜åŒ–äº† defer çš„é€»è¾‘, defer åŸºæœ¬ä¸å†æœ‰æ¶ˆè€—, æ‰€ä»¥æ¨èä½¿ç”¨ defer æ³¨å†Œ wg çš„å…³é—­, è€Œåœ¨ close æ—¶, for å¾ªç¯ç»“æŸ, wg åœ¨ wait åå† close","link":"/2021/09/04/gorouting_and_wg/"},{"title":"ä¸ºä»€ä¹ˆgRPCä½¿ç”¨HTTP2è€Œä¸æ˜¯WebSocket","text":"åœ¨è·ŸåŒäº‹èŠå¤©(æ‘¸é±¼)çš„æ—¶å€™, è°ˆåˆ°gRPCä½¿ç”¨HTTP2çš„å¥½å¤„, ç„¶ååŒäº‹æŠ›å‡ºæ¥ä¸€ä¸ªé—®é¢˜, ä¸ºä»€ä¹ˆä¸ä½¿ç”¨websocket, äºæ˜¯åœ¨æˆ‘æŸ¥æ‰¾äº†ç›¸å…³èµ„æ–™åæœ‰äº†è¿™ä¸€ç¯‡åšå®¢ ä»€ä¹ˆæ˜¯RPC æœ¬æ–‡çš„ä¸»è¦ç›®çš„ä¸æ˜¯è®²ä»€ä¹ˆæ˜¯RPC, ä»€ä¹ˆæ˜¯gRPC, ä½†è¿˜æ˜¯ç¨å¾®å¸¦ä¸€ç‚¹(æ€ä¹ˆå¯èƒ½æ˜¯ä¸ºäº†å‡‘å­—æ•°ğŸ˜—) RPCå…¶å®å°±æ˜¯**è¿œç¨‹è¿‡ç¨‹è°ƒç”¨(Remote Procedure Call)**çš„ç¼©å†™, æ˜¯å±äºè®¡ç®—æœºé€šä¿¡åè®®çš„ä¸€ç§. å…¶å®ä»åå­—ä¹Ÿèƒ½çœ‹å‡ºæ¥, å°±æ˜¯åœ¨ä¸€å°è®¡ç®—æœºçš„ç¨‹åºå»è°ƒç”¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´(å¯èƒ½æ˜¯æœ¬æœºçš„ä¸åŒè™šæ‹Ÿç©ºé—´, ä¹Ÿå¯èƒ½æ˜¯ä¸åŒè®¡ç®—æœº)çš„ç¨‹åº, è€Œä½œä¸ºå¼€å‘è€…æ¥è®², æ— éœ€å…³æ³¨è¿™éƒ¨åˆ†ç»†èŠ‚. RPCæ˜¯ä¸€ç§ æœåŠ¡ç«¯-å®¢æˆ·ç«¯(Client/Server)æ¨¡å¼, é€šè¿‡å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æ¥å—å›åº”è¿™ä¸ªè¿‡ç¨‹æ¥è¿›è¡Œä¿¡æ¯äº¤äº’. å› ä¸ºæ˜¯è°ƒç”¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´çš„ç¨‹åº, æ‰€ä»¥éœ€è¦è¿›è¡Œä¿¡æ¯çš„ä¼ é€’å’Œå‘é€æ¥æ”¶, æŠ½è±¡å‡ºæ¥æµç¨‹å¤§è‡´å¦‚ä¸‹ 123å®¢æˆ·ç«¯: æœ¬åœ°è°ƒç”¨ --&gt; å‚æ•°å°è£… --&gt; å‘é€è°ƒç”¨ä¿¡æ¯æœåŠ¡ç«¯: æ¥æ”¶è°ƒç”¨ä¿¡æ¯ --&gt; è§£é™¤å°è£… --&gt; è°ƒç”¨æœ¬åœ°æœåŠ¡ --&gt; è·å–ç»“æœ --&gt; å°è£…ç»“æœ --&gt; å‘é€ç»“æœå®¢æˆ·ç«¯: æ¥æ”¶ç»“æœ --&gt; è§£é™¤å°è£… --&gt; æœ¬åœ°è¿”å›ç»“æœ å› ä¸ºæ˜¯è·¨ç©ºé—´è°ƒç”¨, ä¸ºäº†ä¿è¯è¿è¡Œæ­£å¸¸, è‚¯å®šè¦çº¦å®šå¥½å†…å®¹çš„æ ¼å¼/è§„èŒƒ, å°±è·Ÿä½ è®©åˆ«äººå¸®å¿™ä¹°å½©ç¥¨, å¯¹é¢æ˜¯ä¸ªä¸æ‡‚æ±‰è¯­çš„å¤–å›½äºº, ä»–å°±ä¸çŸ¥é“ä½ æƒ³è¦ä»–å¹²å˜›, å°±ä¼šå¯¼è‡´æ— æ³•æ­£ç¡®æ‰§è¡Œä¸‹å». è¿™é‡Œé¢å¯åˆ†ä¸ºä¸¤éƒ¨åˆ† å†…å®¹ç»„ç»‡çº¦å®š: åˆ†ä¸ºè°ƒç”¨è¯­æ³•å’Œå†…å®¹è§£å‹ç¼©ä¸¤ä¸ªéƒ¨åˆ†, æ¯”å¦‚æˆ‘è¦è°ƒç”¨ä½ çš„å“ªä¸ªåŠŸèƒ½, ç»™ä½ çš„ä¿¡æ¯æ˜¯æ€æ ·çš„ç»“æ„ç­‰ ç½‘ç»œä¼ è¾“: æ¶‰åŠåˆ°çœŸæ­£çš„äº’è”ç½‘ä¼ è¾“, å°±æ¯”è¾ƒå¤æ‚äº†, æ€ä¹ˆåŒºåˆ†äºŒè¿›åˆ¶çš„å“ªä¸€éƒ¨åˆ†æ˜¯RPCè°ƒç”¨, å“ªä¸€éƒ¨åˆ†æ˜¯æ¶ˆæ¯ä½“, è¿™äº›è§£æéƒ½è¦é€šè¿‡åè®®å»å®ç°å’Œçº¦æŸ. æ€æ ·å»ä¼ è¾“ä¿¡æ¯, å°±æ¯”å¦‚ONC RPC, RESTFULL HTTP JSON, gRPC ç­‰ç­‰ wiki: è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦ (wikipedia.org) ä»€ä¹ˆæ˜¯gRPC gRPCä¹Ÿæ˜¯RPCçš„ä¸€ç§, æ˜¯googleä½¿ç”¨C++å¼€å‘çš„ä¸€æ¬¾è·¨è¯­è¨€, äºŒè¿›åˆ¶ç¼–ç çš„æ•°æ®åºåˆ—åŒ–åè®®, ä»–æœ‰å‡ ä¸ªæ˜¾è‘—ç‰¹ç‚¹ gRPCä½¿ç”¨ protobuf æ¥è¿›è¡Œæ•°æ®çš„ç¼–ç ä¸å†…å®¹çš„å®šä¹‰, æ•°æ®å‹ç¼©ç‡å¾ˆé«˜, ç›´æ¥æé«˜äº†ä¼ è¾“çš„æ•ˆç‡. gRPCä½¿ç”¨ HTTP2 è¿›è¡Œç½‘ç»œä¼ è¾“ gRPCçš„çˆ¸çˆ¸æ˜¯google, æ‰€ä»¥ä»–æœ‰å¾ˆå¥½çš„ ç¤¾åŒºæ”¯æŒ, ç‰ˆæœ¬è¿­ä»£, ç”Ÿæ€, æ’ä»¶ ç­‰ç­‰ gRPCå®˜ç½‘: gRPC protobuf: protocolbuffers/protobuf: Protocol Buffers - Googleâ€™s data interchange format (github.com) HTTP2æ˜¯ä»€ä¹ˆ HTTP2æ˜¯2015å¹´IESGæ‰¹å‡†çš„æ–°çš„HTTPåè®®, ä½¿ç”¨äº†ç±»ä¼¼SPDYåè®®çš„æ–¹æ¡ˆ. HTTP2çš„ä¼˜ç‚¹(ç›¸æ¯”1.1)æœ‰: çœŸæ­£çš„å¤šè·¯å¤ç”¨: è™½ç„¶1.1ä¸­å°±æœ‰äº†keep_alive, ä½†æ˜¯æœ¬è´¨ä¸Šåªæ˜¯ä¿æŒä¸æ–­TCPé“¾æ¥, è€Œå¹¶å‘æ—¶è¿˜ä¼šç”³è¯·å¤šä¸ªkeep_alive, å¯¼è‡´èµ„æºæŸè€—, è€Œä¸”å½“keep_aliveé“¾æ¥å­˜åœ¨çš„æ•°é‡è¶…è¿‡é™å€¼æ—¶, å…¶ä»–çš„æ–°è¯·æ±‚å°±ä¼šé˜»å¡ç›´åˆ°ç©ºå‡ºä½ç½®, è€Œ2åˆ™æ˜¯çœŸæ­£çš„å¤šè·¯å¤ç”¨, å°†æŒ‡å‘åŒä¸€ä¸ªåŸŸåçš„è¯·æ±‚éƒ½ç”±ä¸€ä¸ªTCPé“¾æ¥å‘é€, é˜²æ­¢èµ„æºæŸè€— HTTP2ä¼ è¾“æ•°æ®ä½¿ç”¨çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®, å› æ­¤å¯ä»¥é€šè¿‡æ•°æ®å°è£…(äºŒè¿›åˆ¶å¸§)æ¥å®ç°å¤šä¸ªè¯·æ±‚é€šè¿‡åŒä¸€ä¸ªé“¾æ¥å‘é€å’Œæ¥æ”¶, ä¹Ÿå°±å®ç°äº†å¤šè·¯å¤ç”¨ HTTP2åè®®ä¸­é’ˆå¯¹æ¯ä¸ªè¯·æ±‚, å¯ä»¥æ”¾ç½®ä¼˜å…ˆå€¼, åŒæ–¹å¯ä»¥é€šè¿‡ä¼˜å…ˆå€¼æ¥å†³å®šä¸åŒçš„å¤„ç†ç­–ç•¥. æœåŠ¡å™¨ä¸»åŠ¨æ¨é€: æœåŠ¡ç«¯å¯ä»¥ä¸»åŠ¨æ¨é€ç»™å®¢æˆ·ç«¯æ•°æ®, è€Œä¸æ˜¯è¢«åŠ¨çš„è¿”å›æ•°æ® æ›´å°çš„æ•°æ®: å› ä¸ºæ˜¯äºŒè¿›åˆ¶æ•°æ®, æ‰€ä»¥ä½¿ç”¨å‹ç¼©ç®—æ³•(HPACK)å¯ä»¥å‡å°‘æ•°æ®çš„å¤§å° wiki: HTTP/2 - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦ (wikipedia.org) ä¸ºä»€ä¹ˆä½¿ç”¨HTTP2 çœ‹è¿‡ä¸Šé¢, å¯èƒ½ä½ çš„è„‘ä¸­å°±æœ‰äº†æ¨¡ç³Šçš„ç­”æ¡ˆ, æˆ‘ä»¬å†ç¿»ç¿»gRPCçš„æœ€æ—©ä¸€ç¯‡åšå®¢gRPC çš„åŠ¨æœºå’Œè®¾è®¡åŸåˆ™ | gRPC, é‡Œé¢è®°å½•äº†gRPCçš„è®¾è®¡åŸåˆ™, å¤§è‡´å¦‚ä¸‹: æœåŠ¡ä¸æ˜¯å¯¹è±¡, æ¶ˆæ¯ä¸æ˜¯å¼•ç”¨: å¾®æœåŠ¡çš„æ¦‚å¿µ è¦†ç›–å¹¿å’Œç®€å•æ€§: gRPCéœ€è¦åœ¨æ¯ä¸ªæµè¡Œçš„å¹³å°ä¸Šå¯ä»¥ä½¿ç”¨, è€Œä¸”è¶³å¤Ÿç®€å•çš„ä½¿ç”¨, æ²¡æœ‰å¾ˆé«˜çš„ç¡¬ä»¶è¦æ±‚ å…è´¹å¼€æ”¾: æ‰€æœ‰äººå…è´¹ä½¿ç”¨åŸºæœ¬çš„åŠŸèƒ½ äº’æ“ä½œæ€§å’ŒèŒƒå›´: å¿…é¡»èƒ½åœ¨å¸¸è§çš„äº’è”ç½‘åŸºç¡€è®¾æ–½ä¸Šè¿è¡Œ é€šç”¨å’Œé«˜æ€§èƒ½: åº”é€‚ç”¨äºå¹¿æ³›çš„ç”¨ä¾‹, åŒæ—¶ä¸ä¼šç‰ºç‰²æ€§èƒ½ åˆ†å±‚: ä»£ç åˆ†å±‚, ç‰ˆæœ¬è¿­ä»£ä¸å½±å“åŸºç¡€ä½¿ç”¨ å¤šç§æ•°æ®ç±»å‹: ä¸åŒçš„æœåŠ¡éœ€è¦ä½¿ç”¨ä¸åŒçš„æ¶ˆæ¯ç±»å‹å’Œç¼–ç ï¼Œå¦‚åè®®ç¼“å†²åŒºã€JSONã€XMLå’ŒThriftï¼›åè®®å’Œå®ç°å¿…é¡»å…è®¸è¿™æ ·åšã€‚åŒæ ·ï¼Œå¯¹æœ‰æ•ˆè½½è·å‹ç¼©çš„éœ€æ±‚ä¹Ÿå› ç”¨ä¾‹å’Œæœ‰æ•ˆè½½è·ç±»å‹è€Œå¼‚ï¼šåè®®åº”å…è®¸å¯æ’æ‹”çš„å‹ç¼©æœºåˆ¶ã€‚ åŒæ­¥å’Œå¼‚æ­¥: åŒæ—¶æ”¯æŒå¼‚æ­¥å’ŒåŒæ­¥å¤„ç†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤æ¢çš„æ¶ˆæ¯åºåˆ—ã€‚è¿™å¯¹äºåœ¨æŸäº›å¹³å°ä¸Šæ‰©å±•å’Œå¤„ç†æµæ˜¯è‡³å…³é‡è¦çš„ã€‚ å–æ¶ˆå’Œè¶…æ—¶: å–æ¶ˆå…è®¸æœåŠ¡å™¨åœ¨å®¢æˆ·è¡Œä¸ºè‰¯å¥½æ—¶å›æ”¶èµ„æºã€‚å½“è·Ÿè¸ªå› æœé“¾æ—¶ï¼Œå–æ¶ˆå¯èƒ½ä¼šçº§è”ã€‚å®¢æˆ·ç«¯å¯èƒ½æŒ‡ç¤ºå‘¼å«è¶…æ—¶ï¼Œè¿™å…è®¸æœåŠ¡æ ¹æ®å®¢æˆ·çš„éœ€æ±‚è°ƒæ•´å…¶è¡Œä¸º. é™æµ: åœ¨å¿…è¦æ—¶å¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œé™æµ ç­‰ç­‰â€¦ æˆ‘ä»¬å‘ç°, HTTP2 ç¬¦åˆ gRPC çš„è¦æ±‚: è¦†ç›–å¹¿: åœ¨æ ‡å‡†æ¨å‡ºå, HTTP2 å°±è¢«ä¸»æµæµè§ˆå™¨å’Œç½‘å…³ç­‰æ”¯æŒ, æœ€å°å¯ç”¨çš„ç¡¬ä»¶æ ‡å‡†ååˆ†çš„ä½, æ‰‹æœºç«¯/ç”µè„‘ç«¯/æœåŠ¡å™¨ç«¯/iotç«¯ å—ç½‘ç»œçš„æ¨åŠ¨, HTTP2å‘å±•æ™®åŠå¾ˆå¿« ç®€å•æ€§: å¤§é‡çš„ç½‘ç»œæ¡†æ¶å’Œç»„ä»¶/ç½‘å…³ç­‰æ”¯æŒç®€å•çš„å¼€å¯HTTP2, å¼€å‘è€…æ— éœ€å…³æ³¨æ›´åº•å±‚çš„socketå¤„ç†, ä¸“å¿ƒä¸šåŠ¡. å…è´¹å¼€æ”¾: æ˜¯å¼€æ”¾çš„æ ‡å‡†, ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨ å¤©ç„¶æ”¯æŒç‰©è”ç½‘/æ‰‹æœº/æµè§ˆå™¨: äº’è”ç½‘æ¨åŠ¨ é«˜æ€§èƒ½: ç›¸æ¯”1.1æœ‰é•¿è¶³çš„è¿›æ­¥ æµæ§: HTTP2ç»´æŒä¸€ä¸ªTCPè¿æ¥, æ‰€ä»¥å¯¹æµæ§åˆ¶æ¯”è¾ƒç®€å• å®‰å…¨æ€§: å¤©ç„¶æ”¯æŒSSL é‰´æƒæˆç†Ÿ: ä»HTTP1å‘å±•å‡ºçš„é‰´æƒç³»ç»Ÿå¾ˆå®Œå–„, å¯ä»¥ä½¿ç”¨åˆ°2ä¸Š å½“ç„¶, ä¸äººæ— å®Œäººä¸€æ ·, HTTP2ä¹Ÿæœ‰å…¶ç¼ºç‚¹: ä¼ è¾“è¿˜ä¸å¤Ÿé«˜æ•ˆ: è™½ç„¶æœ‰HPACK, ä½†æ˜¯å¯¹äºRPCæ¥è®², è¿˜å¯ä»¥æ›´åŠ çš„ç®€å•å¿«é€Ÿ, æ¯”å¦‚å°†æŸä¸ªåŠŸèƒ½æ ‡è®°ä¸ºä¸€ä¸ªintæ•°å­—, å®¢æˆ·ç«¯ç›´æ¥ä¼ å…¥æ•°å­—å³å¯æ ‡è¯†è°ƒç”¨æœåŠ¡ç«¯çš„å“ªä¸ªåŠŸèƒ½ gRPCä½¿ç”¨HTTP2éœ€è¦è§£ç ä¸¤æ¬¡, ä¸€æ¬¡æ˜¯HEADERSä¸€æ¬¡æ˜¯DATA HTTP2æ ‡å‡†æ˜¯æœ¬èº«åªæœ‰ä¸€ä¸ªTCP, ä½†æ˜¯å…¶å®gRPCçš„å®ç°ä¼šæœ‰å¤šä¸ªTCP åœ¨é€Ÿåº¦ä¸Š, æœ‰æ›´åŠ å¿«é€Ÿçš„åè®®, ä½†æ˜¯ç»¼åˆè€ƒè™‘åè¿˜æ˜¯HTTP2æ›´åŠ é€‚åˆ, ç›¸ä¿¡å¾ˆå¤šä¹¦éƒ½ä¼šå¼ºè°ƒä¸€ä¸ªè§‚ç‚¹é€‚åˆçš„æ‰æ˜¯æœ€å¥½çš„ ä¸ºä»€ä¹ˆä¸ä½¿ç”¨websocket websocketçœ‹ä¼¼ä¹Ÿæ˜¯æµå¼ä¼ è¾“, ä¹Ÿå¯ä»¥åšåˆ°ä¸€ä¸ªwebsocketä¼ è¾“æ‰€æœ‰ä¿¡æ¯, ä¸ºä»€ä¹ˆä¸é€‰æ‹©websocket? stackOverflowæœ‰ä¸€ä¸ªæé—®ç±»ä¼¼: http2 - Does HTTP/2 make websockets obsolete? - Stack Overflow å…¶å®è¿˜æ˜¯é€‚ä¸é€‚åˆçš„é—®é¢˜, websocketå’ŒHTTP2æ˜¯æœ‰æ‰€ä¸åŒçš„, HTTP2çš„æ¨å‡ºä¹Ÿä¸æ˜¯ä¸ºäº†æ›¿ä»£æˆ–è€…è¶…è¶Šwebsocket, ä»–ä»¬æ˜¯ä¸åŒçš„ä½œç”¨é¢†åŸŸ, ç›¸æ¯”äºwebsocket, HTTP2åœ¨é€šç”¨æ€§ä¸Šæ›´åŠ é€‚åˆgRPC Will WebSocket survive HTTP/2? (infoq.com) é€‚åˆçš„æ‰æ˜¯æœ€å¥½çš„","link":"/2021/09/05/grpc_use_http2/"},{"title":"è‡ªå‘ä¸è¶…è¶Š (1)","text":"ä¹¦ç±ä¿¡æ¯ ä¹¦å: è‡ªå‘ä¸è¶…è¶Š ä½œè€…: é˜¿å°”å¼—é›·å¾·.é˜¿å¾·å‹’ å‡ºç‰ˆ: ä¸­å›½å¦‡å¥³å‡ºç‰ˆç¤¾ ä½œè€…ç”Ÿå¹³ ä½œè€…çœŸçš„æ˜¯å¾ˆä¼ å¥‡çš„äººç‰©, ä½ ä¹Ÿå¯ä»¥è‡ªè¡Œç™¾åº¦, è¿™é‡Œç®€è¿°ä¸€ä¸‹ ä½œè€… é˜¿å°”å¼—é›·å¾·.é˜¿å¾·å‹’ æ˜¯å¥¥åœ°åˆ©äºº, å‡ºç”Ÿäºå•†äººå®¶åº­, ç”Ÿæ´»å¯Œè£•, å®¶äººçˆ±å¥½å¹¿æ³›, ä½†æ˜¯ä½œè€…çš„å“¥å“¥å¾ˆä¼˜ç§€, æ´»æ³¼å¥½åŠ¨, æƒ¹äººç–¼çˆ±. è®©ä½œè€…æ„Ÿåˆ°è‡ªå‘, è®¤ä¸ºè‡ªå·±åˆçŸ®åˆä¸‘. ä½†æ˜¯ä»–å‹å–„åˆéšå’Œ, ä»–çš„çˆ¶äº²å® çˆ±é˜¿å¾·å‹’, å¸¸å¸¸é¼“åŠ±ä»– é˜¿å¾·å‹’, ä½ ä¸èƒ½å®³æ€•ä»»ä½•äº‹æƒ…, é¼“åŠ±é˜¿å¾·å‹’. é˜¿å¾·å‹’ä»å°æ‚£æœ‰è„ŠæŸ±ç‚, å¯¼è‡´èº«ä½“è™šå¼±, è¡ŒåŠ¨ç¼“æ…¢, åœ¨ä»–ä¸‰å²æ—¶ä»–çš„å¼Ÿå¼Ÿåœ¨ä»–èº«è¾¹å»ä¸–, ä»–å°æ—¶å€™è¢«è½¦æ’è¿‡ä¸¤æ¬¡, å¯¼è‡´å¥¹å¯¹æ­»äº¡ç‰¹åˆ«ææƒ§, 5å²æ—¶åˆå¾—äº†è‚ºç‚, åœ¨ç—Šæ„ˆå, ä»–å†³å®šå½“ä¸€ååŒ»ç”Ÿæ¥å¸®åŠ©ä»–äºº. ä»–çš„å¦»å­æ˜¯ä¸€ä½ä¿„å›½äºº, æ¯”è¾ƒç‹¬ç«‹, è€Œé˜¿å¾·å‹’ç›¸å¯¹ä¿å®ˆ, æ‰€ä»¥ä¸¤äººç”Ÿæ´»å¹¶ä¸å’Œè°, ä½†æ˜¯è¿˜æ˜¯èµ°åˆ°äº†æœ€å å› ä¸ºé˜¿å¾·å‹’å¾…äººå‹å–„, ä¸æ‹˜å°èŠ‚, æ‰€ä»¥æœ‹å‹å¾ˆå¤š, æ‰€ä»¥è®¤è¯†äº†å¼—æ´›ä¼Šå¾·, æ˜¯å¦ä¸€ä½å¿ƒç†å­¦å®¶, ä»æ­¤è¿›å…¥äº†å¿ƒç†å­¦ é˜¿å¾·å‹’çš„è§‚ç‚¹æ˜¯, ç”±èº«ä½“ç¼ºé™·æˆ–è€…å…¶ä»–åŸå› å¯¼è‡´çš„è‡ªå‘, ä¸ä»…å¯ä»¥æ‘§æ¯ä¸€ä¸ªäºº, è¿˜èƒ½è®©å…¶è‡ªç”˜å •è½æˆ–å¼•å‘ç–¾ç—…. ä½†æ˜¯åˆç†çš„çœ‹å¾…, å°±å¯ä»¥è®©è‡ªå·±å¥‹å‘å›¾å¼º, ç§¯æè¿›å–, å¼¥è¡¥ç¼ºç‚¹, èµ°å‘æˆåŠŸ åŒæ—¶, ä»–è®¤ä¸ºäººç±»éƒ½æœ‰ä¸€ç§å¼ºçƒˆçš„æ„¿æœ›, å¸Œæœ›è‡ªå·±å˜å¾—å¼ºå¤§ è¿˜è®¤ä¸ºå„¿ç«¥å¤©ç”Ÿå…·æœ‰è‡ªå‘æ„Ÿ, å› ä¸ºä»–ä»¬èº«ä½“å¼±å°, å½“å„¿ç«¥åˆ©ç”¨è‡ªå‘æ„Ÿé€ƒé¿ç”Ÿæ´»æ—¶, å°±ä¼šå‡ºç°ç¥ç»é—®é¢˜. è‡ªå‘ä¸æ˜¯å¿ƒç†å˜æ€, è€Œæ˜¯åœ¨è¿½æ±‚ä¼˜è¶Šæ—¶çš„æ­£å¸¸è¡¨ç°. é˜¿å¾·å‹’åˆ›å»ºäº†ä¸ªä½“å¿ƒç†å­¦, è®¤ä¸ºäººç±»çš„è¡Œä¸ºéƒ½æ˜¯å‡ºäºè‡ªå‘æ„Ÿä»¥åŠå¯¹è‡ªå‘çš„å…‹æœå’Œè¶…è¶Š ç¬¬ä¸€ç« : ç”Ÿæ´»çš„æ„ä¹‰ ç°å®ç”Ÿæ´»æ˜¯å…·æœ‰æ„ä¹‰çš„, äººåœ¨ç”Ÿæ´»ä¸­, å¹¶ä¸æ˜¯å•çº¯çš„ä½“éªŒç¯å¢ƒ, è€Œæ˜¯ä»¥ä»–ä»¬å¯¹äººç±»çš„æ„ä¹‰å»è¯„åˆ¤äº‹ç‰© å¦‚æœæœ‰äººæ’é™¤äº‹ç‰©çš„æ„ä¹‰è€Œåªå»å…³æ³¨ç¯å¢ƒ, å°±ä¼šå­¤ç«‹è‡ªå·±, è„±ç¦»äººç±». äººç±»çš„å­˜åœ¨æ— æ³•è„±ç¦»ç”Ÿæ´»çš„ç°å®, è‡ªæˆ‘å°é—­æ¯«æ— æ„ä¹‰ å½“äººé‡åˆ°æŒ«æŠ˜æ—¶, æ€»æ˜¯ä¼šé—®: äººçš„æ„ä¹‰æ˜¯ä»€ä¹ˆ? æ´»ç€æ˜¯ä¸ºäº†ä»€ä¹ˆ? , å¯¹äºè¿™ç§é—®é¢˜, å…¶å®æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ç†è§£å’Œç­”æ¡ˆ, è¿™ä¸ªç­”æ¡ˆä¸éœ€è¦å£è¿°, ä»è¿™ä¸ªäººçš„è¨€è¡Œä¸¾æ­¢å°±å¯ä»¥çœ‹å‡ºæ¥. ä½ çš„æ€§æ ¼å†³å®šäº†ä½ çš„æ€åº¦å’Œç”Ÿæ´»çš„è§‚ç‚¹, è€Œæ€§æ ¼æ˜¯è‡ªå·±å…»æˆçš„, æ˜¯è‡ªå·±å¯¹äº‹ç‰©çš„ç†è§£. æ‰€ä»¥, å¯¹äººç”Ÿæ„ä¹‰çš„ç†è§£å¤šå°‘ä¼šåŒ…å«è°¬è¯¯, ä½†æ˜¯æ¯ä¸ªäººçš„ç†è§£éƒ½ä¸ä¸€æ ·, æ²¡æœ‰äººæ˜¯çœŸç†, å› æ­¤ä¸èƒ½è¯´è°è°çš„ç†è§£æ˜¯ç»å¯¹é”™è¯¯çš„, å› ä¸ºå¯¹ä¸ªäººè€Œè¨€éƒ½æ˜¯ç›¸å¯¹æ­£ç¡®çš„, ä½†æ˜¯è¦æ³¨æ„, åªè¦åšæŒæ™®éçš„æ ‡å‡†, é‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å¾—åˆ°ç§‘å­¦çš„ç†è§£, å¾—åˆ°ç›¸å¯¹äºäººç±»è€Œè¨€æ­£ç¡®çš„æ„ä¹‰. äººç”Ÿæ€»è¦é¢å¯¹çš„ä¸‰ä¸ªå¤§çš„é—®é¢˜, æ‰€æœ‰é—®é¢˜éƒ½ç»•ä¸å¼€è¿™ä¸‰ä¸ªç»ˆæé—®é¢˜ äººç±»çš„æ´»åŠ¨èŒƒå›´æ˜¯æœ‰é™çš„, ç°é˜¶æ®µäººåªèƒ½ç”Ÿæ´»åœ¨åœ°çƒè¡¨é¢, ç”Ÿæ´»èŒƒå›´æ˜¯æœ‰é™çš„, åŒæ—¶åˆå¿ƒå­˜å¸Œæœ›, äººå¿…é¡»å‘å±•æ‰èƒ½ç”Ÿå­˜ä¸‹å», æ‰èƒ½å»¶ç»­. è¿™æ˜¯æ¯ä¸ªäººé€ƒä¸å¼€çš„é—®é¢˜, æ¯ä¸ªäººéƒ½æ˜¯äººç±»è¿™ä¸ªç¾¤ä½“çš„ä¸€ä»½å­, äººç±»å…¶å®å¾ˆè„†å¼±, æ‰€ä»¥ä¸ºäº†ç”Ÿå­˜, äººä¼šå»åŠªåŠ›å¼ºåŒ–è‡ªèº« æ¯ä¸ªäººéƒ½æ˜¯æ— æ³•ç‹¬ç«‹ç”Ÿå­˜çš„, äººç±»æ˜¯ä¸€ä¸ªæ•´ä½“, ä¸€ä¸ªäººæ— æ³•å­˜æ´», åªèƒ½èµ°å‘ç­äº¡, å•ç‹¬äººæ— æ³•å®Œæˆç›®æ ‡, ä¹Ÿæ— æ³•å»¶ç»­ç”Ÿå‘½, å› æ­¤äººæ€»æ˜¯éœ€è¦åˆä½œ, æˆ‘ä»¬å’Œä»–äººæ˜¯äº’ç›¸è”ç³»çš„, ä¸ºäº†ç”Ÿå­˜, æˆ‘ä»¬å¿…é¡»åˆä½œ, æ‰€ä»¥æˆ‘ä»¬éœ€è¦è®©è‡ªå·±çš„æ„Ÿæƒ…ä¸ä¸ä»–äººåˆä½œç›¸é€‚åº” äººç±»æœ‰ç”·æœ‰å¥³, è¿™æ˜¯äººç±»å»¶ç»­å¿…é¡»é¢å¯¹çš„é—®é¢˜, æ— è®ºæ˜¯è°, æ— è®ºç”·å¥³, ä¸€ç”Ÿä¸­éƒ½æ— æ³•ç»•å¼€çˆ±å’Œå©šå§»è¿™ä¸ªé—®é¢˜, è€Œæ¯ä¸ªäººåœ¨é¢å¯¹è¿™äº›é—®é¢˜æ—¶çš„é€‰æ‹©ä¸åŒ, ä»–ä»¬çš„é€‰æ‹©å°±æ˜¯å¯¹è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆ. ä»–ä»¬çš„è¡ŒåŠ¨å°±æ˜¯ä»–ä»¬è®¤ä¸ºçš„æœ€ä½³çš„è§£å†³æ–¹æ³• è¿™ä¸‰ä¸ªé—®é¢˜å¼•ç”³å‡ºä¸‰ä¸ªé—®é¢˜: æ€æ ·åœ¨åœ°çƒè‡ªç„¶ç¯å¢ƒçš„é™åˆ¶ä¸‹ç”Ÿå­˜ åœ¨äººæµ·ä¸­, å¦‚ä½•ç»™è‡ªå·±å®šä½, ç›¸äº’ååŠ©, å‘å±•å…±èµ¢ å¦‚ä½•è¿›è¡Œè‡ªæˆ‘è°ƒèŠ‚, é€‚åº”ä¸¤ç§æ€§åˆ«å’Œäººç±»çš„å»¶ç»­ä¾èµ–äºä¸¤æ€§å…³ç³»çš„äº‹å® ä¸ªä½“å¿ƒç†å­¦å°†äººçš„æ‰€æœ‰é—®é¢˜å½’ä¸ºä¸‰å¤§ç±»: èŒä¸š, äº¤é™…, ä¸¤æ€§ æ¯ä¸ªäººå¯¹è¿™ä¸‰ä¸ªé—®é¢˜çš„ä¸åŒå›ç­”ç²¾å‡†çš„æ­ç¤ºäº†æ¯ä¸ªäººå¯¹ç”Ÿæ´»æ„ä¹‰çš„ç†è§£. æ¯”å¦‚è¯´æœ‰ä¸€ä¸ªäºº, ä»–ç¼ºä¹çˆ±æƒ…, åœ¨å·¥ä½œä¸­ä¸ç§¯æ, ä¸å–œæ¬¢äº¤æœ‹å‹, è®¤ä¸ºäººé™…äº¤å¾€æ˜¯ä»¤äººç—›è‹¦çš„, è¿™æ ·ä¼šæˆ‘ä»¬ä¼šè®¤ä¸ºä»–æˆåŠŸçš„å‡ ç‡ä¸é«˜, ä»–è®¤ä¸º: ç”Ÿå‘½çš„æ„ä¹‰å°±æ˜¯è®©è‡ªå·±å…å—ä¼¤å®³, æŠŠè‡ªå·±å°é—­æ¥ä¿è¯è‡ªå·±çš„å®‰å…¨ å¦ä¸€ä¸ªäºº, çˆ±æƒ…ç¾æ»¡, äº¤é™…å¹¿æ³›, æœ‹å‹å¤š, å–„äºåä½œ, å·¥ä½œæœ‰æˆ, é‚£ä¹ˆè¿™ä¸ªäººå°±æ˜¯å–„äºæˆåŠŸçš„, ä»–è®¤ä¸ºå£°æ˜çš„æ„ä¹‰å°±æ˜¯æ‡‚å¾—å‘ç°åˆ«äººçš„ä»·å€¼, è®©è‡ªå·±å‘å…‰å‘çƒ­, ä¸ºç¤¾ä¼šåšè´¡çŒ® å¯¹äººç”Ÿçš„æ„ä¹‰çš„ç†è§£, æ— è®ºæ˜¯æ­£ç¡®è¿˜æ˜¯é”™è¯¯, éƒ½æœ‰ä¸€å®šçš„å…±åŒæ€§: ç²¾ç¥ç—…,ç½ªçŠ¯,é…—é…’è€…,é—®é¢˜å°‘å¹´ç­‰å¤±è´¥è€…, ä¹‹æ‰€ä»¥å¤±è´¥, æ˜¯å› ä¸ºç¼ºå°‘å‹æƒ…, å¯¹ç¤¾ä¼šå†·æ¼ , åœ¨å¤„ç†é—®é¢˜æ—¶, å¯¹åˆä½œç¼ºä¹ä¿¡å¿ƒ, ä¸å¯»æ±‚ä»–äººçš„å¸®åŠ©, è®¤ä¸ºäººç”Ÿæ˜¯ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒ, ä»–äººæ— æ³•åˆ†äº«è‡ªå·±çš„æˆåŠŸ, è¿™ç§å¿ƒæ€, å°±ç®—å–å¾—äº†è‡ªæˆ‘è®¤ä¸ºçš„æˆåŠŸ, å®é™…ä¸Šä¹Ÿåªæ˜¯è™šæ— çš„ä¼˜è¶Šæ„Ÿ, è¿™ç§æˆåŠŸåªæœ‰å¯¹è‡ªå·±æ‰æ˜¯æœ‰æ„ä¹‰çš„, å¯¹ä»–äººå®Œå…¨æ²¡æœ‰æ„ä¹‰. è‡ªæˆ‘æ„ä¹‰æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„, çœŸæ­£çš„æ„ä¹‰æ˜¯ä¸äººäº¤å¾€ä¸­ä½“ç°å‡ºæ¥çš„, åŒæ ·çš„, æˆ‘ä»¬çš„ç›®çš„å’Œè¡Œä¸ºä¹Ÿæ˜¯è¿™æ ·. æˆ‘ä»¬æ¯ä¸ªäººéƒ½ä¸ºæˆåŠŸè€Œå¥‹æ–—, ä½†æ˜¯å¦‚æœä¸æ˜ç™½æˆåŠŸæ˜¯å»ºç«‹åœ¨ä¸ºä»–äººåšè´¡çŒ®çš„åŸºç¡€ä¸Š, é‚£ä¹ˆå°±ä¼šå‡ºç°é”™è¯¯, è€Œä¸”, è‡ªæˆ‘æ„ä¹‰æ˜¯æ— æ³•å¾—åˆ°åˆ«äººçš„è®¤åŒçš„, ä¹Ÿå°±æ˜¯ç¦ä¸èµ·å®è·µçš„æ£€éªŒ çœŸæ­£çš„äººç”Ÿæ„ä¹‰æ˜¯å…·æœ‰æ™®éæ€§çš„, å°±æ˜¯å¯ä»¥ä¸ä»–äººå…±äº«, å¹¶ä¸”å¤§å¤šæ•°äººå¯ä»¥æ¥å—. æˆ‘ä»¬å¯ä»¥å‘ç°, åœ¨ç”Ÿæ´»ä¸­, å¯¹äºæŸä¸ªé—®é¢˜å¥½çš„è§£å†³æ–¹æ³•åŒæ ·é€‚ç”¨äºä»–äºº, å½“æˆ‘ä»¬å°†æŸä¸ªäººç§°ä¸º å¤©æ‰/ä¼Ÿäººçš„æ—¶å€™, å¿…å®šæ˜¯è¿™ä¸ªäººå¯¹ç¤¾ä¼šæœ‰è´¡çŒ®, å¯¹ç¤¾ä¼šæœ‰ç›Š. æ‰€ä»¥, äººç”Ÿçš„æ„ä¹‰æ˜¯ å¯¹æ•´ä½“ä½œå‡ºè´¡çŒ®. ä»–ä»¬éƒ½æ˜¯ççˆ±ä»–äººå¹¶ä¸”å–„äºåˆä½œçš„äºº, å³ä½¿é‡åˆ°å›°éš¾ä¹Ÿä¸ä¼šæŸå®³ä»–äººçš„åˆ©ç›Š å¯èƒ½æœ‰äººä¼šé—®, å¦‚æœäººç”Ÿçš„æ„ä¹‰åœ¨äºè´¡çŒ®,å…³çˆ±å’Œåˆä½œ, å¦‚æœæˆ‘æ€»æ˜¯ä»¥åˆ«äººåˆ©ç›Šä¸ºé‡, é‚£æˆ‘è‡ªå·±å‘¢? æˆ‘è‡ªå·±çš„åˆ©ç›Šè°æ¥ä¿è¯å‘¢? è°æ¥å›æŠ¥æˆ‘å‘¢? è¿™æ ·çš„è§‚ç‚¹æ˜¯é”™è¯¯çš„, å› ä¸ºåªæœ‰ä¸ºåˆ«äººè€ƒè™‘, ä¸ºåˆ«äººåšè´¡çŒ®, æ‰ä¼šä½“ç°å‡ºè‡ªå·±çš„ä»·å€¼, åŒæ—¶ä¼šæé«˜è‡ªå·±çš„èƒ½åŠ›. å› ä¸ºè‹¥è¦å®ç°ç›®æ ‡, å¿…å®šä¼šæå‡è‡ªå·±, è¿›è¡Œå®è·µ. ä¸¾ä¸ªä¾‹å­, åœ¨çˆ±æƒ…å’Œå©šå§»ä¸­, å¦‚æœæˆ‘ä»¬æƒ³è¦è®©å¯¹æ–¹æ„Ÿå—åˆ°è¾›ç¦å’Œå¿«ä¹, è‚¯å®šä¼šæå‡è‡ªå·±, è®©è‡ªå·±å˜å¾—æ›´å¥½, åŒæ—¶å°Šé‡å¯¹æ–¹, ä¸ºå¯¹æ–¹å¥‰çŒ®. å¦‚æœè‡ªæˆ‘ç‹¬ç«‹, åªä¼šè®©è‡ªå·±å˜å¾—ç››æ°”å‡Œäºº, ä»¤äººç”ŸåŒ. å†è¿›ä¸€æ­¥, æˆ‘ä»¬è¿˜ä¼šå‘ç°, äººç”Ÿçš„çœŸè°›åœ¨äºå¥‰çŒ®, æˆ‘ä»¬å¯ä»¥å‘ç°, æ‰€è°“çš„é—äº§, å°±æ˜¯å‰äººç•™ä¸‹çš„ä¸œè¥¿, å…¶ä¸­è¢«ç§°èµçš„é—äº§, å¿…å®šæ˜¯å¯¹ä»–äººæœ‰å¥½å¤„çš„, è¿™äº›å‰äººå°±æ˜¯åœ¨å¥‰çŒ®. ä»–ä»¬éƒ½é¢†æ‚Ÿåˆ°äº†äººç”Ÿæ„ä¹‰, åä¹‹, æœ‰äº›äººé€å»æ—¶ä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹, è¿™ç§åœ¨å†å²ä¸Šæ²¡æœ‰ä¸æ¯«ç—•è¿¹, å°±åƒé£ä¸€æ ·é€å»äº†. ä½†å‡¡è¢«å¤§ä¼—è®¤å¯çš„å®—æ•™, æ— ä¸€ä¾‹å¤–ä¹Ÿæ˜¯æ¨å´‡ä¸ºäººç±»åšè´¡çŒ®çš„, éƒ½æ¨å´‡æ™®æ¸¡ä¼—ç”Ÿçš„æ€æƒ³. åœ¨äººä¸€å‡ºç”Ÿçš„æ—¶å€™å°±å¼€å§‹äº†å¯¹äººç±»æ„ä¹‰çš„æ¢ç´¢. åœ¨å°æ—¶å€™, äººå¯¹ç¤¾ä¼šæ²¡æœ‰ç»éªŒ, ä¸çŸ¥é“äººç”Ÿæ„ä¹‰. ä½†æ˜¯éœ€è¦çŸ¥é“çš„æ˜¯, åœ¨åˆ°æˆ‘ä»¬5å²çš„æ—¶å€™, å…¶å®æˆ‘ä»¬çš„è¡Œä¸ºæ¨¡å¼å·²ç»å…»æˆäº†, è¿™æ ·ä¼šå¯¼è‡´æˆ‘ä»¬å·²ç»æœ‰äº†è‡ªå·±çš„æ–¹å¼å»äº†è§£äººç”Ÿæ„ä¹‰, è¿™æ ·å°±å¯èƒ½å‡ºç°ä¸€ä¸ªé—®é¢˜, å¦‚æœæˆ‘ä»¬å·²ç»å…»æˆäº†é”™è¯¯çš„ä¹ æƒ¯, å°±ä¼šå¯¼è‡´æˆ‘ä»¬å¯èƒ½ä¼šé€šè¿‡é”™è¯¯çš„æ–¹æ³•å¾—åˆ°é”™è¯¯çš„äººç”Ÿæ„ä¹‰. ä½†æ˜¯è¿™å¹¶ä¸ä»£è¡¨å·²ç»æ— è¯å¯æ•‘, åªæ˜¯è¯´å¦‚æœå·²ç»å¾—å‡ºäº†é”™è¯¯çš„äººç”Ÿæ„ä¹‰, å³ä½¿ä»–ä»¬å› æ­¤é­å—äº†ä¸å¹¸å’Œç—›è‹¦, ä¹Ÿå¾ˆéš¾å»æ”¹å˜, ä½†æ˜¯å¦‚æœä½ é‡æ–°æ€è€ƒ, å¹¶å¯¹è‡ªå·±çš„è®¤çŸ¥åŠ ä»¥ä¿®æ­£, å°±ä¼šæ”¹å˜ç°çŠ¶. æ¢å¯»åˆ°çœŸæ­£çš„äººç”Ÿæ„ä¹‰, è®©è‡ªå·±èµ°çš„æ›´è¿œ. æœ‰äººçš„ç«¥å¹´æ˜¯ä¸å¿«ä¹çš„, ç—›è‹¦çš„, ä½†æ˜¯ä¼šå‡ºç°ä¸¤ç§ç»“æœ, ä¸€ç§æ˜¯åƒæ–¹ç™¾è®¡çš„æ‘†è„±å›°å¢ƒ. åœ¨ä»–çš„å¿ƒä¸­, ä¼šæœ‰è¿™æ ·çš„æƒ³æ³•: â€œæˆ‘ä¸€å®šè¦åŠªåŠ›åŠ æ²¹, æ”¹å–„è‡ªå·±, è®©æˆ‘çš„å­©å­ä¸åƒæˆ‘ä¸€æ ·â€ åä¹‹åˆ™ä¼šè‡ªç”˜å •è½. â€œè€å¤©çˆ·å¯¹æˆ‘çœŸæ®‹å¿, æ‰€ä»¥æˆ‘ä¸ºä»€ä¹ˆè¦å¯¹åˆ«äººå¥½å‘¢?â€ è¿˜æœ‰ä¸€ç§åˆ™æ˜¯èµ°å‘æç«¯, â€œæˆ‘ç«¥å¹´å°±è¿™ä¸ªæ ·, æ‰€ä»¥æˆ‘è§ä¸å¾—åˆ«äººå¥½, æˆ‘åƒçš„è‹¦å¾ˆå¤š, æ‰€ä»¥æˆ‘åšä»€ä¹ˆéƒ½æ˜¯æƒ…æœ‰å¯åŸçš„â€ ç”±æ­¤å¯è§, å¯¹äººç”Ÿæ„ä¹‰çš„ç†è§£æ˜¯ä¸ä¸ªäººçš„è¡Œä¸ºç»‘å®šçš„, å¦‚æœä¸æ”¹å˜æ€æƒ³, è¡Œä¸ºæ˜¯ä¸ä¼šæ”¹å˜çš„. æ¯ä¸ªäººçš„ç»å†å¹¶ä¸èƒ½å†³å®šäººç”Ÿçš„æˆè´¥, ä½†æ˜¯ä¼šå¯¹å…¶å‘½è¿é€ æˆå½±å“. ç¯å¢ƒå¹¶ä¸èƒ½å†³å®šæˆ‘ä»¬å¯¹äººç”Ÿçš„ç†è§£, å•èº«æˆ‘ä»¬å¯ä»¥é€šè¿‡è§£è¯»äººç”Ÿå¢ƒé‡æ¥æ”¹å˜è‡ªå·± æˆå¹´äººä¸­çš„å¤±è´¥è€…, å¾ˆå¤§éƒ¨åˆ†æ˜¯å› ä¸ºå°æ—¶å€™å°±æ²¡æœ‰å¯¹äººç”Ÿæ„ä¹‰æœ‰æ­£ç¡®çš„ç†è§£, å¹¶ä¸”ä¸€ç›´å—å…¶å½±å“, ä»–ä»¬æ— æ³•æ„è¯†åˆ°äººç”Ÿçš„æ„ä¹‰å°±æ˜¯ä¸ºç¤¾ä¼šåšè´¡çŒ®, é™¤éæœ‰äººå¼•å¯¼, å¦åˆ™ä¼šä¸€ç›´çš„ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒ. è¿™æœ¬æ¥ä¼šå¯¼è‡´å˜å¾—è‡ªå‚², ç„¶è€Œå› ä¸ºå°å­©å­æ²¡æœ‰å®‰å…¨æ„Ÿ, åè€Œä¼šå˜å¾—è‡ªå‘, å› ä¸ºè¢«æ’æŒ¤å˜å¾—å†…å‘, è®¤ä¸ºè‡ªå·±ä¸ä¼šå¯¹ç¤¾ä¼šé€ æˆä»»ä½•è´¡çŒ®. è€Œå¯¹äºèº«ä½“ä¸å¥åº·çš„å­©å­ä¹Ÿæ˜¯è¿™æ ·, ä½†æ˜¯æˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿçœ‹åˆ°, é‚£äº›æœ‰å›°éš¾çš„å­©å­åœ¨å…‹æœå›°éš¾çš„åŒäº‹, ä¹Ÿä¼šæ¿€å‘è‡ªå·±å·¨å¤§çš„æ½œèƒ½ æœ‰ä¸å°‘æ°å‡ºäººæ‰èº«ä½“ä¸Šæœ‰ç¼ºé™·, ç”šè‡³å› æ­¤è‹±å¹´æ—©é€, ä½†æ˜¯ä»–ä»¬ç•™ä¸‹çš„è´¡çŒ®æ˜¯å·¨å¤§çš„, ä½†æ˜¯è¿™æ€»å½’æ˜¯å°‘æ•°, æ›´å¤šçš„ç¼ºé™·è€…å› ä¸ºæ²¡æœ‰æ­£ç¡®çš„å¼•å¯¼, å˜å¾—è¶Šæ¥è¶Šè‡ªå‘, æŠµè§¦ä¸å¤–ç•Œæ¥è§¦. ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒ, è¿™ä¹Ÿè®©æˆ‘ä»¬æ˜ç™½, ä»–ä»¬å› ä¸ºè¿‡åº¦çš„å…³æ³¨è‡ªå·±çš„ç¼ºé™·, è®©è‡ªå·±äº§ç”Ÿäº†æ— å½¢çš„å‹åŠ›. åŒæ—¶å®¶é•¿å¯¹å­©å­çš„æººçˆ±ä¹Ÿä¼šå¯¼è‡´äººç”Ÿæ„ä¹‰çš„æ›²è§£, ä»–ä»¬ä¼šè®¤ä¸ºä»–ä»¬çš„æ„¿æœ›å°±æ˜¯æ³•å¾‹, å› ä¸ºä»–ä»¬æ€»èƒ½è¢«æ»¡è¶³, è€Œä¸éœ€è¦è‡ªå·±ä»˜å‡º. ä½†æ˜¯å½“ä»–é•¿å¤§å, å‘ç°ä»–ä¸å†æ˜¯äººç¾¤ä¸­çš„ç„¦ç‚¹, ä¾¿ä¼šä¸çŸ¥æ‰€æª, è§‰å¾—åˆ«äººå¯¹ä»–æœ‰æ‰€äºæ¬ , åŒæ—¶, ä¹‹å‰ä¹ æƒ¯äº†ç´¢å–è€Œä¸ä»˜å‡º, å¯¼è‡´æ²¡æœ‰è‡ªç«‹çš„èƒ½åŠ›, ä¸çŸ¥é“è‡ªå·±èƒ½åšè¯¥åšä»€ä¹ˆ. ä¸æ‡‚çš„ä¸äººç›¸å¤„, å¯»æ±‚åˆä½œ. è€Œæ˜¯åœ¨é‡åˆ°å›°éš¾çš„æ—¶å€™ç›´æ¥æ±‚åŠ©åˆ«äºº. è¢«è¿‡åˆ†çš„å® çˆ±çš„å°å­©å­å¾ˆå¯èƒ½ä¼šåœ¨é•¿å¤§åå˜æˆå±é™©äººç¾¤, å¦‚æœè®©ä»–ä»¬ä¸åˆ«äººåˆä½œ, ä»–ä¼šè§‰å¾—ä¸æ»¡, ç”šè‡³ä¼šæ¶æ„çš„æ£æ¯è¿™ä»¶äº‹æƒ…, å¦‚æœä»–ä»¬å¾—ä¸åˆ°åˆ«äººçš„å‘µæŠ¤å’Œå…³å¿ƒ, ä¾¿ä¼šè®¤ä¸ºä»–äººåœ¨èƒŒåä½¿å. å¯¼è‡´ä¸å¾ˆå¤šäººä¸ºæ•Œ, å¦‚æœåˆ«äººä¸èµåŒä»–çš„è¡Œä¸ºæ–¹å¼, ä¾¿è®¤ä¸ºè¿™æ˜¯æ¬ºè¾±, è¿™æ ·ä¼šå¯¼è‡´ä¸å‘¨å›´äººéƒ½æ˜¯æ•Œå¯¹çš„. å—äººå†·è½çš„å„¿ç«¥åŒæ ·ä¼šå‡ºç°é—®é¢˜, å› ä¸ºä»–ä»¬ä¸ä¼šä¸åˆ«äººåˆä½œ, ä¸æ‡‚å¾—å…³å¿ƒ, å½“ä»–ä»¬é‡åˆ°å›°éš¾, å°±ä¼šä¸æ„¿æ„æ±‚åŠ©ä»–äºº, å¯¼è‡´å¤±è´¥, åŒæ—¶åœ¨çœ‹åˆ°ç¤¾ä¼šå†·æ¼ çš„ä¸€é¢æ—¶, å°±ä¼šè®¤ä¸ºç¤¾ä¼šä¸€è´¯å¦‚æ­¤, ä»–ä»¬ä¼šæ€€ç–‘åˆ«äºº, åŒæ—¶æ— æ³•ç›¸ä¿¡è‡ªå·± åœ¨å°å­©å­å‡ºç”Ÿå, æ¯äº²çš„æœ€åˆä»»åŠ¡å°±æ˜¯è®©å­©å­ä¸€å‡ºç”Ÿå°±æ„Ÿè§‰åˆ°å¯¹è‡ªå·±çš„ä¾èµ–, ç„¶åå¸®åŠ©å­©å­æ…¢æ…¢çš„å°†è¿™ç§ä¾èµ–çš„èŒƒå›´æ‰©å¤§, ç›´åˆ°å‘¨å›´çš„ç¯å¢ƒ, å¦‚æœä¸è¿™æ ·, ä¸è®©å­©å­å¯¹å‘¨å›´ä¸€åˆ‡æ„Ÿåˆ°å…´è¶£, å¾ˆå¯èƒ½å°±ä¼šè®©å­©å­å¯¹ç¤¾ä¼šä¸æ„Ÿå…´è¶£, ä¸å–„äºåˆä½œ. æˆ‘ä»¬å‘ç°, å¯¹äºä¸å—é‡è§†, æ€»æ˜¯å­¤ç‹¬çš„å­©å­, é€šå¸¸ç¼ºä¹å¯¹äººçš„ä¾èµ–æ„Ÿ, ä¹Ÿä¸ä¼šä¸äººåˆä½œ, å¯¼è‡´å¤±è´¥. ä¸Šé¢çš„è¯´æ˜, è¯æ˜äº†, å¯¹äºå­©å­æ¥è®², è¿‡äºè¢«æººçˆ±, èº«ä½“æ®‹ç¼º, è¢«å¿½è§†, éƒ½ä¼šå¯¼è‡´å¿ƒç†å‡ºç°é—®é¢˜. äººåœ¨ç¡æ¢¦ä¸­å‹åŠ›å¾ˆå°, æ‰€ä»¥åœ¨æ¢¦ä¸­æ€§æ ¼ä¼šæ¯«ä¸çŠ¹è±«çš„è¡¨ç°å‡ºæ¥, å­¦ä¼šè§£ææ¢¦å¢ƒå¾ˆé‡è¦, å› ä¸ºæ¢¦ä¸­çš„äº‹æƒ…æ€»æ˜¯æœ€çœŸå®çš„ä½ æ‰€åšçš„äº‹æƒ…, æ¢¦å…¶å®æ˜¯åœ¨å‘Šè¯‰ä½ , çœ‹, è¿™å°±æ˜¯ä½ å¾—åˆ°çš„ç»“æœ å„¿ç«¥æ—©æœŸçš„è®°å¿†å¯¹æˆ‘ä»¬çš„ç”Ÿæ´»æœ‰ç›´æ¥çš„å½±å“, å› ä¸ºè¿™æ˜¯æˆ‘ä»¬å¯¹è‡ªå·±å’Œå‘¨å›´ç¯å¢ƒçš„æœ€åˆå°è±¡. ä¹Ÿæ˜¯æˆ‘ä»¬ä¸»è§‚å°è±¡çš„å¼€å§‹. å¯¹äººç”Ÿè§‚çš„å»ºç«‹æœ‰é‡è¦å½±å“. æ€§æ ¼æ˜¯å¯ä»¥è¢«æ”¹å˜çš„, æˆ‘ä»¬å¯ä»¥é€šè¿‡åŸ¹å…»è‡ªå·±çš„å‹‡æ°”å’Œä¹äºåˆä½œçš„ç²¾ç¥æ¥æ”¹å–„å­©å­é”™è¯¯çš„äººç”Ÿè§‚ è¦åŸ¹å…»ä»–ä»¬çš„åˆä½œç²¾ç¥, å› ä¸ºå­©å­åœ¨å—å® æ—¶æ€»æ˜¯å˜å¾—è‡ªç§ä¸è‡ªå¤§, å½“ä»–ä»¬é•¿å¤§å, è¯¥ç¼ºç‚¹ä¼šæ„ˆå‘çš„æ”¾å¤§, æˆ‘ä»¬éœ€è¦è®©ä»–ä»¬çŸ¥é“. æœ¯ä¸šæœ‰ä¸“æ”», æ²¡æœ‰ä¸€ä¸ªäººæ˜¯å…¨çŸ¥å…¨èƒ½çš„, å¤æ‚çš„äº‹æƒ…é€šè¿‡åˆä½œä¼šæœ‰æ›´å¥½çš„ç»“æœ. æˆ‘ä»¬å¿…é¡»è¦æœ‰è‡ªå·±çš„äººç”Ÿ, è¿™æ˜¯æˆ‘ä»¬çš„äº‹æƒ…, æˆ‘ä»¬åº”è¯¥æ„Ÿè§‰åˆ°åšèµ·æ¥å¾—å¿ƒåº”æ‰‹, æˆ‘ä»¬æ˜¯ç‹¬ç«‹è‡ªä¸»çš„, æˆ‘ä»¬è‡ªå¼ºä¸æ¯, åº”å½“æœ‰æ¨é™ˆå‡ºæ–°çš„ä¹‰åŠ¡","link":"/2021/09/04/inferiority_and_transcendence(1)/"},{"title":"é€»è¾‘å­¦å…¥é—¨(1-22)","text":"ä¹¦ç±ä¿¡æ¯ ä¹¦å: é€»è¾‘å­¦å…¥é—¨ ä½œè€…: æ ¼æ¡‘ å‡ºç‰ˆ: ä¸­å›½çººç»‡å‡ºç‰ˆç¤¾ åºè¨€ é€»è¾‘æ˜¯ä»€ä¹ˆ? å¾ˆå¤šäººå¯¹æ­¤ä¸€çŸ¥åŠè§£, é€»è¾‘å¯ä»¥æ˜¯æ€ç»´çš„è§„å¾‹/è§„åˆ™, å¯ä»¥æ˜¯æŸç§ç†è®º/è§‚ç‚¹/è¡Œä¸ºæ–¹å¼, ä¹Ÿå¯ä»¥æ˜¯å®¢è§‚äº‹ç‰©çš„è§„å¾‹æ€§, å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯é€»è¾‘å­¦çš„æ€»ç§°. æœ¬ä¹¦å†™çš„å¹¶ä¸æ˜¯ä»€ä¹ˆå¤§é“ç†, è€Œæ˜¯ç”Ÿæ´»ä¸­çš„æ¨å¯¼å’Œè¯æ˜æŸä¸€ä»¶äº‹çš„æ€è€ƒçš„è¿‡ç¨‹ äººæ€»æ˜¯ä¹ æƒ¯æ€§çš„é™·å…¥ä¸€ç§\"ä¸€å¢æƒ…æ„¿\"çš„æ€ç»´æ–¹å¼ä¸­, è¯šç„¶, è¿™æ ·ä¼šè®©æˆ‘ä»¬è§‰å¾—æ¸©æš–/å¿«ä¹/è¸å®/æƒ¬æ„, å¦‚æœä½ æ˜¯åœ¨æ¢¦é‡Œ, é‚£æ²¡ä»€ä¹ˆä¸å¥½, ä½†æ˜¯ä»¤äººæ²®ä¸§çš„æ˜¯, æˆ‘ä»¬ç”Ÿæ´»åœ¨çœŸå®çš„ä¸–ç•Œ, äº‹ç‰©çš„å‘å±•æ€»æ˜¯ä¸é‚£ä¹ˆç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼Œ æ‰€ä»¥æˆ‘ä»¬æœ€å¥½æ—©ç‚¹æ‘’å¼ƒ\"ä¸€å¢æƒ…æ„¿\"çš„æ€è€ƒæ–¹å¼, è¿™æ ·æ‰èƒ½è®©æˆ‘ä»¬é¢å¯¹ç”Ÿæ´»æ—¶æ›´åŠ å¾—å¿ƒåº”æ‰‹ äººçš„ä¸€ç”Ÿæœ‰Nå¤šæ¬¡é€‰æ‹©, å…ä¸äº†çš„æˆ‘ä»¬ä¼šåœ¨ä¸€äº›é€‰æ‹©ä¸­çŠ¯ä¸‹é”™è¯¯, å…¶ä¸­é€»è¾‘é”™è¯¯æ˜¯åœ¨åº•å±‚, å› ä¸ºç°å®ç”Ÿæ´»ä¸­ä¸€åˆ‡éƒ½æœ‰å…¶é€»è¾‘, æ‰€ä»¥å¦‚æœæˆ‘ä»¬çŠ¯äº†é€»è¾‘é”™è¯¯, æˆ–è€…è¯´è¿åäº†é€»è¾‘, é‚£ä¹ˆå¿…ç„¶ä¼šå¯¼è‡´å‡ºç°ä¸€è¿ä¸²çš„é”™è¯¯ è¿™ä¹Ÿæ„å‘³ç€, å¦‚æœæˆ‘ä»¬å¯ä»¥æŒæ¡å¥½é€»è¾‘, å»æŒ‰ç…§æ­£ç¡®çš„é€»è¾‘æ€è€ƒäº‹æƒ…, å°±å¯ä»¥å°‘èµ°éƒ¨åˆ†å¼¯è·¯ å¥¥æ–¯å¡-ç‹å°”å¾·è¯´: â€œé€»è¾‘æ²¡æœ‰çˆ±æƒ…ä¸€åŠé‡è¦, ä½†ä»–èƒ½è¯æ˜äº‹æƒ…â€ é€»è¾‘å¯ä»¥è®©æˆ‘ä»¬åˆ†è¾¨åˆ«äººå¯¹æˆ‘ä»¬è¯´çš„è¯æ˜¯çœŸæ˜¯å‡, å› ä¸ºä¸–ç•Œä¸Šçš„äº‹æƒ…ä¸ä»¥æŸä¸ªäººçš„æ„å¿—ä¸ºè½¬ç§», å¾ˆå¤šçš„äº‹æƒ…å…¶æœ¬è´¨å’Œè¡¨ç°å‡ºæ¥çš„ç°è±¡å¹¶ä¸æ˜¯å®Œå…¨ç›¸åŒçš„, å› æ­¤åœ¨é‡åˆ°äº‹æƒ…æˆ–è€…çœ‹åˆ°ä¸œè¥¿æ—¶, æˆ‘ä»¬éœ€è¦å»æ€è€ƒ, è¿™ä»¶äº‹æ˜¯ä¸æ˜¯çœŸçš„, æ€ä¹ˆè¯æ˜ä»–æ˜¯çœŸçš„, å¦‚æœæˆ‘ä»¬å»ç†æ€§çš„æ€è€ƒå’Œåˆ†æ, å°±å¯ä»¥è¯†åˆ«å‡ºå¤§éƒ¨åˆ†ä¸ç¬¦åˆé€»è¾‘çš„, ä¸æ­£ç¡®çš„äº‹æƒ…, å‘ç°äº‹ç‰©çš„æœ¬è´¨. å¾€å¾€å¯¹æˆ‘ä»¬é€ æˆä¼¤å®³çš„, ä¸æ˜¯æˆ‘ä»¬ä¸çŸ¥é“çš„äº‹æƒ…, è€Œæ˜¯è¢«ä¼ªè£…äº†çš„æˆ‘ä»¬å·²ç»çŸ¥é“çš„äº‹æƒ… æ­£æ–‡ å·æ¢æ¦‚å¿µ è¯¾å ‚ä¸Š, è€å¸ˆæé—®å­¦ç”Ÿï¼Œ ä½ æ˜¯æ€æ ·è®¤è¯†å­™ä¸­å±±çš„ï¼Ÿ å­¦ç”Ÿç­”ï¼Œ æˆ‘ä¸è®¤è¯†å­™ä¸­å±± å¾ˆæ˜æ˜¾çš„, è€å¸ˆæ‰€è¯´çš„ è®¤è¯† æŒ‡çš„æ˜¯å¯¹å­™ä¸­å±±è¿™ä½å†å²äººç‰©çš„ç†è§£, è€Œå­¦ç”Ÿæ‰€è¯´çš„ è®¤è¯† åˆ™æ˜¯æ—¥å¸¸ç”Ÿæ´»ä¸­çš„äº¤å¾€å…³ç³» æ­¤å­¦ç”Ÿå°±çŠ¯äº† å·æ¢æ¦‚å¿µ çš„é€»è¾‘é”™è¯¯ï¼Œå³åœ¨åŒä¸€æ€ç»´è¿‡ç¨‹ä¸­ï¼Œåœ¨ä¸­é€”æ”¹å˜æŸä¸ªæ¦‚å¿µçš„å†…æ¶µæˆ–è€…å¤–å»¶ï¼Œç”¨ä¸€äº›å¬èµ·æ¥ä¸€æ ·çš„æ¦‚å¿µè¿›è¡Œå·æ¢ï¼ŒæŠŠæŸä¸ªäº‹ç‰©çš„åŸæ„ç”¨ç‹¡è¾©çš„æ‰‹æ³•æ›¿æ¢æˆå¦ä¸€ä¸ªçœ‹èµ·æ¥ä¹Ÿå¯ä»¥æˆç«‹çš„è§£é‡Šï¼ŒæŠŠå‡çš„è¯´æˆçœŸçš„ï¼Œæ¥è¾¾æˆç›®çš„ æˆ‘ä»¬åœ¨æ—¥å¸¸ä¸äººäº¤æµæ—¶ï¼Œä¸€å®šè¦ç‰¢è®°å¯¹æ–¹æåˆ°çš„æ¦‚å¿µï¼Œå½“å¯¹æ–¹å£ä¸­çš„æ¦‚å¿µå‘ç”Ÿåç§»æ—¶ï¼Œä¸€å®šè¦å¤šåŠ ç•™æ„ï¼Œé˜²æ­¢è½å…¥å¯¹æ–¹çš„ å·æ¢æ¦‚å¿µ çš„é€»è¾‘é™·é˜± æ··æ·†æ¦‚å¿µ åœ¨é€›å•†åœºçš„æ—¶å€™ï¼Œè¿œè¿œçš„çœ‹åˆ°æœ‰æŸä¸ªèŠ±ç”Ÿæ²¹ä¸Šé¢è´´äº†ä¹°ä¸€é€ä¸€çš„ç‰Œå­ï¼Œèµ°è¿‘ä¸€çœ‹å‘ç°æ˜¯ä¹°ä¸€ä¸ªèŠ±ç”Ÿæ²¹é€ä¸€ä¸ªæ¼æ–— å¯¹äº ä¹°ä¸€é€ä¸€ è¿™ä¸ªè¯è¯­ï¼Œå°±åŒ…å«äº†æ··æ·†æ¦‚å¿µçš„é—®é¢˜ï¼Œæ··æ·†æ¦‚å¿µï¼Œå³åœ¨åŒä¸€é€»è¾‘æ€ç»´è¿‡ç¨‹ä¸­ï¼ŒæŠŠä¸åŒçš„æ¦‚å¿µå½“æˆåŒä¸€ä¸ªæ¦‚å¿µæ¥ä½¿ç”¨ï¼Œè¿™å‡ ä¸ªä¸åŒçš„æ¦‚å¿µä¸€èˆ¬æ˜¯è¡¨é¢ç›¸ä¼¼æ¥è¾¾åˆ°æ··æ·†çš„æ•ˆæœ æˆ‘ä»¬éœ€è¦æ³¨æ„å¯¹æ¯”è¾ƒå®¹æ˜“æ··æ·†çš„æ¦‚å¿µè¿›è¡ŒåŒºåˆ†å’Œè¾¨åˆ«ï¼Œæé«˜è­¦æˆ’ï¼Œä¸¥æ ¼åŒºåˆ†å’Œç¡®è®¤æ¦‚å¿µæ˜¯å¦ä¸€è‡´ï¼Œå¹¶ç»“åˆçœŸå®çš„æƒ…å†µå’Œè¯­å¢ƒæ¥ç»¼åˆåˆ¤æ–­æ˜¯å¦æ˜¯ä¸€æ ·çš„æ¦‚å¿µ æ¨¡ç³Šæ¦‚å¿µ ä¼¯ä¹å‘Šè¯‰å„¿å­åƒé‡Œé©¬æ˜¯ è„Šéª¨å¼¯æ›²ã€é¢å¤´éš†èµ·ã€çœ¼ç›çªå‡ºã€å–„å«ä¼šè·³ï¼Œç»“æœå…¶å„¿å­æ‹¿èµ·è›¤èŸ†è®¤ä¸ºè›¤èŸ†æ˜¯åƒé‡Œé©¬ è¿™ä¸ä¼¯ä¹çš„è¡¨è¿°æœ‰å…³ï¼Œ ä¼¯ä¹å¹¶æ²¡æœ‰è¡¨è¿°æ¸…æ¥šåƒé‡Œé©¬çš„èŒƒå›´ï¼Œåªæ˜¯è¯´äº†å…¶ç‰¹å¾ï¼Œä¼¯ä¹çš„å„¿å­åœ¨æ²¡æœ‰å……åˆ†äº†è§£æ¦‚å¿µçš„æƒ…å†µä¸‹å°±çŠ¯äº†æ¨¡ç³Šæ¦‚å¿µçš„é”™è¯¯ åœ¨æ€ç»´çš„è¿‡ç¨‹ä¸­ï¼Œäººä»¬æåŠçš„æ¦‚å¿µéƒ½åº”è¯¥æœ‰æ˜ç¡®çš„èŒƒå›´ï¼Œå¦‚æœä½ å½¢å®¹ä¸€ä¸ªäººçš„èº«é«˜ä¸º æŒºé«˜çš„ è¿™å°±æ˜¯æ¨¡ç³Šçš„è¡¨è¾¾ï¼Œè¿™æ˜¯éš¾ä»¥è¡¡é‡çš„ æ‰€ä»¥åœ¨å¬åˆ«äººè®²è¯æ—¶ï¼Œä¸€å®šè¦ä»”ç»†è¾¨åˆ«æœ‰ç›¸å¯¹å«ä¹‰çš„æ¦‚å¿µï¼Œå¹¶è¿›ä¸€æ­¥è¿½é—®ä»¥å…å‡ºé”™ï¼ŒåŒæ—¶æˆ‘ä»¬è¡¨è¾¾è§‚ç‚¹æ—¶ä¹Ÿè¦æ³¨æ„è¡¨è¿°æ¸…æ™°ï¼Œéµå®ˆ ç®€å•åŸåˆ™ï¼Œé¿å…æŠ½è±¡æè¿°ï¼Œç®€åŒ–è¯­è¨€çš„æå¶ï¼Œåšåˆ° è¨€ç®€æ„èµ…ï¼Œè¿™æ ·å¯¹å€¾å¬è€…æ¥è¯´å°±ä¸æ˜¯ä¸€å¤´é›¾æ°´äº† å½’çº³è°¬è¯¯ æœ‰ä¸€åªé¸¡å–œæ¬¢å½’çº³ï¼Œä»–è§æ¯æ¬¡ä¸»äººå–‚é£Ÿéƒ½åœ¨6ç‚¹ï¼Œäºæ˜¯ä»–è®¤ä¸ºæ¯å¤©6ç‚¹æ˜¯å–‚é£Ÿæ—¶é—´ï¼Œç›´åˆ°æœ‰ä¸€å¤©ä¸»äºº6ç‚¹é’Ÿå°†å…¶å®°æ€ æ— è®ºå½’çº³äº†å¤šå°‘äº‹ä¾‹ï¼Œå½’çº³çš„ç»“è®ºå§‹ç»ˆæ˜¯å……æ»¡ä¸ç¡®å®šæ€§çš„ï¼Œåªè¦å‡ºç°äº†ä¸€ä¸ªåé¢ä¾‹å­ï¼Œå½’çº³çš„ç»“è®ºå°±ä¼šè¢«æ¨ç¿» å–„äºå½’çº³æ€»ç»“æ˜¯å¥½äº‹ï¼Œä½†æ˜¯ä¸è¦æ­¦æ–­çš„åšå‡ºç»“è®ºï¼Œè¿™æ ·å¾ˆå®¹æ˜“é™·å…¥åæ‰§ä¹‹ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨æ€»ç»“å‡ºæ¥çš„å½’çº³è°¬è®ºä¸åˆ«äººäº‰è¾©ï¼Œå¾ˆå®¹æ˜“ç«ä¸Šæµ‡æ²¹ï¼Œå¯¹æ²Ÿé€šæœ‰å®³æ— ç›Š è¦è®°ä½ï¼Œå®¢è§‚çš„ä¸–ç•Œå…¶å®å¾ˆå¤æ‚çš„ï¼Œæˆ‘ä»¬çš„è®¤çŸ¥æ€»å½’æ˜¯æœ‰é™çš„ï¼Œè¿‡å»çš„è§„å¾‹å’Œç»éªŒä¸ä¸€å®šèƒ½å¸®åŠ©æˆ‘ä»¬è§£å†³å½“å‰çš„é—®é¢˜ æˆ‘ä»¬éœ€è¦åœ¨ç”Ÿæ´»ä¸­ä½¿ç”¨å½’çº³æ³•ï¼Œä½†æ˜¯æ›´è¦æ˜ç™½ï¼šæœ‰é™çš„å½’çº³æ³•å­˜åœ¨è°¬è¯¯çš„å¯èƒ½ï¼Œè¿™æœ¬èº«ä¹Ÿæ˜¯é£é™©æ‰€åœ¨ï¼Œæˆ‘ä»¬æ°¸è¿œè¦ç§‰æŒè´¨ç–‘ç²¾ç¥ï¼Œç¡®ä¿¡æ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯æš‚æ—¶çš„ï¼Œä¸€æ—¦é™·å…¥åæ‰§ï¼Œå¯¹æŸäº›äº‹ç‰©äº§ç”Ÿè·¯å¾„äº§ç”Ÿä¾èµ–ï¼Œæˆ–è€…æƒ³å½“ç„¶çš„å»ä»¥ä¸ºä»€ä¹ˆï¼Œå¾ˆå®¹æ˜“é¢ä¸´å¤±è¯¯ äººä»¬åœ¨æ¾³å¤§åˆ©äºšå‘ç°é»‘å¤©é¹…ä¹‹å‰ä¸€ç›´è®¤ä¸ºå¤©é¹…éƒ½åº”è¯¥æ˜¯ç™½çš„ åå’Œè°¬è¯¯ å¹´è½»äººåœ¨æ‰“æŠ˜æœŸé—´åŠäº†å¥èº«æˆ¿ä¼šå‘˜å¡ï¼Œåæ¥å¾—ç—…åŒ»ç”Ÿç¦æ­¢å…¶å‰§çƒˆè¿åŠ¨ï¼Œå½“å¥èº«å¡æ— æ³•é€€æ¬¾çš„æƒ…å†µä¸‹ï¼Œå¹´è½»äººé€‰æ‹©ä¾æ—§å»å¥èº« å¹´è½»äººæ˜çŸ¥é“å¸¦ç—…é”»ç‚¼å¯¹èº«ä½“çš„ä¼¤å®³æ˜¯å·¨å¤§çš„ï¼Œä¾æ—§é€‰æ‹©å»å¥èº«ï¼Œæ˜¯å› ä¸ºä»–èŠ±é’±è´­ä¹°äº†ä¼šå‘˜å¡ï¼Œåˆæ— æ³•é€€æ¬¾ï¼Œæµªè´¹ä¼šå‘˜å¡è®©å…¶æ— æ³•æ¥å—ï¼Œæ‰€ä»¥é“¤è€Œèµ°é™© å¹´è½»äººé¢ä¸´çš„é—®é¢˜åœ¨é€»è¾‘å­¦ä¸Šè¢«ç§°ä¸ºï¼šåå’Œè°¬è®ºï¼Œ æŒ‡åœ¨æŸä»¶äº‹æƒ…ä¸ŠæŠ•å…¥äº†æˆæœ¬åï¼Œå½“å‘ç°ä¸é€‚åˆç»§ç»­æ—¶ï¼Œå› ä¸ºä¸èˆå¾—ä¹‹å‰çš„æŠ•å…¥ï¼Œé€‰æ‹©å°†é”™å°±é”™ï¼Œé€ æˆæ›´å¤§çš„æŸå¤± æ­£ç¡®çš„åšæ³•æ˜¯æœæ–­åœ°æŠ›å¼ƒæ²‰æ²¡æˆæœ¬ï¼Œå¸¦ç€ç—›è‹¦è½¬èº«ï¼Œå¦‚æœä¸æ­¢æŸï¼Œç»§ç»­æŠ•å…¥ã€‚å¯èƒ½ä¼šæœ‰æŸ³æš—èŠ±æ˜çš„é‚£ä¸€å¤©ï¼Œä½†æ˜¯æ¦‚ç‡å¾ˆå°ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰äº‹æƒ…åšæŒåˆ°æœ€åéƒ½æœ‰å¥½ç»“æœã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬è¦æ•¢äºè®¤èµ”æœè¾“ï¼ŒåŠé€”è€ŒåºŸï¼Œå¼€å§‹æ–°çš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯ç»§ç»­åœ¨åå’Œè°¬è®ºä¸­è‹¦è‹¦æŒ£æ‰ æ»‘å¡è°¬è®º å°åº¦ç”µå½±ï¼šèµ·è·‘çº¿ ä¸­çš„å¦»å­ä¸æ„¿æ„ è®©è‡ªå·±å„¿å­è¯»å¥¹è‡ªå·±å°æ—¶å€™çš„å­¦æ ¡ï¼Œè®¤ä¸ºå­©å­ä¸Šä¸äº†å¥½çš„å¹¼å„¿å›­å°±ä¸Šä¸äº†å¥½çš„ä¸­å­¦ï¼Œå°±ä¸Šä¸äº†å¥½çš„å¤§å­¦ï¼Œæ‰¾ä¸åˆ°å¥½çš„å·¥ä½œï¼Œè¢«åŒé¾„äººæŠ›åœ¨èº«åï¼Œç„¶åèµ°å…¥æ­§é€” ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ï¼Œå­©å­ä¸Šä¸äº†å¥½çš„å¹¼å„¿å›­ä¸ä»£è¡¨ä¸Šä¸äº†å¥½çš„ä¸­å­¦ï¼Œè¢«åŒé¾„äººæŠ›åœ¨èº«åæ›´æ˜¯æ— ç¨½ä¹‹è°ˆï¼Œæˆ‘ä»¬éƒ½æ˜¯æ™®é€šäººï¼Œå¦»å­å…¶å®å°±æ˜¯çŠ¯äº† æ»‘å¡è°¬è®º æ»‘å¡è°¬è®ºæŒ‡çš„æ˜¯ä¸åˆç†çš„ä½¿ç”¨ä¸€è¿ä¸²çš„å› æœå…³ç³»ï¼Œå°† å¯èƒ½æ€§ è½¬åŒ–ä¸º å¿…ç„¶æ€§ï¼Œå¾—å‡ºæŸç§ç»“è®º é€šå¸¸æ˜¯é“¾æ¡å¼çš„ï¼Œç”± A åˆ° Bï¼Œå†åˆ° Cï¼Œ å†åˆ° Dï¼Œä¸€æ­¥æ­¥çš„æ¨å¯¼å‡ºæç«¯çš„ç»“è®º è¿™ç§æƒ…å†µå¹¶ä¸æ˜¯å› ä¸ºå…¶æœ¬èº«æ˜¯é“¾æ¡å¼ï¼Œè€Œæ˜¯åœ¨äºé“¾æ¡ä¸­çš„æ¯ä¸€ä¸ªç¯èŠ‚å› æœå¼ºåº¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œæœ‰äº›å› æœå…³ç³»åªæ˜¯å¯èƒ½ï¼Œè€Œä¸æ˜¯å¿…ç„¶ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰è¶³å¤Ÿçš„è¯æ®ä¹‹å‰ï¼Œä¸è¦è®¤å®šæç«¯çš„ç»“æœå¿…ç„¶ä¼šå‘ç”Ÿ èµŒå¾’è°¬è®º 40ä½åšå£«å‚åŠ ä¸€ä¸ªå®éªŒï¼Œç©100å±€æ¸¸æˆï¼Œèµ¢çš„æ¦‚ç‡æ˜¯60%ï¼Œæ¯äººåˆå§‹é¢åº¦1ä¸‡å…ƒï¼Œæœ€åé‡‘é¢å¤§äº1ä¸‡çš„åªæœ‰2ä¸ªäººï¼Œå…¶å®æ¯æ¬¡æŠ•èµ„100å…ƒï¼Œæœ€åèƒ½å¾—åˆ°1.2ä¸‡å…ƒ ç ”ç©¶å‘ç°ï¼Œäººå€¾å‘äºåœ¨ä¸åˆ©çš„æƒ…å†µä¸‹æŠ•èµ„æ›´å¤šçš„ç­¹ç ï¼Œè€Œåœ¨æœ‰åˆ©çš„æƒ…å†µä¸‹åˆ™åä¹‹ æ¯”å¦‚åœ¨è¿ç»­è¾“äº†3æŠŠä¹‹åä»–ä»¬ä¼šè®¤ä¸ºï¼Œä¸‹ä¸€æŠŠä¸€å®šå¯ä»¥èµ¢ï¼Œç„¶åæŠ•èµ„æ›´å¤šçš„ç­¹ç ï¼Œè¿™å°±æ˜¯èµŒå¾’å¿ƒç†ï¼Œä¹Ÿå«èµŒå¾’è°¬è®º è¿™æ˜¯ä¸€ç§ä¸åˆç†çš„é€»è¾‘æ¨è®ºï¼Œä»–ä»¬é”™è¯¯çš„è®¤ä¸ºéšæœºåºåˆ—ä¸­çš„ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ä¸ä¹‹å‰å‘ç”Ÿçš„äº‹ä»¶æœ‰å…³ï¼Œå³å‘ç”Ÿçš„æ¦‚ç‡ä¼šéšç€ä¹‹å‰æ²¡æœ‰å‘ç”Ÿè¯¥äº‹ä»¶çš„æ¬¡æ•°è€Œå¢åŠ  æ¯”å¦‚æŠ›ç¡¬å¸ï¼Œå®é™…ä¸Šæˆ‘ä»¬çŸ¥é“æ¯æ¬¡çš„æ­£åé¢æ¦‚ç‡éƒ½ä¸º50%, ä½†æ˜¯èµŒå¾’è°¬è®ºè®¤ä¸ºï¼šè¿ç»­ä¸¤æ¬¡æŠ›å‡ºæ­£é¢çš„æ¦‚ç‡ä¸º50%*50%=25% å…¶å®æ— è®ºä½ ä¹‹å‰æŠ›äº†å¤šå°‘æ¬¡ï¼Œæ­£é¢å¤šå°‘æ¬¡ï¼Œåé¢å¤šå°‘æ¬¡ï¼Œä¸‹ä¸€æ¬¡çš„æ¦‚ç‡ä¾æ—§ä¸º50%ï¼Œä»–ä¸å—ä¹‹å‰çš„ç»“æœå½±å“ çœ‹é€èµŒå¾’è°¬è®ºå¯ä»¥è®©æˆ‘ä»¬æ›´åŠ ç†æ€§çš„çœ‹å¾…ç”Ÿæ´»ï¼Œé¿å…è®©ä¸»è§‚ä¸Šçš„è‡ªä¿¡å½±å“äº†è‡ªå·±çš„é€»è¾‘åˆ¤æ–­ è¯‰è¯¸æ€œæ‚¯ è¢«è­¦å¯ŸæŠ“ä½çš„å°å·æ€»æ˜¯ä¼šè¯´ï¼šæˆ‘åˆšä»å¤–åœ°è¿‡æ¥ï¼Œé’±åŒ…ä¸¢äº†ç­‰ç­‰ï¼Œæ€»ä¹‹æ˜¯ä¸å¾—å·²æ‰è¡Œçªƒ æˆ‘ä»¬çŸ¥é“ï¼Œä»»ä½•äº‹æƒ…æ€»æœ‰å…¶ä»£ä»·ï¼Œè¿™æ ·çš„è§£é‡Šåœ¨æ³•å¾‹é¢å‰å¹¶ä¸é€‚ç”¨ï¼Œé‚£ä»–ä»¬ä¸ºä»€ä¹ˆè¿˜è¦è¿™æ ·è¯´å‘¢ï¼Ÿè¿™å°±æ˜¯è¯‰è¯¸æ€œæ‚¯çš„é—®é¢˜ è¯‰è¯¸æ€œæ‚¯æ˜¯æŒ‡åœ¨è®ºè¯æŸä¸ªé—®é¢˜æ—¶ï¼Œä¸æ˜¯é€šè¿‡æ­£é¢è®ºé¢˜è®ºè¯ï¼Œè€Œæ˜¯åˆ©ç”¨å—ä¼—å¯¹å¼±åŠ¿çš„æ€œæ‚¯å¿ƒç†ï¼Œè¯‰è¯´æŸä¸ªäººçš„æƒ¨çŠ¶æ¥æ¿€èµ·äººä»¬çš„æ»éšä¹‹å¿ƒï¼Œè¿™å…¶å®å°±æ˜¯è½¬ç§»è¯é¢˜ï¼Œæ˜¯ä¸€ç§é€»è¾‘è°¬è¯¯ï¼Œæ— è®ºæ‰€è¯´æ˜¯å¦çœŸå‡ï¼Œä¹Ÿä¸æ‰€ä½œæ‰€ä¸ºæ²¡æœ‰å¿…ç„¶è”ç³»ï¼Œä¸æ˜¯æ”¯æŒè®ºæ–­çš„é€»è¾‘ç†ç”± æˆ‘ä»¬åœ¨çœ‹å¾…äº‹æƒ…æ—¶ï¼Œä¸è¦è¢«åŒæƒ…å¿ƒè’™è”½äº†åŒçœ¼ï¼Œè€Œå¿½ç•¥äº†å…¶æ‰€ä½œæ‰€ä¸ºï¼Œå¿½ç•¥äº†é—®é¢˜çš„æœ¬è´¨ äººäººéƒ½æœ‰æ»éšä¹‹å¿ƒï¼Œä½†æ˜¯æƒ…å½’æƒ…ï¼Œæ³•å½’æ³•ï¼Œä¸¤è€…ä¸èƒ½æ··ä¸ºä¸€è°ˆï¼Œä¸€ä¸ªç†æ™ºçš„äººä¸èƒ½ç”¨é€»è¾‘è°¬è¯¯å»ä»£æ›¿ç†æ€§æ€è€ƒï¼Œæ›´ä¸èƒ½è¢«æƒ…ç»ªå·¦å³è€Œä¸§å¤±äº†å®¢è§‚çš„åˆ†æä¸åˆ¤æ–­ è¯‰è¯¸å¤§ä¼— è¯‰è¯¸å¤§ä¼—çš„é€»è¾‘è°¬è¯¯, æŒ‡åœ¨è®ºè¯ä¸€ä¸ªè§‚ç‚¹æ—¶, åªæ˜¯å› ä¸ºå¤šæ•°äººèµåŒè¯¥è§‚ç‚¹, åˆ™è®¤ä¸ºè¯¥è§‚ç‚¹ä¸ºæ­£ç¡® è¯‰è¯¸å¤§ä¼—çš„å…¸å‹æ¡ˆä¾‹åˆ™æ˜¯æ‰€è°“çš„ ä»ä¼—å¿ƒç† , å³å¤šæ•°äººè®¤ä¸ºä»–æ˜¯å¯¹çš„å°±æ˜¯å¯¹çš„, è¿™æ ¹æœ¬å°±ä¸æ˜¯é€»è¾‘æ¨è®º, è€Œæ˜¯åˆ©ç”¨äº†äººçš„ä¸è‡ªä¿¡å’Œç›²ä»ç­‰å¼±ç‚¹ äººä»¬æ€»æ˜¯å€¾å‘äºè®©è‡ªå·±çš„è§‚ç‚¹å¾—åˆ°æ›´å¤šäººçš„èµåŒ, åä¹‹, å¤šæ•°äººéƒ½èµåŒçš„è§‚ç‚¹ä¹Ÿä¼šå¯¹ä¸ªä½“çš„åˆ¤æ–­äº§ç”Ÿå‹åŠ› ä½†æ˜¯æˆ‘ä»¬è¦çŸ¥é“, ä¸€ä¸ªè§‚ç‚¹çš„æ­£ç¡®ä¸å¦, ä¸å¤šå°‘äººèµåŒä»–æ— å…³, æ²¡æœ‰å¿…ç„¶çš„å› æœå…³ç³», æ°¸è¿œè®°ä½: æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†æ˜¯å®è·µ è¯‰è¯¸ä¸ªä½“ ä¸è¯‰è¯¸å¤§ä¼—ç›¸åçš„æ˜¯è¯‰è¯¸ä¸ªä½“, æŒ‡ä»…ä»…æ ¹æ®ä¸ªæ¡ˆåšå‡ºæ€»ç»“å’Œç»“è®º, æˆ–è€…ä»¥ä¸ªäººç»éªŒä½œä¸ºè®ºæ®æ¥è®ºè¯ æˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯, ä¸ªäººçš„ç»éªŒæ˜¯æœ‰å±€é™æ€§çš„, å•ä¸ªäº‹ä»¶ä¹Ÿå¯èƒ½å­˜åœ¨ç‰¹æ®Šçš„å› ç´ , ä¸èƒ½å°†å…¶ä½œä¸ºæ™®éæ€§çš„ææ–™è¿›è¡Œè®ºè¯ è¯‰è¯¸ç»éªŒ å½“å„¿å¥³çš„è§‚å¿µä¸çˆ¶æ¯ä¸å’Œæ—¶ï¼Œçˆ¶æ¯å¾€å¾€ä¼šè¯´ï¼šæˆ‘èµ°è¿‡çš„æ¡¥æ¯”ä½ èµ°è¿‡çš„è·¯è¿˜å¤šï¼Œè¿™å°±æ˜¯è¯‰è¯¸ç»éªŒï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå¹´é¾„å¹¶ä¸æ˜¯åˆ¤æ–­æ˜¯éå¯¹é”™çš„æ ‡å‡†ï¼Œè§‚ç‚¹çš„æ­£ç¡®ä¸å¹´é¾„å¤§å°æ²¡æœ‰æ˜ç¡®çš„å…³ç³»ï¼Œè€Œæ˜¯è¦çœ‹è®ºæ®å’Œè®ºè¯æ˜¯å¦ç¬¦åˆé€»è¾‘ å½“ç„¶ï¼Œä¸å¾—ä¸æ‰¿è®¤ï¼Œå¹´é¾„è¶Šå¤§ã€ç»å†è¶Šå¤šçš„æƒ…å†µä¸‹ï¼Œå…¶çœ‹å¾…äº‹æƒ…çš„æ­£ç¡®æ€§è¦ä¼˜äºå°è¾ˆï¼Œæ‰€ä»¥å¯¹äºç»éªŒï¼Œæˆ‘ä»¬è¦è¾©è¯çœ‹å¾…ï¼Œæ—¢è¦å¸æ”¶å…¶åˆç†éƒ¨åˆ†ï¼Œä¹Ÿè¦å­¦ä¼šè¾¨åˆ«å…¶ä¸­ä¸åˆç†çš„éƒ¨åˆ†ï¼Œå°¤å…¶æ³¨æ„è¦å…·ä½“é—®é¢˜å…·ä½“åˆ†æï¼Œä¸èƒ½è¢«ç»éªŒç”»åœ°ä¸ºç‰¢ è¯‰è¯¸æ— çŸ¥ æ²¡æœ‰äººèƒ½è¯æ˜å¤–æ˜Ÿäººå­˜åœ¨ï¼Œæ‰€ä»¥å¤–æ˜Ÿäººä¸€å®šä¸å­˜åœ¨ åªæ˜¯å› ä¸ºæ²¡æœ‰å¼ºæœ‰åŠ›çš„è¯æ®å»è¯æ˜æˆ–è€…åè¯ï¼Œå°±è®¤å®šæŸä¸ªè§‚ç‚¹æ˜¯å¯¹çš„æˆ–è€…é”™çš„ï¼Œæ­¤ä¸ºè¯‰è¯¸æ— çŸ¥çš„è¯¡è¾©ï¼Œä¹Ÿæ˜¯å¾ˆå¤šé˜´è°‹è®ºè€…çš„é€»è¾‘ äººçš„è®¤çŸ¥æ˜¯æœ‰é™çš„ï¼Œè¦è¯æ˜æŸä¸ªäº‹ç‰©çš„å­˜åœ¨æ˜¯å¾ˆå›°éš¾çš„ï¼Œæ›´åˆ«è¯´å»è¯æ˜å¤–æ˜Ÿäººè¿™ç§æˆ‘ä»¬æ²¡æœ‰è§åˆ°è¿‡çš„äº‹ç‰© è¯‰è¯¸è§„åˆ™ä»¥å¤– å‡¡äº‹éƒ½æœ‰å…¶è§„å¾‹ï¼Œä¹Ÿæœ‰å…¶è§„åˆ™ï¼Œæ¯”å¦‚ä¿¡ç”¨ï¼Œå¤±ä¿¡è€…æ€»æ˜¯ä¼šè¯¡è¾©è¯´å¤±ä¿¡çš„äº‹æƒ…æ˜¯ä¾‹å¤–ï¼Œæ®Šä¸çŸ¥ è§„åˆ™ä¸ä¾‹å¤–ï¼Œæœ¬èº«å°±æ˜¯å¯¹ç«‹çš„ï¼Œè§„åˆ™å°±æ˜¯è§„åˆ™ï¼Œä¾‹å¤–å°±æ˜¯ç ´åè§„åˆ™ï¼Œç ´åäº†è§„åˆ™å°±è¦ä»˜å‡ºä»£ä»·ï¼Œæ¯”å¦‚å¤±ä¿¡è€…ä¸è¢«åˆ«äººä¿¡ä»»ï¼Œè¿™å°±æ˜¯ä»£ä»·ï¼Œç ´åè§„åˆ™ä¸€å®šä¼šä»˜å‡ºä»£ä»· è¯‰è¯¸å®Œç¾ å¦‚æœè¿™ä»¶äº‹æƒ…ï¼Œæˆ‘æ²¡æœ‰åŠæ³•åšåˆ°å®Œç¾ï¼Œé‚£ä¹ˆå°±å¹²è„†ä¸åšäº† è¿™å°±æ˜¯è¯‰è¯¸å®Œç¾çš„é€»è¾‘è°¬è¯¯ï¼Œæ€»è§‰å¾—ä¸å®Œç¾çš„æ˜¯ä¸èƒ½åšçš„ï¼Œè¿™ç§æƒ³æ³•åªä¼šå¯¼è‡´æ— çº¿æ‹–å»¶ï¼Œé”™è¿‡å¤§é‡çš„è‰¯æœºï¼Œç”šè‡³ä¸€äº‹æ— æˆ è°ä¹Ÿæ— æ³•ä¿è¯åšä¸€ä»¶äº‹æƒ…å¯ä»¥ä¸‡æ— ä¸€å¤±ï¼Œä»»ä½•äº‹æƒ…åªæœ‰å…ˆå»åšäº†æ‰æœ‰å®Œç¾çš„å¯èƒ½ï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯æœºä¸å¯å¤±ï¼Œæ—¶ä¸å†æ¥ è¯‰è¯¸æœ€å·® æˆ‘åªæ˜¯å·ä¸œè¥¿ï¼Œåˆæ²¡æœ‰ä¼¤äºº ä½œæ¶è€…é€šå¸¸ä½¿ç”¨å¯¹æ¯”æ¥ç¥ˆæ±‚åŸè°… ä½œæ¶ä¸æ²¡ä½œæ¶ï¼Œæ˜¯æ ¹æœ¬æ€§è´¨çš„é—®é¢˜ï¼Œå¤§æ¶ä¸å°æ¶ï¼Œæ˜¯ä¸¥é‡ç¨‹åº¦çš„é—®é¢˜ã€‚ä¸¤è€…ä¸å¯æ··ä¸ºä¸€è°ˆ è¯‰è¯¸ä¿¡å¿ƒ äººä»¬æ€»æ˜¯å¸Œæœ›èƒ½å¾—åˆ°ä»–äººçš„ä¿¡ä»»å’Œç†è§£ è¯‰è¯¸ä¿¡å¿ƒï¼ŒæŒ‡ä¾ä»—ä¿¡å¿ƒä½œä¸ºè®ºæ®çš„æ ¹åŸºï¼Œè€Œä¸æ˜¯é é€»è¾‘æˆ–è¯æ®çš„æ”¯æŒ è¯‰è¯¸ä¿¡å¿ƒçš„è¯¯åŒºï¼šä»¥ä»–äººä¿¡å¿ƒä¸ºè®ºæ®ï¼Œæ­¤ä¸ºè¯‰è¯¸éç†æ€§çš„è®ºè¯æ–¹å¼ æˆ‘ä»¬è¦çŸ¥é“ï¼Œä¸€ä¸ªäººå¯¹å¦ä¸€ä¸ªäººçš„ä¿¡ä»»ï¼Œä¸æ˜¯å»ºç«‹åœ¨â€œæˆ‘å’Œä½ æ„Ÿæƒ…å¥½â€çš„åŸºç¡€ä¸Šï¼Œè€Œæ˜¯å»ºç«‹åœ¨äº‹å®è®ºæ®çš„åŸºç¡€ä¸Š è¯‰è¯¸ææƒ§ ææƒ§æ˜¯äººç±»æœ€åŸå§‹çš„æƒ…æ„Ÿä¹‹ä¸€, è¯¡è¾©è€…é€šå¸¸åˆ©ç”¨ææƒ§æ¥å¼ºåŒ–è‡ªå·±çš„è§‚ç‚¹, å³ä¸ºè¯‰è¯¸ææƒ§ è¯‰è¯¸ææƒ§é€šå¸¸åˆ»æ„æç»˜å±é™©, è®©äººæ„Ÿè§‰åˆ°ææƒ§, ä»è€Œæ„¿æ„å¬ä¿¡è¯¡è¾©è€…çš„å»ºè®®, é€šå¸¸è¯‰è¯¸ææƒ§å¹¶ä¸æ˜¯å‡­ç©ºæé€ , è€Œæ˜¯æœ‰ä¸€å®šçš„æ ¹æ®, åªæ˜¯å¯ä»¥çš„å¤¸å¤§å…¶è¯, ä»¥è¾¾åˆ°æ•ˆæœ, è¾¾åˆ°è¯´æœä»–äººçš„ç›®çš„ è¯‰è¯¸åè¯˜ ä½ è¯´åˆ·æ‰‹æœºå¯¹çœ¼ç›ä¸å¥½ï¼Œä½ ä¸ä¹Ÿè€åˆ·å—ï¼Ÿ è¯´è¿™äº›çš„ç›®çš„æ˜¯ä¸ºäº†æ‰¹é©³å¯¹æ–¹çš„è§‚ç‚¹ï¼Œä½†æ˜¯é‡‡ç”¨çš„æ–¹å¼ä¸æ˜¯é€šè¿‡è®²é“ç†ï¼Œæ‘†äº‹å®å»è®ºè¯é—®é¢˜ï¼Œè€Œæ˜¯é€šè¿‡å‘å¯¹æ–¹åè¯˜æ¥ç”¨å¯¹æ–¹çš„è¡Œä¸ºå»æ‰¹é©³å¯¹æ–¹çš„è§‚ç‚¹ã€‚ æ­£ç¡®çš„æ–¹å¼(ä»¥åˆ·æ‰‹æœºä¸ºä¾‹)ï¼Œåº”è¯¥åˆ†æè¯¸å¦‚æ‰‹æœºå±å¹•å‘å‡ºçš„è“å…‰å¯¹è§†åŠ›æœ‰ä»€ä¹ˆå½±å“ç­‰æ‰æ˜¯æœ‰ç†æœ‰æ®çš„è®ºè¯ æˆ‘ä»¬ä¸èƒ½å› ä¸ºåˆ·æ‰‹æœºè¿™ä»¶äº‹æœ‰äººåšå°±è®¤ä¸ºä»–æ˜¯æ— å®³çš„ è¯‰è¯¸æ²‰é»˜ ä¸è¯´è¯ä¸ç­‰äºé»˜è®¤ï¼Œä¸è¯´è¯ä¸ç­‰äºå¿ƒè™š è¯‰è¯¸æ²‰é»˜ï¼ŒæŒ‡ç”±äºè®ºç‚¹çš„ä¸»å¼ è€…æ²¡æœ‰è®ºè¯è¯¥è®ºç‚¹ï¼Œä»è€Œæ¨æ–­è¯¥è®ºç‚¹æ˜¯å‡çš„ï¼Œè¿™æ˜¯ä¸å¯¹çš„ï¼Œè®ºç‚¹çš„ä¸»å¼ è€…æ²¡æœ‰è®ºè¯è®ºç‚¹è¿™ä¸ªè¡Œä¸ºï¼Œæœ¬èº«å¹¶ä¸èƒ½æˆä¸ºè¯¥è®ºç‚¹ä¸ºå‡çš„ç†ç”± è¯‰è¯¸åŠ¿åŠ› äººåœ¨å±‹æªä¸‹ä¸å¾—ä¸ä½å¤´ ä¹¦çš„ä½œè€…è®¤ä¸ºå¿…è¦æ—¶ä¹Ÿè¦ä¸ºè‡ªå·±å¯»æ±‚æƒåˆ©ï¼Œè€Œä¸æ˜¯å› ä¸ºå¤šæ•°äººé€‰æ‹©æ‰¿å—è€Œéšå¤§æµ åŠ¨æœºè®º åœ¨ç”Ÿæ´»ä¸­ï¼Œåˆ‡è®°ä¸èƒ½ ä»¥å°äººä¹‹å¿ƒï¼Œåº¦å›å­ä¹‹è…¹ è¿™ç§æ€€ç–‘ä¸»ä¹‰ï¼Œæ˜¯ä¸€ç§åŠ¨æœºè®ºï¼Œå±äºé€»è¾‘è°¬è¯¯ï¼Œè¿™ä¸ç§‘å­¦ç²¾ç¥ä¸­å¼ºè°ƒçš„è´¨ç–‘ç²¾ç¥æœ‰æœ¬è´¨åŒºåˆ« ç§‘å­¦ç²¾ç¥ä¸­çš„è´¨ç–‘ç²¾ç¥éƒ½æ˜¯æœ‰å‰ææ¡ä»¶çš„ï¼Œä»–ä»¬æœ‰å……è¶³çš„ç†ç”±ï¼Œå»ºç«‹åœ¨å®è¯å’Œç†æ€§çš„åŸºç¡€ä¸Šï¼Œæ˜¯ä»¥äº‹å®æ¡ä»¶ä¸ºåŸºç¡€ï¼Œä»¥å®éªŒå’Œæ£€æµ‹ä¸ºæ‰‹æ®µçš„ï¼Œæœ‰æ ¹æ®ã€åˆç†çš„æ€€ç–‘ è¯‰è¯¸æƒå¨ æˆ‘ä»¬è¦çŸ¥é“ï¼Œåäººè¯´çš„è¯ä¸ä¸€å®šæ˜¯å¯¹çš„ï¼Œè¯‰è¯¸æƒå¨çš„è°¬è¯¯ï¼ŒæŒ‡çš„æ˜¯è®¤ä¸ºæƒå¨äººå£«è¯´çš„è¯éƒ½æ˜¯å¯¹çš„ï¼Œå®é™…ä¸Šï¼Œæƒå¨å…·æœ‰ç›¸å¯¹æ€§ã€å¤šå…ƒæ€§ã€å¯å˜æ€§ã€æ—¶æ•ˆæ€§ã€‚ æˆ‘ä»¬åœ¨å¼•ç”¨æƒå¨æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ è¯‰è¯¸çš„æƒå¨å¿…é¡»æ˜¯è®ºé¢˜æ‰€åœ¨é¢†åŸŸçš„æƒå¨ï¼Œæ¯•ç«Ÿéš”è¡Œå¦‚éš”å±± æƒå¨ä¼šè¿‡æœŸï¼Œæ—¶ä»£åœ¨è¿›æ­¥ï¼Œä¸Šé™åœ¨ä¸æ–­æé«˜ æƒå¨æ‰€ç§‰æŒçš„è§‚ç‚¹ï¼Œè¦åœ¨è¯¸å¤šæƒå¨ä¸­å½¢æˆæ™®éå…±è¯†ï¼Œå¦‚æœæƒå¨ä¹‹é—´æœ¬èº«å­˜åœ¨åˆ†æ­§åˆ™ä¸é€‚å®œä½œä¸ºè®ºæ®","link":"/2021/09/04/introduction_logic(1-22)/"},{"title":"é€»è¾‘å­¦å…¥é—¨(45-66)","text":"ä¹¦ç±ä¿¡æ¯ ä¹¦å: é€»è¾‘å­¦å…¥é—¨ ä½œè€…: æ ¼æ¡‘ å‡ºç‰ˆ: ä¸­å›½çººç»‡å‡ºç‰ˆç¤¾ æ­£æ–‡ ç»“æ„æ­§ä¹‰ ä»Šå¤©æœ‰ä¸¤ä¸ªæŠ¥ç¤¾çš„è®°è€…å‚åŠ äº†æ´»åŠ¨ é€»è¾‘å­¦ä¸Š, ç”±äºè¯­å¥ä¸­çš„è¯­æ³•ç»“æ„å…·æœ‰ä¸ç¡®å®šæ€§å¯¼è‡´åˆ¤æ–­äº§ç”Ÿçš„æ­§ä¹‰å«åšç»“æ„æ­§ä¹‰ æ¯”å¦‚ä¸Šé¢çš„è¯­å¥, æœ‰å¯èƒ½ç†è§£ä¸ºä¸€ä¸ªæŠ¥ç¤¾çš„ä¸¤ä¸ªè®°è€…å‚åŠ äº†æ´»åŠ¨, ä¹Ÿå¯èƒ½ç†è§£ä¸ºä¸¤ä¸ªæŠ¥ç¤¾çš„å¤šä¸ªè®°è€…å‚åŠ äº†æ´»åŠ¨, è¿™ç§å°±æ˜¯è¡¨è¿°è€…çŠ¯äº†ç»“æ„æ­§ä¹‰çš„é”™è¯¯ è¦æ¶ˆé™¤æ­§ä¹‰, æœ€å¥½çš„åŠæ³•å°±æ˜¯é‡æ–°ç»„ç»‡è¡¨è¿°çš„ç»“æ„ éšå«å‘½é¢˜ å¬è¯å¬å£°, é”£é¼“å¬éŸ³ å³å¬äººè¯´è¯çš„æ—¶å€™, ä¸ºäº†å‡†ç¡®æŠŠæ¡å¯¹æ–¹çš„æ€æƒ³, å¬æ˜ç™½å¯¹æ–¹çœŸæ­£æƒ³è¡¨è¾¾çš„ä¸œè¥¿, ä¸èƒ½åªå¬å¯¹æ–¹è¯è¯­è¡¨é¢çš„æ„æ€, å› ä¸ºå¯¹æ–¹å¯èƒ½åœ¨æš—ç¤ºä»€ä¹ˆ è¿™ç§åˆ«äººè¯´çš„å‘½é¢˜ä¸­, éšè—ç€å¦ä¸€ä¸ªå‘½é¢˜, è¢«ç§°ä¸ºéšå«å‘½é¢˜ éšå«å‘½é¢˜æ˜¯ä¸€åªé«˜æ˜çš„, éå¸¸å®ç”¨çš„è¡¨è¾¾æ–¹å¼, ç”¨å¥½äº†çš„è¯, å³å¯ä»¥å§”å©‰çš„æå‡ºè§‚ç‚¹, åˆä¸è‡³äºå¾—ç½ªäºº. ä½ ä»¬è¿™çš„èšŠå­å¾ˆèªæ˜, æ‡‚å¾—æå‰æ¥è¸©ç‚¹, æ–¹ä¾¿æ™šä¸Šå°±é¤ æ„æ€æ˜¯èšŠå­å¾ˆå¤š åŒæ„å¼‚æ‚– A: ä½ è¿™æ ·ä¸ä¼šæœ‰å¥½ç»“æœçš„, è¯´çœŸè¯çš„è¯, å¯Œäººä¼šæ€¨æ¨ä½ . è¯´å‡è¯, ç©·äººä¼šæŒ‡è´£ä½  B: æˆ‘ä¼šæœ‰å¥½ç»“æœçš„, è¯´çœŸè¯, ç©·äººä¼šæ‹¥æŠ¤æˆ‘, è¯´å‡è¯, å¯Œäººä¼šå–œæ¬¢æˆ‘ è¿™ç§ä»¿ç…§å¯¹æ–¹çš„è¾©è¯çš„è¯è¯­ç»“æ„, æ„å»ºä¸€ä¸ªä¸å¯¹æ–¹è¯è¯­ç»“æ„å®Œå…¨ç›¸åŒ, è¡¨è¿°æ„æ€å´å®Œå…¨æ‚–çš„è§‚ç‚¹, ä»¥æ­¤æ¥åé©³å¯¹æ–¹çš„æ–¹å¼, å«åšåŒæ„å¼‚æ‚– å¤§å¤šæ•°æ—¶å€™, è¿™ç§ååˆ¶æ–¹å¼ä¼šå–å¾—æ¯”è¾ƒå¥½çš„æˆæœ, å¾€å¾€ä»¤äººæ— è¨€ä»¥å¯¹ åˆ†è§£é—®é¢˜ åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­, æˆ‘ä»¬ä¸€å®šè¦å­¦ä¼šåˆ†è§£è‡ªå·±çš„é—®é¢˜, è¿™æ ·å¯ä»¥è®©äººæ›´å¥½çš„ç†è§£æˆ‘ä»¬çš„é—®é¢˜; ä¹Ÿè¦å­¦ä¼šåˆ†è§£ä»–äººçš„é—®é¢˜, ä¸ºçš„æ˜¯å‡å°‘ç­”éæ‰€é—®çš„å‘ç”Ÿ å¦‚ä½•æ›´å¥½çš„æé—®é—®é¢˜? ç¡®å®šé—®é¢˜çš„æ–¹å‘ ç”Ÿæ´»ä¸­æœ€ç®€å•çš„ç–‘é—®å¥, è«è¿‡äº5W+1H When ä»€ä¹ˆæ—¶å€™? Where ä»€ä¹ˆåœ°ç‚¹? What ä»€ä¹ˆæƒ…å†µ? Who ä»€ä¹ˆäºº? Why ä¸ºä»€ä¹ˆ? How æ€ä¹ˆ? æé—®æ—¶é¦–å…ˆè¦ç¡®è®¤ä½ è¦é—®çš„æ˜¯ä»€ä¹ˆç±»å‹, æ¯”å¦‚: ä½ å‘¨æœ«å»äº†ä»€ä¹ˆåœ°æ–¹? ä½ ä¸Šåˆå’Œä»€ä¹ˆäººåœ¨ä¸€èµ·? ä½ æ˜¨å¤©ä¸ºä»€ä¹ˆä¸æ¥? è€Œä¸æ˜¯: ä½ å‘¨æœ«ä»€ä¹ˆæƒ…å†µ? ä½ ä¸Šåˆæ€ä¹ˆäº†? ä½ æ˜¨å¤©åœ¨ä»€ä¹ˆåœ°æ–¹? å¼ºè°ƒé—®é¢˜çš„ç›®çš„ å…¶å®, ä¸Šé¢ä¸¾å‡ºçš„é”™è¯¯ä¾‹å­, ä¹Ÿèƒ½ä»ä¾§é¢é—®å‡ºæ¥ç­”æ¡ˆ, è€Œæ­£ç¡®çš„æé—®å¯ä»¥ç›´æ¥çš„å¼ºè°ƒä½ é—®é—®é¢˜çš„ç›®çš„, æ›´å…·æœ‰ç›®çš„æ€§, è®©å¯¹æ–¹çŸ¥é“ä½ æƒ³è¦çš„ç­”æ¡ˆ, è®©äº¤æµé¡ºåˆ©çš„è¿›è¡Œ ä¸€ä¸ªé—®å¥çš„ç–‘é—®è¯è¦å°‘äºä¸‰ä¸ª æ— è®ºä»€ä¹ˆé—®é¢˜éƒ½æœ‰ä¾§é‡ç‚¹, è¿™å°±è¦æ±‚æˆ‘ä»¬åœ¨æé—®æ—¶ä¸èƒ½åœ¨ä¸€ä¸ªé—®å¥ä¸­åŒ…å«å¤ªå¤šç–‘é—®è¯, è¿™æ ·ä¼šå¯¼è‡´å›ç­”è€…æ— æ³•äº†è§£æˆ‘ä»¬çš„ç›®çš„ æœ€å¥½ä¸€ä¸ªé—®å¥åªæœ‰ä¸€ä¸ªç–‘é—®è¯, åªé—®ä¸€ä¸ªé—®é¢˜ ä½ æ˜¨å¤©æ²¡æ¥ä¸Šè¯¾, å’Œè°? å»äº†å“ª? å¹²äº†ä»€ä¹ˆ? è¿™æ ·ä¸€å¥è¯æœ‰ä¸‰ä¸ªç–‘é—®è¯, è®©äººå¾ˆéš¾å›ç­” åœ¨ç”Ÿæ´»ä¸­æˆ‘ä»¬è¦å­¦ä¼šåˆ†è§£é—®é¢˜, æé«˜æ²Ÿé€šçš„æ•ˆç‡ è™šå‡ä¸¤åˆ† è¿™ä¸ªäººæ˜¯å¥½äººè¿˜æ˜¯åäºº? è¿™ä»¶äº‹æ˜¯å¯¹æ˜¯é”™? åœ¨æˆ‘ä»¬å°çš„æ—¶å€™, å¯¹å¾ˆå¤šäº‹ç‰©æ²¡æœ‰å……åˆ†çš„è®¤çŸ¥, è®¤ä¸ºä¸–ç•Œéé»‘å³ç™½, éå–„å³æ¶. åˆ°å¤§äº†æ‰çŸ¥é“, äº‹æƒ…éƒ½æ˜¯æœ‰ä¸¤é¢æ€§çš„, ä¸èƒ½åƒäºŒæç®¡ä¸€æ ·å»çœ‹å¾…äº‹ç‰©. å½“ä½ è®¤ä¸ºæŸä»¶äº‹æƒ…éé»‘å³ç™½çš„æ—¶å€™, ä½ å¯èƒ½å°±å·²ç»çŠ¯äº†è™šå‡ä¸¤åˆ†çš„è°¬è¯¯ è™šå‡ä¸¤åˆ†, æŒ‡æŠŠä¸€ä¸ªå¯èƒ½å­˜åœ¨å¤šä¸ªç­”æ¡ˆçš„äº‹æƒ…, å‡è®¾æˆåªæœ‰ä¸¤ä¸ªç­”æ¡ˆ, é€šå¸¸è¿™ä¸¤ä¸ªç­”æ¡ˆè¿˜æ˜¯ä¸¤çº§åè½¬çš„, ä¼¼ä¹ä¸–ç•Œä¸Šæ‰€æœ‰é—®é¢˜éƒ½åªæœ‰ä¸¤é¢ è€Œå½“æˆ‘ä»¬æŠŠç»“è®ºé™åˆ¶åœ¨ä¸¤ä¸ªä»¥å†…çš„æ—¶å€™, æˆ‘ä»¬çš„è§†é‡å°±ä¼šè¢«é™åˆ¶, æ€ç»´ä¼šé­åˆ°ä¸¥é‡çš„æŸç¼š äº†è§£è™šå‡ä¸¤åˆ†çš„é€»è¾‘é”™è¯¯, æœ‰åŠ©äºæˆ‘ä»¬ç”¨å¼€æ”¾æ€§çš„æ€ç»´å»æ€è€ƒé—®é¢˜, ç‰¹åˆ«æ˜¯å—æŒ«çš„æ—¶å€™, èƒ½å¤ŸåŠæ—¶çš„æé†’è‡ªå·±å’Œä»–äºº, è¿˜æœ‰ç¬¬ä¸‰ç§å¯èƒ½ è¿™æ ·çš„è¯å°±ä¸ä¼šèµ°å‘æç«¯çš„æ€è€ƒè¯¯åŒº, ä¹Ÿä¸ä¼šå› ä¸ºä¸€æ¬¡å¤±è´¥å°±å½»åº•ä¸§å¤±è‡ªä¿¡, å¦è®¤è‡ªå·±çš„ä»·å€¼ä¸åŠªåŠ› ä»è¡¨é¢ä¸Šçœ‹, é‡åˆ°æŒ«æŠ˜ä¸€è¹¶ä¸æŒ¯, æ˜¯å¿ƒæ€è¿‡äºæ‚²è§‚. å®é™…ä¸Šæ˜¯é™·å…¥äº†è™šå‡ä¸¤åˆ†çš„é€»è¾‘é™·é˜±. ç¨åŠ åˆ†æ, è¿™æ˜¯æŠŠäººç”Ÿé”™è¯¯çš„åˆ†ä¸ºäº†ä¸¤ä¸ªæç«¯, ä¸€ä¸ªæ˜¯æ­£æç«¯, ä¸€ä¸ªæ˜¯è´Ÿæç«¯, ä¸æ˜¯è¿™ä¸ªå°±æ˜¯é‚£ä¸ª, æ²¡æœ‰å…¶ä»–çš„å¯èƒ½ é‡åˆ°è¿™ç§æ—¶å€™, æˆ‘ä»¬è¦ç‰¢è®°, äººç”Ÿå¹¶ä¸æ˜¯åªæœ‰ä¸¤ç§å¯èƒ½, ä»–æ˜¯æœªçŸ¥çš„, å‘æ•£çš„, æœ‰æ— é™ç§å¯èƒ½, æ¯ç§éƒ½å¯èƒ½å®ç° æˆ‘é«˜è€ƒå¤±è´¥äº†, æˆ‘è¿™è¾ˆå­å®Œäº† é«˜è€ƒå¤±è´¥äº†å¯ä»¥é‡æ–°å¤è¯», æˆ–è€…é€‰æ‹©å…¶ä»–å­¦æ ¡, ä¸æ˜¯è€ƒä¸ä¸Šäººç”Ÿå°±å‡‰äº† æˆ‘å¤±æ‹äº†, æˆ‘è¦å•èº«ä¸€è¾ˆå­äº† å¤±æ‹äº†å¯ä»¥å†è°ˆæ‹çˆ±, ä¸æ˜¯è¿™æ¬¡æ²¡è°ˆå¥½å°±ä¸€è¾ˆå­å•èº« å½“æˆ‘ä»¬æ„è¯†åˆ°äº†å¤šç§å¯èƒ½æ€§æ—¶, æˆ‘ä»¬å°±èƒ½ä»ç‰›è§’å°–ä¸­é’»å‡ºæ¥, ä¼šå‘ç°äººèº«å…¶å®ä¸å­˜åœ¨ç»å¢ƒ, å¤„å¤„éƒ½æœ‰è½¬æœº äº‹å®æ–­è¨€ åœ¨æé—®çš„è¿‡ç¨‹ä¸­, æˆ‘ä»¬é‡åˆ°çš„æ‰€æœ‰çš„æ¨ç†è®ºè¯, å‡ ä¹éƒ½æ¶µç›–äº†ä»¥ä¸‹ä¸‰æ–¹é¢å†…å®¹ è¿‡å»æ˜¯ä»€ä¹ˆæ · ç°åœ¨æ˜¯ä»€ä¹ˆæ · å°†æ¥æ˜¯ä»€ä¹ˆæ · è¿™äº›çœ‹æ³•å½¢å¼ä¸ä¸€, æœ‰å¯èƒ½æ˜¯å‡è®¾, æœ‰å¯èƒ½æ˜¯ç†ç”±, ä¹Ÿæœ‰å¯èƒ½æ˜¯ç»“è®º. ä½†æ˜¯è¯´è¯è€…çš„ç›®çš„éƒ½æ˜¯è®©ä½ ç›¸ä¿¡ä»–çš„ç»“è®º åœ¨é€»è¾‘å­¦ä¸Š, è¿™ç§è¢«ç§°ä¹‹ä¸ºäº‹å®æ–­è¨€ å½“é¢å¯¹ äº‹å®æ–­è¨€, æˆ‘ä»¬ä¸è¦ç«‹åˆ»çš„é€‰æ‹©ç›¸ä¿¡, è¦å…ˆå»åˆ†æ, çœ‹çœ‹è¿™ä¸ªç»“è®ºæ˜¯å¦æœ‰ç–æ¼ å¦‚æœéœ€è¦éªŒè¯ äº‹å®æ–­è¨€, éœ€è¦å®Œæˆå‡ ä¸ªé—®é¢˜ æˆ‘ä¸ºä»€ä¹ˆè¦ç›¸ä¿¡ä»– æ˜¯å¦éœ€è¦è¯æ®æ¥è¯å®è¿™ä¸ªæ–­è¨€ è¯æ®çš„æ•ˆåŠ›å¯é å— å¦‚æœè¿™ä¸ªæ–­è¨€ç¼ºä¹æœ‰åŠ›çš„è¯æ®, é‚£ä¹ˆè¿™ä¸ªæ–­è¨€å°±æ˜¯ å­¤ç«‹æ–­è¨€, å› ä¸ºä»–æ²¡æœ‰ç»™å‡ºè¯æ®, å› æ­¤æˆ‘ä»¬å¿…ç„¶è¦æ€€ç–‘ å­¤ç«‹æ–­è¨€ çš„å¯é æ€§, å‘å¯¹æ–¹è¿›ä¸€æ­¥æ±‚è¯ æœ‰æ—¶å€™, äº‹å®æ–­è¨€çš„çœŸå®ä¸å¦ä¸ä¸ªäººçš„æ„Ÿè§‰æ— å…³, æ¯”å¦‚ â€œå¤§éƒ¨åˆ†çš„ç¾å›½è®®å‘˜éƒ½æ˜¯ç”·æ€§â€ å¯èƒ½çœ‹èµ·æ¥æ›´åŠ çœŸå®, è€Œ â€œç»ƒä¹ ç‘œä¼½å¯ä»¥é™ä½ç™Œç—‡â€ çœ‹èµ·æ¥ä¸é‚£ä¹ˆçœŸå® æ‰€ä»¥å¯¹äºå¤§éƒ¨åˆ†çš„æ–­è¨€æ¥è®², è¦è¯æ˜ä»–æ˜¯å¯¹çš„, è¿˜æ˜¯é”™çš„, æ˜¯ä¸€ä»¶å¾ˆå›°éš¾çš„äº‹æƒ… é€šå¸¸æ¥è®², æŸä¸ªæ–­è¨€çš„è¯æ®è¶Šå¤š, è´¨é‡è¶Šé«˜, ä»–çš„å¯ä¿¡åº¦å°±è¶Šé«˜, æˆ‘ä»¬ä¹Ÿå°±è¶Šèƒ½æŠŠè¿™ç§æ–­è¨€ç§°ä¹‹ä¸º\"äº‹å®\", é‚£ä¹ˆæ€ä¹ˆæ ·æ¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šæ–­è¨€çš„å¯é æ€§, æˆ‘ä»¬å¯ä»¥å€ŸåŠ©æé—®æ¥å®ç° æˆ‘ä»¬å¯ä»¥å‘é˜é‡Šè€…æé—® ä½ çš„è¯æ®æ˜¯ä»€ä¹ˆ ä½ æ€ä¹ˆçŸ¥é“ä»–æ˜¯çœŸçš„ ä½ æœ‰ä»€ä¹ˆè¯æ® ä½ ä¸ºä»€ä¹ˆç›¸ä¿¡ä»– ä½ èƒ½ç¡®å®šä»–æ˜¯çœŸçš„å— ä½ å¯ä»¥è¯æ˜å— è¿™äº›é—®é¢˜è¦æ±‚é˜é‡Šè€…è¿›ä¸€æ­¥è§£é‡Šè¿™äº›æ–­è¨€çš„è¯æ®, ä»¥è¯æ˜å‡†ç¡®æ€§, å¦‚æœä»–èƒ½å¤§æ–¹çš„ç«‹åˆ»çš„å›ç­”ä½ çš„é—®é¢˜, å¤§æ¦‚ç‡æ˜¯æŒæ¡äº†è¶³å¤Ÿçš„è¯æ® è€Œé¡¾å·¦å³è€Œè¨€ä»–, å›é¿é—®é¢˜çš„äºº, ä½ å°±è¦ç•™æ„è¿™ä¸ªæ–­è¨€çš„å‡†ç¡®æ€§äº†, å› ä¸ºå¾ˆå¯èƒ½ä»–æ„è¯†åˆ°äº†, è‡ªå·±æ²¡æœ‰è¶³å¤Ÿçš„è¯æ®å»è¯æ˜è‡ªå·±çš„æ–­è¨€ éšç’è¯æ®(é‡‡æ¨±æ¡ƒè°¬è¯¯) è¿™ä¸ªå¾ˆå®¹æ˜“ä¸¾ä¾‹, ç°å®ä¸­ä¹Ÿå¾ˆå¤š, æ¯”å¦‚æ¥¼ç›˜çš„é”€å”®äººå‘˜, æ€»æ˜¯å‘ä½ éšç’æˆ¿å­çš„ç¼ºç‚¹ ç§Ÿæˆ¿çš„ä¸­ä»‹ ç­‰ç­‰ åœ¨é”€å”®è¿‡ç¨‹ä¸­, ä¸šåŠ¡å‘˜ä¼šæœ‰é€‰æ‹©æ€§çš„æ‘†å‡ºè®ºæ®, æŒ‘å¯¹è‡ªå·±æœ‰åˆ©çš„è¯æ¥è¯´, è¿™å°±æ˜¯éšç’è¯æ®, ä¹Ÿå«é‡‡æ¨±æ¡ƒè°¬è¯¯(äººä»¬åªä¼šé‡‡å¥½çš„æ¨±æ¡ƒ) æ¯”å–»æœ‰é€‰æ‹©æ€§çš„è¯´è¯, åªå‘ˆç°å¥½çš„éƒ¨åˆ†, æŠŠä¸åˆ©äºè‡ªå·±çš„éƒ¨åˆ†éšè—èµ·æ¥ ä½œä¸ºæ¶ˆè´¹è€…, æˆ‘ä»¬ä¸€å®šä¸è¦è¢«é”€å”®è½»æ˜“æ‰“åŠ¨ ç­”éæ‰€é—® åœ¨æŸäº›ç‰¹æ®Šæƒ…å¢ƒä¸‹, çœŸè¯è¯´ä¸å¾—, å‡è¯ä¹Ÿè¯´ä¸å¾—, æœ€å¥½çš„åŠæ³•å°±æ˜¯ä¸è¯´. è¿™ç§è¯¡è¾©è¢«ç§°ä¸º ç­”éæ‰€é—®, å³å›ç­”é—®é¢˜æ—¶, æœ‰æ„æ— æ„çš„å›ç­”ä¸ç›¸å…³çš„é—®é¢˜ è¿™é€šå¸¸æ˜¯ä¸ºäº†åœ¨æŸäº›å°´å°¬çš„åœºåˆ, æœ‰äº›è¯ä¸æ–¹ä¾¿ç›´æ¥çš„å›ç­”, ä½†æ˜¯åˆä¸èƒ½å¤±ç¤¼, äºæ˜¯å°± ç­”éæ‰€é—®, æ¥é¿å…å°´å°¬ éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨è¯¥è¯´çœŸè¯, éœ€è¦è¡¨è¾¾æ„è§çš„æ—¶å€™, è¿˜æ˜¯è¦çœŸå®çš„è¡¨è¾¾, è¯´å‡ºç­”æ¡ˆ, å¦åˆ™å°±ä¼šè¢«è®¤ä¸ºæ˜¯è™šä¼ªç‹¡çŒ¾, è®©äººè§‰å¾—ä¸å¤ŸçœŸè¯š, ä¸å¯ä¿¡ä»» ç»å¯¹åŒ–è°¬è¯¯ è¯¡è¾©æœ¯åœ¨å¤ä»£éå¸¸ç››è¡Œï¼Œå¤å¸Œè…Šå“²å…¥è‹æ ¼æ‹‰åº•ä¹Ÿç²¾å¹²æ­¤é“ã€‚ä»–æœ‰ä¸€æ¬¡å’Œæ¬§è¥¿å¾·è¾©è®ºã€‚ è‹ï¼šâ€œå·ç›—çš„è¡Œä¸ºå¯¹ä¸å¯¹ï¼Ÿâ€ æ¬§ï¼šâ€œä¸å¯¹ã€‚â€ è‹ï¼šâ€œä¾®è¾±ä»–äººå‘¢ï¼Ÿâ€ æ¬§ï¼šâ€œä¸å¯¹ã€‚â€ è‹æ ¼æ‹‰åº•è½¬è¯­åˆé—®ï¼šâ€œä¸ºäº†è¯±æ•Œè€Œçªƒå–æ•Œç‰©ï¼Œè¿™ç§è¡Œä¸ºå¯å¯¹ï¼Ÿâ€æ¬§è¥¿å¾·çš„å¤´è„‘å¾ˆæ¸…é†’ï¼Œä¸ä¸ºè¿·æƒ‘ï¼Œç­”é“ï¼šâ€œå¯¹ã€‚â€ è‹åˆé—®ï¼šâ€œä¾®è¾±æ•Œäººå¯å¯¹ï¼Ÿâ€ æ¬§ï¼šâ€œå¯¹ã€‚â€ è‹æ ¼æ‹‰åº•äº‰è¾©è¯´ï¼šâ€œä½ åˆšæ‰è¯´å·ç›—å’Œä¾®è¾±ä»–äººæ˜¯ä¸å¯¹çš„ï¼Œéš¾é“æ•Œäººä¸æ˜¯ä»–äººå—ï¼Ÿä½ æ€ä¹ˆåˆè¯´â€™å¯¹â€™äº†å‘¢ï¼Ÿâ€ æ¬§æ°ä¸ç”˜ç¤ºå¼±ï¼Œè§£è¾©è¯´ï¼šâ€œé‚£æ˜¯å› ä¸ºå¯¹è±¡ä¸åŒã€åˆšæ‰æˆ‘è¯´çš„æ˜¯å¯¹ä»˜å‹äººï¼Œç°åœ¨è¯´çš„æ˜¯å¯¹ä»˜æ•Œäººã€‚â€ è‹æ ¼æ‹‰åº•ä¾¿ç»§ç»­é—´é“ï¼šâ€œå‡å¦‚æœ‰ä¸€åå°†å†›ï¼Œè§å…¶éƒ¨ä¸‹å£«æ°”ä½è½ï¼Œä¾¿æ¬ºéª—ä»–ä»¬ï¼è¯´æ˜¯æ•‘å…µå³å°†æ¥åˆ°ï¼Œä»è€Œé¼“èˆäº†éƒ¨å±çš„æ–—å¿—ã€ä½¿æ–—äº‰å–å¾—èƒœåˆ©ã€è¿™æ ·åšå¯¹å—ï¼Ÿâ€ æ¬§ï¼šâ€œå¯¹ã€‚â€ è‹åˆé—®ï¼šâ€œå­©å­ç”Ÿäº†ç—…å´ä¸è‚¯åƒè¯ï¼Œçˆ¶äº²å°±æ¬ºéª—å­©å­ï¼Œè¯´è¯æ˜¯ç”œçš„ã€‚ç»“æœå­©å­åƒäº†è¯æ²»å¥½äº†ç—…ï¼Œè¿™åšæ³•å¯å¯¹ï¼Ÿâ€ æ¬§ï¼šâ€œå¯¹ï¼â€ è‹æ ¼æ‹‰åº•åˆäº‰è¾©èµ·æ¥ï¼šâ€œå£«å…µå’Œå­©å­éƒ½æ˜¯è‡ªå·±äººï¼Œä½ åˆšæ‰è¯´ï¼Œä¸å¯¹çš„äº‹æƒ…åªèƒ½å¯¹æ•Œï¼Œæ€ä¹ˆåˆå¯å¯¹è‡ªå·±äººå‘¢ï¼Ÿå²‚éè‡ªç›¸çŸ›ç›¾ï¼Ÿâ€ æ¬§è¥¿å¾·æ— æ³•å›ç­”äº†ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°, æ¬§è¥¿å¾·å·²ç»è¾“äº†, ä»–æ— æ³•è‡ªåœ†å…¶è¯´ è¿™å¯ç¤ºæˆ‘ä»¬. å›ç­”é—®é¢˜å¤ªè¿‡ç»å¯¹, ä¼šè®©è‡ªå·±å¾ˆè¢«åŠ¨ æ¬§è¥¿å¾·å°±çŠ¯äº† ç»å¯¹åŒ–è°¬è¯¯ çš„é€»è¾‘è°¬è¯¯, æ²¡æœ‰å…·ä½“é—®é¢˜å…·ä½“åˆ†æ, ç»“æœè¢«å¯¹æ–¹æŠ“ä½äº†æŠŠæŸ„, æœ€ç»ˆè¾“äº†è¾©è®º ä¸–ç•Œä¸Šçš„æ‰€æœ‰äº‹æƒ…éƒ½æ˜¯æœ‰ä¸¤é¢æˆ–å¤šé¢æ€§çš„, éœ€è¦å…·ä½“é—®é¢˜å…·ä½“åˆ†æ, ç»å¯¹ä¸èƒ½ä¸€æ¦‚è€Œè®º åœ¨ä¸åŒçš„ç°è±¡, ä¸åŒçš„æ¡ä»¶ä¸‹, é’ˆå¯¹æŸä¸ªé—®é¢˜æˆ–äº‹ç‰©, æœ‰ä¸åŒçš„ç»“è®ºæ˜¯æ­£ç¡®çš„, è™½ç„¶æ˜¯ä¸åŒçš„ç»“è®º, ä½†æ˜¯ä»–ä»¬ç›¸å¯¹äºå„è‡ªæ‰€å¤„çš„äº‹ä»¶/åœ°ç‚¹/æ¡ä»¶ä¸‹æ˜¯æ­£ç¡®çš„ åœ¨ç”Ÿæ´»ä¸­, æˆ‘ä»¬è¦æ‹¥æœ‰è¾©è¯çš„æ€ç»´, å¯¹å¾…ä¸åŒçš„äº‹ç‰©, ä¸ä½†è¦å…·ä½“åˆ†æ, è¿˜è¦è¾©è¯åˆ†æ, å°±ç®—æ˜¯çœŸç†ä¹Ÿä¸ä¸€å®šæ”¾ä¹‹å››æµ·è€Œçš†å‡† äºŒéš¾è¯¡è¾©æœ¯ æ™®ç½—å¡”å“¥æ‹‰æ‚–è®º_ç™¾åº¦ç™¾ç§‘ (baidu.com) åœ¨è¿™åœºè¾©è®ºä¸­, åŒæ–¹éƒ½ä½¿ç”¨äº† äºŒéš¾è¯¡è¾©æœ¯ äºŒéš¾è¯¡è¾©æœ¯ æŒ‡çš„æ˜¯è¾©è®ºè¿‡ç¨‹ä¸­, åªåˆ—å‡ºä¸¤ç§å¯èƒ½æ€§, æ­¤å¤–åˆ«æ— é€‰æ‹©, è¿«ä½¿è®ºæ•Œä»ä¸­åšå‡ºé€‰æ‹©. æ— è®ºå¯¹æ–¹é€‰æ‹©å“ªä¸€ç§å¯èƒ½æ€§, éƒ½å¯¹ä»–ä¸ç†. è¿™å°±è¿«ä½¿æ•Œäººè¿›å…¥è¿›é€€ä¸¤éš¾çš„å¢ƒåœ°. ä»è€Œè½å…¥è‡ªå·±çš„æ§åˆ¶ä¹‹ä¸­. äºŒéš¾è¯¡è¾©æœ¯çš„ä¸¤ç§å¯èƒ½æ€§, å…¨éƒ¨éƒ½æ˜¯è™šå‡çš„, å‰åæ²¡æœ‰å¿…ç„¶çš„è”ç³», è¿™ä¸ªå‡è®¾çš„è®¾ç½®, éƒ½æ˜¯è¯¡è¾©è€…å‡ºäºè‡ªå·±çš„åˆ©ç›Šå‡ºå‘çš„. ç›®çš„æ˜¯è®©æ•Œäººé™·å…¥è¿›é€€ä¸¤éš¾çš„å¢ƒåœ°. è¾©è®ºçš„åŒæ–¹, ä»–ä»¬çš„ç«‹è®ºéƒ½æ˜¯é”™è¯¯çš„, å› ä¸ºä»–ä»¬éƒ½è¿èƒŒäº† â€œåŒä¸€å¾‹â€ åŸåˆ™, åŒæ—¶æ¦‚å¿µå’Œåˆ¤æ–­æ··ä¹±, ä»è€Œå¯¼è‡´æ˜¯éä¸åˆ†, æ‰€ä»¥å°±æ˜¯è¯¡è¾©. å…³äºä¸Šé¢çš„æ¡ˆä¾‹, å¯¹äº æ¬§æå‹’å£« æ¥è¯´ å¦‚æœæˆ‘æ‰“èµ¢äº†è¿™åœºå®˜å¸, æŒ‰ç…§æ³•é™¢åˆ¤å†³, æˆ‘ä¸åº”è¯¥æ”¯ä»˜å¦ä¸€åŠå­¦è´¹ å¦‚æœæˆ‘è¾“äº†è¿™åœºå®˜å¸, æŒ‰ç…§åˆåŒè§„å®š, æˆ‘ä¸åº”è¯¥æ”¯ä»˜å¦ä¸€åŠå­¦è´¹ å¯¹äº æ™®ç½—å¡”å“¥æ‹‰ æ¥è¯´ å¦‚æœæ¬§æå‹’å£«æ‰“èµ¢äº†, æŒ‰ç…§åˆåŒ, ä»–åº”è¯¥æ”¯ä»˜æˆ‘å¦ä¸€åŠå­¦è´¹ å¦‚æœæ¬§æä¹å£«æ‰“è¾“äº†, æŒ‰ç…§åˆ¤å†³, ä»–åº”è¯¥æ”¯ä»˜æˆ‘å¦ä¸€åŠå­¦è´¹ ä½†æ˜¯å¯¹äº æ¬§æå‹’å£« æ¥è¯´, ä»–çš„å‰ææ˜¯ä¸çœŸå®çš„, æ¨å¯¼ä¸å‡ºç»“è®º, å› ä¸ºè¿™ä¸ªå®˜å¸çš„èƒœè¯‰ä¸è´¥è¯‰çš„åŒºåˆ«åœ¨äºç»™ä¸ç»™æ”¯ä»˜å¦ä¸€åŠå­¦è´¹. å¦‚æœä»–è¾“æ‰äº†å®˜å¸, å°±å¿…é¡»éœ€è¦æ”¯ä»˜å¦ä¸€åŠå­¦è´¹, ä¸ç„¶çš„è¯, è´¥è¯‰çš„\"ç€åŠ›ç‚¹\"åœ¨å“ª? å¯¹äº æ™®ç½—å¡”å“¥æ‹‰ æ¥è¯´, å®ƒçš„å‰æä¹Ÿæ˜¯ä¸çœŸå®çš„, å› ä¸ºå‰ä»¶ä¸åä»¶ä¸å­˜åœ¨å¿…ç„¶çš„è”ç³», æ¬§æå‹’å£«æ‰“èµ¢äº†å®˜å¸, ä¸æ”¯ä»˜å¦ä¸€åŠå­¦è´¹æ²¡æœ‰å¿…ç„¶çš„è”ç³», å› ä¸ºåˆåŒè§„å®šæ¬§æå‹’å£«ç¬¬ä¸€æ¬¡å‡ºåº­æ‰“èµ¢å®˜å¸, æŒ‡çš„æ˜¯ä»–ä»¥å¾‹å¸ˆçš„èº«ä»½, è€Œè¿™æ¬¡æ˜¯ä»¥è¢«å‘Šçš„èº«ä»½ è¿™åŒæ–¹çš„äºŒéš¾æ¨ç†, é‡‡å–çš„æ˜¯ä¸åŒçš„æ ‡å‡†: ä¸€ä¸ªæ˜¯æ³•é™¢åˆ¤å†³, ä¸€ä¸ªæ˜¯åˆåŒè§„å®š. ä¸¤ä¸ªæ ‡å‡†å„æœ‰åˆ©å¼Š, ä»–ä»¬éƒ½ä»ä¸ºè‡ªå·±æœ‰åˆ©çš„æ ‡å‡†ä¸ºè‡ªå·±è¯¡è¾©, æ‰€ä»¥æ‰ä¼šå¾—å‡ºé’ˆé”‹ç›¸å¯¹çš„ç»“è®º. å¦‚æœä»–ä»¬éƒ½ä½¿ç”¨åŒä¸€ä¸ªæ ‡å‡†, é‚£æ¡ˆå­å°±ä¸å¤æ‚äº†. ç ´è§£è¿™ç§è¯¡è¾©å¯ä»¥é‡‡ç”¨ä¸‰ç§è§’åº¦ æŒ‡å‡ºå¯¹æ–¹çš„å‡è®¾å‰ææ˜¯è™šæ‹Ÿçš„, ä¸ç°å®çš„ ä¸æ­£é¢å›ç­”å¯¹æ–¹çš„é—®é¢˜ ä»¥å…¶äººä¹‹é“, è¿˜å…¶äººä¹‹èº« ç®€åŒ–å› æœå…³ç³» å¯¼è‡´å¤§é‡äººå‘˜æ­»äº¡çš„åŸå› æ˜¯åœ°éœ‡ å¤§é›ªå¯¼è‡´äº†é“è·¯äº¤é€šçš„ç˜«ç—ª å°±æ¯”å¦‚è®ºç‚¹1, ä½ å¯ä»¥è¯´ç›´æ¥åŸå› æˆ–è€…æœ€ä¸»è¦çš„åŸå› æ˜¯åœ°éœ‡, ä½†æ˜¯å¿½ç•¥äº†å…¶ä»–åŸå› , æ¯”å¦‚è¯´æˆ¿å­çš„ç‰¢å›ºæ€§ç­‰ç­‰ åœ¨å¯¹æŸä»¶äº‹æƒ…è¿›è¡Œè§£é‡Šæ—¶, å¼ºè°ƒè®¸å¤šå› ç´ çš„æŸä¸€ä¸ªæˆ–å¤šä¸ªå› ç´ , å°±çŠ¯äº†è¿‡åº¦ç®€åŒ–å› æœçš„è°¬è¯¯ æ•…æ„æ›²è§£ æ˜æ˜çŸ¥é“å¯¹æ–¹çš„æ„æ€, å´æ•…æ„æ›²è§£æˆå¦ä¸€ä¸ªæ„æ€, é€ æˆæ¦‚å¿µæˆ–è¯é¢˜è½¬ç§», ä»¥ä¾¿è¾¾æˆè‡ªå·±çš„ç›®çš„, è¿™å°±æ˜¯æ•…æ„æ›²è§£ æ•…æ„æ›²è§£æ˜¯ä¸€ç§è¯¡è¾©æŠ€å·§, æŠŠå¯¹è‡ªå·±ä¸åˆ©çš„è¯è¯­è½¬æˆå¯¹è‡ªå·±æœ‰åˆ©çš„æ„æ€. ä½†æœ‰æ—¶å€™, é¢å¯¹è‡ªå·±æ— æ³•å›ç­”, ä¸èƒ½å›ç­”çš„é—®é¢˜, ä¹Ÿå¯ä»¥ä½¿ç”¨æ•…æ„æ›²è§£çš„æ–¹å¼æ¥å›åº”, è¿™æ ·å¯ä»¥ç¼“å’Œæ°”æ°› å‘½åè°¬è¯¯ ä»–ä¸ºä»€ä¹ˆè„¸è‰²ä¸å¥½? å› ä¸ºä»–å¿ƒæƒ…ä¸å¥½ è¿™ä¸€é—®ä¸€ç­”, è¡¨é¢ä¸Šçœ‹èµ·æ¥æ˜¯åœ¨æ²Ÿé€š, å®é™…ä¸Šä»€ä¹ˆå®é™…æ€§çš„å†…å®¹ä¹Ÿæ²¡æœ‰è¯´, è„¸è‰²ä¸å¥½ä¸å¿ƒæƒ…ä¸å¥½æœ¬æ¥å°±æ˜¯åŒä¸€ä¸ªæ„æ€, é€šè¿‡è´´æ ‡ç­¾æˆ–è€…å‘½åçš„æ–¹å¼æ¥æè¿°å‘ç”Ÿçš„äº‹å®, ä»¥æ©ç›–è¯´è¯è€…æ— çŸ¥çš„æƒ…å†µ, è¢«ç§°ä¸ºå‘½åè°¬è¯¯ å‘½åè°¬è¯¯å¾ˆå®¹æ˜“è®©äººäº§ç”Ÿé”™è§‰, è®¤ä¸ºè¯´è¯è€…çŸ¥é“åŸå› , å®é™…ä¸Š, è¯´è¯è€…åªä¸è¿‡æ˜¯æ¢ä¸ªè¯´è¯é‡å¤é—®é¢˜ åŒè¯­é‡å¤ å°æ˜æ˜¯å°æ˜çˆ¸çˆ¸çš„å„¿å­ ä¸å‘½åè°¬è¯¯å·®ä¸å¤š, è¿™ç§å±äºåœ¨ä¸‹å®šé¡¹ä¸­ç›´æ¥ä½¿ç”¨äº†è¢«å®šä¹‰çš„æ¦‚å¿µ, äº’ç›¸å¥—å¨ƒ, ç­‰äºæ²¡è¯´, è€Œä¸”æ— æ³•è¯æ˜ä»€ä¹ˆ ä¸€å¢æƒ…æ„¿ å¿«è¿‡èŠ‚äº†, è¶…å¸‚çš„å•†å“è‚¯å®šä¼šæœ‰å¤§çš„æŠ˜æ‰£ è¿™å¥è¯æ˜¯ç»å¯¹æ­£ç¡®çš„å—? ä¸ä¸€å®š é€»è¾‘å­¦ä¸Šçš„ä¸€å¢æƒ…æ„¿, æ˜¯ä¸€ç§å¸¸è§çš„è°¬è¯¯. æŒ‡çš„æ˜¯äººæ€»æ˜¯è®¤ä¸ºäº‹ç‰©å’Œäººæ€»æ˜¯æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•æ¥è¿è¡Œ, ç›¸ä¿¡è‡ªå·±æ„¿æ„ç›¸ä¿¡çš„äº‹æƒ…, ç›¸ä¿¡è®©è‡ªå·±å¿«ä¹çš„äº‹æƒ…. è¿™æ ·åªä¼šè®©è‡ªå·±é€ƒé¿ç°å®, å›é¿çœŸç›¸, å¯¹æˆé•¿æ²¡æœ‰ä»»ä½•å¥½å¤„ åŒºç¾¤è°¬è¯¯ ç”·åŒèƒéƒ½å–œæ¬¢è¶³çƒ ä»…ä»…åŸºäºç¾¤ä½“çš„ç»Ÿè®¡æ•°æ®, å°±å¯¹å…¶ä¸‹å±çš„ä¸ªä½“æ€§è´¨å¾—å‡ºç»“è®º, åŒºç¾¤è°¬è¯¯å‡è®¾äº†ç¾¤ä½“ä¸­çš„æ‰€æœ‰ä¸ªä½“éƒ½æ‹¥æœ‰ç¾¤ä½“çš„æ€§è´¨, æ˜¯ä»¥åæ¦‚å…¨ ç›´è§‰æ€ç»´ ä»–è‚¯å®šæœ‰ä»€ä¹ˆäº‹æƒ…ç’ç€æˆ‘, æˆ‘çš„ç›´è§‰ä¸€å‘å¾ˆå‡† å¯¹æŸä»¶äº‹æƒ…æ²¡æœ‰ç»è¿‡åˆ†æ, ä»…ä»…æ ¹æ®ç›´è§‰å°±ä¸‹å®šè®º. ä»é€»è¾‘ä¸Šæ¥è®², ç›´è§‰æ˜¯æ— æ³•ä½œä¸ºè®ºæ®çš„, å› ä¸ºä»–æ²¡æœ‰å¯ä¿¡åº¦å’Œè¯´æœåŠ› åªæœ‰ç»è¿‡è¯æ˜çš„ç›´è§‰, æ‰èƒ½ä½œä¸ºè®ºæ® é¢„æœŸç†ç”± è¿™è¾†è½¦é©¬ä¸Šè¦æ¶¨ä»·äº†, ç°åœ¨ä¹°æœ€åˆ’ç®— è¿™é‡Œå°†æ²¡æœ‰å‘ç”Ÿçš„äº‹æƒ…æ‹¿æ¥ä½œä¸ºè®ºæ®, è¿™å°±æ˜¯é¢„æœŸç†ç”±çš„è°¬è¯¯ æŒ‡åœ¨è¯æ˜æˆ–åé©³ä¸€ä¸ªè§‚ç‚¹æ—¶, æŠŠçœŸå®æ€§æœ‰å¾…éªŒè¯çš„åˆ¤æ–­ä½œä¸ºè®ºæ®, ä¸å…·æœ‰å¯ä¿¡åº¦å’Œè¯´æœåŠ› å·§åˆè°¬è¯¯ è§æ•¬è…¾çœŸçš„æ˜¯é›¨ç¥å—? è¿™å¥è¯åªæ˜¯è°ƒä¾ƒ, å¦‚æœæ˜¯å½“æˆçœŸçš„, å°±çŠ¯äº†å·§åˆè°¬è¯¯ å·§åˆä¸å¶ç„¶ä¸ç­‰äºå¿…ç„¶, è¦æ‰¾å‡ºç»“è®ºä¸ç°è±¡ä¹‹é—´çš„å¿…ç„¶æ€§, è¿˜æ˜¯è¦æ·±å…¥çš„ç ”ç©¶èƒŒåçš„åŸå›  å› æœå€’ç½® ç»™æ‡’æƒ°çš„äººå‘ä¸¤å¤´ç‰›, ä»–ä»¬å°±å‹¤å¥‹äº† è¿™å°±æ˜¯å› æœå€’ç½®çš„è°¬è¯¯, å¹¶ä¸æ˜¯ç»™æ‡’æƒ°çš„äººå‘ä¸¤å¤´ç‰›å°±å‹¤å¥‹äº†, è€Œæ˜¯å‹¤å¥‹äº†ä¼šæ‹¥æœ‰è‡ªå·±çš„ç‰› å›å½’è°¬è¯¯ Aè€ƒè¯•, ç¬¬ä¸€æ¬¡è€ƒäº†100åˆ†, ç¬¬äºŒæ¬¡è€ƒäº†90åˆ†, è¢«éª‚ä¹‹ååˆè€ƒäº†100, æ‰€ä»¥éª‚ä¼šè®©äººè¿›æ­¥ è¿™å°±æ˜¯å›å½’è°¬è¯¯, ä»ç»Ÿè®¡å­¦ä¸Šçœ‹, äº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡éƒ½æ˜¯å›´ç»•ä¸€ä¸ªå‡å€¼æ¥å›æ³¢åŠ¨çš„, å¦‚æœå¿½è§†äº†è¿™ä¸ªç‰¹ç‚¹, å°±ä¼šå¾—å‡ºé”™è¯¯çš„ç»“è®º è¿™é‡Œçš„A, è€ƒè¯•çš„åˆ†æ•°ä¸è¢«ä¸è¢«éª‚æ²¡æœ‰å¿…è¦çš„è”ç³», Açš„æ°´å¹³å°±æ˜¯90-100ä¹‹é—´, æ¥å›æ³¢åŠ¨æ˜¯æ­£å¸¸çš„, å› ä¸ºæŒ¨éª‚å’Œå¾—åˆ†å°±å¾—å‡ºæ¥éª‚ä¼šè®©äººåŠ åˆ†çš„ç»“è®ºç®€ç›´ç¦»è°± æ¨ä¸å‡ºæ¥ ä¸ºä»€ä¹ˆæŠŠå­©å­æ‰”è¿›æ°´é‡Œ? ä»–çš„çˆ¶äº²æ“…é•¿æ¸¸æ³³ è¿™ä¸¤è€…ä¹‹é—´å¹¶æ²¡æœ‰å¿…ç„¶çš„è”ç³», ç”±çˆ¶äº²ä¼šæ¸¸æ³³, å°±æ¨å€’å‡ºå­©å­ä¹Ÿä¼šå®åœ¨æ˜¯å¤ªç‰µå¼º è¿™å°±æ˜¯æ¨ä¸å‡ºæ¥çš„è°¬è¯¯","link":"/2021/09/04/introduction_logic(45-66)/"},{"title":"é€»è¾‘å­¦å…¥é—¨(23-44)","text":"ä¹¦ç±ä¿¡æ¯ ä¹¦å: é€»è¾‘å­¦å…¥é—¨ ä½œè€…: æ ¼æ¡‘ å‡ºç‰ˆ: ä¸­å›½çººç»‡å‡ºç‰ˆç¤¾ æ­£æ–‡ é‡å¤è°è¨€ ä¸‰äººæˆè™çš„æ•…äº‹ ä¼—äººçš„è¨€è®ºå¾€å¾€èƒ½æ··æ·†æ˜¯é, â€œè°è¨€é‡å¤ä¸€åƒéå°±æ˜¯çœŸç†â€ ï¼Œä¸æ–­åœ°é‡å¤ä¸€ä¸ªè™šå‡çš„è§‚ç‚¹ï¼Œå°±ç®—æ²¡æœ‰è¿›ä¸€æ­¥æä¾›è®ºè¯æˆ–æ”¯æŒï¼Œä¹Ÿå¯ä»¥å‰Šå¼±è®ºæ•Œçš„åé©³ï¼Œå› ä¸ºä¸æ–­åœ°é‡å¤ä¼šå¢åŠ é€»è¾‘çš„åˆç†æ€§ï¼Œè®©äººè¯¯ä»¥ä¸ºäº‹å®å°±æ˜¯é‚£æ ·ã€‚ ä½†æ˜¯è¦ç‰¢è®°çš„æ˜¯ï¼Œè°è¨€æ°¸è¿œä¸èƒ½å˜æˆçœŸç†ï¼Œå“ªæ€•é‡å¤ä¸€ä¸‡éä¹Ÿæ˜¯å¦‚æ­¤ï¼Œè°è¨€é‡å¤å†å¤šæ¬¡ä¹Ÿä¸äº‹å®æ— å…³ï¼Œè°è¨€æ°¸è¿œæ— æ³•å˜æˆæ­£ç¡®çš„é€»è¾‘ å¼ºåˆ¶æ¨ç† æœ‰äº›äººï¼Œçœ‹è§åˆ«äººæœ‰é’±ï¼Œå°±è¯´ï¼šâ€œè¿™ä¸ªäººï¼Œè‚¯å®šæ˜¯å¹²äº†åäº‹æ‰æŒ£åˆ°è¿™ä¹ˆå¤šé’±â€ ä¹‹ç±»çš„è¯è¯­ å¼ºåˆ¶æ¨ç†ï¼Œå³å°†ä¸åŒçš„äº‹ç‰©é”™è¯¯çš„å‹‰å¼ºçš„è”ç³»åœ¨ä¸€èµ·ï¼Œä»è€Œå¾—å‡ºç»“è®ºã€‚çœ‹ä¼¼æ˜¯ç»“è®ºï¼Œå…¶å®æ¯«æ— æ„ä¹‰ï¼Œå®Œå…¨æ˜¯æ­ªæ›²äº‹å®ã€‚ æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæœ‰é’±ä¸å¹²åäº‹å¹¶æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œå´è¢«æœ‰äº›äººå¼ºè¡Œçš„è”ç³»åˆ°ä¸€èµ·ã€‚å°†ä¸¤ä¸ªä¸ç›¸å…³çš„äº‹åŠ¡å¼ºè¡Œè”ç³»åˆ°ä¸€èµ·ï¼Œå¾—å‡ºæ¥çš„ç»“è®ºè‡ªç„¶æ˜¯è°¬è¯¯ã€‚ çœŸæ­£ç†æ€§çš„æ˜¯,å®¢è§‚çš„è§‚å¯Ÿå’Œæ€»ç»“äº‹ç‰©çš„å…³ç³», ä¸æºåŠ ä¸»è§‚çœ‹æ³•, ä¸æŠŠæ²¡æœ‰é€»è¾‘çš„äº‹åŠ¡è”ç³»åˆ°ä¸€èµ· å› æœæ··æ·† ç ”ç©¶å‘ç°, è¶Šæ˜¯æˆåŠŸäººå£«, ç¡çœ æ—¶é—´è¶ŠçŸ­ ç ”ç©¶å‘ç°, å»åŒ»é™¢è¶Šå¤š, è¶Šå®¹æ˜“ç”Ÿç—… è®¸å¤šäººå–œæ¬¢æŠŠ â€œæ¥è¿å‘ç”Ÿâ€ çš„äº‹æƒ…å¼•ä¸ºç¯ç¯ç›¸æ‰£,äº’ä¸ºå› æœ. è¿™ç§æ€è€ƒæ–¹æ³•æ˜¯é”™è¯¯çš„, å±äº å› æœæ··æ·† çš„è°¬è¯¯. äº‹ç‰©ä¹‹é—´æœ‰ç›¸å…³æ€§, å¹¶ä¸èƒ½è¯æ˜ä»–ä»¬ä¹‹é—´å­˜åœ¨å› æœå…³ç³». è€Œæœ‰æ—¶å€™, ä¸¤è€…ä¹‹å‰çš„å…³ç³»æ°æ°ç›¸å, æˆ–è€…ä¸¤è€…ä¹‹é—´å¹¶æ²¡æœ‰å…³ç³» æˆ‘ä»¬åœ¨åˆ†æäº‹ç‰©æ—¶ä¸€å®šè¦è°¨æ…, ä¸èƒ½æŠŠå·§åˆçš„ç›¸å…³å…³ç³»è§†ä¸ºå› æœå…³ç³», å¦åˆ™çš„è¯å°±ä¼šå¾—å‡ºé”™è¯¯çš„ç»“è®º æƒ¯æ€§æ€ç»´ äººç±»æ— æ³•æŠ—æ‹’çš„åå¤§å¿ƒç†ä¹‹ä¸€, é¸Ÿç¬¼å¿ƒç† äººä»¬åœ¨é‡åˆ°é—®é¢˜æ—¶, é€šå¸¸éƒ½ä¼šå…ˆå…¥ä¸ºä¸»çš„æŒ‰ç…§è‡ªå·±ç†Ÿæ‚‰çš„æŸä¸ªæ–¹å‘æˆ–é€”å¾„å»è”æƒ³, æŠŠè‡ªå·±é‡åˆ°çš„é—®é¢˜çº³å…¥è‡ªå·±ç†Ÿæ‚‰çš„æ¡†æ¶å†…è¿›è¡Œåˆ†æ, ä»è€Œè®©æ€ç»´å½¢æˆæƒ¯æ€§, ä¹Ÿå°±æ˜¯æƒ¯æ€§æ€ç»´. å°±æ¯”å¦‚é¸Ÿç¬¼å¿ƒç†, äººä»¬ä¹ æƒ¯çš„è®¤ä¸º, åªæœ‰é¸Ÿæ‰ç”Ÿæ´»åœ¨é¸Ÿç¬¼é‡Œ. å®¶é‡Œæœ‰é¸Ÿç¬¼å°±è¯æ˜ä¹‹å‰å…»è¿‡é¸Ÿ. ä¸è¦ç”¨æƒ¯æ€§æ€ç»´å»çœ‹å¾…ç”Ÿæ´»ä¸­çš„é—®é¢˜, å¶å°”å°è¯•çªç ´é¸Ÿç¬¼å¿ƒç†, è¿›è¡Œå‘æ•£æ€§çš„æ€ç»´, ä¹Ÿè®¸æˆ‘ä»¬å°±ä¼šå‘ç°é¸Ÿç¬¼å¤–æœ‰å¦ä¸€ä¸ªä¸–ç•Œ è¯‰è¯¸å‡ºç”Ÿ é¾™ç”Ÿé¾™, å‡¤ç”Ÿå‡¤, è€é¼ çš„å„¿å­ä¼šæ‰“æ´ æœ‰äº›å­å¥³ä¸å…¶çˆ¶æ¯åœ¨æŸç§è¡Œä¸ºæˆ–æ€§æ ¼ä¸Šå­˜åœ¨ç›¸ä¼¼æ€§, ä½†æ˜¯ä¸è¦è¿‡åº¦çš„ â€œè¿·ä¿¡â€ è¿™å¥è¯, ç”šè‡³å°†å…¶ä½œä¸ºæ¨æ–­ä¸€ä¸ªäºº é“å¾·/å“è¡Œ/èƒ½åŠ›/æˆå°± çš„ä¾æ®, è¿™å°±çŠ¯äº†è¯‰è¯¸å‡ºç”Ÿçš„é€»è¾‘è°¬è¯¯ æœ¬ç« ç»™å‡ºä¸¤ä¸ªçœŸå®çš„ä¾‹å­: èµµå›½åå°†èµµå¥¢/æ–°ä¸œæ–¹åˆ›å§‹äººä¿æ´ªæ• äººä»å‡ºç”Ÿå¼€å§‹, å°±ä¼šå—åˆ°æ¥è‡ª å®¶åº­/ç¤¾ä¼š/ä»–äºº ç­‰å„æ–¹é¢çš„å½±å“, è¿™äº›å½±å“å¾ˆé‡è¦, ä½†æ˜¯ç»ˆç©¶åªæ˜¯å¤–å› , è€Œéå†³å®šæ€§çš„å› ç´ , æ¯•ç«Ÿäººè¿˜æœ‰ä¸»è§‚èƒ½åŠ¨æ€§ å‡ºç”Ÿå¹¶ä¸èƒ½ä»£è¡¨ä¸€ä¸ªäººçš„å“è¡Œå’Œèƒ½åŠ›, å‡ºç”Ÿä¹Ÿæ— æ³•å†³å®šä¸€ä¸ªäººçš„å‘½è¿å’Œå‰é€”, æˆ‘ä»¬åœ¨çœ‹å¾…åˆ«äººå’Œè‡ªå·±æ—¶, ä¸€å®šä¸è¦çŠ¯è¯‰è¯¸å‡ºç”Ÿçš„é”™è¯¯ è¯‰è¯¸äººèº« æœ‰äº›å•†å®¶, å½“é¡¾å®¢å¯¹å•†å“æå‡ºå¼‚è®®æ—¶, æ¯”å¦‚\"ä¸œè¥¿æœ‰ç‚¹è´µ\", å•†å®¶å°±ç¿»è„¸, ç”¨æ¯”å¦‚ â€œä½ å¯ä»¥å»ä¹°ä¾¿å®œçš„/ä¸€çœ‹ä½ å°±æ²¡æœ‰çœ¼å…‰â€ ç­‰è¯è¯­æ¥åé©³ å•†å®¶è¿™ç§æ˜¯è¯¡è¾©, æ ¹æœ¬ä¸ç¬¦åˆé€»è¾‘, å®Œå…¨æ˜¯äººç”Ÿæ”»å‡» å¦‚æœä¸€ä¸ªäººåœ¨é©³æ–¥ä»–äººçš„è§‚ç‚¹å’Œç»“è®ºæ—¶, å¿½ç•¥äº†è®ºè¯æœ¬èº«, è€Œæ˜¯å»ç›´æ¥æ”»å‡»æå‡ºè§‚ç‚¹çš„äººæˆ–å›¢ä½“, é‚£ä»–å°±çŠ¯äº† è¯‰è¯¸äººèº« çš„è°¬è¯¯ è¯‰è¯¸äººèº«çš„è°¬è¯¯é—¨æ§›å¾ˆä½, ç”Ÿæ´»ä¸­ç»å¸¸é‡åˆ°, å…¶ä¸»è¦æœ‰ä¸¤ç§ ç›´æ¥æ€§è¯‰è¯¸äººèº«: â€œè¿™ä¸ªäººä¹‹å‰å·è¿‡ä¸œè¥¿, æ‰€ä»¥ä»–è¯´çš„è‚¯å®šæ˜¯é”™çš„â€ å¤„å¢ƒæ€§è¯‰è¯¸äººèº«: â€œä½ ä¹°äº†Aå…¬å¸çš„è‚¡ç¥¨, ä½ å½“ç„¶ä¼šè¯´Açš„è‚¡ç¥¨ä¼šæ¶¨â€ ç›´æ¥æ€§è¯‰è¯¸äººèº«æŒ‡çš„æ˜¯, å› ä¸ºæŸä¸ªäººèº«ä¸Šå­˜åœ¨æŸç§ç§¯ææˆ–æ¶ˆæçš„ç‰¹è´¨, å°±è®¤ä¸ºå…¶æƒ³æ³•æˆ–è®ºç‚¹æ˜¯é”™è¯¯çš„, è€Œé€šå¸¸ä¸€ä¸ªè®ºç‚¹æ˜¯å¦æ­£ç¡®,åœ¨äºå®ƒæ˜¯å¦ç¬¦åˆäº‹å®, æˆ‘ä»¬æ˜¯å¦ç›¸ä¿¡æŸä¸ªäººçš„çœ‹æ³•ä¸è¿™ä¸ªäººçš„è¯´æ³•æ­£ç¡®ä¸å¦æ²¡æœ‰ç›´æ¥çš„ç»‘å®šå…³ç³» å¤„å¢ƒæ€§è¯‰è¯¸äººèº«æŒ‡çš„æ˜¯, å› ä¸ºæŸä¸ªäººå¤„åœ¨æŸä¸ªå›¢ä½“ä¸­, è¿™ä¸ªå›¢ä½“ä¸å…¶æœ‰åˆ©ç›Šå…³ç³», å°±è®¤ä¸ºè¯¥äººçš„æƒ³æ³•æ˜¯ä¸å®¢è§‚/ä¸ä¸­ç«‹/ä¸ç†æ€§ çš„, äº‹å®ä¸Š, å½“æˆ‘ä»¬è€ƒè™‘æŸä¸ªäººçš„è®ºç‚¹æ—¶, å¯ä»¥å»è€ƒè™‘æ˜¯å¦ä¸æŸäººæœ‰åˆ©ç›Šå…³ç³», ä½†æ˜¯æŸäººçš„å¤„å¢ƒå’Œåˆ©ç›Šå…³ç³»å¹¶ä¸èƒ½ç›´æ¥åˆ¤æ–­è¿™ä¸ªäººçš„è®ºç‚¹ä¸ºä¸çœŸå®çš„/é”™è¯¯çš„ æˆ‘ä»¬åœ¨è¾©è®ºæŸä¸ªè§‚ç‚¹æ—¶, åˆ‡è®°è¦å¯¹äº‹ä¸å¯¹äºº, å¦‚æœé­åˆ°äº†è¯‰è¯¸äººèº«çš„é—®é¢˜, ä¸å¿…å†äº‰è®ºä¸‹å», ç›´æ¥è¿œç¦»å³å¯ å¾ªç¯è®ºè¯ A: â€œä½ ä¸ºä»€ä¹ˆè¿™ä¹ˆèƒ–â€ B: â€œå› ä¸ºæˆ‘åƒå¾—å¤šâ€ A: â€œä½ ä¸ºä»€ä¹ˆåƒè¿™ä¹ˆå¤šâ€ B: â€œå› ä¸ºæˆ‘èƒ–â€ å¾ªç¯è®ºè¯, å³ç”¨æ¥è¯æ˜è®ºé¢˜çš„è®ºæ®æœ¬èº«çš„çœŸå®æ€§éœ€è¦é è®ºé¢˜æ¥è¯æ˜, å°±ä»¥ä¸Šé¢ä¸ºä¾‹, Aæœ€åä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆèƒ– ä¸ºä»€ä¹ˆä¼šå‡ºç°å¾ªç¯è®ºè¯çš„è°¬è¯¯, å½’æ ¹ç»“åº•æ˜¯åœ¨è®ºè¯è¿‡ç¨‹ä¸­, å°†è®ºè¯çš„å‰æå½“æˆäº†è®ºè¯çš„ç»“è®º, æ­¤ä¸º å…ˆå®šç»“è®º. å…ˆé¢„è®¾å‰æ x, æ±‚å‡º y, å†ç”¨ y å»è¯æ˜ x æ­£ç¡®. å½“ç„¶, å¾ªç¯è®ºè¯åœ¨é€»è¾‘ä¸Šæ˜¯è¯´å¾—é€šçš„, å› ä¸ºxå¯ä»¥æ±‚å‡ºy, æ‰€ä»¥yå¯ä»¥åæ¨åˆ°x, ä½†æ˜¯å› ä¸ºç»“è®ºå¯èƒ½ä¸å‰è®¾å®Œå…¨ç›¸åŒ, æ‰€ä»¥ç»“è®ºå¹¶ä¸æ˜¯å…¶å‰è®¾çš„æ¨è®º åœ¨è®ºè¯çš„è¿‡ç¨‹ä¸­, æ‰€æœ‰å¾ªç¯è®ºè¯éƒ½å¿…é¡»å‡è®¾å…¶å‘½é¢˜æˆç«‹ å³xæ¨å‡ºæ¥çš„ä¸€å®šæ˜¯y, æ‰€ä»¥å¾ªç¯è®ºè¯æœ¬èº«å¹¶ä¸èƒ½è¯æ˜ä»€ä¹ˆ, ä»–åªä¸è¿‡æ˜¯å›é¿é—®é¢˜çš„æ‰‹æ®µ ç¨»è‰äººè°¬è¯¯ åŠ³åŠ¨äººæ°‘ä¼šåœ¨ç”°åœ°é‡Œæ’ä¸Šä¸€ä¸ªç¨»è‰äºº, ç›®çš„æ˜¯æ¬ºéª—å¹¶å“èµ°åŠ¨ç‰© ç¨»è‰äººè°¬è¯¯, æŒ‡çš„æ˜¯åœ¨è¾©è¯è¿‡ç¨‹ä¸­, ä¸ºäº†åé©³å¯¹æ–¹, è€Œ æ­ªæ›²/å¤¸å¤§/ä»¥å…¶ä»–æ–¹å¼æ›²è§£ å¯¹æ–¹, ä½¿å¾—è¢«æ”»å‡»çš„ä¸æ˜¯å¯¹æ–¹çš„è®ºç‚¹, è€Œæ˜¯æ›´å®¹æ˜“è¢«æ‰¹åˆ¤çš„ç«‹åœº æ¯”å¦‚Aæƒ³åé©³B, å°±åœ¨Bæ—è¾¹æ ‘ç«‹ä¸€ä¸ªç¨»è‰äººå½“åšB, ç„¶åæ”»å‡»ç¨»è‰äººæ¥å†’å……å’Œæ›¿æ¢Açš„è§‚ç‚¹, æ­¤ä¸ºåˆ»æ„æ‰­æ›² A: â€œæˆ‘è®¤ä¸ºå°å­©ä¸åº”è¯¥åœ¨é©¬è·¯ä¸Šä¹±è·‘â€ B: â€œæŠŠå°å­©å…³èµ·æ¥, ä¸è®©ä»–ä»¬æ´»åŠ¨, è¿™æ‰æ˜¯ä¸å¯¹çš„â€ Açš„è§‚ç‚¹æ˜¯ä¸è®©å°å­©åœ¨é©¬è·¯ä¸Šè·‘, Bå´åˆ»æ„çš„æ›²è§£è§‚ç‚¹, æ ‘ç«‹äº†ä¸€ä¸ªç¨»è‰äºº â€œæŠŠå°å­©å…³èµ·æ¥â€, ç„¶åæ”»å‡»ç¨»è‰äºº, ä½†æ˜¯å…¶å®ä¸è®©å°å­©åœ¨é©¬è·¯ä¸Šè·‘å¹¶ä¸æ˜¯è¦å°†å°å­©å…³åœ¨å±‹å­é‡Œ æˆ‘ä»¬åœ¨ç”Ÿæ´»ä¸­, è¦ç«™åœ¨çœŸå®çš„ç«‹åœºå»æ€è€ƒé—®é¢˜, ç§‰æŒå¹³å’Œçš„å¿ƒæ€, å‡å°‘æ­ªæ›²/å¤¸å¤§æ¥æ”»å‡»ä»–äººçš„ç«‹åœº, ä¸€åˆ‡éƒ½æ‹¿äº‹å®å’Œè¯æ®æ¥è¯´è¯. å½“æœ‰äººå¯¹ä½ å£°æƒ…å¹¶èŒ‚çš„è®²èµ·æŸä»¶äº‹æˆ–æŸä¸ªäººæ—¶, ä¸è¦è¢«é¢ å€’æ˜¯éçš„è¯­è¨€å½±å“, è¦æœ‰è‡ªå·±çš„åˆ¤æ–­ è¦è®°ä½çš„æ˜¯, ç¨»è‰äººå†é€¼çœŸä¹Ÿä¸æ˜¯çœŸå®çš„äºº è½¬ç§»è®ºé¢˜ æ˜ä»£æœ‰ä¸€ä¸ªå­¦å£«, å…¶çˆ¶å¹¶ä¸å‡ºå, å…¶å­ä¹Ÿä¸äº‰æ°”, å…¶å­™è€ƒä¸Šäº†è¿›å£«, å…¶å°±è´£éª‚ä»–çš„å„¿å­ä¸æˆæ å…¶: â€œä½ çœŸæ˜¯ä¸ªåºŸæâ€ å…¶å­: â€œä½ çš„çˆ¶äº²ä¸å¦‚æˆ‘çš„çˆ¶äº², ä½ çš„å„¿å­ä¸å¦‚æˆ‘çš„å„¿å­, æˆ‘æœ‰ä»€ä¹ˆä¸æˆæçš„å‘¢?â€ è½¬ç§»è®ºé¢˜å°±æ˜¯åœ¨æ€ç»´è¿‡ç¨‹ä¸­, å§æœ‰äº›è”ç³»æˆ–è¡¨é¢ä¸Šç›¸ä¼¼çš„ä¸åŒè¯é¢˜å½“åšç›¸åŒçš„è¯é¢˜ä½¿ç”¨ å…¶æœ¬äººè¦è·Ÿå„¿å­è¾©è®ºçš„æ˜¯ â€œå„¿å­æ˜¯å¦æˆæ‰â€, å…¶å­åˆ™è½¬æ¢æˆäº† â€œä½ çš„çˆ¶äº²å’Œæˆ‘çš„çˆ¶äº², ä½ çš„å„¿å­å’Œæˆ‘çš„å„¿å­ç›¸æ¯”â€, æ°å¥½æŠŠåŸæ¥çš„é—®é¢˜ç»™å›é¿äº† ä¸ºäº†é¿å…å‡ºç°è¿™æ ·çš„è°¬è¯¯, æˆ‘ä»¬å¿…é¡»è¦å¯¹è‡ªå·±çš„æ‰¹åˆ¤å¯¹è±¡äº†è§£æ¸…æ¥š, è®¤çœŸæŠŠæ¡åŸæ„, é¿å…çŠ¯é”™ è¯‰è¯¸æ„Ÿè§‰ åˆ»èˆŸæ±‚å‰‘çš„å…¸æ•… ä¸¤å°å„¿è¾©æ—¥çš„å…¸æ•… å½“äº‹äººä¸ºä»€ä¹ˆè®¤ä¸ºå¯ä»¥æ‰¾åˆ°å®å‰‘å‘¢? å…¨å‡­ä»–ä¸ªäººçš„æ„Ÿè§‰, è¿™ç§å‡­å€Ÿè¡¨è±¡å’Œæ„Ÿè§‰ç»éªŒæ¥ä½œå‡ºåˆ¤æ–­å’Œæ¨ç†çš„, å¹¶ä¸”è®¤ä¸ºä»¥æ­¤å¾—å‡ºçš„ç»“è®ºæ˜¯ç»å¯¹æ­£ç¡®çš„, æ— è§†äº‹å®çš„æƒ…å†µ, å°±ä¸ºè¯‰è¯¸æ„Ÿè§‰çš„è°¬è¯¯, å½“ç„¶ç»éªŒå¾ˆå¤šæ—¶å€™ä¹Ÿæ˜¯æ­£ç¡®çš„, ä½†æ˜¯ç»éªŒä¹Ÿè¦ç»å¾—èµ·æ¨æ•², åŒæ—¶è¦æ³¨æ„å¹¶ä¸æ˜¯ç»å¯¹æ­£ç¡®, è¿˜æ˜¯è¦ä»”ç»†çš„æ¨ç†å’Œè®ºè¯æ‰è¡Œ åŒæ ·çš„, ä¸¤å°å„¿è¾©æ—¥, ä¹Ÿæ˜¯ä¸¤ä¸ªäººéƒ½æŒ‰ç…§è‡ªå·±çš„ç»éªŒæ¥ä½œä¸ºç»“è®º, å¾—å‡ºçš„ç»“è®ºå°±æ˜¯é”™è¯¯çš„ æˆ‘ä»¬åœ¨ç”Ÿæ´»ä¸­, ä¸è¦ â€œæƒ³å½“ç„¶â€ , å¦åˆ™å°±ä¼šé™·å…¥åˆ°é€»è¾‘è°¬è¯¯ä¸­, æœ‰çš„æ—¶å€™, æˆ‘ä»¬æ„Ÿè§‰æ­£ç¡®çš„å¯èƒ½ä¸äº‹å®å¤§ç›¸å¾„åº­ é¢„è®¾è°¬è¯¯ æœ‰ä¸€äº›è®ºè¯æ˜¯åŸºäºå‡è®¾çš„, å³ç”¨é‚£äº›è¢«è®¤ä¸ºç†å½“å¦‚æ­¤çš„é¢„è®¾æˆ–èƒŒæ™¯ä¿¡å¿µå»åšè®ºè¯, ä½†æ˜¯å¦‚æœè¿™ä¸ªå‡è®¾æœ¬èº«å°±æ˜¯æœ‰é—®é¢˜çš„, é‚£ä¹ˆå¾—åˆ°çš„ç»“æœä¹Ÿæ˜¯ä¸æˆç«‹çš„ äº‰è®®å‰æ å‰æ1: åœ¨å •èƒçš„è¿‡ç¨‹ä¸­, èƒå„¿è¢«æ€å®³äº† å‰æ2: èƒå„¿æ˜¯æ— è¾œçš„ å‰æ3: æ•…æ„æ€å®³ä¸€ä¸ªæ— è¾œçš„äººæ˜¯è°‹æ€ ç»“è®º: å •èƒå±äºè°‹æ€ å…¶ä¸­, å‰æ1æ˜¯å±å®çš„, ä½†æ˜¯å‰æ2å’Œ3æ˜¯æœ‰äº‰è®®çš„, äº‰è®®ä¹‹å¤„åœ¨äºèƒå„¿æ˜¯å¦ç®—æ˜¯ä¸€ä¸ªäºº? æ‹¿æœ‰äº‰è®®çš„è®ºæ®å»è®ºè¯æŸä¸ªç»“æœ, è¿™ä¸ªè®ºè¯æœ¬èº«æ˜¯å­˜åœ¨äº‰è®®çš„, æ‰€ä»¥ä¸èƒ½å½“åšè®ºæ® çªƒå–è®ºé¢˜ é—®é¢˜: ä¸ºä»€ä¹ˆä¸­å›½äººéƒ½çˆ±è¯´è°? ç›´æ¥ç»™å‡ºäº†ç»“è®º, è€Œæ²¡æœ‰ä»»ä½•è®ºæ®å»æ”¯æ’‘, æŠŠéœ€è¦å»è®ºè¯çš„ç»“è®ºå½“ä½œä¸€ä¸ªå‰æ, æ¯”å¦‚è¿™é‡Œåº”è¯¥å»è®ºè¯ä¸­å›½äººæ˜¯å¦çˆ±è¯´è°, è€Œä¸æ˜¯è®ºè¯ä¸ºä»€ä¹ˆä¸­å›½äººçˆ±è¯´è° å¤æ‚é—®å¥ A: æˆ‘è§è¿‡C B: Cæ˜¯ç™½çŒ«è¿˜æ˜¯é»‘çŒ« A: æœ‰é»‘æœ‰ç™½ B: ä½ åœ¨è¯´è°, å› ä¸ºCä¸æ˜¯ä¸€åªçŒ« å¤æ‚é—®å¥æŒ‡çš„æ˜¯ä»¥é—®å¥é¢„è®¾äº†æŸäº›å‡è®¾ä¸ºçœŸçš„æ–¹å¼æ¥è¯¢é—®, ä½ åªèƒ½å»å›ç­”å¯¹å’Œé”™, å½“è¿™ä¸ªå‡è®¾æœ¬èº«ä¸ºå‡æ—¶, å›ç­”å¯¹å’Œé”™éƒ½ä¼šå¯¼è‡´å¯¹è¿™ä¸ªä¸ºå‡çš„å‡è®¾çš„è‚¯å®š, ä½œä¸ºè¢«æé—®è€…, æˆ‘ä»¬è¦ä»”ç»†è¾¨åˆ«å‡è®¾çš„çœŸä¼ª, é˜²æ­¢è¢«å¥—è·¯. å½“æˆ‘ä»¬èº«ä¸ºæé—®è€…æ—¶. å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥æ¢å¬è™šå® è™šå‡é€‰è¨€ è¦ä¹ˆæ‰€æœ‰è‹±å›½å¤§å­¦éƒ½æŠŠé¡¹ç›®å®Œå…¨å˜æˆåœ¨çº¿è¯¾ç¨‹, è¦ä¹ˆæ‰€æœ‰è‹±å›½äººéƒ½ä¼šç ´äº§ è¿™ç§å±äºé€‰è¨€, é€‰è¨€æŒ‡æœ‰ä¸¤ä¸ªå‘½é¢˜æˆ–è€…é€‰è¨€è‚¢çš„å¤åˆå‘½é¢˜, æ¯”å¦‚è¿™é‡Œçš„ä¸¤ä¸ª è¦ä¹ˆ, ä½†æ˜¯å½“å‡ºç°äº†æ¨ç†é”™è¯¯, å°±ä¼šå¯¼è‡´å½±å“ç»“æœå‡ºç°é”™è¯¯, æ¯”å¦‚è¿™é‡Œçš„ä¸¤ä¸ªé€‰æ‹©æ ¹æœ¬ä¸Šæ˜¯é”™è¯¯çš„, æ²¡æœ‰å®é™…å…³è”çš„ ä¾‹å¤–è°¬è¯¯ ç‹—æ˜¯å‹å¥½çš„åŠ¨ç‰© æˆ‘çš„çš®çš®æ˜¯ä¸€æ¡ç‹— çš®çš®æ˜¯ä¸€åªå‹å¥½çš„åŠ¨ç‰© å½“ä¸€ä¸ªè®ºæ®æ˜¯é€šè¿‡æ™®éçš„è§„å¾‹æ¥è®ºè¯çš„, å¹¶ä¸”è¿™ä¸ªè®ºæ®å äº†å¾—åˆ°è¯¥è®ºç‚¹çš„å…³é”®æ€§å› ç´ , ä½†æ˜¯äº‹å®æ˜¯ä¸€ä¸ªä¾‹å¤–æ—¶, å°±æ˜¯ä¾‹å¤–è°¬è¯¯ æ¯”å¦‚çš®çš®æ˜¯ä¸€åªå‹å¥½çš„åŠ¨ç‰©, ä½†æ˜¯å½“çš®çš®ä¹±å’¬äººæ—¶, è¿™ä¸ªç»“è®ºå°±ä¸æˆç«‹, è¯¥ç”¨æˆ·ä»¥æ™®éçš„è§„å¾‹æ¥è®ºè¯, å´å¿˜äº†ä»€ä¹ˆäº‹æƒ…éƒ½æœ‰å¯èƒ½æœ‰ä¾‹å¤– éœ€è¦ç‰¢è®°çš„æ˜¯: é€šå¸¸ä¸ºçœŸçš„ä¸ä¸€å®šæ€»æ˜¯çœŸçš„ è¯‰è¯¸åæœ æˆ‘ä»¬å…¬å¸æ¯æœˆåº•è–ª+ææˆæœ‰8000 ä»¥è®¨å¥½æˆ–ä¸è®¨å¥½çš„ç»“æœæ¥è¯´æœä»–äºº è¯¡è¾©è€…ä¸æ˜¯é€šè¿‡æ­£å¸¸çš„é€»è¾‘æ¥è¯æ˜è‡ªå·±çš„è§‚ç‚¹, è€Œæ˜¯é€šè¿‡å‘ŠçŸ¥è¢«è¯´æœè€…ä¼šæœ‰æ€æ ·çš„åæœ, æ¥ å¼•è¯±/å“„éª—/å¨èƒ è¢«è¯´æœè€…, æ¥è¾¾æˆç›®çš„ å¦å®šå‰ä»¶ å¦‚æœä¸€ä¸ªäººæƒ³è¦å‡ºå›½, ä»–å°±éœ€è¦å­¦ä¹ è‹±è¯­, å¦‚æœä¸€ä¸ªäººä¸æƒ³å‡ºå›½, é‚£ä¹ˆä»–å°±ä¸éœ€è¦å­¦ä¹ è‹±è¯­, å› ä¸ºæˆ‘ä¸æƒ³å‡ºå›½, æ‰€ä»¥æˆ‘ä¸å­¦è‹±è¯­ åœ¨ å¦‚æœâ€¦é‚£ä¹ˆâ€¦ è¿™ç§æ ¼å¼çš„è®ºè¯ä¸­, æŠŠ å¦‚æœâ€¦ ç§°ä¸ºå‰ä»¶, æŠŠ é‚£ä¹ˆâ€¦ æˆä¸ºåä»¶ å¦‚æœå‰ä»¶å°±æ˜¯é”™çš„, æ¯”å¦‚è¿™é‡Œçš„ æƒ³è¦å‡ºå›½ ä¸ å­¦ä¹ è‹±è¯­, ä¸¤è€…å¹¶æ— ç›´æ¥çš„å…³ç³», æƒ³è¦å­¦ä¹ è‹±è¯­çš„åŠ¨æœºæœ‰å¾ˆå¤š, ä¸ä¸€å®šæ˜¯å‡ºå›½ æœºæ¢°ç±»æ¯” ä¸œæ–½æ•ˆé¢¦_ç™¾åº¦ç™¾ç§‘ (baidu.com) å…¶ä¸­ä¸œæ–½å°±çŠ¯äº†æœºæ¢°ç±»æ¯”çš„é”™è¯¯, ä»–åªçœ‹åˆ°äº†è¥¿æ–½æ‚ä½èƒ¸å£çš±ç€çœ‰å¤´, è®¤ä¸ºæ˜¯è¿™æ ·æ‰å¥½çœ‹, å´æ²¡æœ‰å‘ç°è¥¿æ–½çš„ç¾æ˜¯å®¢è§‚å­˜åœ¨çš„, æ˜¯å¤šæ–¹é¢å†³å®šçš„ ç±»æ¯”æ˜¯ä¸€ç§è¡¨è¾¾æ€æƒ³, æ˜¯è¿›è¡Œæ•™è‚²å’Œè¯´æœçš„æœ‰åŠ›å·¥å…·, ä½†æ˜¯è¦æ³¨æ„ç±»æ¯”å‰åçš„äº‹ç‰©, å¿…é¡»è¦æœ‰å°½å¯èƒ½å¤šçš„å…±æ€§, è¿˜æœ‰å°±æ˜¯ä¸¤ä¸ªäº‹ç‰©çš„æœ¬è´¨å±æ€§å’Œç»“è®ºä¹‹é—´ä¸€å®šè¦æœ‰å¿…ç„¶çš„è”ç³» æ— ç†å‡è®¾ æˆ‘ä¸æ˜¯æ•…æ„çš„, å†ç»™æˆ‘ä¸€æ¬¡æœºä¼š, æˆ‘ä¸€å®šä¸â€¦ æˆ‘ä»¬ç»å¸¸å¯ä»¥å¬åˆ°è¿™ç§è¯, å¬èµ·æ¥çœŸæŒšåŠ¨äºº, ä½†æ˜¯è¦è®°ä½, è¿™åªæ˜¯ä¸€ç§ç¾å¥½çš„å‡è®¾, ç°å®æ˜¯æ— æ³•æ”¹å˜çš„, åœ¨é€»è¾‘å­¦ä¸Š, å‡è®¾æ˜¯ä¸€ç§æ–¹æ³•, å¯ä»¥ç”¨äºå„ä¸ªé¢†åŸŸçš„ç ”ç©¶, ä½†æ˜¯å¦‚æœè¿›è¡Œä¸ç§‘å­¦çš„å‡è®¾, ç›®çš„æ˜¯ä¸ºäº†å®‰æ…°è‡ªå·±, å¹³ç¼“æƒ…ç»ª, è¡¨è¾¾æ‚”æ¨çš„, è¿™ç§å‡è®¾å°±æ˜¯æ— ç†å‡è®¾ é¢å¯¹ä¸€äº›äººçš„å‡è®¾, è¦ä¿æŒå†·é™å’Œç†æ™º, ä¸å¯è½»ä¿¡å’Œå¿ƒè½¯, å› ä¸ºè¿™å¯èƒ½æ˜¯ä¸€ç§é€»è¾‘è°¬è¯¯ åŒå¦å®šå‰æ æ‰€æœ‰å“ºä¹³åŠ¨ç‰©éƒ½æ˜¯æ¸©è¡€åŠ¨ç‰© çŒ«æ˜¯å“ºä¹³åŠ¨ç‰© æ‰€ä»¥çŒ«æ˜¯æ¸©è¡€åŠ¨ç‰© è¿™ç§å±äºå…¸å‹çš„ä¸‰æ®µè®º, å³å…ˆåˆ—å‡ºä¸¤ä¸ªé™ˆè¿°, å†åœ¨è¿™ä¸¤ä¸ªé™ˆè¿°çš„å‰æä¸‹æ¨å¯¼å‡ºç¬¬ä¸‰ä¸ªç»“æœ, è¿™ç§æ˜¯æ²¡æœ‰é—®é¢˜çš„, ä½†æ˜¯ä¸‹é¢è¿™ç§ ä¸å–œæ¬¢åƒç”œé£Ÿçš„äººæ¯”è¾ƒç˜¦ æœ‰äº›æŠ½çƒŸçš„äººä¸å–œæ¬¢åƒç”œé£Ÿ æ‰€ä»¥æŠ½çƒŸçš„äººæ¯”è¾ƒç˜¦ è¿™ç§å°±å±äºé”™è¯¯, è¿™ç§ä¸‰æ®µè®ºçš„å‰ä¸¤æ®µéƒ½æ˜¯å¦å®šçš„, é€»è¾‘å­¦ä¸Š, è¿™ç§è¢«ç§°ä¹‹ä¸º åŒå¦å®šå‰æ, è¿™ç§å¾—å‡ºæ¥çš„ç»“è®ºæ˜¯ä¸å¯é çš„ ä¸å½“å‘¨å»¶ æ‰€æœ‰éª‘è‡ªè¡Œè½¦çš„éƒ½æ˜¯èŠ‚ä¿­çš„äºº æ²¡æœ‰ä¼ä¸šè€æ¿æ˜¯éª‘è‡ªè¡Œè½¦çš„ æ‰€ä»¥, æ²¡æœ‰ä¼ä¸šè€æ¿æ˜¯èŠ‚çº¦çš„ å¯èƒ½çŒ›ä¸€çœ‹è§‰å¾—æœ‰ç‚¹é“ç†, ä½†æ˜¯ç»†ç»†æ€è€ƒå…¶å®è¿™ä¸ªé€»è¾‘æ¨è®ºæ˜¯ä¸ç¬¦åˆé€»è¾‘çš„, å› ä¸ºä¼ä¸šè€æ¿æ˜¯å¦èŠ‚çº¦ä¸ä»–æ˜¯å¦èŠ‚ä¿­æ²¡æœ‰ç›´æ¥çš„å…³ç³», ä¸èƒ½å› ä¸ºä¸éª‘è‡ªè¡Œè½¦å°±è¯´è€æ¿ä¸èŠ‚ä¿­. è¿™ä¸ªæ¨å¯¼å°±çŠ¯äº† ä¸å½“å‘¨å»¶ çš„é”™è¯¯, è¿™æ˜¯å› ä¸ºç¬¬ä¸€å¥æ‰€æœ‰éª‘è‡ªè¡Œè½¦çš„éƒ½æ˜¯èŠ‚ä¿­çš„, è¿™å¥è¯åªèƒ½è¯´æ˜ éª‘è‡ªè¡Œè½¦çš„éƒ½æ˜¯èŠ‚ä¿­çš„äºº, è€Œå¿½ç•¥äº† éª‘è‡ªè¡Œè½¦çš„åªæ˜¯èŠ‚ä¿­çš„äººçš„ä¸€éƒ¨åˆ†, æœ‰äº›ä¸éª‘è‡ªè¡Œè½¦çš„äººä¹Ÿå¾ˆèŠ‚ä¿­, å½“ä½ çš„è®ºæ®ä¸­å‡ºç°äº†æŸä¸ªç¾¤ä½“ä¸­çš„æŸä¸ªéƒ¨åˆ†çš„ä¾‹å­, åœ¨ç»“è®ºä¸­å´ä½¿ç”¨æŸä¸ªéƒ¨åˆ†æ¥è®ºè¯æ•´ä¸ªç¾¤ä½“, è¿™å°±æ˜¯ ä¸å½“å‘¨å»¶, å†çœ‹ä¾‹å­, è®ºæ®ä¸­ä½¿ç”¨ èŠ‚ä¿­äººç¾¤ä¸­çš„éª‘è‡ªè¡Œè½¦çš„äºº è¿™ä¸ª å€Ÿé‰´ç¾¤ä½“çš„ä¸€éƒ¨åˆ†äºº , ç»“æœä¸­å´å°† æ•´ä¸ªèŠ‚ä¿­äººç¾¤ æ¥ä½œä¸ºè¯æ®, æ˜æ˜¾æ˜¯é”™è¯¯çš„ åœ¨å¾ˆå¤šæƒ…å†µä¸‹, è¯¡è¾©è€…ä¼šä½¿ç”¨ ä¸å½“å‘¨å»¶ æ¥å¿½æ‚ äºº, æˆ‘ä»¬ä¸€å®šè¦æ³¨æ„è¿™ç§æƒ…å†µ ç½—ç´ æ‚–è®º ç½—ç´ æ‚–è®º_ç™¾åº¦ç™¾ç§‘ (baidu.com) æˆ‘ä»¬è¿™é‡Œä¸è°ˆå¯¹æ•°å­¦çš„å½±å“, å•ä»é€»è¾‘æ¥è®², è¿™å°±å±äºæ‚–è®º, æŒ‡é€»è¾‘ä¸Šå¯ä»¥æ¨å¯¼å‡ºç›¸äº’çŸ›ç›¾çš„é€»è¾‘, ä½†æ˜¯è¡¨é¢ä¸Šåˆå¯ä»¥è‡ªåœ†å…¶è¯´çš„å‘½é¢˜æˆ–ç†è®ºä½“ç³» è¿˜æœ‰è®¸å¤šè¿™æ ·çš„ä¾‹å­, æ¯”å¦‚ ä¸€ä¸ªå¹´è½»äººå¯¹å¤§å‘æ˜å®¶çˆ±è¿ªç”Ÿè°ˆèµ·è‡ªå·±çš„è®¾æƒ³,ä»–æ»¡æ€€ä¿¡å¿ƒåœ°è¯´ï¼šâ€œæˆ‘æƒ³å‘æ˜ä¸€ç§ä¸‡èƒ½æº¶æ¶²,å®ƒå¯ä»¥æº¶è§£ä¸€åˆ‡ä¸œè¥¿.â€ çˆ±è¿ªç”Ÿå¬ç½¢,æƒŠå¥‡åœ°è¯´ï¼šâ€œé‚£ä¹ˆ,ä½ æƒ³ç”¨ä»€ä¹ˆå™¨çš¿ç››è¿™ç§ä¸‡èƒ½æº¶æ¶²å‘¢?â€ å¹´è½»äººå“‘å£æ— è¨€. è¿™æ˜¯å› ä¸º, ä¸‡èƒ½æº¶æ¶²èƒ½æŠŠä»»ä½•ä¸œè¥¿éƒ½æº¶è§£äº†,æ‰€ä»¥è£…æº¶æ¶²çš„å™¨çš¿ä¹Ÿéƒ½æº¶è§£äº†,ä¸èƒ½ç”¨ä»»ä½•ä¸œè¥¿æ¥ç››ä¸‡èƒ½æº¶æ¶². ä½†æ˜¯æ¶²ä½“å°±éœ€è¦å™¨çš¿å»ç››æ”¾, ä½†æ˜¯å¦‚æœä½ èƒ½ç”¨å™¨çš¿å»ç››æ”¾äº†, è¿™ä¸ªæº¶æ¶²è¿˜å«ä¸‡èƒ½æº¶æ¶²å—? è¿˜æœ‰è®¸è®¸å¤šå¤šçš„æ‚–è®º, è¿™å¹¶ä¸æ˜¯ä¸€ç§è¯¡è¾©, å®é™…ä¸Š, æ‚–è®ºçš„æå‡ºå’Œè§£å†³, æ˜¯äººç±»æ™ºæ…§çš„é—ªå…‰, ä¹Ÿæ˜¯ç§‘å­¦å‘å±•çš„é…µæ¯, åœ¨ä¸æ–­çš„å¯å‘äººä»¬è¿›è¡Œæ·±å…¥çš„æ€è€ƒ æ’ä¸­å¾‹ æ’ä¸­å¾‹æ˜¯äº‹ç‰©çš„è§„å¾‹, ä¹Ÿæ˜¯æ€ç»´çš„è§„å¾‹, ä¸€ä¸ªäº‹ç‰©åœ¨æŸä¸ªæ—¶é—´é‡Œ, ä¸€å®šä¼šå…·æœ‰æŸä¸ªå±æ€§, æˆ–è€…ä¸å…·æœ‰æŸä¸ªå±æ€§, å¿…é¡»æ»¡è¶³ä¸¤è€…ä¹‹ä¸€, æ¯”å¦‚ Aæ˜¯B, æˆ–è€…Aä¸æ˜¯B, é‚£ä¹ˆå¯¹äºç›¸äº’çŸ›ç›¾çš„ä¸¤ä¸ªå‘½é¢˜, ä¸€å®šæ˜¯æœ‰ä¸€ä¸ªæ˜¯æ­£ç¡®çš„, ä¸å¯èƒ½åŒæ—¶æ­£ç¡®æˆ–é”™è¯¯, æ­¤ä¸ºæ’ä¸­å¾‹ è¥¿ç“œæ˜¯ç”œçš„ è¥¿ç“œä¸æ˜¯ç”œçš„ è¿™ä¸¤ä¸ªè‚¯å®šæœ‰ä¸€ä¸ªæ˜¯çœŸçš„, ä¸å¯èƒ½ä¸¤ä¸ªéƒ½æ˜¯çœŸçš„æˆ–å‡çš„ å……è¶³ç†ç”±å¾‹ å……è¶³ç†ç”±å¾‹_ç™¾åº¦ç™¾ç§‘ (baidu.com) å……è¶³ç†ç”±å¾‹æ˜¯é€»è¾‘æ€ç»´å¿…é¡»éµå®ˆçš„åŸºæœ¬è§„å¾‹ä¹‹ä¸€, æŒ‡åœ¨è®ºè¯å’Œæ€ç»´è¿‡ç¨‹ä¸­, è¦ç¡®å®šä¸€ä¸ªåˆ¤æ–­ä¸ºçœŸ, å¿…é¡»æœ‰è¶³å¤Ÿè¯æ˜ä»–çœŸå®çš„ç†ç”±. å¦‚æœç¼ºä¹è¶³å¤Ÿçš„ç†ç”±, å°±æ²¡æœ‰è®ºè¯æ€§. æ­£ç¡®çš„æ€ç»´æ˜¯æ€è·¯ä¸¥è°¨çš„æ€ç»´, è®ºè¯çš„è¿‡ç¨‹è¦æ‘†äº‹å®, è®²é“ç†, ä»¥ç†æœäºº, è¨€ä¹‹ä»¥ç†, æŒä¹‹ä»¥æ•… ç°å®ä¸­ç»å¸¸æœ‰äººè¿èƒŒè¿™ç§ç†ç”±è®º æ¯«æ— ç†ç”±: ä¸è®²ä»»ä½•ç†ç”±, æ²¡æœ‰ä»»ä½•ä¾æ®å°±ä¸‹ç»“è®º ç†ç”±è™šå‡: å¯¹ä¸€ä¸ªå‘½é¢˜æ¥æä¾›ç†ç”±, ä½†æ˜¯è¿™ä¸ªç†ç”±æ¯«æ— æ ¹æ®, è¿™ä¸ªç†ç”±æ˜¯ä¸»è§‚çš„, æ˜¯ä¸å­˜åœ¨çš„æˆ–è€…è™šå‡çš„ è®ºè¯é”™è¯¯: æŒ‡è¯æ˜è®ºé¢˜çš„ç†ç”±æ˜¯çœŸå®çš„, ä½†æ˜¯ç†ç”±ä¸ç»“è®ºä¹‹é—´æ²¡æœ‰å¿…ç„¶è”ç³» åœ¨é€»è¾‘æ€ç»´è¿‡ç¨‹ä¸­, æ— è®ºæ˜¯è¢«è¯´æœè€…æˆ–è¯´æœè€…, éƒ½è¦æ‰¾åˆ°å……è¶³çš„ç†ç”±æ¥è¯æ˜ç»“è®º, ä»¥ç†æœäºº èŒƒç•´é”™è¯¯ å¸ˆèŒƒå¤§å­¦åœ¨å“ªé‡Œ? å¸ˆèŒƒå¤§å­¦æŒ‡çš„æ˜¯ä¸€ç§å¤§å­¦çš„ç§ç±», è€Œä¸æ˜¯æŒ‡æŸä¸€æ‰€å¤§å­¦, ä¸¤è€…æ˜¯åŒ…å«å’Œè¢«åŒ…å«çš„å…³ç³», è€Œä¸æ˜¯å¹¶åˆ—å…³ç³», è¿™å°±æ˜¯ä¸€ç§ç»Ÿç­¹é”™è¯¯ æ›¹é›ªèŠ¹æ˜¯ä¸€ä¸ªå¤©æ–‡å­¦å®¶ å“ˆå¼—å¤§å­¦é¢ç§¯æ’åç¬¬å‡ ? æ›¹é›ªèŠ¹æ˜¯æ–‡å­¦å®¶ä¸æ˜¯å¤©æ–‡å­¦å®¶ å“ˆå¼—å¤§å­¦æ˜¯ä¸–ç•Œåæ ¡, é¢ç§¯å¤§å°ä¸å½±å“æ’å è¿™ç§ä¹Ÿå±äºèŒƒç•´é”™è¯¯, æŒ‡çš„æ˜¯å°†æ—¢æœ‰çš„å±æ€§å½’å±åˆ°ä¸å¯èƒ½ä¼šæ‹¥æœ‰è¯¥å±æ€§çš„å¯¹è±¡ä¸Š, æ˜¯è¯­ä¹‰å­¦å’Œå­˜åœ¨è®ºçš„é”™è¯¯ å°å­©å­ç»å¸¸ä¼šçŠ¯è¿™ç§é”™è¯¯, å› ä¸ºä»–ä»¬å¯¹åˆ†ç±»æ²¡æœ‰æ˜ç¡®çš„æ¦‚å¿µ æ–­ç« å–ä¹‰ çˆ±è¿ªç”Ÿè¯´è¿‡: â€œå¤©æ‰å°±æ˜¯1%çš„å¤©èµ‹+99%çš„æ±—æ°´, ä½†é‚£1%çš„çµæ„Ÿæ˜¯æœ€é‡è¦çš„ï¼Œç”šè‡³æ¯”é‚£99%çš„æ±—æ°´éƒ½è¦é‡è¦ã€‚â€ å¾ˆå¤šäººåªçœ‹åˆ°äº† â€œå¤©æ‰å°±æ˜¯1%çš„å¤©èµ‹+99%çš„æ±—æ°´â€, ä½†æ˜¯çˆ±è¿ªç”Ÿçš„åŸè¯å¼ºè°ƒçš„æ˜¯çµæ„Ÿçš„é‡è¦æ€§, åªçœ‹åˆ°ç¬¬ä¸€å¥å¯èƒ½è®¤ä¸ºå‹¤å¥‹å¯ä»¥æˆåŠŸ, è¿™å°±ä¸çˆ±è¿ªç”Ÿçš„åŸä¹‰ç›¸å·®ç”šè¿œ ç±»ä¼¼äºè¿™æ ·çš„æ–­ç« å–ä¹‰çš„è°¬è¯¯è¶Šæ¥è¶Šå¤š, ä¸é¡¾æ•´ç¯‡æ–‡å­—æˆ–è°ˆè¯çš„çœŸå®æ„å›¾, å•ç‹¬çš„æˆªå–ä¸€å¥è¯è¿›è¡Œåˆ†æ, å°¤å…¶æ˜¯çŸ­è§†é¢‘çš„ç«çƒ­ä¸äººä»¬ä¹ æƒ¯æ±²å–ç¢ç‰‡çŸ¥è¯† ç”šè‡³è¿˜ä¼šè¢«äººæ¶æ„çš„å¼•å¯¼, æ›²è§£åŸä¹‰è€Œè¿›è¡Œæ”»å‡», æ¯”å¦‚ çŸ¥è¯†å°±æ˜¯åŠ›é‡ åŸè¯: çŸ¥è¯†å°±æ˜¯åŠ›é‡, ä½†æ›´é‡è¦çš„æ˜¯è¿ç”¨çŸ¥è¯†çš„æŠ€èƒ½ åŸä¹‰æ˜¯å¼ºè°ƒè¿ç”¨çŸ¥è¯†çš„æŠ€èƒ½, å¯èƒ½è¢«å˜æˆè¿‡åˆ†å¼ºè°ƒçŸ¥è¯†æœ¬èº« å¾ç”Ÿæœ‰å´–, è€ŒçŸ¥æ— æ¶¯ åŸè¯: å¾ç”Ÿæœ‰å´–, è€ŒçŸ¥ä¹Ÿæ— æ¶¯, ä»¥æœ‰æ¶¯éšæ— æ¶¯, æ®†å·²ï¼ åŸä¹‰æ˜¯è¯´ç”Ÿå‘½æ˜¯çŸ­æš‚çš„, çŸ¥è¯†æ˜¯æ— é™çš„, ç”¨æœ‰é™çš„ç”Ÿå‘½å»å­¦ä¹ æ— é™çš„çŸ¥è¯†, æ˜¯å¾ˆå±é™©çš„ æˆ‘ä»¬åœ¨å¼•ç”¨åè¨€è­¦å¥ä½œä¸ºè®ºæ®æ—¶, å¿…é¡»è¦æ³¨æ„ä¸è¦æ–­ç« å–ä¹‰, åŒæ—¶åœ¨ç”Ÿæ´»ä¸­ä¹Ÿè¦æœ‰è‡ªå·±çš„æ€è€ƒ, ä¸è¦è¢«å¸¦æ­ª","link":"/2021/09/04/introduction_logic(23-44)/"},{"title":"è·³å‡ºå¾ªç¯çš„å‡ ç§æ–¹å¼","text":"æ¯”å¦‚è¿™æ ·çš„éœ€æ±‚, éå†ä¸€ä¸ª åˆ‡ç‰‡, åˆ‡ç‰‡å†…å®¹æ˜¯åˆ‡ç‰‡1, éœ€æ±‚æ˜¯åˆ¤æ–­åˆ‡ç‰‡1ä¸­æŸä¸ªæ˜¯å¦æœ‰ç›¸åº”æ•°æ®, æœ‰å°±è¿”å› æˆ‘ä»¬éœ€è¦è€ƒè™‘çš„æ˜¯åœ¨å†™ä¸¤å±‚éå†æ—¶å¦‚ä½•åœ¨è·å–ç»“æœåç»“æŸè¿™ä¸¤å±‚éå† å˜é‡æ³• è®¾ç½®ä¸€ä¸ªå˜é‡, åœ¨å¤–å±‚ç›‘å¬è¯¥å˜é‡, è·å–åˆ°ç»“æœåä¿®æ”¹è¯¥å˜é‡ 123456789101112131415func main() { t := [][]int{{1, 2, 3, 4, 5}, {5, 6, 7, 8, 9}} s := false for _, v := range t { for _, v1 := range v { if v1 == 5 { s = true // åˆ¤æ–­æˆç«‹ä¿®æ”¹æ ‡é‡é€€å‡ºäºŒå±‚å¾ªç¯ break } } if s { // æ£€æµ‹æ ‡é‡ç»“æœï¼Œä¸ºtrueä»£è¡¨å‘½ä¸­ break } }} ç¼ºç‚¹å¾ˆæ˜æ˜¾, å¦‚æœå¥—æ›´å¤šå±‚éœ€è¦åœ¨æ¯ä¸ªå±‚éƒ½å†™ä¸€ä¸ªåˆ¤æ–­æ ‡é‡çš„é€»è¾‘ä¸€å±‚å±‚é€€å‡º goto 1234567891011121314func main() { t := [][]int{{1, 2, 3, 4, 5}, {5, 6, 7, 8, 9}} for _, v := range t { for _, v1 := range v { if v1 == 5 { goto Loop // è·³è½¬åˆ°æ³¨å†Œåä¸ºLoopçš„æ ‡è®°å¤„ï¼Œä¸­é—´çš„ä»£ç ç›´æ¥è·³è¿‡ } } } fmt.Println(\"nil\") return // æ­¤å¤„returné˜²æ­¢ç»§ç»­æ‰§è¡Œloopçš„ä»£ç Loop: // Loopæ ‡è®°å¤„ï¼Œ Loopåªæ˜¯ä¸€ä¸ªæ ‡è®°ï¼Œæ­£å¸¸é¡ºåºæ‰§è¡Œä¹Ÿä¼šæ‰§è¡ŒLoopçš„ä»£ç ,,ä¸€èˆ¬å«Loop,å¯ä»¥è‡ªå®šä¹‰,ä¸ä¸Šé¢ä¸€è‡´å³å¯ fmt.Println(\"success\")} æ­¤æ–¹æ³•ä¸æ­¢é€‚ç”¨äºå¾ªç¯,å®é™…ä¸Šä»–å¯ä»¥è´´åœ¨ä»»æ„åœ°æ–¹,æ¯”å¦‚ 1234567func main() { fmt.Println(1) goto Loop fmt.Println(2)Loop: fmt.Println(3)} ä¸Šé¢çš„ 2 æ°¸è¿œä¸ä¼šæ‰“å° è¿™ç§æ–¹æ³•çš„é—®é¢˜æ˜¯ä¼šç ´åæ­£å¸¸çš„ä»£ç ç»“æ„, ä¸€ä¸ªé¡¹ç›®çš„ä»£ç å¿…å®šæ˜¯å¾ˆå¤šçš„, æœ‰å¾ˆå¤šé€»è¾‘, ä½¿ç”¨gotoä¼šç ´ååŸæœ‰çš„ä»£ç ç»“æ„, å¤§å¤§é™ä½äº†å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§, å› æ­¤è¯·å°½å¯èƒ½çš„é¿å…ä½¿ç”¨ goto break Label ç»™æŸä¸€å±‚å¾ªç¯è®¾ç½®ä¸€ä¸ªLabel,æŒ‡å®šè·³è¿‡æŸä¸€ä¸ªLabel 12345678910111213141516func main() { t := [][]int{{1, 2, 3, 4, 5}, {5, 6, 7, 8, 9}} s := falseLoop: // æ ‡è®°è¯¥å¾ªç¯ä¸ºLoop,ä¸€èˆ¬å«Loop,å¯ä»¥è‡ªå®šä¹‰,ä¸ä¸‹é¢ä¸€è‡´å³å¯ for _, v := range t { for _, v1 := range v { if v1 == 5 { s = true break Loop // è·³å‡ºLoopæ ‡è®°çš„å¾ªç¯ } } } if s { fmt.Println(\"success\") }} ç›¸æ¯”äº goto, break Label åªèƒ½åœ¨å¾ªç¯ä¸­ä½¿ç”¨, Loopåªèƒ½æ³¨å†Œåˆ°å¾ªç¯ä¸­, gotoæ˜¯è·³è½¬åˆ°æŸè¡Œæ‰§è¡Œ, breakæ˜¯è·³å‡ºLoopæ ‡è®°çš„å¾ªç¯,ç›¸å¯¹æ¥è¯´é™åˆ¶å¤§ä¸€äº›, æ²¡æœ‰é‚£ä¹ˆéšæ„, è€Œç›¸æ¯”äº æ–¹æ³•ä¸€,åˆ™æ— éœ€å†™å¤šå±‚åˆ¤æ–­, éœ€è¦æ³¨æ„çš„æ˜¯, break Label çš„ Label ä¸ä¸€å®šæ˜¯é¡¶å±‚, å¯ä»¥åœ¨ä»»æ„ä¸€å±‚ 123456789101112131415161718func main() { t := [][][]int{{{1, 2, 3, 4, 5}}, {{5, 6, 7, 8, 9}}} s := false for _, v := range t { Loop: // æ ‡è®°è¯¥å¾ªç¯ä¸ºLoop for _, v1 := range v { for _, v2 := range v1 { if v2 == 5 { s = true break Loop // è·³å‡ºLoopæ ‡è®°çš„å¾ªç¯ } } } } if s { fmt.Println(\"success\") }} å•ç‹¬å†™ä¸€ä¸ªå‡½æ•° è¿™ä¸ªä¸å¤šè¯´, å› ä¸º return ç›´æ¥é€€å‡ºå‡½æ•°äº† 1234567891011121314151617func t1(t [][][]int) bool { for _, v := range t { for _, v1 := range v { for _, v2 := range v1 { if v2 == 5 { return true } } } } return false}func main() { t := [][][]int{{{1, 2, 3, 4, 5}}, {{5, 6, 7, 8, 9}}} fmt.Println(t1(t))} æ€»ç»“ æ¡æ¡å¤§è·¯é€šç½—é©¬, å…¶å®å“ªç§éƒ½å¯ä»¥, ä½†æ˜¯æˆ‘è¿˜æ˜¯æ¨èä½¿ç”¨å‡½æ•°çš„å½¢å¼, å› ä¸ºgotoå’Œlableæˆ–å¤šæˆ–å°‘éƒ½ä¼šé™ä½å¯è¯»æ€§. ä½•å†µ, å¦‚æœçœŸçš„å‡ºç°å¤šä¸ªå¾ªç¯åœ¨ä¸€ä¸ªå‡½æ•°, åº”è¯¥æ€è€ƒæ˜¯ä¸æ˜¯è®¾è®¡çš„æœ‰é—®é¢˜æˆ–è€…å®ç°çš„æœ‰é—®é¢˜.","link":"/2021/09/04/jump_out_of_loop/"},{"title":"LeetCodeè§£é¢˜(1-10)","text":"1.ä¸¤æ•°ä¹‹å’Œ(ç®€å•) https://leetcode-cn.com/problems/two-sum/ é¢˜ç›® ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚ ç¤ºä¾‹ 1234ç»™å®š nums = [2, 7, 11, 15], target = 9å› ä¸º nums[0] + nums[1] = 2 + 7 = 9æ‰€ä»¥è¿”å› [0, 1] è§£ç­” 1234567891011121314151617181920212223package main/*URL: https://leetcode-cn.com/problems/two-sum/è§£é¢˜æ€è·¯: ç»´æŠ¤ä¸€ä¸ªmap,keyä¸ºnumsçš„å€¼,valueä¸ºè¯¥å€¼çš„ç´¢å¼•, éå†ä¸€énums, å‡è®¾æ¯ä¸ªå€¼ä¸ºb, ç®—å‡ºa+bä¸­açš„å€¼, åˆ¤æ–­mapå­˜ä¸å­˜åœ¨, å¦‚å­˜åœ¨åˆ™è·å–åˆ°mapä¸­açš„value(ç´¢å¼•), ä¸å­˜åœ¨åˆ™å°†bçš„å€¼ä¸ç´¢å¼•åŠ å…¥mapä¸­, æœ‰å¯èƒ½éƒ½ä¸åŒ¹é…,æ³¨æ„åœ¨éå†ç»“æŸåè¿”å›ä¸€ä¸ªç©ºåˆ‡ç‰‡ */func twoSum(nums []int, target int) []int { sumMap := map[int]int{} for index, value := range nums{ mapValue, ok := sumMap[target-value] if !ok{ sumMap[value] = index continue } return []int{mapValue, index} } return []int{}} 2.ä¸¤æ•°ç›¸åŠ (ä¸­ç­‰) https://leetcode-cn.com/problems/add-two-numbers/ é¢˜ç›® ç»™å‡ºä¸¤ä¸ª éç©º çš„é“¾è¡¨ç”¨æ¥è¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å…¶ä¸­ï¼Œå®ƒä»¬å„è‡ªçš„ä½æ•°æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚ å¦‚æœï¼Œæˆ‘ä»¬å°†è¿™ä¸¤ä¸ªæ•°ç›¸åŠ èµ·æ¥ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªæ–°çš„é“¾è¡¨æ¥è¡¨ç¤ºå®ƒä»¬çš„å’Œã€‚ æ‚¨å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚ ç¤ºä¾‹ 123è¾“å…¥ï¼š(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)è¾“å‡ºï¼š7 -&gt; 0 -&gt; 8åŸå› ï¼š342 + 465 = 807 è§£ç­” 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758package main/*URL: https://leetcode-cn.com/problems/add-two-numbers/è§£é¢˜æ€è·¯: æ–°å»ºå‡½æ•° addNodeaddNode å¤šæ¥æ”¶ä¸€ä¸ªå‚æ•°ä¸ºåç§»å€¼è¯»å–ä¸¤ä¸ªç»“æ„ä½“çš„ valï¼Œç›¸åŠ ï¼Œå¤§äº10åˆ™preä¸º1ä½¿ç”¨é€’å½’æ¥å±‚å±‚è¯»å–è°ƒç”¨ addNode*/type ListNode struct { Val int Next *ListNode}func addTwoNumbers(l1 *ListNode, l2 *ListNode) *ListNode { return addNode(l1, l2, 0)}func addNode(l1 *ListNode, l2 *ListNode, pre int) *ListNode { // å¤„ç†é“¾è¡¨ if l1 == nil &amp;&amp; l2 == nil{ if pre == 0{ return nil }else { return &amp;ListNode{ Val: pre, Next: nil, } } } if l1 == nil{ l1 = &amp;ListNode{ Val: 0, Next: nil, } } if l2 == nil{ l2= &amp;ListNode{ Val: 0, Next: nil, } } count := l1.Val + l2.Val + pre // è®¡ç®—æœ¬æ¬¡æ•°æ®ç»“æœ,preä¸ºä¸Šä¸€æ¬¡è®¡ç®—æ»¡10è¿›1 p := 0 if count &gt;= 10{ p = 1 count = count - 10 } node := &amp;ListNode{ Val: count, Next: addNode(l1.Next, l2.Next, p), } return node} 3.æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²(ä¸­ç­‰) https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/ é¢˜ç›® ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚ ç¤ºä¾‹ 123è¾“å…¥: \"abcabcbb\"è¾“å‡º: 3 è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \"abc\"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚ 123è¾“å…¥: \"bbbbb\"è¾“å‡º: 1è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \"b\"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚ 1234è¾“å…¥: \"pwwkew\"è¾“å‡º: 3è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \"wke\"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚ è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ\"pwke\" æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚ è§£ç­” 12345678910111213141516171819202122232425262728package main/*URL: https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/æ»‘å—æ¨¡å¼ï¼Œç»´æŠ¤ä¸€ä¸ªmapï¼Œå­˜æ”¾å½“å‰æ»‘å—å†…çš„å†…å®¹ï¼Œæ»‘å—å‘å‰æ»‘åŠ¨ï¼Œæ–°çš„å­—ç¬¦ç›´æ¥åŠ å…¥æ»‘å—è€çš„å­—ç¬¦å…ˆåˆ¤æ–­æ˜¯å¦åœ¨æ»‘å—å†…ï¼Œåœ¨åˆ™æ»‘å—èµ·å§‹ä¸ºè€çš„å­—ç¬¦å‡ºç°ä½ç½®+1æ¯æ¬¡è·å–ä¸€ä¸‹é•¿åº¦ï¼Œå¦‚æœå¤§äºå·²ä¿å­˜çš„æœ€å¤§é•¿åº¦åˆ™æœ€å¤§é•¿åº¦+1*/func lengthOfLongestSubstring(s string) int { var ins = make(map[int32]int, len(s)) // å»ºç«‹å­˜æ”¾å·²å‡ºç°å­—ç¬¦çš„mapï¼Œkeyä¸ºè¯¥å­—ç¬¦ï¼Œvalueä¸ºä¸‹æ ‡ max := 0 // æœ€å¤§å€¼ startIndex := 0 // èµ·ç‚¹ä¸‹æ ‡ for index, value := range s { // éå†å­—ç¬¦ä¸² oldIndex, ok := ins[value] // åˆ¤æ–­å­—ç¬¦æ˜¯å¦å·²ç»å‡ºç°è¿‡ ins[value] = index // å¦‚å‡ºç°è¿‡å°†mapå­—ç¬¦ä¸‹æ ‡æ›¿æ¢æˆæ–°çš„ï¼Œæœªå‡ºç°è¿‡æ–°å¢ if ok &amp;&amp; startIndex &lt;= oldIndex { // å¦‚æœä¹‹å‰å‡ºç°è¿‡ä¸”è€çš„ä¸‹æ ‡åœ¨èµ·ç‚¹ä¸‹æ ‡ä¹‹å†…ï¼Œä»£è¡¨ä¹‹å‰è™½ç„¶æœ‰å‡ºç°è¿‡ä¸”åœ¨Â·æ»‘åŠ¨çª—å£å†… startIndex = oldIndex + 1 // å°†èµ·ç‚¹ä¸‹æ ‡å‘å‰åç§»ä¸€ä½ï¼Œå»é™¤é‡å¤å­—ç¬¦ } if (index - startIndex + 1) &gt; max { // åˆ¤æ–­ç°åœ¨çš„é•¿åº¦æ˜¯å¦è¶…è¿‡è®°å½•çš„æœ€å¤§é•¿åº¦ max = index - startIndex + 1 // æ›´æ–°æœ€å¤§é•¿åº¦ } } return max} 4. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°(å›°éš¾) https://leetcode-cn.com/problems/median-of-two-sorted-arrays/ é¢˜ç›® ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚ è¯·ä½ æ‰¾å‡ºè¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œå¹¶ä¸”è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(log(m + n))ã€‚ ä½ å¯ä»¥å‡è®¾ nums1 å’Œ nums2 ä¸ä¼šåŒæ—¶ä¸ºç©ºã€‚ ç¤ºä¾‹ 1234nums1 = [1, 3]nums2 = [2]åˆ™ä¸­ä½æ•°æ˜¯ 2.0 1234nums1 = [1, 2]nums2 = [3, 4]åˆ™ä¸­ä½æ•°æ˜¯ (2 + 3)/2 = 2.5 è§£ç­” pass 5.æœ€é•¿å›æ–‡å­ä¸²(ä¸­ç­‰) https://leetcode-cn.com/problems/longest-palindromic-substring/ é¢˜ç›® ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚ä½ å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º 1000 ç¤ºä¾‹ 123è¾“å…¥: \"babad\"è¾“å‡º: \"bab\"æ³¨æ„: \"aba\" ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆã€‚ 12è¾“å…¥: \"cbbd\"è¾“å‡º: \"bb\" è§£ç­” 1234567891011121314151617181920212223242526272829303132333435363738394041package main/*URL: https://leetcode-cn.com/problems/longest-palindromic-substring/ä¸­å¿ƒæ‰©æ•£æ³•: éå†ç›®æ ‡å­—ç¬¦ä¸², ä»¥å½“å‰å­—ç¬¦ä¸ºä¸­å¿ƒ, å‘ä¸¤è¾¹æ‰©æ•£, å¦‚ä¸€è‡´åˆ™ç»§ç»­æ‰©æ•£, æ¯”è¾ƒæ‰¾å‡ºæœ€é•¿çš„, æ­¤ä¸ºå¥‡æ•°æ‰©æ•£é’ˆå¯¹ç±»ä¼¼äº baa è¿™ç§æƒ…å†µ, è¿ç»­ä¸¤ä¸ªç›¸åŒçš„å­—ç¬¦ä¸², åœ¨éå†æ—¶è€ƒè™‘å°†å½“å‰å­—ç¬¦ä¸ä¸‹ä¸€ä¸ªå­—ç¬¦å½“ä½œæ‰©æ•£çš„ä¸­å¿ƒ, æ­¤ä¸ºå¶æ•°æ‰©æ•£*/func longestPalindrome(s string) string { maxStr := \"\" // é•¿åº¦ä¸º0æˆ–1ç›´æ¥è¿”å› if len(s) &lt;= 1 { return s } // å¾ªç¯ for i := range s { t := verify(s, i, i) if len(t) &gt; len(maxStr) { maxStr = t } t = verify(s, i, i+1) if len(t) &gt; len(maxStr) { maxStr = t } } return maxStr}func verify(s string, l int, r int) string { for { if l &gt;= 0 &amp;&amp; r &lt; len(s) &amp;&amp; s[l] == s[r] { l-- r++ } else { // å¦‚æœåŒ¹é…ä¸ä¸Šäº†, è¿”å›ä¸Šä¸€ä¸ªåŒ¹é…æˆåŠŸçš„å›æ–‡ // liståŒ…å¤´ä¸åŒ…å°¾, æ‰€ä»¥ l+1 è€Œ r ä¸åŒ… return s[l+1 : r] } }} 6.Zå­—å½¢å˜æ¢(ä¸­ç­‰) https://leetcode-cn.com/problems/zigzag-conversion/ é¢˜ç›® å°†ä¸€ä¸ªç»™å®šå­—ç¬¦ä¸²æ ¹æ®ç»™å®šçš„è¡Œæ•°ï¼Œä»¥ä»ä¸Šå¾€ä¸‹ã€ä»å·¦åˆ°å³è¿›è¡Œ Z å­—å½¢æ’åˆ—ã€‚ æ¯”å¦‚è¾“å…¥å­—ç¬¦ä¸²ä¸º â€œLEETCODEISHIRINGâ€ è¡Œæ•°ä¸º 3 æ—¶ï¼Œæ’åˆ—å¦‚ä¸‹ï¼š 123L C I RE T O E S I I GE D H N ä¹‹åï¼Œä½ çš„è¾“å‡ºéœ€è¦ä»å·¦å¾€å³é€è¡Œè¯»å–ï¼Œäº§ç”Ÿå‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼šâ€œLCIRETOESIIGEDHNâ€ã€‚ è¯·ä½ å®ç°è¿™ä¸ªå°†å­—ç¬¦ä¸²è¿›è¡ŒæŒ‡å®šè¡Œæ•°å˜æ¢çš„å‡½æ•°ï¼š string convert(string s, int numRows); ç¤ºä¾‹ 12è¾“å…¥: s = \"LEETCODEISHIRING\", numRows = 3è¾“å‡º: \"LCIRETOESIIGEDHN\" 123456789è¾“å…¥: s = \"LEETCODEISHIRING\", numRows = 4è¾“å‡º: \"LDREOEIIECIHNTSG\"è§£é‡Š:L D RE O E I IE C I H NT S G è§£ç­” 123456789101112131415161718192021222324252627282930313233343536package main/*URL: https://leetcode-cn.com/problems/zigzag-conversion/è§£é¢˜æ€è·¯: æˆ‘ä»¬æŠŠ Z ç»“æ„çš„ä¸­é—´çš„ç©ºæ ¼å…¨éƒ¨å»æ‰, ä¼šå‘ç°å®é™…ä¸Šæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„,æ¯ç‹¬å–ä¸€ä¸ªæ–°çš„å­—ç¬¦, å°†å…¶å­˜å‚¨è¿›å½“å‰æ•°ç»„, å†è¯»å–ä¸‹ä¸€ä¸ªå­—ç¬¦å­˜å‚¨è¿›ä¸‹ä¸€è¡Œæ•°ç»„,å½“è§¦ç¢°åˆ°è¡Œåº•æ—¶, ä¸‹ä¸€ä¸ªå­—ç¬¦å­˜å‚¨è¿›ä¸Šä¸€è¡Œç›´åˆ°è¡Œåˆå†æ­£åºå­˜å‚¨*/func convert(s string, numRows int) string { if numRows == 1 { return s } var resList = make([][]string, numRows) res := \"\" rowIndex := 0 flag := 1 for _, v := range s { resList[rowIndex] = append(resList[rowIndex], string(v)) switch rowIndex { case numRows - 1: flag = -1 case 0: flag = 1 } rowIndex = rowIndex + flag } for _, v := range resList { for _, k := range v { res = res + k } } return res} 7.æ•´æ•°åè½¬(ç®€å•) https://leetcode-cn.com/problems/reverse-integer/ é¢˜ç›® ç»™å‡ºä¸€ä¸ª 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•´æ•°ä¸­æ¯ä½ä¸Šçš„æ•°å­—è¿›è¡Œåè½¬ã€‚ å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨å¾—ä¸‹ 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œåˆ™å…¶æ•°å€¼èŒƒå›´ä¸º [âˆ’231, 231 âˆ’ 1]ã€‚è¯·æ ¹æ®è¿™ä¸ªå‡è®¾ï¼Œå¦‚æœåè½¬åæ•´æ•°æº¢å‡ºé‚£ä¹ˆå°±è¿”å› 0ã€‚ ç¤ºä¾‹ 12è¾“å…¥: 123è¾“å‡º: 321 12è¾“å…¥: -123è¾“å‡º: -321 12è¾“å…¥: -123è¾“å‡º: -321 è§£ç­” 1234567891011121314151617181920212223242526package mainimport \"math\"/*URL: https://leetcode-cn.com/problems/reverse-integer/é¦–å…ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ math åŒ…ä¸‹çš„å˜é‡æ¥åˆ¤æ–­æ˜¯å¦è¶…é™åè½¬æ–¹é¢ä½¿ç”¨æ±‚ä½™+å–æ¨¡è®¡ç®—å³å¯*/func reverse(x int) int { if x &lt; math.MinInt32 || x &gt; math.MaxInt32 { return 0 } res := 0 for x != 0 { temp := x % 10 x = x / 10 res = res*10 + temp if res &lt; math.MinInt32 || res &gt; math.MaxInt32 { return 0 } } return res} 8.å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)(ä¸­ç­‰) https://leetcode-cn.com/problems/string-to-integer-atoi/ é¢˜ç›® è¯·ä½ æ¥å®ç°ä¸€ä¸ª atoi å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°ã€‚ é¦–å…ˆï¼Œè¯¥å‡½æ•°ä¼šæ ¹æ®éœ€è¦ä¸¢å¼ƒæ— ç”¨çš„å¼€å¤´ç©ºæ ¼å­—ç¬¦ï¼Œç›´åˆ°å¯»æ‰¾åˆ°ç¬¬ä¸€ä¸ªéç©ºæ ¼çš„å­—ç¬¦ä¸ºæ­¢ã€‚æ¥ä¸‹æ¥çš„è½¬åŒ–è§„åˆ™å¦‚ä¸‹ï¼š å¦‚æœç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ä¸ºæ­£æˆ–è€…è´Ÿå·æ—¶ï¼Œåˆ™å°†è¯¥ç¬¦å·ä¸ä¹‹åé¢å°½å¯èƒ½å¤šçš„è¿ç»­æ•°å­—å­—ç¬¦ç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæœ‰ç¬¦å·æ•´æ•°ã€‚ å‡å¦‚ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦æ˜¯æ•°å­—ï¼Œåˆ™ç›´æ¥å°†å…¶ä¸ä¹‹åè¿ç»­çš„æ•°å­—å­—ç¬¦ç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ•´æ•°ã€‚ è¯¥å­—ç¬¦ä¸²åœ¨æœ‰æ•ˆçš„æ•´æ•°éƒ¨åˆ†ä¹‹åä¹Ÿå¯èƒ½ä¼šå­˜åœ¨å¤šä½™çš„å­—ç¬¦ï¼Œé‚£ä¹ˆè¿™äº›å­—ç¬¦å¯ä»¥è¢«å¿½ç•¥ï¼Œå®ƒä»¬å¯¹å‡½æ•°ä¸åº”è¯¥é€ æˆå½±å“ã€‚ æ³¨æ„ï¼šå‡å¦‚è¯¥å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ•´æ•°å­—ç¬¦ã€å­—ç¬¦ä¸²ä¸ºç©ºæˆ–å­—ç¬¦ä¸²ä»…åŒ…å«ç©ºç™½å­—ç¬¦æ—¶ï¼Œåˆ™ä½ çš„å‡½æ•°ä¸éœ€è¦è¿›è¡Œè½¬æ¢ï¼Œå³æ— æ³•è¿›è¡Œæœ‰æ•ˆè½¬æ¢ã€‚ åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œè‹¥å‡½æ•°ä¸èƒ½è¿›è¡Œæœ‰æ•ˆçš„è½¬æ¢æ—¶ï¼Œè¯·è¿”å› 0 ã€‚ æœ¬é¢˜ä¸­çš„ç©ºç™½å­—ç¬¦åªåŒ…æ‹¬ç©ºæ ¼å­—ç¬¦ â€™ â€™ ã€‚ å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨ 32 ä½å¤§å°çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œé‚£ä¹ˆå…¶æ•°å€¼èŒƒå›´ä¸º [âˆ’231, 231 âˆ’ 1]ã€‚å¦‚æœæ•°å€¼è¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œè¯·è¿”å› INT_MAX (231 âˆ’ 1) æˆ– INT_MIN (âˆ’231) ã€‚ ç¤ºä¾‹ 12è¾“å…¥: \"42\"è¾“å‡º: 42 1234è¾“å…¥: \" -42\"è¾“å‡º: -42è§£é‡Š: ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦ä¸º '-', å®ƒæ˜¯ä¸€ä¸ªè´Ÿå·ã€‚ æˆ‘ä»¬å°½å¯èƒ½å°†è´Ÿå·ä¸åé¢æ‰€æœ‰è¿ç»­å‡ºç°çš„æ•°å­—ç»„åˆèµ·æ¥ï¼Œæœ€åå¾—åˆ° -42 ã€‚ 123è¾“å…¥: \"4193 with words\"è¾“å‡º: 4193è§£é‡Š: è½¬æ¢æˆªæ­¢äºæ•°å­— '3' ï¼Œå› ä¸ºå®ƒçš„ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸ä¸ºæ•°å­—ã€‚ 1234è¾“å…¥: \"words and 987\"è¾“å‡º: 0è§£é‡Š: ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦æ˜¯ 'w', ä½†å®ƒä¸æ˜¯æ•°å­—æˆ–æ­£ã€è´Ÿå·ã€‚ å› æ­¤æ— æ³•æ‰§è¡Œæœ‰æ•ˆçš„è½¬æ¢ã€‚ 1234è¾“å…¥: \"-91283472332\"è¾“å‡º: -2147483648è§£é‡Š: æ•°å­— \"-91283472332\" è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ã€‚ å› æ­¤è¿”å› INT_MIN ã€‚ è§£ç­” 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package mainimport ( \"fmt\" \"math\" \"strconv\")/*URL: https://leetcode-cn.com/problems/string-to-integer-atoi/è§£é¢˜æ€è·¯: æ™®é€šçš„é€»è¾‘å¤„ç†*/func myAtoi(str string) int { si := \"\" sum := 1 stop := false for _, v := range str{ vs := fmt.Sprintf(\"%c\", v) if vs == \" \" &amp;&amp; stop == false &amp;&amp; si == \"\" { // æ•æ‰æœ€å¼€å§‹æ˜¯ç©ºæ ¼çš„æƒ…å†µ continue } if vs == \"-\" &amp;&amp; stop == false{ // æ•æ‰ä»¥-å¼€å¤´ sum = -1 stop = true continue } if vs == \"+\" &amp;&amp; stop == false{ // æ•æ‰ä»¥+å¼€å¤´ sum = 1 stop = true continue } if _, err := strconv.Atoi(vs); err == nil{ // æ•æ‰æ•°å­— stop = true si+=vs continue } break } res, _ := strconv.Atoi(si) if res &lt; math.MinInt32 || res &gt; math.MaxInt32 { if sum == 1{ return math.MaxInt32 } return math.MinInt32 } return res * sum} 9. å›æ–‡æ•°(ç®€å•) https://leetcode-cn.com/problems/palindrome-number/ é¢˜ç›® åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦æ˜¯å›æ–‡æ•°ã€‚å›æ–‡æ•°æ˜¯æŒ‡æ­£åºï¼ˆä»å·¦å‘å³ï¼‰å’Œå€’åºï¼ˆä»å³å‘å·¦ï¼‰è¯»éƒ½æ˜¯ä¸€æ ·çš„æ•´æ•°ã€‚ ç¤ºä¾‹ 12è¾“å…¥: 121è¾“å‡º: true 123è¾“å…¥: -121è¾“å‡º: falseè§£é‡Š: ä»å·¦å‘å³è¯», ä¸º -121 ã€‚ ä»å³å‘å·¦è¯», ä¸º 121- ã€‚å› æ­¤å®ƒä¸æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚ 123è¾“å…¥: 10è¾“å‡º: falseè§£é‡Š: ä»å³å‘å·¦è¯», ä¸º 01 ã€‚å› æ­¤å®ƒä¸æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚ è¿›é˜¶ ä½ èƒ½ä¸å°†æ•´æ•°è½¬ä¸ºå­—ç¬¦ä¸²æ¥è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ è§£ç­” 12345678910111213141516171819202122package mainimport ( \"strconv\")/*URL: https://leetcode-cn.com/problems/palindrome-number/è§£é¢˜æ€è·¯: è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œéå†ä¸€åŠå³å¯ï¼Œå¯¹äºåŸºæ•°é•¿åº¦ï¼Œæœ€ä¸­é—´çš„æ•°å­—ä¸å¿…è¦æ¯”è¾ƒ*/func isPalindrome(x int) bool { s := strconv.Itoa(x) l := len(s) for i := 0; i&lt;= l/2-1; i++{ if s[i] != s[l-i-1]{ return false } } return true}","link":"/2021/09/04/leet_code(1-10)/"},{"title":"limiter æºç åˆ†æ","text":"å‰è¨€ å¯¹äºå¾ˆå¤šä¸šåŠ¡æˆ–è€…è¯´æ˜¯ä»£ç æ¥è®², è¿è¡Œé€Ÿåº¦çš„ç“¶é¢ˆéƒ½ä¸åœ¨ä»£ç è¿è¡Œæ—¶æœ¬èº«, æ‰€ä»¥æˆ‘ä¸ªäººå¯¹äºæ–°ä¸šåŠ¡çš„è¯­è¨€é€‰å‹, æ›´å¤šçš„æ˜¯è€ƒè™‘å…¶ä»–æ–¹é¢, è€Œä¸æ˜¯è¿è¡Œé€Ÿåº¦, ç”šè‡³æœ‰äº›ä¸šåŠ¡, è¿˜éœ€è¦ä¸“é—¨è¿›è¡Œé™æµæ‰å¯ä»¥è¾¾åˆ°ç›®çš„, æ¯”å¦‚è¯´æˆ‘è¦å»æµ‹è¯• IP å’Œç«¯å£æ˜¯å¦é€šç•…, éœ€è¦é€šè¿‡æµ‹è¯•æ˜¯å¦èƒ½è¿›è¡Œ TCP è¿æ¥æ¥åˆ¤æ–­, ä½†æ˜¯æˆ‘ä»¬éœ€è¦å¯¹è¿™äº›è¿›è¡Œä¸€å®šçš„æµé€Ÿæ§åˆ¶, ä»¥å…è¢«æœºæˆ¿è‡ªåŠ¨å‘Šè­¦æˆ–è€…å æ»¡å¸¦å®½, æ¯”å¦‚è¯´æˆ‘ä»¬éœ€è¦å¯¹æ‰§è¡Œçˆ†ç ´ä»»åŠ¡çš„ work é™å®šæœ€å¤šåŒæ—¶è¿è¡Œ 50000 ä¸ªä»»åŠ¡, å°±éœ€è¦è¿›è¡Œé™æµå¤„ç†äº†. ä»¤ç‰Œæ¡¶ è¯´èµ·æ€ä¹ˆæ ·å»é™æµ, ä¸€ä¸ªå¾ˆç»å…¸çš„æ¨¡å¼ ä»¤ç‰Œæ¡¶ å°±å‡ºç°åœ¨è„‘æµ·ä¸­. ä»¤ç‰Œæ¡¶è¿™ä¸œè¥¿æˆ‘æ›´æ„¿æ„ç”¨ä¸€ç§æ•°å­¦é¢˜æ¥è§£é‡Š, è¿˜åœ¨ä¸Šå­¦çš„æ—¶å€™, ç›¸ä¿¡å¤§å®¶éƒ½åšè¿‡ç±»ä¼¼è¿™æ ·çš„é¢˜ç›®: ä¸€ä¸ªæ¸¸æ³³æ± , æœ‰ä¸€ä¸ªæ°´ç®¡åŒ€é€Ÿå‘å…¶ä¸­æ³¨æ°´, è¿˜æœ‰ä¸€ä¸ªç®¡å­åŒ€é€Ÿä»æ± ä¸­æ”¾æ°´, è¿™å…¶å®å°±æ˜¯è¾¾åˆ°äº†é™æµçš„ç›®çš„ å¦‚æœæ¼æ°´çš„ç®¡å­ç²—ç»†ä»£è¡¨ work çš„å¤šå°‘, è€Œæ³¨æ°´ç®¡å’Œæ± å­æ‰æ˜¯ç®¡æ§é€Ÿç‡çš„å…³é”®, å½“æ°´å·²ç»æ¼å®Œ, åˆ™æ˜¯ä»£è¡¨å½“å‰æµé€Ÿå·²ç»è¾¾åˆ°äº†å³°å€¼, åªèƒ½ç­‰æ³¨æ°´ç®¡å†æµæ°´, è€Œå½“æ³¨æ°´ç®¡ç²—äºæ¼æ°´ç®¡, ä¹Ÿæœ‰ä¸€ä¸ªæ¸¸æ³³æ± å¯ä»¥ä½œä¸ºç¼“å†² æœ¬äººä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ä¸ªç®€å•çš„ä»¤ç‰Œæ¡¶æ¨¡å¼çš„é™æµå™¨, ç®€å•æ¥è®²å°±æ˜¯æœ‰ä¸€ä¸ªgoroutineæŒç»­çš„è¿›è¡Œæ³¨æ°´, å°±æ˜¯å‘ä¸€ä¸ªchanè¿›è¡Œå†™å…¥, è€Œæœ‰ä¸€ä¸ªgoroutineæŒç»­ä»chanè¯»å–æ•°æ®, è¯»å–åˆ°å°±è®¤ä¸ºæ‹¿åˆ°äº†ä»¤ç‰Œ, ä½¿ç”¨goroutineç”Ÿæˆä¸€ä¸ªæ–°çš„ä»»åŠ¡, ä»£ç ç±»ä¼¼äº 1234567891011121314151617func GetBucket(capacityPs, maxCapacity int) chan struct{} { var bucketToken = make(chan struct{}, maxCapacity) timeD := time.Second / time.Duration(capacityPs) ticker := time.NewTicker(timeD) go func() { for _ = range ticker.C{ bucketToken &lt;- struct{}{} } }() return bucketToken}func GetToken(block bool, bucket *chan struct{}) { for _ = range *bucket { // TODO }} è¿™æ ·åŸºæœ¬æ»¡è¶³äº†ä¸šåŠ¡, ä½†æ˜¯å­¦æ— æ­¢å¢ƒ, è¿˜æ˜¯è¦çœ‹ä¸€ä¸‹å¤§ä½¬ä»¬çš„å®ç°. æ–¹ä¾¿ä»¥åå¯èƒ½çš„éœ€æ±‚è¿­ä»£, äºæ˜¯æ‰¾åˆ°äº†ä¸€ä¸ªå¼€æºé¡¹ç›® ulule/limiter: Dead simple rate limit middleware for Go. (github.com) å¹¶å°è¯•ç†è§£å…¶æºä»£ç ","link":"/2021/07/07/limiter_analyze/"},{"title":"æ€»ç»“ä¸€ä¸‹ linux ä¸­çš„çº¿ç¨‹æ¨¡å‹","text":"æ¦‚è¿° linux æœ€å¼€å§‹ä½¿ç”¨çš„çº¿ç¨‹æ˜¯linuxThreads, ä½†æ˜¯linuxThreadsä¸ç¬¦åˆPOSIXæ ‡å‡†, åæ¥å‡ºç°äº†NGPT, æ€§èƒ½æ›´é«˜, ä¹‹ååˆå‡ºç°äº†NPTL, æ¯”NGPTæ›´å¿«, éšç€æ—¶é—´æ¨ç§», å°±åªå‰©ä¸‹NPTLäº† NPTL&gt;NGPT&gt;linuxThreads çº¿ç¨‹çš„æ¨¡å‹åˆ†ä¸ºä¸‰ç§: å¤šå¯¹ä¸€(M:1)çš„ç”¨æˆ·çº§çº¿ç¨‹æ¨¡å‹ ä¸€å¯¹ä¸€(1:1)çš„å†…æ ¸çº§çº¿ç¨‹æ¨¡å‹: ä¾‹å¦‚linuxThreadså’ŒNPTL å¤šå¯¹å¤š(M:N)çš„ä¸¤æçº¿ç¨‹æ¨¡å‹: ä¾‹å¦‚NGPT å¤šå¯¹ä¸€ å¤šå¯¹ä¸€å¾ˆå¥½ç†è§£, åœ¨å¤šå¯¹ä¸€ä¸­, çº¿ç¨‹çš„åˆ›å»º/è°ƒåº¦/åŒæ­¥çš„ç»†èŠ‚éƒ½ç”±è¿›ç¨‹çš„ç”¨æˆ·ç©ºé—´çº¿ç¨‹åº“æ¥å¤„ç†, ä¹Ÿå°±æ˜¯è¯´ç”±è¯­è¨€è‡ªå·±æ¥å¤„ç†. ç”¨æˆ·æ€çº¿ç¨‹çš„å¾ˆå¤šæ“ä½œå¯¹å†…æ ¸æ¥è®², éƒ½æ˜¯é€æ˜çš„, ä¸éœ€è¦å†…æ ¸æ¥è¿›è¡Œæ¥ç®¡, å°±æ„å‘³ç€ä¸éœ€è¦è¿›è¡Œå†…æ ¸æ€å’Œç”¨æˆ·æ€è¿›è¡Œé¢‘ç¹çš„åˆ‡æ¢. å¯¼è‡´çº¿ç¨‹çš„åˆ›å»º/è°ƒåº¦/åŒæ­¥çš„å¤„ç†é€Ÿåº¦éå¸¸çš„å¿«. å½“ç„¶ä¹Ÿæœ‰ç¼ºç‚¹, å½“å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œæ—¶, å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ IO æ“ä½œéœ€è¦ç»è¿‡å†…æ ¸æ—¶, å†…æ ¸æ¥ç®¡äº†æ“ä½œå‡ºç°é˜»å¡, å°±å¯¼è‡´äº†ç”¨æˆ·æ€çš„å…¶ä»–çº¿ç¨‹éƒ½ä¼šè¢«é˜»å¡. å› ä¸ºè¿™äº›çº¿ç¨‹å®é™…ä¸Šéƒ½æ˜¯ä¸€ä¸ªå†…æ ¸è°ƒåº¦å¤„ç†. å¦‚æœè¯­è¨€ä¸å¯¹å¤šæ ¸è¿›è¡Œä¼˜åŒ–æ—¶, å°±ä¼šå¯¼è‡´åªæœ‰ä¸€ä¸ªå†…æ ¸å¤„ç†çº¿ç¨‹, ä¹Ÿå°±æ— æ³•è°ƒåº¦åˆ°å…¶ä»–çš„æ ¸å¿ƒ, å°±å˜æˆäº†ä¼ªçº¿ç¨‹ ä¸€å¯¹ä¸€ åœ¨ä¸€å¯¹ä¸€æ¨¡å‹ä¸­, æ¯ä¸ªç”¨æˆ·çº¿ç¨‹éƒ½å¯¹åº”å„è‡ªçš„å†…æ ¸è°ƒåº¦å®ä½“, å†…æ ¸å¯¹æ¯ä¸ªçº¿ç¨‹è¿›è¡Œè°ƒåº¦, åœ¨é˜»å¡æ—¶å°†å¯ä»¥å…¶ä»–çº¿ç¨‹è°ƒåº¦åˆ°å…¶ä»–æ ¸å¿ƒå¤„ç†. çº¿ç¨‹æ¯æ¬¡æ“ä½œéƒ½ä¼šåœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€ç›´æ¥è¿›è¡Œåˆ‡æ¢, æ¶ˆè€—ä¸€å®šçš„èµ„æº, åŒæ—¶, å†…æ ¸ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½é…ç½®ä¸€ä¸ªæ ¸å¿ƒ, å¯¼è‡´çº¿ç¨‹å¦‚æœå¾ˆå¤šæ—¶, ä¼šå½±å“æ€§èƒ½ åœ¨ç°ä»£ç¡¬ä»¶ä¸Š, CPU ä¸€èˆ¬éƒ½æ˜¯å¤šæ ¸, å› æ­¤ç›¸æ¯”å¤šå¯¹ä¸€æ¥è®², ä¸€å¯¹ä¸€èƒ½æ›´å¥½çš„ä½¿ç”¨èµ„æº å¤šå¯¹å¤š å¤šå¯¹å¤šç»¼åˆåŠ›ä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€çš„ä¼˜ç‚¹, æ¯ä¸ªçº¿ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªè°ƒåº¦å®ä½“, ä¹Ÿå¯ä»¥å¤šçº¿ç¨‹å¯¹åº”ä¸€ä¸ªè°ƒåº¦å®ä½“ ä½†æ˜¯å¤šå¯¹å¤šçš„è°ƒåº¦éœ€è¦å†…æ ¸æ€å’Œç”¨æˆ·æ€ä¸€èµ·è”åŠ¨å®ç°, å¯¼è‡´è¯¥æ¨¡å‹éå¸¸å¤æ‚ go go çš„ GMP æ¨¡å‹, å±äºæ˜¯å¤šå¯¹å¤šæ¨¡å‹, é»˜è®¤æƒ…å†µä¸‹, çœŸæ­£çš„æ ¸å¿ƒå®ä½“æ•°é‡ä¸º CPU çš„å†…æ ¸æ•°é‡, go çš„ goroutine æ˜¯ go å†…éƒ¨çš„çº¿ç¨‹, å¯¹åº” GMP ä¸­çš„ G, GMP ä¸­çš„ P ä¼šå¯¹ G è¿›è¡Œè°ƒåº¦, è½åˆ°çœŸæ­£çš„æ ¸å¿ƒå®ä½“, ä¹Ÿå°±æ˜¯ GMP ä¸­çš„ M è¿›è¡Œè¿è¡Œ æ›´å¤šçš„ go è°ƒåº¦éƒ¨åˆ†é€»è¾‘, æŸ¥çœ‹æˆ‘çš„å…¶ä»–ç›¸å…³æ–‡ç« ","link":"/2022/02/21/linux_thread_model/"},{"title":"mongo çš„ bulk åŠŸèƒ½","text":"å‰è¨€ Tips: go çš„ mongo æ¨¡å—, æœ‰ä¸¤ä¸ª, ä¸€ä¸ªæ˜¯ go-mgo/mgo: The MongoDB driver for Go. UNMAINTAINED - SEE BELOW (github.com) ä¸€ä¸ªæ˜¯ mongodb/mongo-go-driver: The Go driver for MongoDB (github.com) è¿™é‡Œæ¼”ç¤ºä½¿ç”¨åè€…, ä¹Ÿæ¨èå¤§å®¶ä½¿ç”¨åè€…, å› ä¸º mgo å·²ç»äº2018å¹´åœæ­¢æ›´æ–°, å¯¹ mongo çš„ç‰ˆæœ¬æ”¯æŒä¹Ÿåªåˆ°4.8, è€Œåè€…æ˜¯ç”± mongodb å®˜æ–¹ç»´æŠ¤, å¯¹äº go å’Œ mongo çš„ç‰ˆæœ¬æ›´æ–°éƒ½å¾ˆåŠæ—¶ é—®é¢˜ åœ¨å®é™…å¼€å‘ä¸­, æˆ‘ä»¬å¯èƒ½é‡åˆ°è¿™æ ·çš„éœ€æ±‚åœºæ™¯: æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…è¦ä¸åœçš„è·å–åˆ°æ•°æ®å¹¶ä¸”æ ¹æ®æ•°æ®ä¿®æ”¹/å¢åŠ  mongodb çš„å€¼, å¯èƒ½ç¬¬ä¸€æ—¶é—´æˆ‘ä»¬è€ƒè™‘åˆ°çš„æ˜¯è·å–ä¸€ä¸ªæ•°æ®åç«‹åˆ»å¯¹æ•°æ®è¿›è¡Œå¤„ç†å¹¶åŒæ­¥åˆ° mongo, ä»–çš„ä»£ç ç±»ä¼¼äº 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package mainimport ( \"context\" \"fmt\" \"go.mongodb.org/mongo-driver/bson\" \"go.mongodb.org/mongo-driver/bson/primitive\" \"go.mongodb.org/mongo-driver/mongo\" \"go.mongodb.org/mongo-driver/mongo/options\")var mongoClient *mongo.Clientfunc InitMDB() error { // Set client options clientOptions := options.Client().ApplyURI(\"mongodb://user:pwd@127.0.0.1:15000/test?replicaSet=replica\") // Connect to MongoDB client, err := mongo.Connect(context.TODO(), clientOptions) if err != nil { fmt.Println(err) return err } // Check the connection err = client.Ping(context.TODO(), nil) if err != nil { fmt.Println(err) return err } mongoClient = client return nil}func GetMDBCollection(dataBase, collection string) *mongo.Collection { return mongoClient.Database(dataBase).Collection(collection)}type Task struct { ID primitive.ObjectID Age int}var TaskChan chan Taskfunc Demo() { for t := range TaskChan { // ç›‘å¬ chan, æœ‰ä»»åŠ¡å°±å¤„ç† f := bson.M{ \"_id\": t.ID, } u := bson.M{ \"$set\": bson.M{ \"age\": t.Age, }, } c := GetMDBCollection(\"test\", \"demo\") c.UpdateOne(context.TODO(), f, u) // c æ˜¯ mongo è¿æ¥ }}func main() { InitMDB() Demo()} ä½¿ç”¨ç›‘å¬ chan çš„æ–¹å¼, æ¯è·å–åˆ°ä¸€ä¸ª task, ä¾¿å» mongo è¿›è¡Œä¸€æ¬¡æ›´æ–°, å½“é‡ä¸å¤§æ—¶ä¸ä¼šå‡ºç°é—®é¢˜, ä½†å¦‚æœç”Ÿäº§è€…çš„é€Ÿåº¦éå¸¸å¿«, ä¾‹å¦‚ 1s æœ‰50ä¸ª task è¢«ç”Ÿäº§, è¿™æ—¶å€™, é€šè¿‡æ¯æ¬¡è·å–ä¸€ä¸ª c è¿›è¡Œä¸€æ¬¡æ›´æ–°çš„æ–¹æ¡ˆå°±ä¼šå¯¼è‡´æ¶ˆè´¹è€…æ¶ˆè´¹é€Ÿåº¦å‡ºç°ç“¶é¢ˆ, å¯¼è‡´æ€§èƒ½é—®é¢˜å‡ºç° ä½¿ç”¨ goroutine å°è¯•è§£å†³ è·å–ä½ ä¼šæƒ³åˆ°, ä½¿ç”¨ goroutine æ¥å»é™¤æ¶ˆè´¹æ—¶éœ€è¦ç­‰å¾… mongo äº¤äº’çš„ç­‰å¾…æ—¶é—´, å°†ä»£ç ä¿®æ”¹ä¸º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667package mainimport ( \"context\" \"fmt\" \"go.mongodb.org/mongo-driver/bson\" \"go.mongodb.org/mongo-driver/bson/primitive\" \"go.mongodb.org/mongo-driver/mongo\" \"go.mongodb.org/mongo-driver/mongo/options\")var mongoClient *mongo.Clientfunc InitMDB() error { // Set client options clientOptions := options.Client().ApplyURI(\"mongodb://user:pwd@127.0.0.1:15000/test?replicaSet=replica\") // Connect to MongoDB client, err := mongo.Connect(context.TODO(), clientOptions) if err != nil { fmt.Println(err) return err } // Check the connection err = client.Ping(context.TODO(), nil) if err != nil { fmt.Println(err) return err } mongoClient = client return nil}func GetMDBCollection(dataBase, collection string) *mongo.Collection { return mongoClient.Database(dataBase).Collection(collection)}type Task struct { ID primitive.ObjectID Age int}var TaskChan chan Taskfunc Demo() { for t := range TaskChan { // ç›‘å¬ chan, æœ‰ä»»åŠ¡å°±å¤„ç† // æ¯æ¬¡è·å–åˆ°ä»»åŠ¡åˆ™å¯åŠ¨ä¸€ä¸ª goroutine è¿›è¡Œå…¥åº“æ“ä½œ go func(t Task) { f := bson.M{ \"_id\": t.ID, } u := bson.M{ \"$set\": bson.M{ \"age\": t.Age, }, } c := GetMDBCollection(\"test\", \"demo\") c.UpdateOne(context.TODO(), f, u) // c æ˜¯ mongo è¿æ¥ }(t) }}func main() { InitMDB() Demo()} é€šè¿‡å¯åŠ¨åç¨‹çš„æ–¹å¼, å‡å°‘ mongo ç­‰å¾…æ—¶é—´, è¿™æ ·è™½ç„¶èƒ½å¾ˆå¿«çš„è·å–ä»»åŠ¡, ä½†æ˜¯å¯¹äº mongo çš„ c æ•°é‡, å¹¶ä¸èƒ½è¿›è¡Œæ§åˆ¶, å¯èƒ½å› ä¸ºæ•°æ®åº“è¿æ¥æ•°è¿‡å¤šå¯¼è‡´æ›´æ–°å¤±è´¥ ä½¿ç”¨ mongo bulk å…¶å®åœ¨ mongo ä¸­, å·²ç»æä¾›äº†ä¸€æ¬¡äº¤äº’æ‰¹é‡æ‰§è¡Œå‘½ä»¤çš„åŠŸèƒ½, å°±æ˜¯ mongo bulk Bulk() â€” MongoDB Manual åœ¨å®˜æ–¹æ–‡æ¡£ä¸­, å·²ç»åœ¨ä¸€å¼€å§‹æ³¨æ˜äº†mongo åœ¨3.2ç‰ˆæœ¬ä¹‹åæ–°å¢äº†å°è£…çš„bulkWrite() Starting in version 3.2, MongoDB also provides the&nbsp;db.collection.bulkWrite()&nbsp;method for performing bulk write operations. bulkWrite()ç›¸æ¯”äºå¾ˆæ—©çš„bulk(), æœ‰æ›´é«˜çš„å°è£…, æ¯”å¦‚å¯¹äºä¸€æ¬¡æ‰§è¡Œè¿‡å¤šçš„æ“ä½œ, ä¼šè‡ªå·±è¿›è¡Œåˆ‡å‰²åˆ†ä¸ºå‡ æ¬¡æ‰§è¡Œ, å› æ­¤, æ›´æ¨èä½¿ç”¨bulkWrite(), æˆ‘ä»¬ä¸‹é¢çš„ Demo, ä¹Ÿå…¨éƒ¨ä½¿ç”¨bulkWrite()è¿›è¡Œæ¼”ç¤º bulkWrite db.collection.bulkWrite() â€” MongoDB Manual æˆ‘ä»¬å°†ä»£ç ä¿®æ”¹å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990package mainimport ( \"context\" \"fmt\" \"go.mongodb.org/mongo-driver/bson\" \"go.mongodb.org/mongo-driver/bson/primitive\" \"go.mongodb.org/mongo-driver/mongo\" \"go.mongodb.org/mongo-driver/mongo/options\")var mongoClient *mongo.Clientfunc InitMDB() error { // Set client options clientOptions := options.Client().ApplyURI(\"mongodb://user:pwd@127.0.0.1:15000/test?replicaSet=replica\") // Connect to MongoDB client, err := mongo.Connect(context.TODO(), clientOptions) if err != nil { fmt.Println(err) return err } // Check the connection err = client.Ping(context.TODO(), nil) if err != nil { fmt.Println(err) return err } mongoClient = client return nil}func GetMDBCollection(dataBase, collection string) *mongo.Collection { return mongoClient.Database(dataBase).Collection(collection)}type Task struct { ID primitive.ObjectID Age int}var TaskChan chan Taskconst maxWrite = 3 // æœ€å¤§çš„æ›´æ–°é•¿åº¦func Demo() { w := []mongo.WriteModel{} opt := options.BulkWriteOptions{} opt.SetOrdered(true) // è®¾ç½®æ‰§è¡Œä¸ºé¡ºåºçš„ for t := range TaskChan { // ç›‘å¬ chan, æœ‰ä»»åŠ¡å°±å¤„ç† // å¦‚æœé•¿åº¦æœªè¾¾åˆ°è§„å®šçš„æœ€å¤§é•¿åº¦, æ·»åŠ åˆ° w åç­‰å¾…ä¸‹ä¸€æ¬¡å¾ªç¯ // é•¿åº¦è¾¾åˆ°æœ€å¤§é•¿åº¦æ—¶, è°ƒç”¨ mongo æ‰§è¡Œè¯­å¥ // NewUpdateOneModel: æ›´æ–°ä¸€ä¸ªæ–‡æ¡£ // SetFilter: æŸ¥æ‰¾ // SetUpdate: æ›´æ–° // SetUpsert: è®¾ç½®æœ‰åˆ™æ›´æ–°, æ²¡æœ‰åˆ™æ’å…¥, è®¾ç½®ä¸º false åˆ™ä»£è¡¨æ²¡æœ‰å°±ä¸åšæ“ä½œ w = append(w, mongo.NewUpdateOneModel().SetFilter(bson.M{\"_id\": t.ID}).SetUpdate(bson.M{\"$set\": bson.M{\"age\": t.Age}}).SetUpsert(true)) if len(w) == maxWrite { // ä½¿ç”¨ bulkWrite æ›´æ–°å¤šæ¡è¯­å¥ c := GetMDBCollection(\"teinfra_hs_log\", \"app\") r, err := c.BulkWrite(context.TODO(), w, &amp;opt) if err != nil { fmt.Println(err) } fmt.Println(r.UpsertedIDs) // è¿”å›æ“ä½œçš„ ID: map[0:ObjectID(\"625ad4eaee42d75d76203685\") 1:ObjectID(\"625ad4eaee42d75d76203686\") 2:ObjectID(\"625ad4eaee42d75d76203687\")] w = []mongo.WriteModel{} // é‡æ–°å°† w è®¾ç½®ä¸ºç©º } }}func set() { ts := []Task{ {ID: primitive.NewObjectID(), Age: 10}, {ID: primitive.NewObjectID(), Age: 11}, {ID: primitive.NewObjectID(), Age: 12}, } for _, v := range ts { TaskChan &lt;- v }}func main() { InitMDB() TaskChan = make(chan Task, 1) go set() Demo()} ä»¥ä¸Šæ˜¯ä¸€æ¬¡æ‰§è¡Œå¤šæ¬¡æ›´æ–°çš„ Demo ä»£ç  è€Œ bulkWrite() ä¸æ­¢åªæœ‰ NewUpdateOneModel, è¿˜æœ‰å…¶ä»–çš„è¯¸å¦‚NewDeleteManyModel, NewReplaceOneModel, NewInsertOneModel ç­‰ç­‰æ–¹æ³•, å…·ä½“å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ db.collection.bulkWrite() â€” MongoDB Manual å’Œ mongo package - go.mongodb.org/mongo-driver/mongo - pkg.go.dev ä½†æ˜¯ç»†å¿ƒçš„ä½ å¯èƒ½å¾ˆå¿«ä¼šå‘ç°é—®é¢˜, å¦‚æœæˆ‘ä»¬å°†æœ€ç»ˆå‘é€çš„é•¿åº¦æŒ‡æ ‡è®¾ç½®çš„å¾ˆå¤§, è€Œæ²¡æœ‰è¾¾åˆ°æœ€å¤§é•¿åº¦æ—¶å°±ä¸ä¼šå°†æ•°æ®å‘é€åˆ°æ•°æ®åº“, é‚£ä¹ˆå¦‚æœçªç„¶æŸä¸€æ—¶åˆ»æ²¡æœ‰æ–°çš„ task äº†, è€Œå­˜ä¸Šçš„ task å› ä¸ºé•¿åº¦ä¸å¤Ÿæ²¡æœ‰å‘å‡ºå», é‚£ä¹ˆè¿™äº›æ•°æ®å°±å¾ˆé•¿æ—¶é—´æ²¡æœ‰è½åˆ°æ•°æ®åº“, å¯¼è‡´é—®é¢˜å‡ºç° äºæ˜¯æˆ‘ä»¬å¯ä»¥è€ƒè™‘åŠ å…¥ä¸€ä¸ªè¶…æ—¶æ—¶é—´, å½“æ—¶é—´åˆ°è¾¾è¶…æ—¶æ—¶é—´æˆ–è€…è¾¾åˆ°æŒ‡å®šé•¿åº¦, éƒ½ä¼šå‘é€åˆ° mongo, è¿™æ ·å°±è§£å†³äº†é—®é¢˜ bulkWrite å‘é€çš„è§¦å‘æœºåˆ¶ é€šè¿‡time.Tickæ¥åˆ›å»ºå®šæ—¶å™¨, é€šè¿‡å®šæ—¶å™¨æ¥è¿›è¡Œéš”ä¸€æ®µæ—¶é—´å‘é€ä¸€æ¬¡çš„æ“ä½œ ç„¶åé€šè¿‡åˆ¤æ–­åˆ‡ç‰‡é•¿åº¦æ¥è¿›è¡Œå‘é€æ“ä½œ, å› ä¸ºä¸¤ä¸ªéƒ½ä¸æ˜¯ä½¿ç”¨ goroutine , æ‰€ä»¥ä¸ä¼šå‡ºç°åˆ‡ç‰‡çš„èµ„æºç«äº‰é—®é¢˜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107package mainimport ( \"context\" \"fmt\" \"time\" \"go.mongodb.org/mongo-driver/bson\" \"go.mongodb.org/mongo-driver/bson/primitive\" \"go.mongodb.org/mongo-driver/mongo\" \"go.mongodb.org/mongo-driver/mongo/options\")var mongoClient *mongo.Clientfunc InitMDB() error { // Set client options clientOptions := options.Client().ApplyURI(\"mongodb://user:pwd@127.0.0.1:15000/test?replicaSet=replica\") // Connect to MongoDB client, err := mongo.Connect(context.TODO(), clientOptions) if err != nil { fmt.Println(err) return err } // Check the connection err = client.Ping(context.TODO(), nil) if err != nil { fmt.Println(err) return err } mongoClient = client return nil}func GetMDBCollection(dataBase, collection string) *mongo.Collection { return mongoClient.Database(dataBase).Collection(collection)}type Task struct { ID primitive.ObjectID Age int}var TaskChan chan Taskconst maxWrite = 1000 // æœ€å¤§çš„æ›´æ–°é•¿åº¦const maxWiteTime = time.Millisecond * 300 // å¦‚æœæœ€è¿‘300msæ²¡æœ‰æ›´æ–°ä¸”æœ‰éœ€è¦æ›´æ–°çš„æ•°æ®åˆ™æ›´æ–°ä¸€æ¬¡func bulk(writes []mongo.WriteModel, opt options.BulkWriteOptions) { // ä½¿ç”¨ bulkWrite æ›´æ–°å¤šæ¡è¯­å¥ c := GetMDBCollection(\"teinfra_hs_log\", \"app\") r, err := c.BulkWrite(context.TODO(), writes, &amp;opt) if err != nil { fmt.Println(err) } fmt.Println(r.UpsertedIDs) // è¿”å›æ“ä½œçš„ ID: map[0:ObjectID(\"625ad4eaee42d75d76203685\") 1:ObjectID(\"625ad4eaee42d75d76203686\") 2:ObjectID(\"625ad4eaee42d75d76203687\")]}func Demo() { w := []mongo.WriteModel{} opt := options.BulkWriteOptions{} opt.SetOrdered(true) // è®¾ç½®æ‰§è¡Œä¸ºé¡ºåºçš„ ticket := time.Tick(maxWiteTime) // è®¾ç½®å®šæ—¶å™¨, æ¯ maxWiteTime è§¦å‘ä¸€æ¬¡ chan for { select { case t, ok := &lt;-TaskChan: if !ok { fmt.Println(\"down\") return } // å¦‚æœé•¿åº¦æœªè¾¾åˆ°è§„å®šçš„æœ€å¤§é•¿åº¦, æ·»åŠ åˆ° w åç­‰å¾…ä¸‹ä¸€æ¬¡å¾ªç¯ // é•¿åº¦è¾¾åˆ°æœ€å¤§é•¿åº¦æ—¶, è°ƒç”¨ mongo æ‰§è¡Œè¯­å¥ // NewUpdateOneModel: æ›´æ–°ä¸€ä¸ªæ–‡æ¡£ // SetFilter: æŸ¥æ‰¾ // SetUpdate: æ›´æ–° // SetUpsert: è®¾ç½®æœ‰åˆ™æ›´æ–°, æ²¡æœ‰åˆ™æ’å…¥, è®¾ç½®ä¸º false åˆ™ä»£è¡¨æ²¡æœ‰å°±ä¸åšæ“ä½œ w = append(w, mongo.NewUpdateOneModel().SetFilter(bson.M{\"_id\": t.ID}).SetUpdate(bson.M{\"$set\": bson.M{\"age\": t.Age}}).SetUpsert(true)) if len(w) == maxWrite { bulk(w, opt) w = []mongo.WriteModel{} } case &lt;-ticket: // 300ms è§¦å‘ä¸€æ¬¡ if len(w) != 0 { // å¦‚æœ w æœ‰å€¼, åˆ™æäº¤ç»™ mongo bulk(w, opt) w = []mongo.WriteModel{} } } }}func set() { ts := []Task{ {ID: primitive.NewObjectID(), Age: 10}, {ID: primitive.NewObjectID(), Age: 11}, {ID: primitive.NewObjectID(), Age: 12}, } for _, v := range ts { TaskChan &lt;- v }}func main() { InitMDB() TaskChan = make(chan Task, 1) go set() Demo()} è¿™æ ·å°±å¯ä»¥æ­£å¸¸çš„è¿è¡Œäº† QA åº”è¯¥ä½¿ç”¨ bulkWrite è€Œä¸æ˜¯ bulk bulkWrite æ›´æ¨èä½¿ç”¨, builWrite ç›¸æ¯”äº bulk+run çš„æ–¹å¼, æ›´åŠ ä¸Šå±‚, æ¯”å¦‚é’ˆå¯¹ä¸€æ¬¡ æ“ä½œçš„ç»„æ•°é‡è¶…è¿‡ maxWriteBatchSize çš„æ—¶å€™, run ä¼šç›´æ¥æŠ¥é”™, è€Œ Write ä¼šè‡ªå·±åˆ‡åˆ† mgo ä¸æ”¯æŒ bulkWrite, ç»“åˆä¸Šé¢çš„é¡¹ç›®æ›´æ–°çŠ¶å†µ, æ–°çš„é¡¹ç›®åº”å½“ä½¿ç”¨ mongo package - go.mongodb.org/mongo-driver/mongo - pkg.go.dev æœ‰åºå’Œæ— åº db.collection.bulkWrite() â€” MongoDB Manual æœ‰åºæ—¶, mongo ä¼šæŒ‰ç…§åˆ—è¡¨é¡ºåº, ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œä»£ç , å¦‚æœæŸä¸ªè¯­å¥å‡ºé”™, å‰©ä¸‹çš„è¯­å¥ä¸ä¼šæ‰§è¡Œ, ç›´æ¥åœæ­¢ æ— åºæ—¶, mongo ä¼šè‡ªå·±è¿›è¡Œå¹¶å‘æ‰§è¡Œ, ä¸ä¿è¯æ‰§è¡Œé¡ºåº, å…¶ä¸­æŸå‡ ä¸ªé”™è¯¯ä¸ä¼šé€ æˆå…¶ä»–çš„æ‰§è¡Œåœæ­¢ æœ‰åºæ—¶é€Ÿåº¦æ›´æ…¢, ä½†æ˜¯å¯¹æ•°æ®çš„å¤„ç†å¯èƒ½æ›´åŠ ç¬¦åˆå¼€å‘è€…é¢„æœŸ, å¦‚æœä½ åœ¨ä¸€ä¸ª bulk ä¸­å¯¹æŸä¸ªæ–‡æ¡£è¿›è¡Œå¤šæ¬¡ä¿®æ”¹, å¦‚æœä½¿ç”¨æ— åº, å¹¶ä¸èƒ½ä¿è¯æœ€åçš„ç»“æœç¬¦åˆåˆ—è¡¨ä¸­çš„é¡ºåº,æ˜¯å¦ä½¿ç”¨é¡ºåºæ‰§è¡Œ, è¦æ ¹æ®å…·ä½“ä¸šåŠ¡åˆ†æå¤„ç† ä¸è¦åœ¨ bulkWrite ä¸­è¿›è¡Œåˆ›å»ºè¡¨æ“ä½œ ä¸è¦åœ¨ bulk ä¸­å¯¹ä¸å­˜åœ¨çš„è¡¨è¿›è¡Œæ“ä½œ, å°½ç®¡åœ¨æœ‰äº›mongoç‰ˆæœ¬ä¸­, å¥¹ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ é”™è¯¯è¿”å› å¦‚æœåœ¨ bulk ä¸€æ¬¡è¿è¡Œä¸­, è¿”å›çš„é”™è¯¯ä¿¡æ¯å¤§äº1M, åˆ™ mongo ä¼šå°†å…¶ä½™çš„é”™è¯¯ä¿¡æ¯å…¨éƒ¨è®¾ç½®ä¸ºç©ºè¿”å›, æ‰€ä»¥æ ¹æ®ä¹‹å‰çš„åˆ—è¡¨ä¸Šé™æ¥è®², å¯èƒ½å°†æ¯æ¬¡æ‰§è¡Œçš„ list é•¿åº¦è®¾ç½®ä¸º1-3k æ¯”è¾ƒåˆé€‚","link":"/2022/04/14/mongo_bulk/"},{"title":"MySQL å¸¸é—®çŸ¥è¯†ç‚¹(ç®€ç•¥)","text":"å‰è¨€ ç¨å¾®æ•´ç†ä¸€ä¸‹å§, å› ä¸ºå¹³æ—¶å…³æ³¨è¿™æ–¹é¢ä¸å¤š, æ‰€ä»¥ä¸ä¼šå¾ˆæ·±å…¥ äº‹åŠ¡éš”ç¦»çº§åˆ« äº‹åŠ¡ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ è„è¯» åŒä¸€æ—¶é—´æœ‰ä¸¤ä¸ªäº‹åŠ¡ A å’Œ B, A å¯¹æŸæ¡æ•°æ®è¿›è¡Œä¿®æ”¹æˆ–å¢åŠ , åœ¨ B ä¸­ä¹Ÿä½“ç°å‡ºæ¥, ä½†æ˜¯ A å¯èƒ½å›æ»š, å¯¼è‡´ B è·å–çš„æ•°æ®å¯èƒ½æ˜¯è„çš„ å¯é‡å¤è¯» æœ‰äº‹åŠ¡ A, åœ¨ A å¼€å§‹å, æ•°æ®åº“ä¸­çš„æŸäº›æ•°æ®å‘é€å˜æ›´, ä½†æ˜¯åœ¨ A ä¸­è¯»å–ç›¸å…³æ•°æ®æ°¸è¿œä¿æŒåœ¨ A åˆšå¯åŠ¨çš„æ—¶å€™ä¸ä¼šè‡ªå·±æ›´æ”¹, é€šå¸¸é’ˆå¯¹æ•°æ®çš„æ›´æ–° ä¸å¯é‡å¤è¯» æœ‰äº‹åŠ¡ A, åœ¨ A å¼€å§‹å, æ•°æ®åº“ä¸­çš„æŸäº›æ•°æ®å‘é€å˜æ›´, è€Œ A äº‹åŠ¡ä¸­æŸ¥è¯¢åˆ°çš„ç›¸å…³æ•°æ®ä¹Ÿä¼šéšä¹‹æ›´æ”¹, é€šå¸¸é’ˆå¯¹æ•°æ®çš„æ›´æ–° å¹»è¯» äº‹åŠ¡Aå¯¹æŸäº›è¡Œçš„å†…å®¹ä½œäº†æ›´æ”¹ï¼Œä½†æ˜¯è¿˜æœªæäº¤ï¼Œæ­¤æ—¶äº‹åŠ¡Bæ’å…¥äº†ä¸äº‹åŠ¡Aæ›´æ”¹å‰çš„è®°å½•ç›¸åŒçš„è®°å½•è¡Œï¼Œå¹¶ä¸”åœ¨äº‹åŠ¡Aæäº¤ä¹‹å‰å…ˆæäº¤äº†ï¼Œè€Œè¿™æ—¶ï¼Œåœ¨äº‹åŠ¡Aä¸­æŸ¥è¯¢ï¼Œä¼šå‘ç°å¥½åƒåˆšåˆšçš„æ›´æ”¹å¯¹äºæŸäº›æ•°æ®æœªèµ·ä½œç”¨ï¼Œä½†å…¶å®æ˜¯äº‹åŠ¡Båˆšæ’å…¥è¿›æ¥çš„ï¼Œè®©ç”¨æˆ·æ„Ÿè§‰å¾ˆé­”å¹»ï¼Œæ„Ÿè§‰å‡ºç°äº†å¹»è§‰ï¼Œè¿™å°±å«å¹»è¯»ã€‚ äº‹åŠ¡éš”ç¦»çº§åˆ« è¯»æœªæäº¤ ä¸åŠ é”, é€Ÿåº¦å¿«, ä½†æ˜¯ä¸åŠ é”ä¼šå¯¼è‡´ è„è¯»/ä¸å¯é‡å¤è¯»/å¹»è¯» çš„é—®é¢˜å‡ºç° è¯»æäº¤ ä¸€ä¸ªäº‹åŠ¡åªèƒ½ç£å¯¼å…¶ä»–äº‹åŠ¡å·²ç»æäº¤è¿‡çš„æ•°æ® å¯èƒ½å‡ºç° ä¸å¯é‡å¤è¯»/å¹»è¯» çš„é—®é¢˜ å¯é‡å¤è¯»(é»˜è®¤) å¯é‡å¤è¯»æ˜¯ MySQL çš„é»˜è®¤äº‹åŠ¡éš”ç¦»çº§åˆ« åœ¨äº‹åŠ¡å¯åŠ¨ä¹‹å, å¯¹æ•°æ®çš„æ‰€æœ‰æ”¹åŠ¨éƒ½ä¸ä¼šä½“ç°åˆ°äº‹åŠ¡ä¸­, å› æ­¤å¯¹æ•°æ®çš„æ–°å¢ä¹Ÿä¸ä¼šå‡ºç°åœ¨å…¶ä¸­ å¯é‡å¤è¯»å¯èƒ½å‡ºç° å¹»è¯» çš„é—®é¢˜ ä¸²è¡ŒåŒ– æ˜¯æœ€é«˜çš„éš”ç¦»çº§åˆ«, ä¼šåœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°çš„æ•°æ®éƒ½åŠ ä¸Šè¡Œé”, å¤šäº‹åŠ¡ä¸²è¡Œæ‰§è¡Œ, æ•ˆç‡å¾ˆå µä½†æ˜¯å®‰å…¨, åŒæ—¶ä¸å­˜åœ¨æ•°æ®çš„ä¸ä¸€è‡´é—®é¢˜ InnoDB å’Œ Myisam çš„åŒºåˆ« InnoDB æ”¯æŒäº‹åŠ¡, Myisam ä¸æ”¯æŒ InnoDB æ”¯æŒè¡Œçº§é”, Myisam åªæ”¯æŒè¡¨çº§ InnoDB æ”¯æŒå¤–é”®, Myisam ä¸æ”¯æŒ InnoDB æ˜¯ç´¢å¼•ç»„ç»‡è¡¨, Myisam æ˜¯å †è¡¨ é»˜è®¤ä¸º InnoDB æ…¢æŸ¥è¯¢ æ—¶é—´ 10s, ä½†æ˜¯ä½¿ç”¨ GORM è¿™ç§å½“å¤§äº200ms å°±ä¼šæœ‰è°ƒè¯•æ—¥å¿—è¾“å‡º æŸ¥æ‰¾é—®é¢˜ Explain: å¯ä»¥è¾“å‡º MySQL å†…éƒ¨æ˜¯å¦‚ä½•ä½¿ç”¨ç´¢å¼•æ¥å¤„ç†æŸ¥è¯¢è¯­å¥çš„, å¯ä»¥ä½œä¸ºæ‰¾æ…¢æŸ¥è¯¢çš„åŸå› æ—¶ä½¿ç”¨ è§†å›¾: åˆ›å»ºè§†å›¾æ¥æŸ¥çœ‹ è§£å†³æ–¹æ³• æ•°æ®é‡è¿‡å¤§è€ƒè™‘åˆ†è¡¨ æŸ¥çœ‹æ˜¯å¦æŸ¥è¯¢äº†é¢å¤–çš„æ•°æ®, å¯¹è¯­å¥è¿›è¡Œåˆ†æå’Œé‡å†™ æŸ¥çœ‹æ˜¯å¦å‘½ä¸­äº†ç´¢å¼•, ä¼˜åŒ–è¡¨ç»“æ„ å¦‚æœæ¯æ¬¡éƒ½æ˜¯é‡å¤çš„æŸ¥è¯¢æ•°æ®, è€ƒè™‘åŠ å…¥ç¼“å­˜ ä¸éœ€è¦æŸ¥è¯¢å‡ºçš„åˆ—æ•°æ®, è¿›è¡Œ sql ä¼˜åŒ– æŸ¥è¯¢ä¸éœ€è¦çš„æ•°æ®, ä½¿ç”¨LIMITè¿›è¡Œè·³è¿‡ drop/delete/truncate çš„åŒºåˆ« drop ç›´æ¥åˆ é™¤è¡¨ truncate æ¸…ç©ºè¡¨æ•°æ®, å½“å†æ¬¡æ–°å»ºæ—¶id ä»1å¼€å§‹ delete åˆ é™¤è¡¨é‡Œçš„æ•°æ®, å¯ä»¥åŠ whereæ¥è¿›è¡Œç­›é€‰ è¿æ¥ç§ç±» å…¨è¿æ¥: join/inner join å·¦è¿æ¥: left join å³è¿æ¥: right join äº¤å‰è¿æ¥: cross join ä¸‰èŒƒå¼ 1NF ä½œä¸ºå…³ç³»å‹æ•°æ®åº“, å¿…é¡»è¦æœ‰ä¸»é”®, æ¯ä¸€ä¸ªå­—æ®µå¿…é¡»ä¿æŒåŸå­æ€§, ä¸èƒ½å†ç»§ç»­åˆ†å‰² 2NF ä½œä¸ºå…³ç³»å‹æ•°æ®åº“, æ‰€æœ‰éä¸»é”®å­—æ®µå®Œå…¨çš„ä¾èµ–ä»–çš„ä¸»é”® 3NF æ‰€æœ‰çš„éä¸»é”®å­—æ®µå’Œä»–çš„ä¸»é”®å­—æ®µä¹‹é—´ä¸èƒ½äº§ç”Ÿä¼ é€’ä¾èµ–, å¿…é¡»æ˜¯ç›´æ¥ä¾èµ–å…³ç³», ä¼ é€’ä¾èµ–å¯ä»¥å†å¯ç”¨ä¸€å¼ è¡¨æ¥åšå…³è” æ•°æ®åº“ä¼˜åŒ–æ–¹æ³• åˆ›å»ºé«˜æ€§èƒ½ç´¢å¼• æ ¹æ®ä¸šåŠ¡æ¥è®¾è®¡ç¬¦åˆè¦æ±‚çš„ç´¢å¼• ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ è®¾è®¡è¡¨æ—¶è¦å……åˆ†è€ƒè™‘è¡¨ç»“æ„å’Œå­—æ®µ æŸ¥è¯¢æ—¶å°½é‡å‘½ä¸­ç´¢å¼• ä¼˜åŒ–æœåŠ¡å™¨è®¾ç½® é€‚å½“çš„ä¿®æ”¹æ•°æ®åº“é…ç½® è´Ÿè½½å‡è¡¡ å­˜å‚¨è¿‡ç¨‹å’Œè§¦å‘å™¨ å­˜å‚¨è¿‡ç¨‹ å°†é‡å¤åº¦é«˜çš„ sql è¯­å¥é¢„å…ˆå­˜å‚¨åˆ°æ•°æ®åº“ä¸­, è°ƒç”¨æ—¶é€šè¿‡å¡«å……æ•°æ®æ¥æ‰§è¡Œ sql, ä»¥æé«˜æ•ˆç‡ è§¦å‘å™¨ è§¦å‘å™¨é¡¾åæ€ä¹‰, å°±æ˜¯åœ¨æ•°æ®åº“ä¸­è®¾ç½®æŸä¸ªæ¡ä»¶æ—¶è‡ªåŠ¨è§¦å‘æŸäº› sql, å› ä¸ºä¼šå¯¼è‡´æ•ˆç‡å˜æ…¢, å°¤å…¶æ˜¯å¤šæ¡å‘½ä¸­æ—¶, æ‰€ä»¥ä¸€èˆ¬ä¸ä½¿ç”¨ é”ä¸æ­»é” æœ¬æ•°æ®åº“æœ‰ä¸‰ç§é”(InnoDB) è¡¨çº§é” è¡¨çº§é”çš„ä½¿ç”¨å¾ˆå°‘, å› ä¸ºä»–ä¼šå°†æ•´ä¸ªè¡¨é”ä½, æ•ˆç‡ä½, åŒæ—¶å› ä¸ºå°†æ•´ä¸ªè¡¨é”ä½, åŒä¸€æ—¶é—´ä¹Ÿå°±ä¸ä¼šæœ‰ç¬¬äºŒä¸ªäº‹åŠ¡è¿›è¡Œä¿®æ”¹æ“ä½œ, é¿å…å‡ºç°æ­»é”é—®é¢˜ è¡Œçº§é” æ•°æ®åº“æœ¬èº«å¹¶ä¸æ”¯æŒè¡Œçº§é”, InnoDB æ˜¯é€šè¿‡å¼•æ“å±‚è‡ªå·±å®ç°çš„, è¡Œçº§é”çš„æ•ˆç‡æ›´é«˜, ä½†æ˜¯å¯èƒ½ä¼šå‡ºç°æ­»é”çš„æƒ…å†µ, åœ¨ InnoDB ä¸­, è¡Œé”åœ¨éœ€è¦å¯¹æŸæ¡æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶åŠ ä¸Š, åœ¨äº‹åŠ¡ç»“æŸæ—¶æ‰ä¼šé‡Šæ”¾æ‰, è€Œå¦‚æœæœ‰ä¸¤ä¸ªäº‹åŠ¡ä»¥ä¸¤ä¸ªé¡ºåºå¯¹å¤šä¸ªæ•°æ®è¿›è¡ŒåŠ é”, å°±ä¼šå¯¼è‡´æ­»é”, ä¾‹å¦‚ äº‹åŠ¡1 äº‹åŠ¡2 update t set k=k+1 where id = 1 (åŠ é”è¡Œ1) update t set k=k+1 where id = 2 (åŠ é”è¡Œ2) update t set k=k+1 where id = 2 (ç­‰å¾…è¡Œé”2é‡Šæ”¾) update t set k=k+1 where id = 1 (ç­‰å¾…è¡Œé”1é‡Šæ”¾) æˆ‘ä»¬åœ¨å¯¹æ•°æ®åº“æ“ä½œæ—¶, åº”è¯¥å°½å¯èƒ½çš„è€ƒè™‘åˆ°é”å†²çªé—®é¢˜, é‡åˆ°äº‹åŠ¡å¿…é¡»æ…é‡, å¦‚æœæœ‰å¯èƒ½åŠ è¡Œé”çš„æ“ä½œ, å¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æ–¹å¼è§„é¿ å°½é‡çš„å°†åŠ è¡Œé”æ“ä½œæ”¾åˆ°äº‹åŠ¡åé¢ å¯¹äºäº‹åŠ¡ä¸­å¯¹å¤šä¸ªè¡¨è¿›è¡Œå¤„ç†æ—¶, çº¦å®šå¥½ä½¿ç”¨ä¸€è‡´çš„å¤„ç†é¡ºåº ä»¥æ‰¹æ–¹å¼å¤„ç†å¤šä¸ªæ•°æ®æ—¶, å…ˆå¯¹æ•°æ®è¿›è¡Œæ’åº å¯ä»¥æ§åˆ¶äº‹åŠ¡çš„å¹¶å‘æ•°é‡ å°†é”æå‡ä¸ºæ’ä»–é”, ä½¿ç”¨ for update è¯­å¥ å°†é”æå‡ä¸ºè¡¨é”, ä¾‹å¦‚åœ¨æ›´æ–°æ—¶æ›´æ–°æ¡ä»¶æ²¡æœ‰ç´¢å¼•ä¼šè‡ªåŠ¨åŠ è¡¨é” é¡µé¢é” å­˜å‚¨å¼•æ“ä¸º BerkeleyDB æ‰ä¼šå‡ºç°, æ²¡æœ‰ä½¿ç”¨è¿‡ ç´¢å¼• ç´¢å¼•å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ ç´¢å¼•ä¼˜ç‚¹: åŠ å¿«æŸ¥è¯¢é€Ÿåº¦(å‘½ä¸­ç´¢å¼•çš„å‰æä¸‹) ç´¢å¼•ç¼ºç‚¹: ç´¢å¼•éœ€è¦å æ®ä¸€å®šçš„ç©ºé—´å’Œèµ„æº, åŒæ—¶ç´¢å¼•ä¼šåŠ é‡æ’å…¥/åˆ é™¤/ä¿®æ”¹æ•°æ®çš„è´Ÿæ‹… ç´¢å¼•å¯ä»¥å¢åŠ æ•°æ®çš„æŸ¥æ‰¾é€Ÿåº¦, ç´¢å¼•æ˜¯åœ¨å¼•æ“å±‚è¿›è¡Œå®ç°çš„, æœ¬æ•°æ®åº“æä¾›å››ç§ç´¢å¼•: B-Tree: æœ€å¸¸è§çš„ç´¢å¼•ç±»å‹, å¤§éƒ¨åˆ†å¼•æ“éƒ½æ”¯æŒ HASH: Memory æ”¯æŒ, ä½¿ç”¨åœºæ™¯ç®€å• R-Tree: ç©ºé—´ç´¢å¼•, MyISAM ç‹¬æœ‰, å¸¸è§ç”¨äºåœ°ç†ç©ºé—´æ•°æ®ç±»å‹ Full-text: å…¨æ–‡ç´¢å¼•, MyISAM ç‹¬æœ‰ å¯¹äºå¼•æ“å¯¹ç´¢å¼•ç±»å‹çš„æ”¯æŒå¦‚ä¸‹ ç´¢å¼• MyISAM InnoDB Memory B-Tree Y Y Y HASH N N Y R-Tree Y N N Full-Text N Y(5.6+) N ç´¢å¼•ç±»å‹ æ™®é€šç´¢å¼• æœ€åŸºæœ¬çš„ç´¢å¼•ç±»å‹, æ²¡æœ‰å”¯ä¸€æ€§ä¹‹ç±»çš„é™åˆ¶ UNIQUE(å”¯ä¸€ç´¢å¼•) å”¯ä¸€çš„, ä¸å…è®¸é‡å¤çš„ç´¢å¼• å¤åˆç´¢å¼• å¤šä¸ªåˆ—å½“åšä¸€ä¸ªç´¢å¼•, ç”¨äºç»„åˆæœç´¢, æ•ˆç‡æ¯”ç´¢å¼•åˆå¹¶å¿« ä¸»é”®(ç‰¹æ®Š) å”¯ä¸€çš„, æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€åˆ—ä¸»é”® å•åˆ—ç´¢å¼•å’Œè”åˆç´¢å¼• å•åˆ—ç´¢å¼• æŒ‡çš„å°±æ˜¯ä¸ºå•ç‹¬çš„æŸä¸ªåˆ—è®¾ç½®ç´¢å¼• è”åˆç´¢å¼• å°†å¤šä¸ªåˆ—åˆåˆ°ä¸€èµ·ä½œä¸ºä¸€ä¸ªç´¢å¼•, åˆ›å»ºè”åˆç´¢å¼•ç­‰äºåˆ›å»ºäº†ä»å·¦åˆ°å³çš„å¤šä¸ªç´¢å¼•. ä¾‹å¦‚: åˆ›å»ºè”åˆç´¢å¼•a+b+c ç­‰äºåˆ›å»ºäº†ä¸‰ä¸ªç´¢å¼•, åˆ†åˆ«æ˜¯ å•åˆ—ç´¢å¼• a, è”åˆç´¢å¼•a+b, è”åˆç´¢å¼• a+b+c ç´¢å¼•åˆå¹¶ å½“æŸ¥è¯¢è¯­å¥çš„WHEREæ˜¯ANDçš„æ—¶å€™, å¦‚æœæœ‰å¤šä¸ªç´¢å¼•, ä¼šè‡ªåŠ¨æŸ¥æ‰¾ä¸€ä¸ªæœ€ä½³çš„ç´¢å¼•ä½¿ç”¨ è€Œå½“æŸ¥è¯¢è¯­å¥é€šè¿‡ORè¿æ¥æ—¶, MySQLä¼šä½¿ç”¨ç´¢å¼•åˆå¹¶æŠ€æœ¯, å°†å‘½ä¸­çš„å‡ ä¸ªç´¢å¼•çš„èŒƒå›´æ‰«æåˆå¹¶æˆä¸€ä¸ªæ–°çš„ç´¢å¼•(åªé™äºå•è¡¨), å¦‚æœæ•°æ®é‡ä¸å¤§, ä¸ä¼šå°†ç´¢å¼•åˆå¹¶, å› ä¸ºä¼šå½±å“ä¸€éƒ¨åˆ†æ•ˆç‡ ä»€ä¹ˆæ—¶å€™éœ€è¦ç´¢å¼• é¢‘ç¹çš„ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼• å”¯ä¸€æ€§å¾ˆå·®çš„å­—æ®µä¸é€‚åˆä½œä¸ºå•ç‹¬ç´¢å¼•, å³ä½¿ä»–å¾ˆé¢‘ç¹çš„ä½œä¸ºæŸ¥è¯¢æ¡ä»¶(ä¾‹å¦‚ç”¨æˆ·è¡¨ä¸­çš„æ€§åˆ«å­—æ®µè¿™ç§é‡å¤æ€§å¾ˆé«˜çš„) æ›´æ–°éå¸¸é¢‘ç¹çš„å­—æ®µä¸é€‚åˆåˆ›å»ºç´¢å¼• ä¸ä¼šå‡ºç°åœ¨WHEREä¸­çš„å­—æ®µä¸åº”è¯¥åˆ›å»ºç´¢å¼• æ•°æ®é‡æ¯”è¾ƒå¤§, æ¯”å¦‚è¡¨ä¸­çš„æ•°æ®é‡å¤§äº 1w æ¡ ç´¢å¼•é€‰æ‹©æ€§é«˜(ä¸é‡å¤çš„ç´¢å¼•å€¼/è¡¨è®°å½•æ•°) é€‰æ‹©ç´¢å¼• åœ¨WHEREå­å¥ä¸­å‡ºç°çš„åˆ—, åœ¨joinå­å¥ä¸­å‡ºç°çš„åˆ—å¯ä»¥è®¾ç½®ç´¢å¼• ç´¢å¼•åˆ—çš„åŸºæ•°è¶Šå¤§, æ•ˆæœè¶Šå¥½ å¦‚æœä¸€ä¸ªåˆ—é•¿åº¦ä¸º200, è€Œå‰10ä¸ªå­—ç¬¦æ˜¯å¤šæ•°å”¯ä¸€çš„, å¯ä»¥è€ƒè™‘å¯¹è¿™ä¸ªåˆ—çš„å‰10ä¸ªå­—ç¬¦åšçŸ­ç´¢å¼•, èŠ‚çœç´¢å¼•ç©ºé—´, ä¹Ÿå¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ ç‰¢è®°ç´¢å¼•çš„æœ€å·¦å‰ç¼€åŸåˆ™(è¯¦è§ä¸‹æ¡) ä¸ºä»€ä¹ˆ MySQL ç´¢å¼•ä½¿ç”¨ B+æ ‘ B-tree B æ ‘ä¸ç®¡æ˜¯å¶å­ç»“ç‚¹è¿˜æ˜¯éå¶å­èŠ‚ç‚¹, éƒ½ä¼šä¿å­˜æ•°æ®, ä¼šå¯¼è‡´åœ¨éå¶å­èŠ‚ç‚¹ä¸­å¯ä»¥ä¿å­˜çš„æŒ‡é’ˆæ•°é‡å˜å°‘äº†, æŒ‡é’ˆå°‘çš„æ—¶å€™è¦ä¿å­˜å¤§é‡çš„æ•°æ®, å¢åŠ æ ‘çš„é«˜åº¦, å¯¼è‡´ IO æ“ä½œå˜å¤šäº†, é™ä½æŸ¥è¯¢æ€§èƒ½. Hash Hash æ²¡æœ‰é¡ºåº, æŸ¥è¯¢çš„ IO å¤æ‚åº¦é«˜ äºŒå‰æ ‘ äºŒå‰æ ‘çš„é«˜åº¦ä¸å‡åŒ€, ä¸èƒ½è‡ªå¹³è¡¡, æŸ¥æ‰¾æ•ˆç‡è·Ÿæ•°æ®ç›¸å…³, æ•°æ®è¶Šå¤§æ ‘è¶Šé«˜, IO çš„ä»£ä»·å°±å¾ˆé«˜ çº¢é»‘æ ‘ æ•°æ®é‡è¶Šå¤§æ ‘çš„é«˜åº¦è¶Šé«˜, IO çš„ä»£ä»·å¾ˆé«˜ å¹³è¡¡äºŒå‰æ ‘ å¹³è¡¡äºŒå‰æ ‘çš„æ·±åº¦å¾ˆå¤§, å› ä¸ºå¹³è¡¡äºŒå‰æ ‘ä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šä¸¤ä¸ªå­èŠ‚ç‚¹, å¯¼è‡´åŒæ ·çš„æ•°æ®é‡, å¹³è¡¡äºŒå‰æ ‘çš„æ·±åº¦æ¯” B+tree çš„è¦æ·±å¾ˆå¤š, å¯¼è‡´æŸ¥è¯¢ä¼šå˜æ…¢. æœ€å·¦å‰ç¼€ MySQL ä¸€æ¡æŸ¥è¯¢åªèƒ½ä½¿ç”¨ä¸€ä¸ªç´¢å¼•, å½“å‡ºç°å¤šä¸ªç´¢å¼•æ—¶, ä¼šä½¿ç”¨èŒƒå›´æœ€å°çš„é‚£ä¸ªç´¢å¼• InnoDBä½¿ç”¨ B+ æ ‘è¿›è¡Œæ•°æ®å­˜å‚¨, æ‰€ä»¥è¦æƒ³å‘½ä¸­ç´¢å¼•, å¿…é¡»æŒ‰ç…§è”åˆç´¢å¼•å½“åˆå»ºç«‹æ—¶çš„é¡ºåºæ¥, ä¸ç„¶æ— æ³•å‘½ä¸­ç´¢å¼•, å¦å¤–, èŒƒå›´æŸ¥è¯¢(&lt;, &gt;)ä¹Ÿä¸å‘½ä¸­ç´¢å¼• æ¯”å¦‚è¯´æœ‰è¡¨ user, ä¸‹é¢æœ‰å­—æ®µ name æ˜¯ç´¢å¼• ä¸€æ¡è¯­å¥ SELECT * FROM user WHERE name='ak' AND age=15 åˆ†ä¸¤æ­¥ ä»è¡¨ä¸­å¯»æ‰¾ name ä¸º ak çš„æ•°æ® å†ä»ç»“æœä¸­å¯»æ‰¾ age ä¸º 15çš„æ•°æ® å› ä¸ºnameä¸ºç´¢å¼•, æ‰€ä»¥æ­¥éª¤1å¾ˆå¿«é€Ÿå®Œæˆ, ä½†æ˜¯æ­¥éª¤2å°±æ²¡æœ‰ç´¢å¼•, å¯ä»¥ä¼˜åŒ– å¦‚æœè¿™ä¸€æ¡è¯­å¥æ˜¯å¾ˆé¢‘ç¹çš„æŸ¥è¯¢, å¯ä»¥å°†nameå’Œageåˆå¹¶ä½¿ç”¨è”åˆç´¢å¼•, æé«˜è¿™ä¸ªè¯­å¥çš„æŸ¥è¯¢æ•ˆç‡ äºæ˜¯æˆ‘ä»¬å°†ç´¢å¼•ä¿®æ”¹ä¸ºname å’Œ age, ALTER TABLE user ADD INDEX name_age (name, age) å› ä¸ºä½ åœ¨è®¾ç½®è”åˆç´¢å¼•æ—¶, æ€»å½’æœ‰ä¸ªå…ˆå, ä¾‹å¦‚æœ¬ä¾‹å°±æ˜¯name+age, è€ŒMySQLçš„æœ€å·¦æŸ¥è¯¢ä¼šä»æœ€å·¦å¼€å§‹è§£æ, é‚£ä¹ˆè¿‡ç¨‹å¦‚ä¸‹ é‡æ–°æ‰§è¡Œè¯­å¥ SELECT * FROM user WHERE name='ak' AND age=15 è¿™æ ·å°±ä¼šå°†è”åˆç´¢å¼•ç”Ÿæ•ˆ, æé«˜æ•ˆç‡, ä»–çš„æ‰§è¡Œå¦‚ä¸‹ æ‰¾åˆ°name='ak',å‘½ä¸­äº†nameå’Œname+age æ‰¾åˆ°age=15, å‘½ä¸­äº†name+ageç´¢å¼• ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ›´æ”¹WHEREçš„é¡ºåºä¸º SELECT * FROM user WHERE age=15 AND name='ak' åˆ™æ— æ³•å‘½ä¸­ç´¢å¼•, è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢? æ‰¾åˆ°age=15, å‘ç°ç´¢å¼•åªæœ‰nameå’Œname+age, å› ä¸ºæ²¡æœ‰ä»¥ ageå¼€å¤´çš„, æ‰€ä»¥æœ¬æ¡æ²¡æœ‰å‘½ä¸­ç´¢å¼• æ‰¾åˆ°name='ak' æ²¡æœ‰ç´¢å¼• æ‰€ä»¥å°±æ²¡æœ‰å‘½ä¸­ç´¢å¼• æ•°æ®åº“ä¸­å­˜åœ¨ç´¢å¼•ä½†æ˜¯æ²¡æœ‰ä½¿ç”¨ IN INä¼šæ‰«æå…¨è¡¨, æ…é‡ä½¿ç”¨ NOT IN ä¸INä¸€æ ·ä¼šæ‰«æå…¨è¡¨, è€ƒè™‘ä½¿ç”¨ not existsæˆ–è€…å…¶ä»–æ–¹å¼è§„é¿ &lt;&gt; ä¸ç­‰äºç¬¦å·, è€ƒè™‘ä¿®æ”¹è¯­å¥, æ¯”å¦‚a&lt;&gt;0ä¿®æ”¹ä¸ºa&gt;0 or a&lt;0 IS NULLå’ŒIS NOT NULL åˆ¤æ–­å­—æ®µæ˜¯å¦ä¸ºç©º, ä¸€èˆ¬ä¸ä¼šåº”ç”¨ç´¢å¼•, b æ•°ç´¢å¼•ä¸ç´¢å¼•ç©ºå€¼, è€ƒè™‘ä¿®æ”¹è¯­å¥, æ¯”å¦‚a IS NOT NULLä¿®æ”¹ä¸ºa&gt;0 å‘½ä¸­çš„æ•°æ®å¤§äºæ€»æ•°50% å‘½ä¸­ç´¢å¼•ä½†æ˜¯å‘½ä¸­çš„æ•°æ®æ•°é‡è¶…è¿‡äº†è¡¨å†…æ•°æ®æ€»æ•°é‡çš„50%, ä¹Ÿä¼šç›´æ¥å…¨è¡¨æ‰«æ, å› ä¸ºæ­¤æ—¶å…¨è¡¨æ‰«ææ¯”ç´¢å¼•å¿«(å¤§æ¦‚ç‡æ˜¯ç´¢å¼•çš„è®¾è®¡æœ‰é—®é¢˜) LIKE LIKEæ“ä½œç¬¦å¯ä»¥åŒ¹é…é€šé…ç¬¦æŸ¥è¯¢, ä½¿ç”¨%å¯ä»¥æŸ¥è¯¢å‡ ä¹ä»»æ„èŒƒå›´çš„åŒ¹é…, æ³¨æ„, ä»¥%å¼€å¤´åˆ™ä¸ä¼šå¼•ç”¨ç´¢å¼•, æ¯”å¦‚%TEXT%ä¸ä¼šå¼•ç”¨ç´¢å¼•, è€ŒTEXT%å¯ä»¥å¼•ç”¨èŒƒå›´ç´¢å¼• UNION UNIONç”¨æ¥å°†å¤šä¸ªSELECTæŸ¥è¯¢å‡ºçš„ç»“æœé›†è¿›è¡Œåˆå¹¶. å› ä¸ºæ˜¯å°†å¤šä¸ªç»“æœè¿›è¡Œåˆå¹¶, ä¹Ÿä¸ä¼šèµ°ç´¢å¼•, ä½†æ˜¯å› ä¸ºå…¶è¿è¡Œæ—¶æ˜¯å…ˆå–å‡ºè‹¥å¹²ä¸ªç»“æœ, å†å»é‡, å› æ­¤å¯èƒ½ä¼šå ç”¨å¤§é‡çš„èµ„æº, ä¸æ¨èä½¿ç”¨ æ€ä¹ˆåˆ¤æ–­æ˜¯å¦å‘½ä¸­ç´¢å¼• åœ¨ sql å‰åŠ EXPLAIN, æ¯”å¦‚ EXPLAIN SELECT * FROM user WHERE age=15 AND name='ak' ç„¶åæŸ¥çœ‹è¾“å‡ºçš„å­—æ®µæ•°æ®æ¥åˆ¤æ–­ åˆ†åº“åˆ†è¡¨ ä»€ä¹ˆæ˜¯åˆ†åº“åˆ†è¡¨ åˆ†åº“ ä»å•ä¸ªæ•°æ®åº“æ‹†åˆ†æˆå¤šä¸ªæ•°æ®åº“, å°†æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªæ•°æ®åº“ä¸­ åˆ†è¡¨ ä»å•å¼ è¡¨æ‹†åˆ†æˆå¤šå¼ è¡¨, å°†æ•°æ®æ•£è½åœ¨å¤šå¼ è¡¨ä¸­ ä¸ºä»€ä¹ˆè¦åˆ†åº“åˆ†è¡¨ æå‡æ€§èƒ½, å¢åŠ å¯ç”¨æ€§ åˆ†åº“åˆ†è¡¨çš„å‰ææ˜¯è´Ÿè½½å·²ç»å¤§åˆ°åŸºæœ¬çš„æ•°æ®åº“ç»“æ„ä¼˜åŒ–å’Œç¼“å­˜ç­‰æœºåˆ¶éƒ½ä½¿ç”¨äº†è¿˜æ˜¯æœ‰æ•ˆç‡é—®é¢˜ ç”±äºåˆ†åº“åˆ†è¡¨ä¼šå¢åŠ é€»è¾‘å¤æ‚æ€§, å› æ­¤ä¸åˆ°ä¸‡ä¸å¾—å·²ä¸æ¨èä½¿ç”¨ æå‡æ€§èƒ½ æ•°æ®é‡è¶Šæ¥è¶Šå¤§, æ•°æ®åº“çš„æŸ¥è¯¢ QPS å°±è¶Šæ¥è¶Šé«˜, æ•°æ®åº“çš„å‹åŠ›å’Œè¯»å†™éœ€è¦çš„æ—¶é—´ä¹Ÿä¼šè¶Šæ¥è¶Šå¤š, ä¸šåŠ¡æ•ˆç‡çš„ç“¶é¢ˆå°±ä¼šå˜æˆæ•°æ®åº“è¿™é‡Œ, å› æ­¤å°±éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œä¼˜åŒ– å¦‚æœæ•°æ®åº“çš„ QPS è¿‡é«˜äº†, å°±éœ€è¦è€ƒè™‘è¿›è¡Œæ‹†åº“, é€šè¿‡åˆ†åº“æ¥åˆ†æ‹…å•ä¸ªæ•°æ®åº“çš„è¿æ¥å‹åŠ›. ä¸€èˆ¬çš„, å•åº“çš„è¿æ¥æ•°æœ€å¥½ä¸è¦è¶…è¿‡1000 å¦‚æœå•è¡¨çš„æ•°æ®è¶…è¿‡äº†ä¸€å®šé‡çº§, å¯¹è¿™ä¸ªè¡¨è¿›è¡Œæ“ä½œ, é€Ÿåº¦å°±ä¼šå˜æ…¢(é˜¿é‡Œçš„&lt;&lt;JAVA å¼€å‘æ‰‹å†Œ&gt;&gt;æåˆ°æ¯å¼ è¡¨çš„æ•°æ®ä¸è¦è¶…è¿‡500ä¸‡è¡Œæˆ–è€…å®¹é‡è¶…è¿‡2G). æ­¤æ—¶éœ€è¦å¯¹è¡¨æŒ‰ç…§æŸä¸ªè§„åˆ™è¿›è¡Œåˆ‡åˆ†, åˆ†ä¸ºå¤šä¸ªè¡¨, æ¥å‡å°‘æ¯ä¸ªè¡¨çš„æ•°æ®é‡, æ¢å¤æ€§èƒ½. æé«˜å¯ç”¨æ€§ é¸¡è›‹ä¸èƒ½æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œ, å•ä¸ªæ•°æ®åº“å¦‚æœå‘ç”Ÿäº†æ„å¤–, å¾ˆæœ‰å¯èƒ½ä¼šä¸¢å¤±æ‰€æœ‰æ•°æ®, å› æ­¤, é™¤äº†è€ƒè™‘ä½¿ç”¨ ä¸»ä» ç­‰å¤šèŠ‚ç‚¹éƒ¨ç½²ä¹‹å¤–, ä¹Ÿå¯ä»¥è€ƒè™‘æ‹†åˆ†æ•°æ®æ¥è§£å†³é—®é¢˜, æ¯”å¦‚æˆ‘ä»¬çš„æ•°æ®åº“å®•æœºäº†, é‚£ä¹ˆ: å•åº“éƒ¨ç½²çš„æƒ…å†µä¸‹, æ•°æ®åº“å®•æœº, ä¼šå½±å“100%çš„æ•°æ®, è€Œä¸”æ•°æ®æ¢å¤çš„è€—æ—¶å¯èƒ½ä¹Ÿå¾ˆä¹… å¦‚æœæˆ‘ä»¬æ‹†åˆ†æˆ2ä¸ªåº“, éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨, å¦‚æœå…¶ä¸­ä¸€ä¸ªå®•æœº, æ•…éšœå½±å“å°±æ˜¯50%, è¿˜æœ‰50%çš„æ•°æ®å¯ä»¥ç»§ç»­æä¾›æœåŠ¡, åŒæ—¶æ¢å¤è€—æ—¶å—æ•°æ®é‡å½±å“ä¹Ÿä¼šç¼©çŸ­ éœ€è¦æ³¨æ„, æ‹†åº“å¹¶ä¸æ˜¯æ— é™åˆ¶çš„, è¿™æ˜¯ç‰ºç‰²äº†èµ„æºæ¥æå‡æ€§èƒ½å’Œå¯ç”¨æ€§, è¦å–èˆ, æ¯•ç«Ÿèµ„æºæ€»æ˜¯æœ‰é™çš„ æ€æ ·åˆ†åº“åˆ†è¡¨ ä¸‰ç§åˆ‡åˆ†æ–¹æ¡ˆ ä»ä¸Šä¸€èŠ‚æ€»ç»“, åˆ‡åˆ†æ–¹æ¡ˆåˆ†ä¸ºä¸‰ç±» åˆ‡åˆ†æ–¹æ¡ˆ è§£å†³çš„é—®é¢˜ åªåˆ†åº“ åº“è¯»å†™ QPS è¿‡é«˜, è¿æ¥æ•°ä¸è¶³äº† åªåˆ†è¡¨ å•è¡¨æ•°æ®é‡è¿‡å¤§, æ€§èƒ½ç“¶é¢ˆ åˆ†åº“+åˆ†è¡¨ è¿æ¥æ•°ä¸è¶³+æ•°æ®é‡è¿‡å¤§ é€‰æ‹©åˆ‡åˆ†æ–¹æ¡ˆ å…³äºç³»ç»Ÿæ¶æ„, éƒ½æœ‰ä¸€ä¸ªå…±è¯†å°±æ˜¯é¿å…è¿‡åº¦è®¾è®¡, åªæœ‰ç¡®å®šä¸šåŠ¡é‡æ•°æ®å·¨é‡, æˆ–è€…çœŸçš„é‡åˆ°äº†ç“¶é¢ˆ, å†è€ƒè™‘æ•°æ®åˆ‡åˆ† åˆ†è¡¨: å¯ä»¥æ ¹æ® 500w è¡Œçš„æ ‡å‡†æŒ‰ç…§é€»è¾‘åˆ†å‰²è¿›è¡Œæ‹†åˆ†, ä¾‹å¦‚, ä¸šåŠ¡æ¯ä¸ªæœˆæ’å…¥çš„æ•°æ®ä¸º400w è¡Œ, å°±åº”è¯¥æŒ‰ç…§æ¯æœˆæ¥è¿›è¡Œæ‹†åˆ† åˆ†åº“: å¯ä»¥æŒ‰ç…§æ¯åº“1000ä¸ªæ•°æ®åº“è¿æ¥æŒ‰ç…§é€»è¾‘è¿›è¡Œæ‹†åˆ† å¦‚ä½•åˆ‡åˆ† æ°´å¹³åˆ‡åˆ†: æŒ‰ç…§ä¸šåŠ¡ç»´åº¦è¿›è¡Œæ¨ªå‘çš„åˆ‡åˆ†, ä¹Ÿå°±æ˜¯æŒ‰è¡Œåˆ‡åˆ†, ä¾‹å¦‚å°†ç”¨æˆ·è¡¨æŒ‰ç…§ç”¨æˆ·ç­‰çº§è¿›è¡Œæ‹†åˆ†, å°†è®¢å•è¡¨æŒ‰ç…§åˆ›å»ºæœˆä»½è¿›è¡Œæ‹†åˆ†ç­‰ç­‰ å‚ç›´åˆ‡åˆ†: æŒ‰ç…§å­—æ®µè¿›è¡Œåˆ‡åˆ†, æ¯”å¦‚è¯´è®¢å•è¡¨å¯èƒ½å­˜åœ¨è®¢å•ä¿¡æ¯, å–å®¶ä¹°å®¶ä¿¡æ¯, æ”¯ä»˜ä¿¡æ¯, å¯ä»¥é€šè¿‡å­—æ®µæ‹†åˆ†æˆä¸‰å¼ è¡¨, è®¢å•/ä¹°å®¶/å–å®¶ æ¥å‡å°‘å®¹é‡ è¯»å†™åˆ†ç¦» è¯»å†™åˆ†ç¦»ä¹Ÿæ˜¯ä¸ºäº†æé«˜é€Ÿåº¦å’Œå¯ç”¨æ€§ ä¸»ä»å¤åˆ¶ æ­å»ºåœ¨å¤šå°æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“ç³»ç»Ÿ, å°†å…¶ä¸­ä¸€å°å½“åšä¸»æ•°æ®åº“, å…¶ä»–ä¸ºä»æ•°æ®åº“, å®ç°ä¸»ä»åŒæ­¥. å…¶ä¸­ä¸»æ•°æ®åº“è´Ÿè´£è¿›è¡Œå†™æ“ä½œ, ä»æ•°æ®åº“è´Ÿè´£è¯»æ“ä½œ, è¿™å°±å°†è¯·æ±‚åˆ†æµä¸ºå¤šä¸ªéƒ¨åˆ†, æ¥å¢åŠ è®¿é—®é€Ÿåº¦, åŒæ—¶å…¶ä¸­ä¸€å°å´©æºƒä¹Ÿé¿å…äº†æ•°æ®å‘ç”Ÿä¸¢å¤± è¿™é‡Œä¹Ÿè¯´äº†, è¯»å–æ˜¯ä»æœåŠ¡å™¨, å†™å…¥æ˜¯ä¸»æœåŠ¡å™¨, é‚£ä¹ˆä»–ä»¬æ˜¯ä¸åŒçš„ç‰©ç†æœåŠ¡å™¨, æ€ä¹ˆå®ç°çš„æ•°æ®ä¸€è‡´å‘¢? æˆ‘ä»¬å°†ä¸»æœåŠ¡å™¨å‘½åä¸º A, ä»æœåŠ¡å™¨æœ‰ä¸€ä¸ªä¸º B, å½“ç”¨æˆ·åœ¨Aæ’å…¥æ•°æ®æ—¶, æµç¨‹å¦‚ä¸‹: ä¿®æ”¹Aæœ¬åœ°çš„æ•°æ® å°†ä¿®æ”¹è®°å½•å†™å…¥Açš„æ—¥å¿—ç³»ç»Ÿ å‘é€ç»™B Bå†™å…¥Bçš„æ—¥å¿—ç³»ç»Ÿ Bä»Bçš„æ—¥å¿—ç³»ç»Ÿä¸­è¯»å–è®°å½•, ä¿®æ”¹è‡ªå·±çš„æ•°æ® ä¸»ä»åŒæ­¥å¤åˆ¶æœ‰ä¸‰ç§æ–¹å¼: åŒæ­¥å¤åˆ¶: ç”¨æˆ·å†™å…¥A, Aç›‘æ§åˆ°ä»æ•°æ®åº“Bä¹Ÿä¿®æ”¹å®Œæˆåæ‰è¿”å›æˆåŠŸ å¼‚æ­¥å¤åˆ¶(é»˜è®¤): åªè¦Aè‡ªå·±æˆåŠŸå°±è¿”å›æˆåŠŸ åŠåŒæ­¥å¤åˆ¶: Aè‡ªå·±å’Œè‹¥å¹²ä¸ªä»æœåŠ¡å™¨ä¸­æœ‰ä¸€ä¸ªæˆåŠŸå°±è¿”å›æˆåŠŸ è¯»å†™åˆ†ç¦» å¼€æºæ–¹æ¡ˆ è¯»å†™åˆ†ç¦»æœ‰å‡ ä¸ªå¼€æºæ–¹æ¡ˆ, ç›®å‰è¿˜æ´»ç€çš„å°±æ˜¯ mariadb-corporation/MaxScaleï¼šä¸€ä¸ªæ™ºèƒ½æ•°æ®åº“ä»£ç†ã€‚ (github.com), è™½ç„¶æ˜¯ MariaDBå‡ºçš„, ä½†æ˜¯ä¹Ÿå…¼å®¹ MySQL å½“é…ç½®å®Œæˆå, æ‰€æœ‰æ•°æ®åº“è¿æ¥éƒ½è®¾å®šä¸º MaxScale çš„è¿æ¥, MaxScaleè‡ªå·±è¿›è¡Œç®¡ç†å’Œåˆ†é…å³å¯, è¿˜æœ‰ web é¡µé¢å¯ä»¥æŸ¥çœ‹ä¿¡æ¯, è€Œä¸”å¯¹äºè°ƒç”¨è€…æ¥è®²æ˜¯æ— ç—›çš„, å¼€å‘è€…ä¸éœ€è¦å…³æ³¨é‡Œé¢çš„å®ç°é€»è¾‘, è·Ÿæ™®é€šè°ƒç”¨å•æœºä¸€æ · è‡ªå·±æ§åˆ¶ å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç›´è¿ä¸»ä», é€šè¿‡é€»è¾‘æ¥è¿›è¡Œè¯»å†™åˆ†é…, åªæ˜¯æ¯”è¾ƒ low, ä¼˜ç‚¹æ˜¯éƒ¨ç½²æ–¹ä¾¿ ä»€ä¹ˆæ˜¯ MySQL çš„ XA äº‹åŠ¡ åœ¨åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ä¸­, é‡åˆ°ä¸€ä¸ªäº‹åŠ¡è·¨è¶Šäº†å¤šå¼ è¡¨, å°±éœ€è¦ä½¿ç”¨XAäº‹åŠ¡æ¥å®Œæˆæ•´ä¸ªäº‹åŠ¡çš„æ­£ç¡®æäº¤å’Œå›æ»š, ä¿è¯å…¨å±€äº‹åŠ¡çš„ä¸€è‡´æ€§. éœ€è¦æå‰è¯´æ˜çš„æ˜¯, å¯¹äºåˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„æ¥è®², éƒ½ä¼šæœ‰ä¸€ä¸ªæ€»æ§, æ¥æ¥æ”¶ç”¨æˆ·çš„æ“ä½œ, å¹¶é€šè¿‡ä¸€å®šçš„è§„åˆ™å°†å…¶åˆ†é…åˆ°å…·ä½“çš„æŸä¸ªèŠ‚ç‚¹ä¸­ XA äº‹åŠ¡çš„è¿‡ç¨‹ ä¾‹å¦‚, äº‹åŠ¡çš„æ•´ä½“ SQL å¦‚ä¸‹ 1234begin;insert into `user` values(\"user1\", 18);update `user` set `age`=19 WHERE `name` = \"user101\";commit; æ ¹æ®æ­¥éª¤æ¥è§£ç­” æ€»æ§æ”¶åˆ°begin, çŸ¥é“è¦å¼€å§‹äº‹åŠ¡ æ€»æ§æ”¶åˆ°insertè¯­å¥, è§£æè¯­å¥, æ ¹æ®nameçš„å€¼, è®¡ç®—å‡ºåº”è¯¥æ˜¯åˆ†é…åˆ°å“ªä¸ªèŠ‚ç‚¹ä¸­, è¿™é‡Œå‡è®¾æ˜¯èŠ‚ç‚¹1 æ€»æ§å‘èŠ‚ç‚¹1å‘é€è¯­å¥xa start xid1å¼€å¯ä¸€ä¸ªxaäº‹åŠ¡, è¿™é‡Œçš„xidæ˜¯æ€»æ§ç”Ÿæˆçš„ä¸€ä¸ªå…¨å±€äº‹åŠ¡ id, åŒæ—¶ä¹Ÿå°†insert è¯­å¥å‘é€åˆ°èŠ‚ç‚¹1 æ€»æ§æ”¶åˆ° update è¯­å¥, åŒæ ·çš„, å…ˆæ ¹æ®nameè®¡ç®—å‡ºæ•°æ®ä¿å­˜çš„èŠ‚ç‚¹, è¿™é‡Œå‡è®¾æ˜¯èŠ‚ç‚¹2 æ­¤æ—¶æ€»æ§ä¼šå…ˆå‘é€xa start xid1, å› ä¸ºéƒ½æ˜¯å±äºä¸€ä¸ªäº‹åŠ¡. æ‰€ä»¥è¿™é‡Œä½¿ç”¨ç›¸åŒçš„xid, åŒæ—¶ä¼šå‘èŠ‚ç‚¹2å‘é€ åŸæ¥çš„ insert å’Œæ–°çš„ update ä¸¤ä¸ªè¯­å¥. (è¿™é‡Œä¸ºä»€ä¹ˆå°†ä¸å±äºä»–èŠ‚ç‚¹çš„ insert å‘é€è¿‡å», ä¹‹åä¼šè¯´) æ€»æ§æ¥å—åˆ°äº†commit, æ ‡è¯†è¿™ä¸ªäº‹åŠ¡å·²ç»ç»“æŸäº†, å‡†å¤‡æäº¤ æ€»æ§å‘èŠ‚ç‚¹1å’ŒèŠ‚ç‚¹2å‘é€xa end xid1; xa prepare xid1è¯­å¥, å‘Šè¯‰èŠ‚ç‚¹å‡†å¤‡æäº¤, å¦‚æœæ•°æ®æ­£å¸¸çš„èµ°å®Œ, é‚£ä¹ˆèŠ‚ç‚¹ä¼šå›å¤æˆåŠŸ, å¦‚æœä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹è¿”å›å¤±è´¥, åˆ™å‘èŠ‚ç‚¹1å’ŒèŠ‚ç‚¹2å‘é€xa rollbak xid1 è¿›è¡Œäº‹åŠ¡çš„å›æ»š å¦‚æœéƒ½è¿”å›æˆåŠŸ, æ€»æ§ä¼šæƒ³èŠ‚ç‚¹1å’ŒèŠ‚ç‚¹2å‘é€xa commit xid1 æœ€ç»ˆæäº¤äº‹åŠ¡ MySQL5.6ä¸Š XA äº‹åŠ¡çš„å†²çªé—®é¢˜ è¯•æƒ³ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ æ€»æ§å·²ç»å‘èŠ‚ç‚¹1å’ŒèŠ‚ç‚¹2å‘é€å®Œäº†xa prepare xid1, å¹¶ä¸”å¾—åˆ°äº†æˆåŠŸçš„å›å¤ æ€»æ§å‘èŠ‚ç‚¹1å‘é€xa commit xid1 , å¹¶ä¸”æˆåŠŸäº† æ€»æ§å‘èŠ‚ç‚¹2å‘é€xa commit xid1, æ­¤æ—¶å› ä¸ºç½‘ç»œé—®é¢˜, èŠ‚ç‚¹2å‡ºç°äº†é—®é¢˜ä¸¢å¤±äº†ä¸æ€»æ§çš„é€šè®¯ å½“ç½‘ç»œæ¢å¤æ—¶, æˆ–è€…èŠ‚ç‚¹2ä¸Šçº¿äº†, æ­¤æ—¶ xa çš„äº‹åŠ¡å·²ç»å›æ»šäº†, å½“æ€»æ§ commit æ—¶, æ•°æ®åº“å®ä¾‹å·²ç»æ‰¾ä¸åˆ°xid1è¿™ä¸ªäº‹åŠ¡ è¿™é‡Œçš„é—®é¢˜æ˜¯, xa prepare æ²¡æœ‰ä¸¥æ ¼çš„æŒä¹…åŒ–, å½“è¿æ¥æ–­å¼€æ—¶, è¿™äº›äº‹åŠ¡ä¼šè¢«å›æ»š, é€ æˆäº†æ•°æ®ä¸¢å¤± MySQL5.7 çš„ XA å¯é æ€§æ”¹è¿› MySQL5.7è§£å†³äº†è¿™ä¸ªé—®é¢˜, åœ¨è¿æ¥æ–­å¼€æ—¶è¿™äº›æ•°æ®ä¼šæŒä¹…åŒ–ä¿å­˜ä¸‹æ¥ SQL çš„å››ç§è¯­è¨€ DDL æ•°æ®åº“å®šä¹‰è¯­è¨€ CREATE(åˆ›å»º) ALTER(ä¿®æ”¹) DROP(åˆ é™¤) TRUNCATE(æ¸…é™¤) COMMENT(æ³¨é‡Š) RENAME(é‡å‘½å) DML æ•°æ®æ“çºµè¯­è¨€ SELECT(æŸ¥è¯¢) INSERT(æ–°å¢) UPDATE(æ›´æ–°) DELETE(åˆ é™¤) MERGE(åˆå¹¶) CALL(å­˜å‚¨è¿‡ç¨‹è°ƒç”¨) EXPLAIN PLAN(æ€§èƒ½åˆ†æ) LOCK TABLE(é”è¡¨) DCL æ•°æ®åº“æ§åˆ¶è¯­è¨€ GRANT(æˆæƒ) REVOKE(å–æ¶ˆæˆæƒ) TCL äº‹åŠ¡æ§åˆ¶è¯­è¨€ SAVEPOINT(è®¾ç½®ä¿å­˜ç‚¹) ROLLBACK(å›æ»š) SET TRANSACTION(è®¾ç½®å®åŠ¡) MySQL å»ºè¡¨çš„çº¦æŸæ¡ä»¶ ä¸»é”®çº¦æŸ: å”¯ä¸€, éç©º å”¯ä¸€çº¦æŸ: å”¯ä¸€, å¯ç©º, ä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªç©º æ£€æŸ¥çº¦æŸ: åˆ—æ•°æ®çš„ èŒƒå›´/æ ¼å¼ è¿›è¡Œé™åˆ¶ é»˜è®¤çº¦æŸ: åˆ—æ•°æ®çš„é»˜è®¤å€¼ å¤–é”®çº¦æŸ: ä¸¤è¡¨é—´çš„å…³ç³»è¿æ¥ MySQL æ‰§è¡ŒæŸ¥è¯¢çš„è¿‡ç¨‹ å®¢æˆ·ç«¯é€šè¿‡ TCP è¿æ¥å‘é€æŸ¥è¯¢è¯·æ±‚åˆ° MySQL çš„è¿æ¥å™¨, è¿æ¥å™¨è¿›è¡Œæƒé™éªŒè¯å’Œèµ„æºåˆ†é… æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç¼“å­˜, å¦‚æœå‘½ä¸­äº†ç¼“å­˜, ç›´æ¥è¿”å›ç»“æœ åˆ†æå’Œæ ¡éªŒè¯­æ³•æ˜¯å¦æ­£ç¡® ä¼˜åŒ–è¯­å¥, å¤„ç†æ˜¯å¦ä½¿ç”¨ç´¢å¼•, ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ å°†æ‰§è¡Œè®¡åˆ’æäº¤ç»™æ‰§è¡Œå™¨, å°†æ•°æ®ä¿å­˜åˆ°ç»“æœé›†ä¸­, åŒæ—¶å°†æ•°æ®ç¼“å­˜åœ¨ç¼“å­˜ä¸­, å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ varcharå’ŒcharåŒºåˆ« æ•ˆç‡ä¸Šchar&gt;varchar å¦‚æœç¡®å®šæŸä¸ªå­—æ®µçš„å€¼é•¿åº¦, å¯ä»¥ä½¿ç”¨char, å¦åˆ™ä½¿ç”¨varchar, ä¾‹å¦‚md5è¿™ç§æ˜ç¡®çŸ¥é“é•¿åº¦çš„å°±æ˜¯charæ›´å¥½ char å®šé•¿å­—æ®µ, åœ¨æ•°æ®åº“è®¾å®šæ—¶å°±ç¡®å®šäº†å€¼çš„å¤§å°, varchar ä¸å®šé•¿å­—æ®µ, ç”³è¯·äº†æœ€å¤§é•¿åº¦, è€Œå®é™…ä¸Šå ç”¨çš„é•¿åº¦å¯èƒ½æ¯”æœ€å¤§é•¿åº¦å°, è§†å€¼çš„çœŸæ­£é•¿åº¦è€Œå®š, å®é™…å ç”¨çš„é•¿åº¦ä¸º(å€¼é•¿åº¦+1, æœ€å1ä¸ªå­—ç¬¦è¡¨ç¤ºæœ¬å€¼é•¿åº¦) å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç¼ºç‚¹ å­˜å‚¨è¿‡ç¨‹ç»è¿‡é¢„ç¼–è¯‘æˆäº†ä»£ç å—, æ‰§è¡Œæ•ˆç‡æ¯”è¾ƒé«˜, è°ƒç”¨ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ ä½†æ˜¯å› ä¸ºå›½å†…äº’è”ç½‘çš„ç¯å¢ƒä¸€èˆ¬æ˜¯å¯»æ±‚å¾ˆå¿«çš„è¿­ä»£, é¡¹ç›®çš„ç”Ÿå‘½å‘¨æœŸå¾€å¾€è¾ƒçŸ­, äººå‘˜çš„æµåŠ¨ä¹Ÿæ¯”è¾ƒå¤§, å¯¹äºå­˜å‚¨è¿‡ç¨‹çš„ç®¡ç†ç¹çä¸”å¤æ‚, å¤ç”¨æ€§ä¹Ÿæ²¡ç”¨æŠŠä»£ç å†™åœ¨æœåŠ¡å±‚é‚£ä¹ˆå¥½, æ‰€ä»¥é˜¿é‡Œçš„&lt;&lt;Java å¼€å‘æ‰‹å†Œ&gt;&gt;ä¹Ÿç¦æ­¢ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹. MySQL çš„äº‹åŠ¡æ—¥å¿— Innodb çš„äº‹åŠ¡æ—¥å¿—åŒ…å«ä¸¤éƒ¨åˆ†, redo logå’Œundo log redo log redo logæ˜¯ä¸ºäº†äº‹åŠ¡çš„æŒä¹…åŒ–è€Œå‡ºç°çš„ log, å½“äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­, å°†æ‰§è¡Œçš„ä»»åŠ¡å†™å…¥redoä¸­, å½“æœ‰æ•…éšœå‘ç”Ÿæ—¶, MySQL é‡å¯å, æ ¹æ®redoä¸­çš„æ•°æ®è¿›è¡Œé‡åš, é˜²æ­¢äº‹åŠ¡å‡ºç°é—®é¢˜ undo log undoæ˜¯ä¸ºäº†å°†è®°å½•å›æ»šåˆ°æŸä¸ªç‰ˆæœ¬, äº‹åŠ¡åœ¨æœªæäº¤ä¹‹å‰, ä¿å­˜äº†æœªæäº¤ä¹‹å‰çš„ç‰ˆæœ¬æ•°æ®, æ–¹ä¾¿äº‹åŠ¡å›æ»šæ—¶å¯¹æ•°æ®è¿›è¡Œå›å¤ MySQL çš„ binlog binlogå­˜å‚¨äº†æ‰€æœ‰æ•°æ®åº“çš„ç»“æ„å˜æ›´å’Œè¡¨å†…çš„æ•°æ®å˜æ›´çš„äºŒè¿›åˆ¶æ—¥å¿—. è®°ä½æ˜¯å˜æ›´, å¯¹æ•°æ®çš„æŸ¥è¯¢å¹¶ä¸ä¼šè®°å½•åœ¨å…¶ä¸­. æ•°æ®åº“çš„æ‰€æœ‰è®°å½•å¯ä»¥æŸ¥çœ‹æ•°æ®åº“çš„é€šç”¨æ—¥å¿— äº‹åŠ¡ä¸­å¯ä»¥æ··åˆä½¿ç”¨å­˜å‚¨å¼•æ“å— æœ€å¥½ä¸è¦, å¯ä»¥æ­£å¸¸æäº¤, ä½†æ˜¯å› ä¸ºäº‹åŠ¡æ˜¯ç”±å¼•æ“å®ç°çš„, åœ¨å›æ»šæ—¶å¯èƒ½å› ä¸ºæ•°æ®ä¸ä¸€è‡´é—®é¢˜æ— æ³•å›æ»š æ•°æ®é‡å¾ˆå¤§çš„è¡¨å¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢é€Ÿåº¦ è€ƒè™‘åˆ†è¡¨ ä¼˜åŒ–ç´¢å¼• ä½¿ç”¨redisè¿›è¡Œæ•°æ®ç¼“å­˜ ä½¿ç”¨ MySQL ç¼“å­˜ ä¸»ä»å¤åˆ¶, è¯»å†™åˆ†ç¦» ä»ä¸šåŠ¡ä¸Šé™åˆ¶æŸ¥è¯¢çš„èŒƒå›´ ä»ä¸šåŠ¡ä¸Šè§„å®šæŸ¥è¯¢å¿…é¡»æŒ‡å®šæ¡ä»¶ æ•°æ®é‡å¾ˆå¤§çš„è¡¨é’ˆå¯¹å¾ˆå¤§çš„åˆ†é¡µå¤„ç† ä¾‹å¦‚, æœ‰è¡¨user, æ¯é¡µ10æ¡æ•°æ®, ç”¨æˆ·æŸ¥è¯¢åˆ°äº†ç¬¬100000é¡µ, sql è¯­å¥ç±»ä¼¼äº 1SELECT * FROM `user` WHERE age&gt;18 LIMIT 1000000, 10 å› ä¸º MySQL åˆ†é¡µæŸ¥è¯¢ä¸æ˜¯è·³è¿‡å‰1000000æ¡æ•°æ®, è€Œæ˜¯è¯»å–åˆ°1000010 æ¡æ•°æ®, æ‰€ä»¥å¯¼è‡´è¿™ä¸ªæŸ¥è¯¢éå¸¸çš„æ…¢ å¯ä»¥å°† sql ä¿®æ”¹ä¸º 1SELECT * FROM `user` WHERE id in (SELECT id FROM `user` WHERE age&gt;18 LIMIT 1000000, 10) è¿™æ ·è™½ç„¶ä¹ŸæŸ¥è¯¢åˆ°äº†1000010æ¡æ•°æ®, ä½†æ˜¯å› ä¸ºç´¢å¼•è¦†ç›–äº†æŸ¥è¯¢, å¯¼è‡´é€Ÿåº¦æå‡ æˆ–è€…è¯´åœ¨ä¸šåŠ¡ä¸­å¯¹è¶…å¤§çš„åˆ†é¡µè¿›è¡Œå¤„ç†, æ¯”å¦‚æ¨æµ‹ç”¨æˆ·çš„éœ€æ±‚æ˜¯å¯èƒ½ä¼šç‚¹å‡»ä¸‹ä¸€é¡µ, å°†ä¸‹ä¸€é¡µæ•°æ®æå‰æŸ¥è¯¢å¹¶å­˜å‚¨åˆ°ç¼“å­˜ä¸­ç­‰ å…³è”æŸ¥è¯¢çš„ä¼˜åŒ– ç¡®å®šONå’ŒUSINGå­è¯­å¥ä¸­æ˜¯å¦å«æœ‰ç´¢å¼• ç¡®ä¿GROUP BY å’Œ ORDER BY åªæœ‰ä¸€ä¸ªè¡¨ä¸­çš„åˆ—, ä¸ç„¶ä¸ä¼šä½¿ç”¨ç´¢å¼• æ•°æ®åº“ç»“æ„ä¼˜åŒ– å¦‚æœè¡¨ä¸­æœ‰å¾ˆå¤šåˆ—, è€ƒè™‘å°†è¡¨åˆ‡åˆ† å¯¹äºç»å¸¸è”åˆæŸ¥è¯¢çš„è¡¨, è€ƒè™‘ä½¿ç”¨ä¸­é—´è¡¨æ¥è¿æ¥æé«˜æŸ¥è¯¢æ•ˆç‡(å°†åŸæ¥çš„è”åˆæŸ¥è¯¢ä¿®æ”¹ä¸ºå¯¹ä¸­é—´è¡¨çš„æŸ¥è¯¢) åˆç†çš„åŠ å…¥å†—ä½™å­—æ®µ(æ…é‡) å›è¡¨ å›è¡¨æŸ¥è¯¢æŒ‡çš„æ˜¯, éœ€è¦æ‰«æä¸¤æ¬¡ç´¢å¼•æ ‘, æ•ˆç‡æ¯”æ‰«æä¸€æ¬¡ç´¢å¼•æ ‘æ›´ä½ å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸ºæ™®é€šç´¢å¼•(è¾…åŠ©ç´¢å¼•), åˆ™éœ€è¦å…ˆæŸ¥æ‰¾ä¸€éè¾…åŠ©ç´¢å¼•æ ‘, å¾—åˆ°å¯¹åº”çš„ç°‡é›†ç´¢å¼•é”®(ä¸»é”®), å†å»ç°‡é›†ç´¢å¼•æ ‘ä¸­æŸ¥æ‰¾å¯¹åº”è®°å½•, å‘ç”Ÿå›è¡¨ æ™®é€šç´¢å¼•æŒ‡çš„æ˜¯éä¸»é”®ç´¢å¼•","link":"/2022/01/21/mysql_interview/"},{"title":"ä¿æŠ¤ä½ çš„ç½‘ç«™ç”¨æˆ·å¯†ç ","text":"æœ€è¿‘å¯¹å¯†ç çš„åŠ å¯†æ¯”è¾ƒæ„Ÿå…´è¶£, ä½†æ˜¯å¯¹äºæ¯”è¾ƒå…¨é¢çš„æ–‡ç« , åªæ‰¾åˆ°äº†è¿™ä¸€ç« , è‹±æ–‡ç‰ˆ, æˆ‘ç¨å¾®ç¿»è¯‘äº†ä¸€ä¸‹, è¿™é‡Œè®°å½•ä¸€ä¸‹ åŸæ–‡: Salted Password Hashing - Doing it Right åºè¨€ å¦‚æœä½ æ˜¯ä¸€ä¸ªwebå¼€å‘äººå‘˜ï¼Œä½ å¯èƒ½ä¸å¾—ä¸å»ºç«‹ä¸€ä¸ªç”¨æˆ·å¸æˆ·ç³»ç»Ÿã€‚ç”¨æˆ·å¸æˆ·ç³»ç»Ÿæœ€é‡è¦çš„æ–¹é¢æ˜¯å¦‚ä½•ä¿æŠ¤ç”¨æˆ·å¯†ç ã€‚ç”¨æˆ·å¸æˆ·æ•°æ®åº“ç»å¸¸è¢«é»‘å®¢å…¥ä¾µï¼Œæ‰€ä»¥å¦‚æœä½ çš„ç½‘ç«™è¢«å…¥ä¾µï¼Œä½ ç»å¯¹å¿…é¡»é‡‡å–æªæ–½ä¿æŠ¤ä½ ç”¨æˆ·çš„å¯†ç ã€‚ä¿æŠ¤å¯†ç çš„æœ€å¥½æ–¹æ³•æ˜¯ä½¿ç”¨saltå¯†ç æ•£åˆ—(salted password hashing)ã€‚æœ¬æ–‡å°†è§£é‡Šä¸ºä»€ä¹ˆå®ƒæ˜¯è¿™æ ·åšçš„ã€‚ å…³äºå¦‚ä½•æ­£ç¡®åœ°è¿›è¡Œå¯†ç æ•£åˆ—æœ‰å¾ˆå¤šç›¸äº’çŸ›ç›¾çš„æƒ³æ³•å’Œè¯¯è§£ï¼Œå¯èƒ½æ˜¯å› ä¸ºç½‘ç»œä¸Šæœ‰å¤§é‡çš„é”™è¯¯ä¿¡æ¯ã€‚å¯†ç æ•£åˆ—å…¶å®æ˜¯å¾ˆç®€å•çš„äº‹æƒ…ä¹‹ä¸€ï¼Œä½†æ˜¯å¾ˆå¤šäººéƒ½ä¼šçŠ¯é”™ã€‚é€šè¿‡è¿™ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘å¸Œæœ›ä¸ä»…è§£é‡Šæ­£ç¡®çš„æ–¹æ³•ï¼Œè€Œä¸”è§£é‡Šä¸ºä»€ä¹ˆåº”è¯¥è¿™æ ·åšã€‚ é‡è¦è­¦å‘Š: å¦‚æœæ‚¨æ­£åœ¨è€ƒè™‘ç¼–å†™è‡ªå·±çš„å¯†ç å“ˆå¸Œä»£ç , è¯·ç«‹å³åœæ­¢, è¿™å¤ªå®¹æ˜“æç ¸äº†ã€‚ä¸ï¼Œä½ åœ¨å¤§å­¦ä¸Šçš„å¯†ç å­¦è¯¾ç¨‹å¹¶ä¸èƒ½ä½¿ä½ å…é™¤è¿™ä¸ªè­¦å‘Šã€‚è¿™é€‚ç”¨äºæ¯ä¸€ä¸ªäºº, ä¸è¦ç¼–å†™è‡ªå·±çš„ CRYPTO(DO NOT WRITE YOUR OWN CRYPTO!), å­˜å‚¨å¯†ç çš„é—®é¢˜å·²ç»å¾—åˆ°è§£å†³, è®¸å¤šè¯­è¨€éƒ½æœ‰ç°æˆçš„åŒ…å’Œæ¨¡å—ä¾›ä½ ä½¿ç”¨, ä»–å°†æ¯”ä½ è‡ªå·±å®ç°çš„æ›´åŠ å®Œç¾å’Œç¨³å®š éœ€è¦è¯´æ˜çš„æ˜¯,æœ¬ç¯‡æ–‡ç« å¹¶ä¸æ˜¯è¦æŒ‡å¯¼ä½ å¦‚ä½•ç¼–å†™è‡ªå·±çš„å­˜å‚¨ç³»ç»Ÿï¼Œè€Œæ˜¯è¦è§£é‡Šä¸ºä»€ä¹ˆå¯†ç åº”è¯¥ä»¥æŸç§æ–¹å¼å­˜å‚¨ã€‚ ä»€ä¹ˆæ˜¯å¯†ç æ•£åˆ— 123hash(\"hello\") = 2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824hash(\"hbllo\") = 58756879c05c68dfac9866712fad6a93f8146f337a69afe7dd238f3364946366hash(\"waltz\") = c0e81794384491161f1777c232bc6bd9ec38f616560b120fda8e90f383853542 å“ˆå¸Œç®—æ³•æ˜¯å•å‘å‡½æ•°ã€‚ä»–ä»¬æŠŠä»»ä½•æ•°é‡çš„æ•°æ®è½¬æ¢æˆä¸€ä¸ªå›ºå®šé•¿åº¦çš„â€œæŒ‡çº¹â€ï¼Œä¸èƒ½é€†è½¬ã€‚å®ƒä»¬è¿˜æœ‰ä¸€ä¸ªç‰¹æ€§ï¼Œå³å¦‚æœè¾“å…¥å‘ç”Ÿä¸€ç‚¹ç‚¹çš„å˜åŒ–ï¼Œé‚£ä¹ˆäº§ç”Ÿçš„æ•£åˆ—å°±å®Œå…¨ä¸åŒäº†ï¼ˆå‚è§ä¸Šé¢çš„ç¤ºä¾‹ï¼‰ã€‚è¿™å¯¹äºä¿æŠ¤å¯†ç éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›ä»¥ä¸€ç§å³ä½¿å¯†ç æ–‡ä»¶æœ¬èº«è¢«æ³„éœ²ä¹Ÿèƒ½ä¿æŠ¤å¯†ç çš„å½¢å¼å­˜å‚¨å¯†ç ï¼Œä½†åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤ŸéªŒè¯ç”¨æˆ·çš„å¯†ç æ˜¯å¦æ­£ç¡®ã€‚ åœ¨åŸºäºå“ˆå¸Œçš„å¸æˆ·ç³»ç»Ÿä¸­ï¼Œå¸æˆ·æ³¨å†Œå’Œèº«ä»½éªŒè¯çš„ä¸€èˆ¬å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š ç”¨æˆ·åˆ›å»ºä¸€ä¸ªå¸æˆ· ä»–ä»¬çš„å¯†ç è¢«æ•£åˆ—å¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚ä»»ä½•æ—¶å€™éƒ½ä¸ä¼šæœ‰å†™å…¥ç¡¬ç›˜çš„çº¯æ–‡æœ¬(æœªåŠ å¯†)å¯†ç  å½“ç”¨æˆ·å°è¯•ç™»å½•æ—¶ï¼Œå°†æ ¹æ®å…¶çœŸå®å¯†ç (ä»æ•°æ®åº“ä¸­æ£€ç´¢)çš„å“ˆå¸Œå€¼ä¸ä»–ä»¬è¾“å…¥çš„å¯†ç çš„å“ˆå¸Œå€¼è¿›è¡Œæ¯”å¯¹ å¦‚æœæ•£åˆ—åŒ¹é…ï¼Œç”¨æˆ·å°†è¢«æˆäºˆè®¿é—®æƒé™ã€‚å¦‚æœä¸åŒ¹é…ï¼Œç”¨æˆ·å°†è¢«å‘ŠçŸ¥è¾“å…¥äº†æ— æ•ˆçš„ç™»å½•å‡­è¯ å½“ç”¨æˆ·æ¯æ¬¡ç™»å½•æ—¶, é‡å¤æ­¥éª¤3å’Œæ­¥éª¤4 åœ¨ç¬¬4æ­¥ä¸­ï¼Œåƒä¸‡ä¸è¦å‘Šè¯‰ç”¨æˆ·æ˜¯ä¸æ˜¯ç”¨æˆ·åæˆ–å¯†ç é”™äº†ã€‚å§‹ç»ˆæ˜¾ç¤ºâ€œæ— æ•ˆç”¨æˆ·åæˆ–å¯†ç â€è¿™æ ·çš„é€šç”¨æ¶ˆæ¯ã€‚è¿™å¯é˜²æ­¢æ”»å‡»è€…åœ¨ä¸çŸ¥é“å…¶å¯†ç çš„æƒ…å†µä¸‹æšä¸¾æœ‰æ•ˆç”¨æˆ·åã€‚ åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œç”¨äºä¿æŠ¤å¯†ç çš„å“ˆå¸Œå‡½æ•°ä¸æ‚¨åœ¨æ•°æ®ç»“æ„è¯¾ç¨‹ä¸­çœ‹åˆ°çš„å“ˆå¸Œå‡½æ•°ä¸åŒã€‚ç”¨äºå®ç°å“ˆå¸Œè¡¨ç­‰æ•°æ®ç»“æ„çš„å“ˆå¸Œå‡½æ•°è¢«è®¾è®¡ä¸ºå¿«é€Ÿçš„ï¼Œè€Œä¸æ˜¯å®‰å…¨çš„ã€‚åªèƒ½ä½¿ç”¨åŠ å¯†å“ˆå¸Œå‡½æ•°æ¥å®ç°å¯†ç å“ˆå¸Œã€‚åƒSHA256ã€SHA512ã€RipeMDå’ŒWHIRLPOOLè¿™æ ·çš„æ•£åˆ—å‡½æ•°éƒ½æ˜¯åŠ å¯†æ•£åˆ—å‡½æ•°ã€‚ å¾ˆå®¹æ˜“è®¤ä¸ºä½ æ‰€è¦åšçš„å°±æ˜¯é€šè¿‡ä¸€ä¸ªåŠ å¯†æ•£åˆ—å‡½æ•°æ¥è¿è¡Œå¯†ç ï¼Œä½ çš„ç”¨æˆ·çš„å¯†ç å°†æ˜¯å®‰å…¨çš„ã€‚è¿™ä¸äº‹å®ç›¸å»ç”šè¿œã€‚æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥å¾ˆå¿«åœ°ä»æ™®é€šæ•£åˆ—ä¸­æ¢å¤å¯†ç ã€‚æœ‰å‡ ç§æ˜“äºå®ç°çš„æŠ€æœ¯ä½¿è¿™äº›â€œæ”»å‡»â€çš„æ•ˆæœå¤§å¤§é™ä½ã€‚ä¸ºäº†æ¿€å‘å¯¹è¿™äº›æŠ€æœ¯çš„éœ€æ±‚ï¼Œè€ƒè™‘ä¸€ä¸‹è¿™ä¸ªç½‘ç«™ã€‚åœ¨é¦–é¡µä¸Šï¼Œæ‚¨å¯ä»¥æäº¤ä¸€ä¸ªè¦ç ´è§£çš„å“ˆå¸Œåˆ—è¡¨ï¼Œå¹¶åœ¨ä¸åˆ°ä¸€ç§’é’Ÿçš„æ—¶é—´å†…æ”¶åˆ°ç»“æœã€‚æ˜¾ç„¶ï¼Œç®€å•åœ°å¯¹å¯†ç è¿›è¡Œå“ˆå¸Œè¿ç®—å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬å¯¹å®‰å…¨æ€§çš„éœ€æ±‚ã€‚ å¦‚ä½•ç ´è§£å“ˆå¸Œ å­—å…¸å’Œæš´åŠ›æ”»å‡» ç ´è§£æ•£åˆ—çš„æœ€ç®€å•æ–¹æ³•æ˜¯å°è¯•çŒœæµ‹å¯†ç ï¼Œå¯¹æ¯ä¸ªçŒœæµ‹è¿›è¡Œæ•£åˆ—ï¼Œå¹¶æ£€æŸ¥çŒœæµ‹çš„æ•£åˆ—æ˜¯å¦ç­‰äºè¢«ç ´è§£çš„æ•£åˆ—ã€‚å¦‚æœå“ˆå¸Œå€¼ç›¸ç­‰ï¼Œåˆ™çŒœæµ‹åˆ°äº†å¯†ç ã€‚çŒœæµ‹å¯†ç æœ€å¸¸è§çš„ä¸¤ç§æ–¹æ³•æ˜¯å­—å…¸æ”»å‡»å’Œæš´åŠ›æ”»å‡»ã€‚ å­—å…¸æ”»å‡»ä½¿ç”¨åŒ…å«å•è¯ã€çŸ­è¯­ã€å¸¸ç”¨å¯†ç å’Œå…¶ä»–å¯èƒ½ç”¨ä½œå¯†ç çš„å­—ç¬¦ä¸²çš„æ–‡ä»¶ã€‚å¯¹æ–‡ä»¶ä¸­çš„æ¯ä¸ªå•è¯è¿›è¡Œå“ˆå¸Œè¿ç®—ï¼Œå¹¶å°†å…¶å“ˆå¸Œå€¼ä¸å¯†ç å“ˆå¸Œå€¼è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä»–ä»¬åŒ¹é…ï¼Œè¿™ä¸ªè¯å°±æ˜¯å¯†ç ã€‚è¿™äº›å­—å…¸æ–‡ä»¶æ˜¯é€šè¿‡ä»å¤§é‡æ–‡æœ¬ä¸­æå–å•è¯ï¼Œç”šè‡³ä»çœŸå®çš„å¯†ç æ•°æ®åº“ä¸­æå–å•è¯æ¥æ„å»ºçš„ã€‚è¿›ä¸€æ­¥çš„å¤„ç†é€šå¸¸åº”ç”¨äºå­—å…¸æ–‡ä»¶ï¼Œä¾‹å¦‚ç”¨â€œleet speakâ€ç­‰ä»·è¯æ›¿æ¢å•è¯ï¼ˆâ€œhelloâ€å˜æˆâ€œh3110â€ï¼‰ï¼Œä»¥ä½¿å®ƒä»¬æ›´æœ‰æ•ˆã€‚ æš´åŠ›æ”»å‡»ä¼šå°è¯•æ‰€æœ‰å¯èƒ½çš„å­—ç¬¦ç»„åˆï¼Œé•¿åº¦ä¸è¶…è¿‡ç»™å®šçš„é•¿åº¦ã€‚è¿™äº›æ”»å‡»åœ¨è®¡ç®—ä¸Šéå¸¸æ˜‚è´µï¼Œè€Œä¸”é€šå¸¸åœ¨æ¯ä¸ªå¤„ç†å™¨æ—¶é—´ç ´è§£å“ˆå¸Œæ–¹é¢æ•ˆç‡æœ€ä½ï¼Œä½†å®ƒä»¬æœ€ç»ˆæ€»ä¼šæ‰¾åˆ°å¯†ç ã€‚å¯†ç åº”è¯¥è¶³å¤Ÿé•¿ï¼Œæœç´¢æ‰€æœ‰å¯èƒ½çš„å­—ç¬¦ä¸²ä»¥æ‰¾åˆ°å®ƒå°†èŠ±è´¹å¤ªé•¿çš„æ—¶é—´æ˜¯å€¼å¾—çš„ã€‚ æˆ‘ä»¬æ— æ³•é˜²æ­¢å­—å…¸æ”»å‡»æˆ–æš´åŠ›æ”»å‡»ã€‚å®ƒä»¬å¯ä»¥å˜å¾—ä¸é‚£ä¹ˆæœ‰æ•ˆï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥å®Œå…¨é˜»æ­¢å®ƒä»¬ã€‚å¦‚æœå¯†ç æ•£åˆ—ç³»ç»Ÿæ˜¯å®‰å…¨çš„ï¼Œç ´è§£æ•£åˆ—çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯å¯¹æ¯ä¸ªæ•£åˆ—è¿è¡Œå­—å…¸æˆ–æš´åŠ›æ”»å‡», ä½†æ˜¯å¯¹äºç ´è§£è€…æ¥è¯´è¦èŠ±è´¹å¾ˆå¤§çš„ä»£ä»·å’Œå¾ˆé•¿çš„æ—¶å€™æ‰èƒ½ç ´è§£å…¶ä¸­ä¸€ä¸ªå¯†ç . æŸ¥æ‰¾è¡¨ æŸ¥æ‰¾è¡¨æ˜¯ä¸€ç§éå¸¸æœ‰æ•ˆçš„æ–¹æ³•ï¼Œå¯ä»¥å¿«é€Ÿåœ°ç ´è§£è®¸å¤šç›¸åŒç±»å‹çš„å“ˆå¸Œã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯åœ¨å¯†ç å­—å…¸ä¸­é¢„å…ˆè®¡ç®—å¯†ç çš„å“ˆå¸Œå€¼ï¼Œå¹¶å°†å…¶å’Œç›¸åº”çš„å¯†ç å­˜å‚¨åœ¨æŸ¥æ‰¾è¡¨æ•°æ®ç»“æ„(æ•°æ®åº“)ä¸­ã€‚ä½¿ç”¨è€…æäº¤éœ€è¦ç ´è§£çš„å“ˆå¸Œ, ç”±æ•°æ®åº“å»æŸ¥æ‰¾æœ‰æ²¡æœ‰å¯¹åº”çš„å¯†ç , ä¸€ä¸ªå¥½çš„æŸ¥æ‰¾è¡¨å®ç°å¯ä»¥æ¯ç§’å¤„ç†æ•°ç™¾ä¸ªå“ˆå¸ŒæŸ¥æ‰¾ï¼Œå³ä½¿å®ƒä»¬åŒ…å«æ•°åäº¿ä¸ªå“ˆå¸Œã€‚ å¦‚æœæ‚¨æƒ³æ›´å¥½åœ°äº†è§£æŸ¥æ‰¾è¡¨çš„é€Ÿåº¦ï¼Œè¯·å°è¯•ä½¿ç”¨CrackStationçš„å…è´¹å“ˆå¸Œç ´è§£ç¨‹åºç ´è§£ä»¥ä¸‹sha256å“ˆå¸Œ(éœ€è¦FQ) 123456c11083b4b0a7743af748c85d343dfee9fbb8b2576c05f3a7f0d632b0926aadfc11083b4b0a7743af748c85d343dfe9fbb8b2576c05f3a7f0d632b0926aadfc08eac03b80adc33dc7d8fbe44b7c7b05d3a2c511166bdb43fcb710b03ba919e7e4ba5cbd251c98e6cd1c23f126a3b81d8d8328abc95387229850952b3ef9f9044ba5cbd251c98e6cd1c23f126a3b81d8d8328abc95387229850952b3ef9f9045206b8b8a996cf5320cb12ca91c7b790fba9f030408efe83ebb83548dc3007bd åå‘æŸ¥æ‰¾è¡¨ æ­¤æ”»å‡»å…è®¸æ”»å‡»è€…å¯¹å¤šä¸ªå“ˆå¸ŒåŒæ—¶åº”ç”¨å­—å…¸æˆ–æš´åŠ›æ”»å‡»ï¼Œè€Œæ— éœ€é¢„å…ˆè®¡ç®—æŸ¥æ‰¾è¡¨ã€‚ é¦–å…ˆï¼Œæ”»å‡»è€…åˆ›å»ºä¸€ä¸ªæŸ¥æ‰¾è¡¨ï¼Œå°†æ¯ä¸ªå¯†ç å“ˆå¸Œå€¼ä»å—æŸç”¨æˆ·å¸æˆ·æ•°æ®åº“æ˜ å°„åˆ°æ‹¥æœ‰è¯¥å“ˆå¸Œå€¼çš„ç”¨æˆ·åˆ—è¡¨ã€‚ç„¶åï¼Œæ”»å‡»è€…å¯¹æ¯ä¸ªå¯†ç çŒœæµ‹è¿›è¡Œå“ˆå¸Œè¿ç®—ï¼Œå¹¶ä½¿ç”¨æŸ¥æ‰¾è¡¨è·å–å…¶å¯†ç æ˜¯æ”»å‡»è€…çŒœæµ‹çš„ç”¨æˆ·åˆ—è¡¨ã€‚è¿™ç§æ”»å‡»ç‰¹åˆ«æœ‰æ•ˆï¼Œå› ä¸ºè®¸å¤šç”¨æˆ·éƒ½æœ‰ç›¸åŒçš„å¯†ç ã€‚ è¿™æ®µæ¯”è¾ƒæ™¦æ¶©, æˆ‘ä½¿ç”¨å¤§ç™½è¯æ¥è§£é‡Šä¸€ä¸‹, å…¶å®æ˜¯æ”»å‡»è€…æ³¨å†Œä¸€ä¸ªè´¦å·åˆ°è¢«æ”»å‡»ç½‘ç«™, ç„¶åè¿›å…¥è¯¥ç½‘ç«™çš„å¯†ç æ•°æ®åº“, æŸ¥æ‰¾åˆ°åˆšæ‰æ³¨å†Œçš„å¸å·çš„åŠ å¯†åçš„å¯†ç , å†é€šè¿‡æ•°æ®åº“æŸ¥æ‰¾æœ‰æ²¡æœ‰å’Œè¯¥åŠ å¯†å¯†ç ä¸€è‡´çš„åŠ å¯†å¯†ç , ä¸€è‡´åˆ™ä»£è¡¨æŸä¸ªç”¨æˆ·ä½¿ç”¨äº†å’Œä½ ç›¸åŒçš„å¯†ç , å³å¯è¾¾åˆ°ç ´è§£çš„æ•ˆæœ å½©è™¹è¡¨ å½©è™¹è¡¨æ˜¯ä¸€ç§æ—¶é—´è®°å¿†æŠ˜è¡·æŠ€æœ¯ã€‚å®ƒä»¬ç±»ä¼¼äºæŸ¥å¯»è¡¨ï¼Œåªæ˜¯å®ƒä»¬ç‰ºç‰²äº†å“ˆå¸Œç ´è§£çš„é€Ÿåº¦ï¼Œä»¥ä½¿æŸ¥å¯»è¡¨æ›´å°ã€‚å› ä¸ºå®ƒä»¬æ›´å°ï¼Œæ‰€ä»¥å¯ä»¥å°†æ›´å¤šæ•£åˆ—çš„è§£å†³æ–¹æ¡ˆå­˜å‚¨åœ¨ç›¸åŒçš„ç©ºé—´ä¸­ï¼Œä»è€Œä½¿å®ƒä»¬æ›´æœ‰æ•ˆã€‚å½©è™¹è¡¨ï¼Œå¯ä»¥å¿«é€Ÿç ´è§£ä»»ä½•8ä¸ªå­—ç¬¦ç”Ÿæˆçš„md5ã€‚ å½©è™¹è¡¨ åŠ ç›(salt) 1234hash(\"hello\") = 2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824hash(\"hello\" + \"QxLUF1bgIAdeQX\") = 9e209040c863f84a31e719795b2577523954739fe5ed3b58a75cff2127075ed1hash(\"hello\" + \"bv5PehSMfV11Cd\") = d1d3ec2e6f20fd420d50e2642992841d8338a314b8ea157c9e18477aaef226abhash(\"hello\" + \"YYLmfY6IehjZMQ\") = a49670c3c18b9e079b9cfaf51634f563dc8ae3070db2c4a8544305df1b60f007 æŸ¥æ‰¾è¡¨å’Œå½©è™¹è¡¨èµ·ä½œç”¨ï¼Œå› ä¸ºæ¯ä¸ªå¯†ç çš„æ•£åˆ—æ–¹å¼å®Œå…¨ç›¸åŒã€‚å¦‚æœä¸¤ä¸ªç”¨æˆ·æœ‰ç›¸åŒçš„å¯†ç ï¼Œä»–ä»¬å°†æœ‰ç›¸åŒçš„å¯†ç å“ˆå¸Œã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡éšæœºåŒ–æ¯ä¸ªæ•£åˆ—æ¥é˜²æ­¢è¿™äº›æ”»å‡»ï¼Œè¿™æ ·å½“ç›¸åŒçš„å¯†ç è¢«æ•£åˆ—ä¸¤æ¬¡æ—¶ï¼Œæ•£åˆ—å°±ä¸ä¸€æ ·äº†ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ•£åˆ—ä¹‹å‰åœ¨å¯†ç ä¸­æ·»åŠ æˆ–é¢„å…ˆæ·»åŠ ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼ˆç§°ä¸º salt ï¼‰æ¥éšæœºæ•£åˆ—ã€‚å¦‚ä¸Šé¢çš„ç¤ºä¾‹æ‰€ç¤ºï¼Œæ¯æ¬¡éƒ½ä¼šå°†ç›¸åŒçš„å¯†ç æ•£åˆ—æˆå®Œå…¨ä¸åŒçš„å­—ç¬¦ä¸²ã€‚ä¸ºäº†æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®ï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸ªå¯†ç åŠ å¯†æ—¶çš„saltï¼Œå› æ­¤å®ƒé€šå¸¸ä¸æ•£åˆ—ä¸€èµ·å­˜å‚¨åœ¨ç”¨æˆ·å¸æˆ·æ•°æ®åº“ä¸­ï¼Œæˆ–è€…ä½œä¸ºæ•£åˆ—å­—ç¬¦ä¸²æœ¬èº«çš„ä¸€éƒ¨åˆ†ã€‚ Saltä¸éœ€è¦åŠ å¯†ã€‚å› ä¸ºsaltæ˜¯éšæœºçš„, éšæœºåŒ–äº†å“ˆå¸Œå€¼ï¼ŒæŸ¥æ‰¾è¡¨ã€åå‘æŸ¥æ‰¾è¡¨å’Œå½©è™¹è¡¨å°±å˜å¾—æ— æ•ˆäº†ã€‚æ”»å‡»è€…ä¸ä¼šé¢„å…ˆçŸ¥é“saltæ˜¯ä»€ä¹ˆï¼Œå› æ­¤æ— æ³•é¢„å…ˆè®¡ç®—æŸ¥æ‰¾è¡¨æˆ–å½©è™¹è¡¨ã€‚å¦‚æœæ¯ä¸ªç”¨æˆ·çš„å¯†ç éƒ½ç”¨ä¸åŒçš„saltæ•£åˆ—ï¼Œé‚£ä¹ˆåå‘æŸ¥æ‰¾è¡¨æ”»å‡»ä¹Ÿä¸ä¼šèµ·ä½œç”¨ã€‚ åŠ ç›çš„é”™è¯¯ä½¿ç”¨ é‡å¤ä½¿ç”¨ä¸€ä¸ªç› ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯åœ¨æ¯ä¸ªæ•£åˆ—ä¸­ä½¿ç”¨ç›¸åŒçš„ç›ã€‚saltè¦ä¹ˆç¡¬ç¼–ç åˆ°ç¨‹åºä¸­ï¼Œè¦ä¹ˆéšæœºç”Ÿæˆä¸€æ¬¡ã€‚è¿™æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºå¦‚æœä¸¤ä¸ªç”¨æˆ·æœ‰ç›¸åŒçš„å¯†ç ï¼Œä»–ä»¬ä»ç„¶ä¼šæœ‰ç›¸åŒçš„å“ˆå¸Œã€‚æ”»å‡»è€…ä»ç„¶å¯ä»¥ä½¿ç”¨åå‘æŸ¥æ‰¾è¡¨æ”»å‡»åŒæ—¶å¯¹æ¯ä¸ªå“ˆå¸Œè¿è¡Œå­—å…¸æ”»å‡»ã€‚ä»–ä»¬åªéœ€å¯¹æ¯ä¸ªå¯†ç çŒœæµ‹åº”ç”¨saltï¼Œç„¶åå†å¯¹å…¶è¿›è¡Œå“ˆå¸Œè¿ç®—ã€‚å¦‚æœå°†saltç¡¬ç¼–ç åˆ°ä¸€ä¸ªæµè¡Œçš„äº§å“ä¸­ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ºè¯¥saltæ„å»ºæŸ¥æ‰¾è¡¨å’Œå½©è™¹è¡¨ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°ç ´è§£äº§å“ç”Ÿæˆçš„å“ˆå¸Œã€‚ æ¯æ¬¡ç”¨æˆ·åˆ›å»ºå¸æˆ·æˆ–æ›´æ”¹å¯†ç æ—¶ï¼Œéƒ½å¿…é¡»ç”Ÿæˆä¸€ä¸ªæ–°çš„éšæœºsaltã€‚ çŸ­ç› å¦‚æœç›å¤ªçŸ­ï¼Œæ”»å‡»è€…å¯ä»¥ä¸ºæ¯ä¸ªå¯èƒ½çš„ç›å»ºç«‹ä¸€ä¸ªæŸ¥æ‰¾è¡¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœsaltåªæœ‰ä¸‰ä¸ªASCIIå­—ç¬¦ï¼Œåˆ™åªæœ‰95x95x95=857375ä¸ªå¯èƒ½çš„saltã€‚è¿™çœ‹èµ·æ¥å¯èƒ½å¾ˆå¤šï¼Œä½†æ˜¯å¦‚æœæ¯ä¸ªæŸ¥æ‰¾è¡¨åªåŒ…å«1MBæœ€å¸¸ç”¨çš„å¯†ç ï¼Œé‚£ä¹ˆå®ƒä»¬æ€»å…±åªæœ‰837GBï¼Œè€ƒè™‘åˆ°ç°åœ¨1000 GBçš„ç¡¬ç›˜å”®ä»·ä½äº100ç¾å…ƒï¼Œè¿™å¹¶ä¸ç®—å¤šã€‚ å‡ºäºåŒæ ·çš„åŸå› ï¼Œç”¨æˆ·åä¸åº”è¯¥ç”¨ä½œsaltã€‚ç”¨æˆ·åå¯¹äºå•ä¸ªæœåŠ¡å¯èƒ½æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯å®ƒä»¬æ˜¯å¯é¢„æµ‹çš„ï¼Œå¹¶ä¸”ç»å¸¸è¢«å…¶ä»–æœåŠ¡ä¸Šçš„å¸æˆ·é‡ç”¨ã€‚æ”»å‡»è€…å¯ä»¥ä¸ºå¸¸è§ç”¨æˆ·åæ„å»ºæŸ¥æ‰¾è¡¨ï¼Œå¹¶ä½¿ç”¨å®ƒä»¬æ¥ç ´è§£ç”¨æˆ·åä½œä¸ºsaltçš„å“ˆå¸Œã€‚ ä¸ºäº†ä½¿æ”»å‡»è€…æ— æ³•ä¸ºæ¯ä¸ªå¯èƒ½çš„saltåˆ›å»ºä¸€ä¸ªæŸ¥æ‰¾è¡¨ï¼Œsaltå¿…é¡»å¾ˆé•¿ã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ä½¿ç”¨ä¸å“ˆå¸Œå‡½æ•°è¾“å‡ºå¤§å°ç›¸åŒçš„saltã€‚ä¾‹å¦‚ï¼ŒSHA256çš„è¾“å‡ºæ˜¯256ä½ï¼ˆ32å­—èŠ‚ï¼‰ï¼Œå› æ­¤saltåº”è¯¥è‡³å°‘æ˜¯32ä¸ªéšæœºå­—èŠ‚ã€‚ æ•£åˆ—ç®—æ³•çš„é”™è¯¯ä½¿ç”¨ æœ¬èŠ‚ä»‹ç»å¦ä¸€ä¸ªå¸¸è§çš„å¯†ç æ•£åˆ—è¯¯è§£ï¼šæ•£åˆ—ç®—æ³•çš„å¤æ€ªç»„åˆã€‚äººä»¬å¾ˆå®¹æ˜“å¿˜ä¹æ‰€ä»¥åœ°å°è¯•ç»„åˆä¸åŒçš„æ•£åˆ—å‡½æ•°ï¼Œå¸Œæœ›ç»“æœæ›´å®‰å…¨ã€‚ä½†å®é™…ä¸Šï¼Œè¿™æ ·åšå¹¶æ²¡æœ‰ä»€ä¹ˆå¥½å¤„ã€‚å®ƒåªä¼šé€ æˆäº’æ“ä½œæ€§é—®é¢˜ï¼Œæœ‰æ—¶ç”šè‡³ä¼šé™ä½å“ˆå¸Œçš„å®‰å…¨æ€§ã€‚æ°¸è¿œä¸è¦è¯•å›¾å‘æ˜ä½ è‡ªå·±çš„å¯†ç ï¼Œæ€»æ˜¯ä½¿ç”¨ä¸€ä¸ªç”±ä¸“å®¶è®¾è®¡çš„æ ‡å‡†ã€‚æœ‰äº›äººä¼šè®¤ä¸ºä½¿ç”¨å¤šä¸ªæ•£åˆ—å‡½æ•°ä¼šä½¿è®¡ç®—æ•£åˆ—çš„è¿‡ç¨‹å˜æ…¢ï¼Œæ‰€ä»¥ç ´è§£ä¼šå˜æ…¢ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•å¯ä»¥è®©ç ´è§£è¿‡ç¨‹å˜æ…¢ï¼Œæˆ‘ä»¬ç¨åä¼šçœ‹åˆ°ã€‚ ä¸‹é¢æ˜¯ä¸€äº›æˆ‘åœ¨äº’è”ç½‘è®ºå›ä¸Šçœ‹åˆ°çš„ç³Ÿç³•çš„å¤æ€ªå“ˆå¸Œå‡½æ•°çš„ä¾‹å­ md5(sha1(password)) md5(md5(salt) + md5(password)) sha1(sha1(password)) sha1(str_rot13(password + salt)) md5(sha1(md5(md5(password) + sha1(password)) + md5(password))) ä¸è¦ä½¿ç”¨è¿™äº›ã€‚ æ³¨ï¼šæœ¬èŠ‚å·²è¢«è¯æ˜æ˜¯æœ‰äº‰è®®çš„ã€‚æˆ‘æ”¶åˆ°è¿‡å¾ˆå¤šé‚®ä»¶ï¼Œè®¤ä¸ºå¤æ€ªçš„æ•£åˆ—å‡½æ•°æ˜¯ä»¶å¥½äº‹ï¼Œå› ä¸ºå¦‚æœæ”»å‡»è€…ä¸çŸ¥é“ä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªæ•£åˆ—å‡½æ•°å°±æ›´å¥½äº†ï¼Œæ”»å‡»è€…ä¸ºå¤æ€ªçš„æ•£åˆ—å‡½æ•°é¢„å…ˆè®¡ç®—å½©è™¹è¡¨çš„å¯èƒ½æ€§æ›´å°ï¼Œè®¡ç®—æ•£åˆ—å‡½æ•°çš„æ—¶é—´ä¹Ÿæ›´é•¿ã€‚ æ”»å‡»è€…åœ¨ä¸çŸ¥é“ç®—æ³•çš„æƒ…å†µä¸‹æ— æ³•æ”»å‡»å“ˆå¸Œï¼Œä½†è¯·æ³¨æ„Kerckhoffsçš„åŸç†ï¼Œå³æ”»å‡»è€…é€šå¸¸å¯ä»¥è®¿é—®æºä»£ç ï¼ˆå°¤å…¶æ˜¯å…è´¹æˆ–å¼€æºè½¯ä»¶ï¼‰ï¼Œå¹¶ä¸”ç»™å®šç›®æ ‡ç³»ç»Ÿä¸­çš„ä¸€äº›å¯†ç å“ˆå¸Œå¯¹ï¼Œå¯¹ç®—æ³•è¿›è¡Œåå‘å·¥ç¨‹å¹¶ä¸å›°éš¾ã€‚è®¡ç®—å¤æ€ªçš„æ•£åˆ—å‡½æ•°ç¡®å®éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼Œä½†åªéœ€è¦ä¸€ä¸ªå°çš„å¸¸æ•°å› å­ã€‚æœ€å¥½ä½¿ç”¨ä¸€ä¸ªè®¾è®¡å¾—éå¸¸éš¾ä»¥å¹¶è¡ŒåŒ–çš„è¿­ä»£ç®—æ³•ï¼ˆè¿™äº›å°†åœ¨ä¸‹é¢è®¨è®ºï¼‰ã€‚è€Œä¸”ï¼Œé€‚å½“åœ°å¯¹æ•£åˆ—è¿›è¡Œç›åˆ†å¯ä»¥è§£å†³å½©è™¹è¡¨é—®é¢˜ã€‚ å¦‚æœä½ çœŸçš„æƒ³ä½¿ç”¨ä¸€ä¸ªæ ‡å‡†åŒ–çš„â€œå¤æ€ªâ€æ•£åˆ—å‡½æ•°ï¼Œæ¯”å¦‚HMACï¼Œé‚£å°±æ²¡å…³ç³»äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿™æ ·åšæ˜¯ä¸ºäº†é™ä½å“ˆå¸Œè®¡ç®—çš„é€Ÿåº¦ï¼Œè¯·å…ˆé˜…è¯»ä¸‹é¢å…³äºå¯†é’¥æ‰©å±•(key stretching)çš„éƒ¨åˆ†ã€‚ å°†è¿™äº›å°çš„å¥½å¤„ä¸æ„å¤–å®ç°å®Œå…¨ä¸å®‰å…¨çš„æ•£åˆ—å‡½æ•°çš„é£é™©ä»¥åŠå¤æ€ªçš„æ•£åˆ—æ‰€äº§ç”Ÿçš„äº’æ“ä½œæ€§é—®é¢˜è¿›è¡Œæ¯”è¾ƒã€‚æ˜¾ç„¶ï¼Œæœ€å¥½ä½¿ç”¨æ ‡å‡†çš„ã€ç»è¿‡è‰¯å¥½æµ‹è¯•çš„ç®—æ³•ã€‚ æ•£åˆ—ç¢°æ’ å› ä¸ºæ•£åˆ—å‡½æ•°å°†ä»»æ„æ•°é‡çš„æ•°æ®æ˜ å°„åˆ°å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¿…é¡»æœ‰ä¸€äº›è¾“å…¥æ•£åˆ—åˆ°ç›¸åŒçš„å­—ç¬¦ä¸²ä¸­ã€‚åŠ å¯†æ•£åˆ—å‡½æ•°çš„è®¾è®¡ä½¿è¿™äº›å†²çªéš¾ä»¥æ‰¾åˆ°ã€‚æœ‰æ—¶ï¼Œå¯†ç å­¦å®¶ä¼šå‘ç°å¯¹æ•£åˆ—å‡½æ•°çš„â€œæ”»å‡»â€ï¼Œä»è€Œæ›´å®¹æ˜“æ‰¾åˆ°å†²çªã€‚æœ€è¿‘çš„ä¸€ä¸ªä¾‹å­æ˜¯MD5æ•£åˆ—å‡½æ•°ï¼Œå®é™…ä¸Šå·²ç»æ‰¾åˆ°äº†å®ƒçš„å†²çªã€‚ å°±æ˜¯æœ‰å¯èƒ½å­—ç¬¦ä¸² abc å’Œ bbc ç”Ÿæˆçš„æ•£åˆ—æ˜¯ç›¸åŒçš„ å†²çªæ”»å‡»æ˜¯ä¸€ç§è¿¹è±¡ï¼Œè¡¨æ˜é™¤ç”¨æˆ·å¯†ç ä»¥å¤–çš„å­—ç¬¦ä¸²æ›´æœ‰å¯èƒ½å…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼ã€‚ç„¶è€Œï¼Œå³ä½¿æ˜¯åœ¨MD5è¿™æ ·çš„å¼±å“ˆå¸Œå‡½æ•°ä¸­å‘ç°å†²çªï¼Œä¹Ÿéœ€è¦å¤§é‡ä¸“ç”¨çš„è®¡ç®—èƒ½åŠ›ï¼Œå› æ­¤åœ¨å®è·µä¸­ï¼Œè¿™äº›å†²çªâ€œå¶ç„¶â€å‘ç”Ÿçš„å¯èƒ½æ€§éå¸¸å°ã€‚ä½¿ç”¨MD5å’Œsaltæ•£åˆ—çš„å¯†ç åœ¨æ‰€æœ‰å®é™…ç”¨é€”ä¸­éƒ½æ˜¯å®‰å…¨çš„ï¼Œå°±åƒä½¿ç”¨SHA256å’Œsaltæ•£åˆ—ä¸€æ ·ã€‚ä¸è¿‡ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œæœ€å¥½ä½¿ç”¨æ›´å®‰å…¨çš„æ•£åˆ—å‡½æ•°ï¼Œå¦‚SHA256ã€SHA512ã€RipeMDæˆ–WHIRLPOOLã€‚ å¦‚ä½•æ­£ç¡®çš„æ•£åˆ— æœ¬èŠ‚è¯¦ç»†æè¿°äº†å¯†ç åº”è¯¥å¦‚ä½•æ•£åˆ—ã€‚ç¬¬ä¸€å°èŠ‚æ¶µç›–äº†åŸºæœ¬çš„ä¸€åˆ‡ï¼Œè¿™æ˜¯ç»å¯¹å¿…è¦çš„ã€‚ä¸‹é¢çš„å°èŠ‚å°†è§£é‡Šå¦‚ä½•æ‰©å……åŸºç¡€çŸ¥è¯†ï¼Œä½¿å“ˆå¸Œæ›´éš¾ç ´è§£ã€‚ ç”¨ç›åšæ•£åˆ— è­¦å‘Šï¼šä¸è¦åªé˜…è¯»æœ¬èŠ‚ã€‚æ‚¨ç»å¯¹å¿…é¡»å®ç°ä¸‹ä¸€èŠ‚ä¸­çš„å†…å®¹ï¼šâ€œä½¿å¯†ç ç ´è§£æ›´å›°éš¾ï¼šæ…¢å“ˆå¸Œå‡½æ•°â€ æˆ‘ä»¬å·²ç»çœ‹åˆ°æ¶æ„é»‘å®¢å¦‚ä½•ä½¿ç”¨æŸ¥æ‰¾è¡¨å’Œå½©è™¹è¡¨å¿«é€Ÿç ´è§£æ™®é€šå“ˆå¸Œã€‚æˆ‘ä»¬å·²ç»äº†è§£åˆ°ä½¿ç”¨saltéšæœºæ•£åˆ—æ˜¯é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ä½†æ˜¯å¦‚ä½•ç”Ÿæˆsaltï¼Œä»¥åŠå¦‚ä½•å°†å…¶åº”ç”¨äºå¯†ç ï¼Ÿ Saltåº”è¯¥ä½¿ç”¨åŠ å¯†å®‰å…¨çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆCSPRNGï¼‰ç”Ÿæˆã€‚csprngä¸æ™®é€šçš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨éå¸¸ä¸åŒï¼Œæ¯”å¦‚â€œCâ€è¯­è¨€çš„randï¼ˆï¼‰å‡½æ•°ã€‚é¡¾åæ€ä¹‰ï¼Œcsprngè¢«è®¾è®¡æˆå¯†ç å®‰å…¨çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬æä¾›äº†é«˜åº¦çš„éšæœºæ€§ï¼Œå¹¶ä¸”å®Œå…¨ä¸å¯é¢„æµ‹ã€‚æˆ‘ä»¬ä¸å¸Œæœ›ç›æ˜¯å¯é¢„æµ‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä½¿ç”¨CSPRNGã€‚æ¯ä¸ªè¯­è¨€éƒ½æœ‰å¯¹åº”çš„å‡½æ•°ä¾›ä½ ä½¿ç”¨, ä¾‹å¦‚ python çš„ os.urandom ç­‰ æ¯ä¸ªç”¨æˆ·æ¯ä¸ªå¯†ç çš„saltå¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚æ¯æ¬¡ç”¨æˆ·åˆ›å»ºå¸æˆ·æˆ–æ›´æ”¹å¯†ç æ—¶ï¼Œéƒ½åº”è¯¥ä½¿ç”¨æ–°çš„éšæœºsaltå¯¹å¯†ç è¿›è¡Œå“ˆå¸Œè¿ç®—ã€‚ä¸è¦é‡å¤ä½¿ç”¨ç›ã€‚ç›ä¹Ÿåº”è¯¥è¶³å¤Ÿé•¿, ä»¥ä¿è¯æœ‰è¶³å¤Ÿå¤šçš„ç›ç”¨äºå“ˆå¸ŒåŠ å¯†ã€‚æ ¹æ®ç»éªŒï¼Œä½¿saltè‡³å°‘ä¸å“ˆå¸Œå‡½æ•°çš„è¾“å‡ºä¸€æ ·é•¿ã€‚saltåº”è¯¥ä¸hashä¸€èµ·å­˜å‚¨åœ¨ç”¨æˆ·è´¦æˆ·è¡¨ä¸­ã€‚ ä¿å­˜å¯†ç  ä½¿ç”¨ CSPRNG ç”Ÿæˆè¶³å¤Ÿé•¿çš„éšæœºç› å°†salté¢„å…ˆæ··å…¥å¯†ç ä¸­ï¼Œå¹¶ä½¿ç”¨æ ‡å‡†å¯†ç å“ˆå¸Œå‡½æ•°ï¼ˆå¦‚Argon2ã€bcryptã€scryptæˆ–PBKDF2ï¼‰å¯¹å…¶è¿›è¡Œå“ˆå¸Œè¿ç®—ã€‚ åœ¨ç”¨æˆ·çš„æ•°æ®åº“è®°å½•ä¸­ä¿å­˜saltå’Œhashã€‚ æ ¡éªŒå¯†ç  ä»æ•°æ®åº“ä¸­æ£€ç´¢ç”¨æˆ·çš„saltå’Œhashã€‚ å°†saltæ··å…¥ç”¨æˆ·æäº¤çš„å¯†ç ï¼Œå¹¶ä½¿ç”¨ç›¸åŒçš„å“ˆå¸Œå‡½æ•°å¯¹å…¶è¿›è¡Œå“ˆå¸Œè¿ç®—ã€‚ å°†ç»™å®šå¯†ç çš„å“ˆå¸Œå€¼ä¸æ•°æ®åº“ä¸­çš„å“ˆå¸Œå€¼è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœåŒ¹é…ï¼Œåˆ™å¯†ç æ­£ç¡®ã€‚å¦åˆ™ï¼Œå¯†ç ä¸æ­£ç¡®ã€‚ åœ¨ Web åº”ç”¨ç¨‹åºä¸­ï¼Œå§‹ç»ˆåœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œæ•£åˆ— å¦‚æœæ‚¨æ­£åœ¨ç¼–å†™ä¸€ä¸ªwebåº”ç”¨ç¨‹åºï¼Œæ‚¨å¯èƒ½æƒ³çŸ¥é“åœ¨å“ªé‡Œæ•£åˆ—ã€‚å¯†ç åº”è¯¥åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­ç”¨JavaScriptæ•£åˆ—ï¼Œè¿˜æ˜¯åº”è¯¥å‘é€å°†æ˜æ–‡å¯†ç å‘é€åˆ°æœåŠ¡å™¨å†è¿›è¡Œæ•£åˆ—å‘¢? å³ä½¿ç”¨JavaScriptæ•£åˆ—ç”¨æˆ·å¯†ç ï¼Œä¹Ÿå¿…é¡»åœ¨æœåŠ¡å™¨ä¸Šæ•£åˆ—ã€‚è€ƒè™‘ä¸€ä¸ªç½‘ç«™ï¼Œå®ƒåœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­æ•£åˆ—ç”¨æˆ·å¯†ç ï¼Œè€Œä¸åœ¨æœåŠ¡å™¨ä¸Šæ•£åˆ—ã€‚è‹¥è¦éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œæ­¤ç½‘ç«™å°†æ¥å—æ¥è‡ªæµè§ˆå™¨çš„å“ˆå¸Œå€¼ï¼Œå¹¶æ£€æŸ¥è¯¥å“ˆå¸Œå€¼æ˜¯å¦ä¸æ•°æ®åº“ä¸­çš„å“ˆå¸Œå€¼å®Œå…¨åŒ¹é…ã€‚è¿™ä¼¼ä¹æ¯”åœ¨æœåŠ¡å™¨ä¸Šæ•£åˆ—æ›´å®‰å…¨ï¼Œå› ä¸ºç”¨æˆ·çš„å¯†ç ä»æœªå‘é€åˆ°æœåŠ¡å™¨ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚ é—®é¢˜æ˜¯å®¢æˆ·ç«¯çš„å“ˆå¸Œå€¼é€»è¾‘ä¸Šå˜æˆäº†ç”¨æˆ·çš„å¯†ç ã€‚ç”¨æˆ·éœ€è¦åšçš„åªæ˜¯å‘Šè¯‰æœåŠ¡å™¨ä»–ä»¬å¯†ç çš„æ•£åˆ—ã€‚å¦‚æœä¸€ä¸ªåäººå¾—åˆ°äº†ä¸€ä¸ªç”¨æˆ·çš„æ•£åˆ—ï¼Œä»–ä»¬å¯ä»¥ç”¨å®ƒæ¥éªŒè¯æœåŠ¡å™¨ï¼Œè€Œä¸çŸ¥é“ç”¨æˆ·çš„å¯†ç ï¼å› æ­¤ï¼Œå¦‚æœåäººä¸çŸ¥ä½•æ•…ä»è¿™ä¸ªå‡æƒ³çš„ç½‘ç«™çªƒå–äº†å“ˆå¸Œæ•°æ®åº“ï¼Œä»–ä»¬å°±å¯ä»¥ç«‹å³è®¿é—®æ¯ä¸ªäººçš„å¸æˆ·ï¼Œè€Œä¸å¿…çŒœæµ‹ä»»ä½•å¯†ç ã€‚ è¿™å¹¶ä¸æ˜¯è¯´ä½ ä¸åº”è¯¥åœ¨æµè§ˆå™¨ä¸­æ•£åˆ—ï¼Œä½†å¦‚æœä½ è¿™æ ·åšäº†ï¼Œä½ ç»å¯¹ä¹Ÿå¿…é¡»åœ¨æœåŠ¡å™¨ä¸Šæ•£åˆ—ã€‚åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œæ•£åˆ—å½“ç„¶æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œä½†åœ¨å®ç°æ—¶è¯·è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š å®¢æˆ·ç«¯å¯†ç å“ˆå¸Œä¸èƒ½æ›¿ä»£HTTPSï¼ˆSSL/TLSï¼‰ã€‚å¦‚æœæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ä¸å®‰å…¨ï¼Œä¸­é—´äººå¯ä»¥åœ¨ä¸‹è½½JavaScriptä»£ç æ—¶ä¿®æ”¹å®ƒï¼Œä»¥åˆ é™¤æ•£åˆ—åŠŸèƒ½å¹¶è·å–ç”¨æˆ·çš„å¯†ç ã€‚ æœ‰äº›webæµè§ˆå™¨ä¸æ”¯æŒJavaScriptï¼Œæœ‰äº›ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­ç¦ç”¨JavaScriptã€‚å› æ­¤ï¼Œä¸ºäº†è·å¾—æœ€å¤§çš„å…¼å®¹æ€§ï¼Œä½ çš„åº”ç”¨ç¨‹åºåº”è¯¥æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒJavaScriptï¼Œå¦‚æœä¸æ”¯æŒï¼Œå°±åœ¨æœåŠ¡å™¨ä¸Šæ¨¡æ‹Ÿå®¢æˆ·ç«¯æ•£åˆ—ã€‚ ä½ ä¹Ÿéœ€è¦åœ¨å®¢æˆ·ç«¯æ•£åˆ—çš„è¿‡ç¨‹ä¸­ä¸­åŠ ç›ã€‚æ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆæ˜¯è®©å®¢æˆ·ç«¯è„šæœ¬å‘æœåŠ¡å™¨è¯·æ±‚ç”¨æˆ·çš„saltã€‚ä¸è¦è¿™æ ·åšï¼Œå› ä¸ºå®ƒè®©æ”»å‡»è€…åœ¨ä¸çŸ¥é“å¯†ç çš„æƒ…å†µä¸‹æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦æœ‰æ•ˆã€‚ç”±äºæ‚¨ä¹Ÿåœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œæ•£åˆ—å’ŒåŠ ç›ï¼ˆä½¿ç”¨ä¸€ä¸ªåˆæ ¼çš„saltï¼‰ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç”¨æˆ·åï¼ˆæˆ–ç”µå­é‚®ä»¶ï¼‰ä¸ç‰¹å®šäºç«™ç‚¹çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚åŸŸåï¼‰è¿æ¥ä½œä¸ºå®¢æˆ·ç«¯salt(è¿™ä¸ªå®¢æˆ·ç«¯saltå¹¶ä¸æ˜¯æœ€ç»ˆçš„salt, å®¢æˆ·ç«¯ç”Ÿæˆçš„åŠ å¯†å¯†ç ä¹Ÿä¸æ˜¯æœ€ç»ˆçš„å¯†ç , åªæ˜¯ä¸ºäº†å°†æ˜æ–‡å¯†ç åŠ å¯†è€Œé˜²æ­¢ä¸­é—´äººæ”»å‡», å¹¶ä¸”,å½“é»‘å®¢æ‹¿åˆ°äº†å®¢æˆ·ç«¯åŠ å¯†åçš„å¯†ç , ä»–ä¹Ÿèƒ½é€šè¿‡è¯·æ±‚ç™»å½•æ¥å£æ¨¡æ‹Ÿå®¢æˆ·ç«¯å·²ç»åŠ å¯†å¯†ç ç„¶åç™»å½•çš„æƒ…å†µ, æ­¤æ—¶åˆ™ä¸å®¢æˆ·ç«¯ä¸åŠ å¯†çš„æ•ˆæœä¸€è‡´)ã€‚ ä½¿å¾—å¯†ç ç ´è§£æ›´éš¾: ç¼“æ…¢çš„æ•£åˆ—å‡½æ•° Saltç¡®ä¿æ”»å‡»è€…ä¸èƒ½ä½¿ç”¨ä¸“é—¨çš„æ”»å‡»ï¼Œå¦‚æŸ¥æ‰¾è¡¨å’Œå½©è™¹è¡¨æ¥å¿«é€Ÿç ´è§£å¤§é‡æ•£åˆ—é›†åˆï¼Œä½†å®ƒä¸èƒ½é˜»æ­¢æ”»å‡»è€…å•ç‹¬å¯¹æ¯ä¸ªæ•£åˆ—è¿è¡Œå­—å…¸æˆ–æš´åŠ›æ”»å‡»ã€‚é«˜ç«¯å›¾å½¢å¡ï¼ˆGPUï¼‰å’Œå®šåˆ¶ç¡¬ä»¶æ¯ç§’å¯ä»¥è®¡ç®—æ•°åäº¿ä¸ªå“ˆå¸Œï¼Œå› æ­¤è¿™äº›æ”»å‡»ä»ç„¶éå¸¸æœ‰æ•ˆã€‚ä¸ºäº†é™ä½è¿™äº›æ”»å‡»çš„æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§ç§°ä¸ºå¯†é’¥æ‰©å±•(key stretching)çš„æŠ€æœ¯ã€‚ å…¶æƒ³æ³•æ˜¯ä½¿å“ˆå¸Œå‡½æ•°éå¸¸æ…¢ï¼Œå› æ­¤å³ä½¿ä½¿ç”¨å¿«é€Ÿçš„GPUæˆ–å®šåˆ¶ç¡¬ä»¶ï¼Œå­—å…¸å’Œæš´åŠ›æ”»å‡»ä¹Ÿå¾ˆæ…¢ï¼Œä»è€Œè®©æ”»å‡»è€…æ”¾å¼ƒæˆ–è€…å¤±è´¥ã€‚ç›®æ ‡æ˜¯ä½¿æ•£åˆ—å‡½æ•°è¶³å¤Ÿæ…¢ä»¥é˜»æ­¢æ”»å‡»ï¼Œä½†ä»ç„¶è¶³å¤Ÿå¿«ä»¥é¿å…ç»™ç”¨æˆ·é€ æˆæ˜æ˜¾çš„å»¶è¿Ÿã€‚ å¯†é’¥æ‰©å±•æ˜¯ä½¿ç”¨ä¸€ç§ç‰¹æ®Šç±»å‹çš„CPUå¯†é›†å‹å“ˆå¸Œå‡½æ•°å®ç°çš„ã€‚ä¸è¦è¯•å›¾åˆ›é€ ä½ è‡ªå·±çš„åŠ å¯†å‡½æ•°, ç®€å•åœ°å¯¹å¯†ç çš„æ•£åˆ—è¿›è¡Œè¿­ä»£æ•£åˆ—æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨ç¡¬ä»¶ä¸­å¹¶è¡ŒåŒ–ï¼Œå¹¶ä¸”å¯ä»¥åƒæ™®é€šæ•£åˆ—ä¸€æ ·å¿«é€Ÿæ‰§è¡Œã€‚ä½¿ç”¨æ ‡å‡†ç®—æ³•ï¼Œå¦‚PBKDF2æˆ–bcryptã€‚ è¿™äº›ç®—æ³•ä»¥å®‰å…¨å› å­æˆ–è¿­ä»£è®¡æ•°ä½œä¸ºå‚æ•°ã€‚æ­¤å€¼ç¡®å®šå“ˆå¸Œå‡½æ•°çš„é€Ÿåº¦ã€‚å¯¹äºæ¡Œé¢è½¯ä»¶æˆ–æ™ºèƒ½æ‰‹æœºåº”ç”¨ç¨‹åºï¼Œé€‰æ‹©æ­¤å‚æ•°çš„æœ€ä½³æ–¹æ³•æ˜¯åœ¨è®¾å¤‡ä¸Šè¿è¡Œä¸€ä¸ªç®€çŸ­çš„åŸºå‡†æµ‹è¯•ï¼Œä»¥æ‰¾åˆ°è®¡ç®—å“ˆå¸Œå€¼çš„è€—æ—¶çº¦åŠç§’çš„å‚æ•°ã€‚è¿™æ ·ï¼Œæ‚¨çš„ç¨‹åºå°±å¯ä»¥åœ¨ä¸å½±å“ç”¨æˆ·ä½“éªŒçš„æƒ…å†µä¸‹å°½å¯èƒ½å®‰å…¨ã€‚ å¦‚æœæ‚¨åœ¨webåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å¯†é’¥æ‰©å±•å“ˆå¸Œï¼Œè¯·æ³¨æ„æ‚¨å°†éœ€è¦é¢å¤–çš„è®¡ç®—èµ„æºæ¥å¤„ç†å¤§é‡èº«ä»½éªŒè¯è¯·æ±‚ï¼Œå¹¶ä¸”å¯†é’¥æ‰©å±•å¯èƒ½ä¼šä½¿æ‚¨çš„ç½‘ç«™æ›´å®¹æ˜“å—åˆ°æ‹’ç»æœåŠ¡ï¼ˆDoSï¼‰æ”»å‡»ã€‚æˆ‘ä»ç„¶å»ºè®®ä½¿ç”¨å¯†é’¥æ‰©å±•ï¼Œä½†æ˜¯è¿­ä»£æ¬¡æ•°è¦å°‘ä¸€äº›ã€‚æ‚¨åº”è¯¥æ ¹æ®è®¡ç®—èµ„æºå’Œé¢„æœŸçš„æœ€å¤§èº«ä»½éªŒè¯è¯·æ±‚é€Ÿç‡æ¥è®¾ç½®è¿­ä»£æ¬¡æ•°ã€‚é€šè¿‡è®©ç”¨æˆ·åœ¨æ¯æ¬¡ç™»å½•æ—¶è¾“å…¥éªŒè¯ç ï¼Œå¯ä»¥æ¶ˆé™¤DoSå¨èƒã€‚ç³»ç»Ÿåœ¨è®¾è®¡æ—¶è¦å°†è¿­ä»£æ¬¡æ•°è®¾ç½®ä¸ºå¯é…ç½®çš„ï¼Œä»¥ä¾¿å°†æ¥å¯ä»¥å¢åŠ æˆ–å‡å°‘è¿­ä»£æ¬¡æ•°ã€‚ å¦‚æœæ‚¨æ‹…å¿ƒè®¡ç®—è´Ÿæ‹…ï¼Œä½†ä»å¸Œæœ›åœ¨webåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å¯†é’¥æ‰©å±•ï¼Œè¯·è€ƒè™‘ä½¿ç”¨JavaScriptåœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­è¿è¡Œå¯†é’¥æ‰©å±•ç®—æ³•ã€‚Stanford Javascript Crypto LibraryåŠ å¯†åº“åŒ…æ‹¬PBKDF2ã€‚è¿­ä»£æ¬¡æ•°åº”è¯¥è®¾ç½®å¾—è¶³å¤Ÿä½ï¼Œè¿™æ ·ç³»ç»Ÿå°±å¯ä»¥åœ¨ç§»åŠ¨è®¾å¤‡ç­‰é€Ÿåº¦è¾ƒæ…¢çš„å®¢æˆ·ç«¯ä¸Šä½¿ç”¨ï¼Œå¦‚æœç”¨æˆ·çš„æµè§ˆå™¨ä¸æ”¯æŒJavaScriptï¼Œé‚£ä¹ˆç³»ç»Ÿåº”è¯¥è¿”å›åˆ°æœåŠ¡å™¨ç«¯æ¥æ¨¡æ‹Ÿå®¢æˆ·ç«¯è®¡ç®—ã€‚å®¢æˆ·ç«¯å¯†é’¥æ‰©å±•å¹¶ä¸èƒ½æ¶ˆé™¤æœåŠ¡å™¨ç«¯æ•£åˆ—çš„éœ€è¦ã€‚ä½ å¿…é¡»å¯¹å®¢æˆ·ç«¯ä¼ å›æ¥çš„å“ˆå¸Œå€¼å†æ¬¡è¿›è¡Œå“ˆå¸ŒåŠ å¯†, ä¹Ÿå°±æ˜¯è¯´å®¢æˆ·ç«¯ç”Ÿæˆçš„åŠ å¯†å¯†ç å¹¶ä¸æ˜¯æœ€ç»ˆçš„åŠ å¯†å¯†ç , ä»¥æ­¤æ¥å¢åŠ å®‰å…¨æ€§, å› ä¸ºå‰ç«¯çš„ä»£ç æ˜¯é€æ˜çš„, ä¸èƒ½å°†å®Œæ•´çš„ç®—æ³•æ”¾ç½®åœ¨å‰ç«¯ ä¸å¯èƒ½ç ´è§£çš„å“ˆå¸Œ: å¯†é’¥å“ˆå¸Œå’Œå¯†ç å“ˆå¸Œè®¾å¤‡ åªè¦æ”»å‡»è€…å¯ä»¥ä½¿ç”¨å“ˆå¸Œæ¥æ£€æŸ¥å¯†ç çŒœæµ‹æ˜¯å¦æ­£ç¡®ï¼Œä»–ä»¬å°±å¯ä»¥å¯¹å“ˆå¸Œè¿è¡Œå­—å…¸æˆ–æš´åŠ›æ”»å‡»ã€‚ä¸‹ä¸€æ­¥æ˜¯å°†å¯†é’¥æ·»åŠ åˆ°å“ˆå¸Œä¸­ï¼Œè¿™æ ·åªæœ‰çŸ¥é“å¯†é’¥çš„äººæ‰èƒ½ä½¿ç”¨å“ˆå¸Œæ¥éªŒè¯å¯†ç ã€‚è¿™å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å®ç°ã€‚å¯ä»¥ä½¿ç”¨ç±»ä¼¼AESçš„ç®—æ³•å¯¹æ•£åˆ—è¿›è¡ŒåŠ å¯†ï¼Œæˆ–è€…ä½¿ç”¨ç±»ä¼¼HMACçš„å¯†é’¥æ•£åˆ—ç®—æ³•å°†å¯†é’¥åŒ…æ‹¬åœ¨æ•£åˆ—ä¸­ã€‚ è¿™å¹¶ä¸åƒå¬èµ·æ¥é‚£ä¹ˆå®¹æ˜“ã€‚å¯†é’¥å¿…é¡»å¯¹æ”»å‡»è€…ä¿å¯†ï¼Œå³ä½¿åœ¨å‡ºç°æ¼æ´çš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¦‚æœæ”»å‡»è€…è·å¾—å¯¹ç³»ç»Ÿçš„å®Œå…¨è®¿é—®æƒé™ï¼Œåˆ™æ— è®ºå¯†é’¥å­˜å‚¨åœ¨ä½•å¤„ï¼Œä»–ä»¬éƒ½å¯ä»¥çªƒå–å¯†é’¥ã€‚å¯†é’¥å¿…é¡»å­˜å‚¨åœ¨å¤–éƒ¨ç³»ç»Ÿä¸­ï¼Œä¾‹å¦‚ä¸“é—¨ç”¨äºå¯†ç éªŒè¯çš„ç‰©ç†ä¸Šç‹¬ç«‹çš„æœåŠ¡å™¨ï¼Œæˆ–è€…è¿æ¥åˆ°æœåŠ¡å™¨çš„ç‰¹æ®Šç¡¬ä»¶è®¾å¤‡ï¼Œä¾‹å¦‚YubiHSMã€‚ å¯¹äºä»»ä½•å¤§è§„æ¨¡ï¼ˆè¶…è¿‡10ä¸‡ä¸ªç”¨æˆ·ï¼‰çš„æœåŠ¡ï¼Œæˆ‘å¼ºçƒˆæ¨èè¿™ç§æ–¹æ³•ã€‚æˆ‘è®¤ä¸ºæœ‰å¿…è¦ä¸ºä»»ä½•æ‰˜ç®¡è¶…è¿‡100ä¸‡ä¸ªç”¨æˆ·å¸æˆ·ä½¿ç”¨è¯¥æ–¹æ³•ã€‚ å¦‚æœæ‚¨è´Ÿæ‹…ä¸èµ·å¤šä¸ªä¸“ç”¨æœåŠ¡å™¨æˆ–ç‰¹æ®Šç¡¬ä»¶è®¾å¤‡ï¼Œæ‚¨ä»ç„¶å¯ä»¥åœ¨æ ‡å‡†webæœåŠ¡å™¨ä¸Šè·å¾—å¯†é’¥å“ˆå¸Œçš„ä¸€äº›å¥½å¤„ã€‚å¤§å¤šæ•°æ•°æ®åº“éƒ½æ˜¯é€šè¿‡SQLæ³¨å…¥æ”»å‡»è¢«ç ´åçš„ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒSQLæ³¨å…¥æ”»å‡»ä¸å…è®¸æ”»å‡»è€…è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚æœSQL serverå…·æœ‰æ­¤åŠŸèƒ½ï¼Œåˆ™ç¦ç”¨å¯¹æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„è®¿é—®ï¼‰ã€‚å¦‚æœç”Ÿæˆä¸€ä¸ªéšæœºå¯†é’¥å¹¶å°†å…¶å­˜å‚¨åœ¨æ— æ³•ä»webè®¿é—®çš„æ–‡ä»¶ä¸­ï¼Œå¹¶å°†å…¶åŒ…å«åˆ°saltå“ˆå¸Œä¸­ï¼Œé‚£ä¹ˆå¦‚æœä½¿ç”¨ç®€å•çš„SQLæ³¨å…¥æ”»å‡»ç ´åæ•°æ®åº“ï¼Œå“ˆå¸Œå°±ä¸ä¼šå—åˆ°æ”»å‡»ã€‚ä¸è¦å°†å¯†é’¥ç¡¬ç¼–ç åˆ°æºä»£ç ä¸­ï¼Œè€Œæ˜¯åœ¨å®‰è£…åº”ç”¨ç¨‹åºæ—¶éšæœºç”Ÿæˆå¯†é’¥ã€‚è¿™ä¸å¦‚ä½¿ç”¨å•ç‹¬çš„ç³»ç»Ÿè¿›è¡Œå¯†ç çš„ç®¡ç†å®‰å…¨ï¼Œå› ä¸ºå¦‚æœwebåº”ç”¨ç¨‹åºä¸­å­˜åœ¨SQLæ³¨å…¥æ¼æ´ï¼Œæ”»å‡»è€…å¯èƒ½ä¼šä½¿ç”¨å…¶ä»–ç±»å‹ï¼ˆå¦‚æœ¬åœ°æ–‡ä»¶åŒ…å«ï¼‰æ¥è¯»å–å¯†é’¥æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œæ€»æ¯”ä»€ä¹ˆéƒ½æ²¡æœ‰å¼ºã€‚ è¯·æ³¨æ„ï¼Œå¯†é’¥å“ˆå¸Œå¹¶ä¸èƒ½æ¶ˆé™¤å¯¹ç›çš„éœ€è¦ã€‚èªæ˜çš„æ”»å‡»è€…æœ€ç»ˆä¼šæ‰¾åˆ°ç ´è§£å¯†é’¥çš„æ–¹æ³•ï¼Œå› æ­¤å¯†ç å“ˆå¸Œä¾ç„¶éœ€è¦åŠ ç›å’Œå¯†é’¥æ‰©å±•, è¿™æ˜¯å¾ˆé‡è¦çš„ã€‚ å…¶ä»–å®‰å…¨æªæ–½ å¯†ç å“ˆå¸Œåœ¨å‘ç”Ÿå®‰å…¨æ¼æ´æ—¶ä¿æŠ¤å¯†ç ã€‚å®ƒå¹¶ä¸èƒ½ä½¿æ•´ä¸ªåº”ç”¨ç¨‹åºæ›´åŠ å®‰å…¨ã€‚ä¸ºäº†é˜²æ­¢å¯†ç æ•£åˆ—ï¼ˆå’Œå…¶ä»–ç”¨æˆ·æ•°æ®ï¼‰åœ¨ç¬¬ä¸€æ—¶é—´è¢«çªƒå–ï¼Œè¿˜å¿…é¡»åšæ›´å¤šçš„å·¥ä½œã€‚ å³ä½¿æ˜¯æœ‰ç»éªŒçš„å¼€å‘äººå‘˜ä¹Ÿå¿…é¡»æ¥å—å®‰å…¨æ•™è‚²ï¼Œæ‰èƒ½ç¼–å†™å®‰å…¨çš„åº”ç”¨ç¨‹åºã€‚äº†è§£webåº”ç”¨ç¨‹åºæ¼æ´çš„ä¸€ä¸ªé‡è¦èµ„æºæ˜¯openwebåº”ç”¨ç¨‹åºå®‰å…¨é¡¹ç›® OWASP ã€‚ä¸€ä¸ªå¾ˆå¥½çš„ä»‹ç»æ˜¯ OWASPåå¤§æ¼æ´åˆ—è¡¨ã€‚é™¤éæ‚¨äº†è§£åˆ—è¡¨ä¸­çš„æ‰€æœ‰æ¼æ´ï¼Œå¦åˆ™ä¸è¦å°è¯•ç¼–å†™å¤„ç†æ•æ„Ÿæ•°æ®çš„webåº”ç”¨ç¨‹åºã€‚é›‡ä¸»æœ‰è´£ä»»ç¡®ä¿æ‰€æœ‰å¼€å‘äººå‘˜éƒ½æ¥å—è¿‡å®‰å…¨åº”ç”¨ç¨‹åºå¼€å‘æ–¹é¢çš„å……åˆ†åŸ¹è®­ã€‚ å¯¹æ‚¨çš„åº”ç”¨ç¨‹åºè¿›è¡Œç¬¬ä¸‰æ–¹\"æ¸—é€æµ‹è¯•\"æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚å³ä½¿æ˜¯æœ€å¥½çš„ç¨‹åºå‘˜ä¹Ÿä¼šçŠ¯é”™ï¼Œå› æ­¤è®©å®‰å…¨ä¸“å®¶æ£€æŸ¥ä»£ç ä¸­çš„æ½œåœ¨æ¼æ´æ€»æ˜¯æœ‰æ„ä¹‰çš„ã€‚æ‰¾ä¸€ä¸ªå€¼å¾—ä¿¡èµ–çš„ç»„ç»‡ï¼ˆæˆ–é›‡ä½£å‘˜å·¥ï¼‰å®šæœŸæ£€æŸ¥æ‚¨çš„ä»£ç ã€‚å®‰å…¨å®¡æŸ¥è¿‡ç¨‹åº”è¯¥åœ¨åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸå¼€å§‹ï¼Œå¹¶åœ¨æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸­æŒç»­è¿›è¡Œã€‚ åŒæ ·é‡è¦çš„æ˜¯è¦ç›‘æµ‹ä½ çš„ç½‘ç«™ï¼Œä»¥å‘ç°å…¥ä¾µè¡Œä¸ºã€‚æˆ‘å»ºè®®è‡³å°‘é›‡ä½£ä¸€ä¸ªå…¨èŒå·¥ä½œæ˜¯æ£€æµ‹å’Œå¤„ç†å®‰å…¨æ¼æ´çš„äººã€‚å¦‚æœä¸€ä¸ªæ¼æ´æœªè¢«å‘ç°ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡ä½ çš„ç½‘ç«™åˆ©ç”¨æ¶æ„è½¯ä»¶æ„ŸæŸ“è®¿é—®è€…ï¼Œæ‰€ä»¥æ£€æµ‹æ¼æ´å¹¶åŠæ—¶ä½œå‡ºååº”æ˜¯éå¸¸é‡è¦çš„ã€‚ å¸¸è§é—®é¢˜ æˆ‘åº”è¯¥ä½¿ç”¨ä»€ä¹ˆæ•£åˆ—ç®—æ³•ï¼Ÿ ä½¿ç”¨ ç²¾å¿ƒè®¾è®¡å¹¶ç»è¿‡å¤§é‡æµ‹è¯•çš„å¯†é’¥æ‰©å±•ç®—æ³•æ¯”å¦‚ PBKDF2, Bcrypt, Scrypt å¾ˆå¥½çš„å¼€æºé¡¹ç›®æ¯”å¦‚ Portable PHP password hashing framework PBKDF2åœ¨å„ä¸ªè¯­è¨€çš„å®ç° crypt çš„å®‰å…¨ç‰ˆæœ¬ ä¸è¦ä½¿ç”¨ å¿«é€Ÿå¯†ç æ•£åˆ—å‡½æ•°ï¼Œå¦‚ MD5ã€ SHA1ã€ SHA256ã€ SHA512ã€ RipeMDã€ WHIRLPOOLã€ SHA3ç­‰ ä¸å®‰å…¨ç‰ˆæœ¬çš„ crypt ä»»ä½•ä½ è‡ªå·±è®¾è®¡çš„ç®—æ³•ã€‚åªèƒ½ä½¿ç”¨å…¬å…±é¢†åŸŸçš„æŠ€æœ¯ï¼Œå¹¶ä¸”ç»è¿‡ç»éªŒä¸°å¯Œçš„å¯†ç å­¦å®¶çš„è‰¯å¥½æµ‹è¯•ã€‚ å½“ç”¨æˆ·å¿˜è®°å¯†ç æ—¶ï¼Œæˆ‘åº”è¯¥å¦‚ä½•å…è®¸ä»–ä»¬é‡ç½®å¯†ç ï¼Ÿ æˆ‘ä¸ªäººè®¤ä¸ºï¼Œç°åœ¨å¹¿æ³›ä½¿ç”¨çš„æ‰€æœ‰å¯†ç é‡ç½®æœºåˆ¶éƒ½æ˜¯ä¸å®‰å…¨çš„ã€‚å¦‚æœä½ æœ‰å¾ˆé«˜çš„å®‰å…¨è¦æ±‚ï¼Œæ¯”å¦‚åŠ å¯†æœåŠ¡ï¼Œä¸è¦è®©ç”¨æˆ·é‡ç½®å¯†ç ã€‚ å¤§å¤šæ•°ç½‘ç«™ä½¿ç”¨å‘å¿˜è®°å¯†ç çš„ç”¨æˆ·å‘é€é‚®ä»¶æ¥éªŒè¯èº«ä»½ã€‚ä¸ºæ­¤ï¼Œç”Ÿæˆä¸€ä¸ªä¸å¸æˆ·ç´§å¯†å…³è”çš„éšæœºä¸€æ¬¡æ€§ä»¤ç‰Œ(Token)ã€‚å°†å…¶åŒ…å«åœ¨å‘é€åˆ°ç”¨æˆ·ç”µå­é‚®ä»¶åœ°å€çš„å¯†ç é‡ç½®é“¾æ¥ä¸­ã€‚å½“ç”¨æˆ·å•å‡»åŒ…å«æœ‰æ•ˆä»¤ç‰Œçš„å¯†ç é‡ç½®é“¾æ¥æ—¶ï¼Œæç¤ºä»–ä»¬è¾“å…¥æ–°å¯†ç ã€‚ç¡®ä¿ä»¤ç‰Œä¸ç”¨æˆ·å¸æˆ·ç´§å¯†ç»‘å®šï¼Œä»¥ä¾¿æ”»å‡»è€…ä¸èƒ½ä½¿ç”¨å‘é€åˆ°è‡ªå·±ç”µå­é‚®ä»¶åœ°å€çš„ä»¤ç‰Œé‡ç½®å…¶ä»–ç”¨æˆ·çš„å¯†ç ã€‚ ä»¤ç‰Œå¿…é¡»è®¾ç½®ä¸ºåœ¨15åˆ†é’Ÿå†…æˆ–ä½¿ç”¨åè¿‡æœŸï¼Œä¸€æ—¦ä½¿ç”¨è¿‡å°±ç«‹å³ä½œåºŸã€‚å½“ç”¨æˆ·ç™»å½•ï¼ˆä»–ä»¬æƒ³èµ·æ¥äº†ä»–ä»¬çš„å¯†ç ï¼‰æˆ–è¯·æ±‚ä¸€ä¸ªæ–°çš„é‡ç½®å¯†ç æ—¶ï¼Œä½¿è¯¥ç”¨æˆ·ä»»ä½•ç°æœ‰çš„å¯†ç ä»¤ç‰Œè¿‡æœŸã€‚å¦‚æœä¸€ä¸ªä»¤ç‰Œæ²¡æœ‰è¿‡æœŸï¼Œå®ƒå¯ä»¥æ°¸è¿œè¢«ç”¨æ¥å…¥ä¾µç”¨æˆ·çš„å¸æˆ·ã€‚ç”µå­é‚®ä»¶ï¼ˆSMTPï¼‰æ˜¯ä¸€ç§çº¯æ–‡æœ¬åè®®ï¼Œäº’è”ç½‘ä¸Šå­˜åœ¨æˆªå–ç”µå­é‚®ä»¶çš„æ¶æ„è·¯ç”±ã€‚ç”¨æˆ·çš„ç”µå­é‚®ä»¶å¸æˆ·ï¼ˆåŒ…æ‹¬é‡ç½®é“¾æ¥ï¼‰å¯èƒ½ä¼šåœ¨å…¶ä¿®æ”¹å¯†ç åå¾ˆé•¿ä¸€æ®µæ—¶é—´å†…è¢«æ³„éœ²å‡ºå»ã€‚è€Œä½¿ä»¤ç‰Œå°½å¿«è¿‡æœŸå¯ä»¥å‡å°‘ç”¨æˆ·å°†ä¿¡æ¯æš´éœ²ç»™æ”»å‡»è€…çš„é£é™©ã€‚ æ”»å‡»è€…å°†èƒ½å¤Ÿä¿®æ”¹ä»¤ç‰Œï¼Œå› æ­¤ä¸è¦åœ¨å…¶ä¸­å­˜å‚¨ç”¨æˆ·å¸æˆ·ä¿¡æ¯æˆ–å¤±æ•ˆæ—¶é—´ã€‚å®ƒä»¬åº”è¯¥æ˜¯ä¸å¯çŒœæµ‹çš„éšæœºäºŒè¿›åˆ¶æ•°æ®ï¼Œä»…ç”¨äºæ ‡è¯†æ•°æ®åº“è¡¨ä¸­çš„æŸæ¡ç”¨æˆ·è®°å½•ã€‚ åƒä¸‡ä¸è¦é€šè¿‡ç”µå­é‚®ä»¶å‘ç”¨æˆ·å‘é€æ–°å¯†ç ã€‚å½“ç”¨æˆ·é‡ç½®å¯†ç æ—¶ï¼Œè¯·è®°ä½é€‰æ‹©ä¸€ä¸ªæ–°çš„éšæœºç›ã€‚ä¸è¦é‡å¤ä½¿ç”¨ä»–ä»¬çš„æ—§ç›ã€‚ å¦‚æœæˆ‘çš„ç”¨æˆ·å¸æˆ·èµ„æ–™åº“è¢«æ³„æ¼/å…¥ä¾µï¼Œæˆ‘åº”è¯¥æ€ä¹ˆåŠï¼Ÿ æ‚¨çš„é¦–è¦ä»»åŠ¡æ˜¯ç¡®å®šç³»ç»Ÿæ˜¯å¦‚ä½•å—åˆ°å±å®³çš„ï¼Œå¹¶ä¿®è¡¥æ”»å‡»è€…ç”¨æ¥è¿›å…¥çš„æ¼æ´ã€‚å¦‚æœä½ æ²¡æœ‰åº”å¯¹æ¼æ´çš„ç»éªŒï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ è˜è¯·ç¬¬ä¸‰æ–¹å®‰å…¨å…¬å¸ã€‚ å¯èƒ½ä¼šæœ‰äººè¯•å›¾æ©ç›–æ¼æ´ï¼Œå¸Œæœ›æ²¡äººæ³¨æ„åˆ°ã€‚ç„¶è€Œï¼Œè¯•å›¾æ©ç›–æ¼æ´ä¼šè®©ä½ å˜å¾—æ›´ç³Ÿï¼Œå› ä¸ºä½ æ²¡æœ‰é€šçŸ¥ç”¨æˆ·å¯†ç å’Œå…¶ä»–ä¸ªäººä¿¡æ¯å¯èƒ½ä¼šè¢«æ³„éœ²ï¼Œè¿™ä¼šè®©ä½ çš„ç”¨æˆ·é¢ä¸´æ›´å¤§çš„é£é™©ã€‚ä½ å¿…é¡»å°½å¿«é€šçŸ¥ä½ çš„ç”¨æˆ·ï¼Œå³ä½¿ä½ è¿˜æ²¡æœ‰å®Œå…¨æ˜ç™½å‘ç”Ÿäº†ä»€ä¹ˆã€‚åœ¨ä½ çš„ç½‘ç«™é¦–é¡µæ”¾ä¸€ä¸ªé€šçŸ¥ï¼Œé“¾æ¥åˆ°ä¸€ä¸ªæœ‰æ›´è¯¦ç»†ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œé€šè¿‡ç”µå­é‚®ä»¶å‘æ¯ä¸ªç”¨æˆ·å‘é€ä¸€ä¸ªé€šçŸ¥ã€‚ å‘ä½ çš„ç”¨æˆ·è§£é‡Šä»–ä»¬çš„å¯†ç æ˜¯å¦‚ä½•è¢«ç›å“ˆå¸Œä¿æŠ¤çš„ï¼Œå³ä½¿ä»–ä»¬è¢«ç›å“ˆå¸Œä¿æŠ¤ï¼Œæ¶æ„é»‘å®¢ä»ç„¶å¯ä»¥å¯¹å“ˆå¸Œè¿è¡Œå­—å…¸å’Œæš´åŠ›æ”»å‡»ã€‚æ¶æ„é»‘å®¢ä¼šä½¿ç”¨ä»–ä»¬æ‰¾åˆ°çš„ä»»ä½•å¯†ç è¯•å›¾ç™»å½•åˆ°å¦ä¸€ä¸ªç½‘ç«™ä¸Šçš„ç”¨æˆ·å¸æˆ·ï¼Œå¸Œæœ›ä»–ä»¬åœ¨ä¸¤ä¸ªç½‘ç«™ä¸Šä½¿ç”¨ç›¸åŒçš„å¯†ç ã€‚å°†æ­¤é£é™©å‘ŠçŸ¥æ‚¨çš„ç”¨æˆ·ï¼Œå¹¶å»ºè®®ä»–ä»¬åœ¨ä½¿ç”¨ç±»ä¼¼å¯†ç çš„ä»»ä½•ç½‘ç«™æˆ–æœåŠ¡ä¸Šæ›´æ”¹å¯†ç ã€‚å¼ºåˆ¶ä»–ä»¬åœ¨ä¸‹æ¬¡ç™»å½•æ—¶æ›´æ”¹æ‚¨æœåŠ¡çš„å¯†ç ã€‚å¤§å¤šæ•°ç”¨æˆ·ä¼šå°è¯•å°†è‡ªå·±çš„å¯†ç â€œæ›´æ”¹â€ä¸ºåŸå§‹å¯†ç ï¼Œä»¥å¿«é€Ÿç»•è¿‡å¼ºåˆ¶æ›´æ”¹ã€‚ä½ éœ€è¦ä½¿ç”¨å½“å‰å¯†ç æ•£åˆ—æ¥æ ¡éªŒæ–°æ—§å¯†ç æ˜¯å¦ç›¸åŒæ¥ç¡®ä¿ä»–ä»¬ä¸èƒ½è¿™æ ·åšã€‚ å¾ˆå¯èƒ½ï¼Œå³ä½¿ä½¿ç”¨ç›å“ˆå¸Œï¼Œæ”»å‡»è€…ä¹Ÿèƒ½å¾ˆå¿«ç ´è§£ä¸€äº›å¼±å¯†ç ã€‚ä¸ºäº†å‡å°‘æ”»å‡»è€…ä½¿ç”¨è¿™äº›å¯†ç çš„æœºä¼šï¼Œåœ¨ç™»å½•æ—¶é™¤äº†å½“å‰å¯†ç ä¹‹å¤–ï¼Œè¿˜åº”è¯¥è¦æ±‚é€šè¿‡ç”µå­é‚®ä»¶è¿›è¡Œèº«ä»½éªŒè¯ï¼Œç›´åˆ°ç”¨æˆ·æ›´æ”¹äº†å¯†ç ã€‚è¯·å‚é˜…å‰é¢çš„é—®é¢˜ï¼Œâ€œå½“ç”¨æˆ·å¿˜è®°å¯†ç æ—¶ï¼Œæˆ‘åº”è¯¥å¦‚ä½•å…è®¸ç”¨æˆ·é‡ç½®å¯†ç ï¼Ÿâ€æœ‰å…³å®ç°ç”µå­é‚®ä»¶éªŒè¯èº«ä»½çš„æç¤ºã€‚ åŒæ—¶å‘Šè¯‰ä½ çš„ç”¨æˆ·ç½‘ç«™ä¸Šå‚¨å­˜äº†ä»€ä¹ˆæ ·çš„ä¸ªäººä¿¡æ¯ã€‚å¦‚æœä½ çš„æ•°æ®åº“åŒ…å«ä¿¡ç”¨å¡å·ç ï¼Œä½ åº”è¯¥æŒ‡ç¤ºä½ çš„ç”¨æˆ·ä»”ç»†æ£€æŸ¥ä»–ä»¬æœ€è¿‘å’Œå°†æ¥çš„è´¦å•ï¼Œå¹¶æ³¨é”€ä»–ä»¬çš„ä¿¡ç”¨å¡ã€‚ æˆ‘çš„å¯†ç æ”¿ç­–åº”è¯¥æ˜¯ä»€ä¹ˆ? æˆ‘åº”è¯¥å¼ºåˆ¶ä½¿ç”¨å¼ºå¯†ç å—ï¼Ÿ å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰ä¸¥æ ¼çš„å®‰å…¨è¦æ±‚ï¼Œé‚£ä¹ˆä¸è¦é™åˆ¶æ‚¨çš„ç”¨æˆ·ã€‚æˆ‘å»ºè®®åœ¨ç”¨æˆ·é”®å…¥å¯†ç æ—¶å‘å…¶æ˜¾ç¤ºæœ‰å…³å¯†ç å¼ºåº¦çš„ä¿¡æ¯ï¼Œè®©ä»–ä»¬å†³å®šå¯†ç çš„å®‰å…¨æ€§ã€‚å¦‚æœæ‚¨æœ‰ç‰¹æ®Šçš„å®‰å…¨éœ€æ±‚ï¼Œè¯·å¼ºåˆ¶æ‰§è¡Œè‡³å°‘12ä¸ªå­—ç¬¦çš„é•¿åº¦ï¼Œå¹¶ä¸”è‡³å°‘éœ€è¦ä¸¤ä¸ªå­—æ¯ã€ä¸¤ä¸ªæ•°å­—å’Œä¸¤ä¸ªç¬¦å·ã€‚ ä¸è¦å¼ºè¿«ç”¨æˆ·æ¯å…­ä¸ªæœˆæ›´æ”¹ä¸€æ¬¡ä»¥ä¸Šçš„å¯†ç ï¼Œå› ä¸ºè¿™æ ·åšä¼šé€ æˆâ€œç”¨æˆ·ç–²åŠ³â€ï¼Œä½¿ç”¨æˆ·ä¸é€‰æ‹©å¤æ‚çš„å¯†ç ã€‚ç›¸åï¼Œæ•™è‚²ç”¨æˆ·åœ¨æ„Ÿåˆ°å¯†ç è¢«æ³„éœ²æ—¶ä¸»åŠ¨æ›´æ”¹å¯†ç ï¼Œå¹¶ä¸”æ°¸è¿œä¸è¦æŠŠå¯†ç å‘Šè¯‰ä»»ä½•äººã€‚å¦‚æœæ˜¯å•†ä¸šç¯å¢ƒï¼Œé¼“åŠ±å‘˜å·¥åˆ©ç”¨å¸¦è–ªæ—¶é—´ç†Ÿè®°å’Œä½¿ç”¨å¯†ç ã€‚ å¦‚æœæ”»å‡»è€…å¯ä»¥è®¿é—®æˆ‘çš„æ•°æ®åº“ï¼Œéš¾é“ä»–ä»¬ä¸èƒ½ç”¨è‡ªå·±çš„æ•£åˆ—å’Œç™»å½•æ¥æ›¿æ¢å¯†ç çš„æ•£åˆ—å—ï¼Ÿ æ˜¯çš„ï¼Œä½†æ˜¯å¦‚æœæœ‰äººå¯ä»¥è®¿é—®ä½ çš„æ•°æ®åº“ï¼Œä»–ä»¬å¯èƒ½å·²ç»å¯ä»¥è®¿é—®ä½ æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰å†…å®¹ï¼Œæ‰€ä»¥ä»–ä»¬ä¸éœ€è¦ç™»å½•åˆ°ä½ çš„å¸æˆ·å°±å¯ä»¥å¾—åˆ°ä»–ä»¬æƒ³è¦çš„ã€‚å¯†ç æ•£åˆ—ï¼ˆåœ¨ç½‘ç«™ä¸­ï¼‰çš„ç›®çš„ä¸æ˜¯ä¿æŠ¤ç½‘ç«™ä¸è¢«ç ´åï¼Œè€Œæ˜¯åœ¨ç¡®å®å‘ç”Ÿå…¥ä¾µæ—¶ä¿æŠ¤æ•°æ®åº“ä¸­çš„å¯†ç ã€‚ é€šè¿‡ä½¿ç”¨ä¸¤ä¸ªå…·æœ‰ä¸åŒæƒé™çš„ç”¨æˆ·è¿æ¥åˆ°æ•°æ®åº“ï¼Œå¯ä»¥é˜²æ­¢å“ˆå¸Œåœ¨SQLæ³¨å…¥æ”»å‡»æœŸé—´è¢«æ›¿æ¢ã€‚ä¸€ä¸ªç”¨äºâ€œåˆ›å»ºå¸æˆ·â€ä»£ç ï¼Œå¦ä¸€ä¸ªç”¨äºâ€œç™»å½•â€ä»£ç ã€‚â€œcreate accountâ€ä»£ç æ“ä½œçš„ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿè¯»å–å’Œå†™å…¥ç”¨æˆ·è¡¨ï¼Œä½†æ˜¯â€œloginâ€ä»£ç ä½¿ç”¨çš„ç”¨æˆ·åº”è¯¥åªèƒ½è¯»å–ã€‚ ä¸ºä»€ä¹ˆæˆ‘å¿…é¡»ä½¿ç”¨åƒ HMAC è¿™æ ·çš„ç‰¹æ®Šç®—æ³•ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä¸èƒ½æŠŠå¯†ç é™„åŠ åˆ°å¯†é’¥ä¸Šå‘¢ï¼Ÿ åƒ MD5ã€ SHA1å’Œ SHA2è¿™æ ·çš„æ•£åˆ—å‡½æ•°ä½¿ç”¨ Merkle-DamgÃ¥rd ç»“æ„ï¼Œè¿™ä½¿å®ƒä»¬å®¹æ˜“å—åˆ°æ‰€è°“çš„é•¿åº¦æ‰©å±•æ”»å‡»(length extension attack)ã€‚è¿™æ„å‘³ç€ç»™å®šä¸€ä¸ª å“ˆå¸Œ h (x) ï¼Œå¯¹äºä»»æ„çš„å­—ç¬¦ä¸² Yï¼Œæ”»å‡»è€…å¯ä»¥è®¡ç®—å‡º h(pad(X)+Y) çš„å€¼ï¼Œè€Œæ— éœ€çŸ¥é“ X çš„å€¼ã€‚å…¶ä¸­ï¼Œ pad(X) æ˜¯å“ˆå¸Œå‡½æ•°çš„å¡«å……å‡½æ•°ã€‚ è¿™æ„å‘³ç€ï¼Œæ”»å‡»è€…ä¸çŸ¥é“å¯†é’¥çš„æƒ…å†µä¸‹ï¼Œä»ç„¶å¯ä»¥æ ¹æ®ç»™å®šçš„å“ˆå¸Œå€¼ H(key+message) è®¡ç®—å‡º H(pad(key+message)+extension) ã€‚å¦‚æœè¯¥å“ˆå¸Œå€¼ç”¨äºèº«ä»½è®¤è¯ï¼Œå¹¶ä¾é å…¶ä¸­çš„å¯†é’¥æ¥é˜²æ­¢æ”»å‡»è€…ç¯¡æ”¹æ¶ˆæ¯ï¼Œè¿™æ–¹æ³•å·²ç»è¡Œä¸é€šã€‚å› ä¸ºæ”»å‡»è€…æ— éœ€çŸ¥é“å¯†é’¥ä¹Ÿèƒ½æ„é€ å‡ºåŒ…å« message+extension çš„ä¸€ä¸ªæœ‰æ•ˆçš„å“ˆå¸Œå€¼ã€‚ ç›®å‰å°šä¸æ¸…æ¥šæ”»å‡»è€…å¦‚ä½•åˆ©ç”¨æ­¤æ”»å‡»æ›´å¿«åœ°ç ´è§£å¯†ç å“ˆå¸Œã€‚ä½†æ˜¯ï¼Œç”±äºå—åˆ°æ”»å‡»ï¼Œä½¿ç”¨æ™®é€šå“ˆå¸Œå‡½æ•°è¿›è¡Œå¯†é’¥å“ˆå¸ŒåŠ å¯†è¢«è®¤ä¸ºæ˜¯ä¸å¥½çš„åšæ³•ã€‚ä¸€ä¸ªèªæ˜çš„å¯†ç å­¦å®¶ä¹Ÿè®¸æœ‰ä¸€å¤©ä¼šæƒ³å‡ºä¸€ä¸ªèªæ˜çš„æ–¹æ³•æ¥ä½¿ç”¨è¿™äº›æ”»å‡»æ¥åŠ å¿«ç ´è§£é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯ä½¿ç”¨HMAC è¾ƒå¥½ã€‚ ç›åº”è¯¥æ”¾åœ¨å¯†ç çš„å‰é¢è¿˜æ˜¯åé¢ï¼Ÿ è¿™ä¸é‡è¦ï¼Œä½†æ˜¯ä¸ºäº†äº’æ“ä½œæ€§ï¼Œé€‰æ‹©ä¸€ä¸ªå¹¶ä¿æŒé£æ ¼ä¸€è‡´å³å¯ã€‚æŠŠç›æ”¾åœ¨å¯†ç ä¹‹å‰ä¼¼ä¹æ›´ä¸ºå¸¸è§ã€‚ éœ€è¦ä¿è¯å¯¹æ¯”å¯†ç æ—¶çš„æ“ä½œæ—¶é—´ç›¸åŒ åŸæ–‡è¿™é‡Œå¾ˆæ™¦æ¶©, ç†è§£äº†ä¸€ä¼šæ‰æ˜ç™½æ˜¯ä»€ä¹ˆæ„æ€ æ ‡é¢˜çš„æ„æ€æ˜¯, å‡è®¾ç”¨æˆ·çš„å¯†ç å“ˆå¸Œæ˜¯ â€˜abcdeâ€™, å½“æœåŠ¡ç«¯æ¥æ”¶åˆ°äº†ç”¨æˆ·æäº¤çš„å¯†ç , å“ˆå¸Œåå‡å¦‚æ˜¯ â€˜adccaâ€™ æˆ–è€…æ˜¯ â€˜121333â€™ æˆ–è€…æ˜¯å…¶ä»–çš„, è¦ä¿è¯åˆ¤æ–­ä»–ä»¬ä¸æ•°æ®åº“ä¸­çš„æ˜¯å¦ä¸€è‡´çš„ä»£ç åœ¨å¤„ç†æ‰€æœ‰å¯†ç æ—¶éƒ½è¦æœ‰ä¸€è‡´çš„å¤„ç†æ—¶é—´ æ¯”è¾ƒå“ˆå¸Œå€¼çš„å‡½æ•°éµå¾ª â€œæ—¶é—´ä¸€è‡´â€ å¯ç¡®ä¿æ”»å‡»è€…æ— æ³•åœ¨ä½¿ç”¨è®¡æ—¶æ”»å‡»çš„åœ¨çº¿ç³»ç»Ÿä¸­æå–å¯†ç çš„å“ˆå¸Œå€¼ï¼Œç„¶åç¦»çº¿ç ´è§£å¯†ç ã€‚ æ£€æŸ¥ä¸¤ä¸ªå­—èŠ‚ï¼ˆå­—ç¬¦ä¸²ï¼‰æ˜¯å¦ç›¸åŒçš„æ ‡å‡†æ–¹æ³•æ˜¯æ¯”è¾ƒç¬¬ä¸€ä¸ªå­—èŠ‚ã€ç¬¬äºŒä¸ªå­—èŠ‚ã€ç¬¬ä¸‰ä¸ªå­—èŠ‚ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¸€æ—¦å‘ç°ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚ä¸ä¸€æ ·ï¼Œå°±çŸ¥é“å®ƒä»¬æ˜¯ä¸åŒçš„ï¼Œå¯ä»¥ç«‹å³è¿”å›falseã€‚å¦‚æœæ‚¨åœ¨ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­éƒ½æ²¡æœ‰æ‰¾åˆ°ä»»ä½•ä¸åŒçš„å­—èŠ‚ï¼Œé‚£ä¹ˆæ‚¨å°±çŸ¥é“å­—ç¬¦ä¸²æ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸”å¯ä»¥è¿”å›ä¸€ä¸ªtrueã€‚è¿™æ„å‘³ç€æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²å¯èƒ½éœ€è¦ä¸åŒçš„æ—¶é—´ï¼Œå…·ä½“å–å†³äºåŒ¹é…çš„å­—ç¬¦ä¸²æ•°é‡ã€‚ ä¾‹å¦‚ï¼Œå¯¹å­—ç¬¦ä¸²â€œxyzabcâ€å’Œâ€œabcxyzâ€è¿›è¡Œæ ‡å‡†æ¯”è¾ƒï¼Œå¯ä»¥ç«‹å³çœ‹åˆ°ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸åŒçš„ï¼Œä¸å¿…æ£€æŸ¥å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†ã€‚å¦ä¸€æ–¹é¢ï¼Œå½“æ¯”è¾ƒå­—ç¬¦ä¸²â€œaaaaaaaabâ€å’Œâ€œaaaaaaaaaazâ€æ—¶ï¼Œæ¯”è¾ƒç®—æ³•åœ¨æ‰«æåˆ° z æ—¶æ‰ä¼šç¡®è®¤è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸ä¸€æ ·çš„, è¿™ä»£è¡¨ä»–å·²ç»æ£€æŸ¥äº†å‰é¢å‡ ä½, æ˜¾è€Œæ˜“è§çš„, ä¸€èˆ¬çš„, æ¯”è¾ƒç®—æ³•åœ¨å¤„ç†è¿™ä¸¤ä¸ªåˆ¤æ–­æ—¶ç”¨æ—¶æ˜¯ä¸ä¸€æ ·çš„, åé¢çš„ä¼šæ¯”å‰é¢çš„å¤„ç†æ…¢ä¸€äº›ã€‚ å‡è®¾æ”»å‡»è€…æƒ³è¦ä¾µå…¥ä¸€ä¸ªåœ¨çº¿ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå°†èº«ä»½éªŒè¯å°è¯•çš„é€Ÿç‡é™åˆ¶ä¸ºæ¯ç§’ä¸€æ¬¡ã€‚å¦å¤–ï¼Œå‡è®¾æ”»å‡»è€…çŸ¥é“å¯†ç æ•£åˆ—çš„æ‰€æœ‰å‚æ•°ï¼ˆsaltã€æ•£åˆ—ç±»å‹ç­‰ï¼‰ï¼Œä½†å¯†ç å’Œæ•£åˆ—åçš„å¯†ç é™¤å¤–ã€‚å¦‚æœæ”»å‡»è€…èƒ½å¤Ÿç²¾ç¡®æµ‹é‡åœ¨çº¿ç³»ç»Ÿå°†çœŸå®å¯†ç çš„æ•£åˆ—å€¼ä¸æ”»å‡»è€…æä¾›çš„å¯†ç çš„æ•£åˆ—å€¼è¿›è¡Œæ¯”è¾ƒæ‰€éœ€çš„æ—¶é—´ï¼Œé‚£ä¹ˆä»–å¯ä»¥ä½¿ç”¨å®šæ—¶æ”»å‡»æå–éƒ¨åˆ†æ•£åˆ—å€¼ï¼Œå¹¶ä½¿ç”¨è„±æœºæ”»å‡»è¿›è¡Œç ´è§£ï¼Œä»è€Œç»•è¿‡ç³»ç»Ÿçš„é€Ÿç‡é™åˆ¶ã€‚ é¦–å…ˆï¼Œæ”»å‡»è€…æ‰¾åˆ°256ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶å“ˆå¸Œå€¼ä»¥æ¯ä¸ªå¯èƒ½çš„å­—èŠ‚å¼€å§‹ã€‚ä»–å°†æ¯ä¸ªå­—ç¬¦ä¸²å‘é€åˆ°åœ¨çº¿ç³»ç»Ÿï¼Œè®°å½•ç³»ç»Ÿå“åº”æ‰€éœ€çš„æ—¶é—´ã€‚è€—æ—¶æœ€é•¿çš„å­—ç¬¦ä¸²å°†æ˜¯å“ˆå¸Œçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸å®é™…å“ˆå¸Œçš„ç¬¬ä¸€ä¸ªå­—èŠ‚åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚æ”»å‡»è€…ç°åœ¨çŸ¥é“ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œå¯ä»¥ä»¥ç±»ä¼¼çš„æ–¹å¼ç»§ç»­æ”»å‡»ç¬¬äºŒä¸ªå­—èŠ‚ï¼Œç„¶åæ”»å‡»ç¬¬ä¸‰ä¸ªå­—èŠ‚ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¸€æ—¦æ”»å‡»è€…å¯¹æ•£åˆ—æœ‰è¶³å¤Ÿçš„äº†è§£ï¼Œä»–å°±å¯ä»¥ä½¿ç”¨è‡ªå·±çš„ç¡¬ä»¶æ¥ç ´è§£å®ƒï¼Œè€Œä¸å—ç³»ç»Ÿçš„é€Ÿç‡é™åˆ¶ã€‚ è¿™é‡ŒæŒ‡çš„æ˜¯: æˆ‘ä¸çŸ¥é“ä½ çš„å¯†ç , ä½†æ˜¯å¯†ç çš„æ¯ä¸€ä½è‚¯å®šæ˜¯åœ¨256ä¸ªå­—ç¬¦ä¸²ä¸­é—´çš„æŸä¸€ä¸ª, å‡å¦‚ä»£ç ä¸éµå¾ª â€˜æ“ä½œæ—¶é—´ç›¸åŒâ€™ åŸåˆ™, é‚£æˆ‘è¯•è¿™256æ¬¡, è€—æ—¶æœ€é•¿çš„é‚£ä¸€ä¸ªè‚¯å®šæ˜¯ç¬¬ä¸€ä½æ˜¯å¯¹çš„, ç„¶åæˆ‘è¯•ç¬¬äºŒä¸ªå­—ç¬¦, ä¸€ç›´åˆ°æˆ‘è¯•å‡ºæ¥å¯†ç æˆ–è€…æˆ‘æ ¹æ®è¯•å‡ºæ¥çš„çŒœæµ‹å‡ºå¯†ç  åœ¨ç½‘ç»œä¸Šè¿è¡Œå®šæ—¶æ”»å‡»ä¼¼ä¹æ˜¯ä¸å¯èƒ½çš„, å› ä¸ºç½‘ç»œæœ¬èº«å…·æœ‰å»¶è¿Ÿã€‚ç„¶è€Œï¼Œæœ‰äºº å·²ç»åšåˆ°äº†ï¼Œå¹¶ä¸”è¢«è¯æ˜æ˜¯åˆ‡å®å¯è¡Œçš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦éµå¾ª â€˜æ“ä½œæ—¶é—´ç›¸åŒâ€™ åŸåˆ™ æ€ä¹ˆç¼–å†™éµå¾ª â€˜æ“ä½œæ—¶é—´ç›¸åŒâ€™ çš„ä»£ç  å‰é¢çš„é—®é¢˜è§£é‡Šäº†ä¸ºä»€ä¹ˆæ“ä½œæ—¶é—´ç›¸åŒæ˜¯å¿…è¦çš„ï¼Œè¿™é‡Œè§£é‡Šäº†ä»£ç å®é™…ä¸Šæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ 1234567private static boolean slowEquals(byte[] a, byte[] b){ int diff = a.length ^ b.length; for(int i = 0; i &lt; a.length &amp;&amp; i &lt; b.length; i++) diff |= a[i] ^ b[i]; return diff == 0;} ä»£ç ä½¿ç”¨ XORâ€œ ^â€è¿ç®—ç¬¦æ¥æ¯”è¾ƒæ•´æ•°æ˜¯å¦ç›¸ç­‰ï¼Œè€Œä¸æ˜¯ä½¿ç”¨â€œ = =â€è¿ç®—ç¬¦ã€‚åŸå› å¦‚ä¸‹ã€‚å½“ä¸”ä»…å½“ä¸¤ä¸ªæ•´æ•°å®Œå…¨ç›¸åŒæ—¶ï¼ŒXORing çš„ç»“æœæ‰ä¸º0ã€‚è¿™æ˜¯å› ä¸º0 XOR 0 = 0,1 XOR 1 = 0,0 XOR 1 = 1,1 XOR 0 = 1ã€‚å¦‚æœæˆ‘ä»¬å¯¹ä¸¤ä¸ªæ•´æ•°ä¸­çš„æ‰€æœ‰ä½éƒ½åº”ç”¨è¿™ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆåªæœ‰å½“æ‰€æœ‰ä½éƒ½åŒ¹é…æ—¶ï¼Œç»“æœæ‰æ˜¯0ã€‚ æ‰€ä»¥, å¦‚ä¸Šé¢ä»£ç æ‰€ç¤º, å…ˆåˆ¤æ–­è¿™ä¸¤ä¸ªå“ˆå¸Œå€¼çš„é•¿åº¦, å¦‚æœå…¶ä¸ä¸€è‡´, diffä¸º 1, ä½†æ˜¯å¹¶ä¸ç›´æ¥é€€å‡º, è€Œæ˜¯åœ¨è¿›è¡Œ for å¾ªç¯, ç»“æŸåç»Ÿä¸€è¿”å›, ä¹Ÿå°±æ˜¯è¯´, å°±ç®—åœ¨ä»£ç ä¸­èƒ½å¤Ÿæå‰åˆ¤æ–­ä¸æ­£ç¡®ä¹Ÿä¸ç«‹åˆ»è¿”å›è€Œæ˜¯åŒæ ·éå†ä¸€éè¾¾åˆ°è€—æ—¶ç›¸åŒçš„æ•ˆæœ æˆ‘ä»¬éœ€è¦ä½¿ç”¨XORè€Œä¸æ˜¯â€œ= =â€è¿ç®—ç¬¦æ¥æ¯”è¾ƒæ•´æ•°çš„åŸå› æ˜¯â€œ= =â€é€šå¸¸è¢«ç¿»è¯‘/ç¼–è¯‘/è§£é‡Šä¸ºä¸€ä¸ªbranchã€‚ä¾‹å¦‚ï¼ŒCä»£ç â€œâ€å¯èƒ½ç¼–è¯‘ä¸ºä»¥ä¸‹x86ç¨‹åºé›†ï¼šdiff &amp;= a == b 12345678MOV EAX, [A]CMP [B], EAXJZ equalJMP doneequal:AND [VALID], 1done:AND [VALID], 0 åˆ†æ”¯ä½¿ä»£ç æ ¹æ®æ•´æ•°çš„ç›¸ç­‰æ€§å’ŒCPUçš„å†…éƒ¨åˆ†æ”¯é¢„æµ‹çŠ¶æ€ä»¥ä¸åŒçš„æ—¶é—´é‡æ‰§è¡Œã€‚ Cä»£ç åº”ç¼–è¯‘ä¸ºä»¥ä¸‹å†…å®¹ï¼Œå…¶æ‰§è¡Œæ—¶é—´ä¸ä¾èµ–äºæ•´æ•°çš„ç›¸ç­‰æ€§ï¼šdiff |= a ^ b 123MOV EAX, [A]XOR EAX, [B]OR [DIFF], EAX ä¸ºä»€ä¹ˆè¦ä¸ºä½ çš„ç½‘ç«™è®¾ç½®å¯†ç åŠ å¯† æ‚¨çš„ç”¨æˆ·æ­£åœ¨æ‚¨çš„ç½‘ç«™ä¸­è¾“å…¥å¯†ç ã€‚è¯æ˜ä»–ä»¬ç›¸ä¿¡ä½ çš„å®‰å…¨ã€‚ å¦‚æœä½ çš„æ•°æ®åº“é­åˆ°é»‘å®¢æ”»å‡»ï¼Œè€Œä½ çš„ç”¨æˆ·å¯†ç æ²¡æœ‰å—åˆ°ä¿æŠ¤ï¼Œé‚£ä¹ˆæ¶æ„é»‘å®¢å°±å¯ä»¥åˆ©ç”¨è¿™äº›å¯†ç å±å®³ä½ åœ¨å…¶ä»–ç½‘ç«™å’ŒæœåŠ¡ä¸Šçš„ç”¨æˆ·å¸æˆ·ï¼ˆå¤§å¤šæ•°äººåœ¨ä»»ä½•åœ°æ–¹éƒ½ä½¿ç”¨ç›¸åŒçš„å¯†ç ï¼‰ã€‚ é£é™©ä¸ä»…ä»…åœ¨äºä½ çš„å®‰å…¨ï¼Œè¿˜åœ¨äºä½ çš„ç”¨æˆ·ã€‚ ä½ è¦å¯¹ä½ çš„ç”¨æˆ·çš„å®‰å…¨è´Ÿè´£","link":"/2021/09/04/protect_user_pwd/"},{"title":"Python -c ä½¿ç”¨","text":"Python -c python -c å‘½ä»¤è¿˜æ˜¯æœ‰ç”¨çš„å“ˆ pythonçš„ -c å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è°ƒç”¨ python ä»£ç , å®é™…ä¸Š -c å°±æ˜¯ command çš„æ„æ€ å®˜æ–¹æ–‡æ¡£ä¸­è§£é‡Šä¸º(èŠ‚é€‰è‡ª: python docs): Execute the Python code in command. command can be one or more statements separated by newlines, with significant leading whitespace as in normal module code. If this option is given, the first element of sys.argv will be \"-c\" and the current directory will be added to the start of sys.path (allowing modules in that directory to be imported as top level modules). Raises an auditing event cpython.run_command with argument command. ç®€å•æ¥è¯´, å°±æ˜¯ python -c å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ python ä»£ç , è·ŸæŠŠä»£ç æ”¾ç½®åœ¨ .py æ–‡ä»¶ä¸­ç„¶åè¿è¡Œè¿™ä¸ªæ–‡ä»¶æ¯”æ— æ˜æ˜¾å·®åˆ«, æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ 1python -c \"print('TTXT')\" éšåæ­£ç¡®è¾“å‡ºäº† TTXT éœ€è¦æ³¨æ„çš„æ˜¯, python -c åå¿…é¡»è·Ÿä¸€ä¸ªå­—ç¬¦ä¸², å› æ­¤å¿…é¡»å¸¦ä¸Šå¼•å·, è€Œä¸”åœ¨è¦æ‰§è¡Œçš„ä»£ç ä¸­ä¹Ÿä¸è¦é‡å , è¿™æ ·ä¼šå¼•å‘é”™è¯¯, è¿™æ˜¯å› ä¸º python è®¤ä¸å‡ºè¯¥åˆ°å“ªé‡Œç»“å°¾, ä¾‹å¦‚ 1python -c \"print(\"TTXT\")\" è¿™æ ·å°±ä¼šæŠ¥é”™, è¾“å‡º 123Traceback (most recent call last): File \"&lt;string&gt;\", line 1, in &lt;module&gt;NameError: name 'TTXT' is not defined æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥ä½¿ç”¨ä¸‰å¼•å·æ¥æ ‡ç¤ºéœ€è¦æ‰§è¡Œçš„ä»£ç , ä¾‹å¦‚ 1python -c '''print(\"TTXT\")''' è¿™æ ·è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä¹Ÿå¯ä»¥æ‰§è¡Œå¤šè¡Œçš„ä»£ç , ä¾‹å¦‚ 1234python -c '''import arrow print(arrow.now())''' è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„, ä¹Ÿå¯ä»¥å®šä¹‰å¹¶è°ƒç”¨å‡½æ•° 12345python -c '''def a(): print(111)a()''' å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥å¯¼å…¥è‡ªå®šä¹‰çš„æ¨¡å—æˆ–è€…å·²ç»å®‰è£…çš„åŒ…çš„ å¦™ç”¨ é‚£ä¹ˆ -c æœ‰ä»€ä¹ˆå¦™ç”¨å‘¢? è¿™ä¸ªè¦å…·ä½“é—®é¢˜å…·ä½“åˆ†æ, æ¯”å¦‚è¯´æˆ‘åœ¨å¼€å‘ä¸­è¦ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ… patool, é¡¹ç›®åœ¨ github, è¿™ä¸ªåŒ…ä½œç”¨æ˜¯æ ¹æ®æ ¼å¼è§£å‹å‹ç¼©æ–‡ä»¶, ä½†æ˜¯åœ¨è°ƒç”¨æ—¶å‘ç”Ÿæ€»æ˜¯ä¼šæŠ¥æ‰¾ä¸åˆ° patoollib æ¨¡å—çš„é”™è¯¯ å®˜æ–¹ç»™çš„ä¾‹å­å¦‚ä¸‹ 12import patoolibpatoolib.extract_archive(\"archive.zip\", outdir=\"/tmp\") æ’æŸ¥å‘ç°, è¯¥æ¨¡å—çš„èµ·å§‹æ–‡ä»¶æœ€ä¸Šé¢å†™å®šäº†pythonçš„åœ°å€, å¯¼è‡´è¿è¡Œæ—¶å¼ºåˆ¶æŒ‡å®šäº†pythonè·¯å¾„è€Œæ²¡æœ‰ä½¿ç”¨è‡ªå·±çš„è™šæ‹Ÿç¯å¢ƒ, å› ä¸º /usr/bin/python æ²¡æœ‰å®‰è£… patool åŒ…æ‰€ä»¥æŠ¥é”™æ‰¾ä¸åˆ° pyæ–‡ä»¶èŠ‚é€‰ 123456789101112131415161718192021222324252627282930313233343536373839404142#!/usr/bin/python# -*- coding: utf-8 -*-# Copyright (C) 2010-2015 Bastian Kleineidam## This program is free software: you can redistribute it and/or modify# it under the terms of the GNU General Public License as published by# the Free Software Foundation, either version 3 of the License, or# (at your option) any later version.## This program is distributed in the hope that it will be useful,# but WITHOUT ANY WARRANTY; without even the implied warranty of# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the# GNU General Public License for more details.## You should have received a copy of the GNU General Public License# along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.\"\"\"patool [global-options] {extract|list|create|diff|search|formats} [sub-command-options] &lt;command-args&gt;\"\"\"def main(): \"\"\"Parse options and execute commands.\"\"\" try: argparser = create_argparser() args = argparser.parse_args() if args.command is None: # Python 3.3.1 under linux allows an empty command somehow argparser.error(\"too few arguments\") # run subcommand function res = globals()[\"run_%s\" % args.command](args) except KeyboardInterrupt: log_error(\"aborted\") res = 1 except Exception: log_internal_error() res = 2 return resif __name__ == '__main__': sys.exit(main()) ä¼¼ä¹åªèƒ½å°†åŒ…çš„æºä»£ç ä¿®æ”¹, å®é™…ä¸Šåªè¦æŠŠç¬¬ä¸€è¡Œåˆ é™¤å³å¯, ä½†æ˜¯è€ƒè™‘åˆ°Dockeréƒ¨ç½², å°±æ²¡æœ‰æ›´å¥½çš„åŠæ³•äº†å—? ä½¿ç”¨ python -c å³å¯å®Œç¾è§£å†³ æˆ‘ä»¬ä½¿ç”¨ python -c åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨æˆ‘ä»¬æŒ‡å®šçš„ python å»æ‰§è¡Œæ¨¡å—, å°±ä¼šä½¿pyæ–‡ä»¶ä¸­æŒ‡å®šçš„ä¸ç”Ÿæ•ˆ, æ‰€ä»¥è°ƒç”¨æ”¹æˆå¦‚ä¸‹å³å¯ 123code = f\"import patoolib; patoolib.extract_archive('{file}', outdir='{unfile}')\"proc = await asyncio.create_subprocess_exec(sys.executable, '-c', code)await proc.wait() è¿™æ ·å°±å¯ä»¥å®Œç¾çš„è§£å†³é—®é¢˜äº†, ä¸ç”¨ä¿®æ”¹åŸæ¥åŒ…çš„ä»£ç ","link":"/2021/09/04/python_-c/"},{"title":"å•ä¾‹çš„å®ç°","text":"å•ä¾‹çš„å®ç° æå‰ç¥å¤§å®¶è¿‡ä¸ªå¥½å¹´ æœ€è¿‘å¿™äºé¡¹ç›®,ä»Šå¤©æŠ½å‡ºç‚¹æ—¶é—´å†™å†™Blog æœ¬ç¯‡å°±å†™Pythonçš„å•ä¾‹å®ç°å§, å°±æ‹¿è‡ªå¸¦çš„æ¨¡å—loggingä¸¾ä¾‹å§ Pythonçš„loggingæ¨¡å—æ˜¯Pythonè‡ªå¸¦çš„æ¨¡å—,å¯æ–¹ä¾¿å¿«æ·çš„è¿›è¡Œæ—¥å¿—çš„è®°å½• python doc loggingæœ¬èº«å°±æ˜¯å•ä¾‹çš„ è¯¥æ¨¡å—æœ¬èº«å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„,ä¸‹é¢çš„æ³¨é‡Šæ‘˜æŠ„è‡³ doc The logging module is intended to be thread-safe without any special work needing to be done by its clients. It achieves this though using threading locks; there is one lock to serialize access to the moduleâ€™s shared data, and each handler also creates a lock to serialize access to its underlying I/O. If you are implementing asynchronous signal handlers using the signal module, you may not be able to use logging from within such handlers. This is because lock implementations in the threading module are not always re-entrant, and so cannot be invoked from such signal handlers. ä¹Ÿå°±æ˜¯è¯´ä½ ä¸éœ€è¦å…³æ³¨å¤šçº¿ç¨‹çš„é—®é¢˜,åªè¦ getLogger() æ—¶æŒ‡å®šå½“å‰ç©ºé—´å³å¯ Loggers have the following attributes and methods. Note that Loggers should NEVER be instantiated directly, but always through the module-level function logging.getLogger(name). Multiple calls to getLogger() with the same name will always return a reference to the same Logger object. The name is potentially a period-separated hierarchical value, like foo.bar.baz (though it could also be just plain foo, for example). Loggers that are further down in the hierarchical list are children of loggers higher up in the list. For example, given a logger with a name of foo, loggers with names of foo.bar, foo.bar.baz, and foo.bam are all descendants of foo. The logger name hierarchy is analogous to the Python package hierarchy, and identical to it if you organise your loggers on a per-module basis using the recommended construction logging.getLogger(name). Thatâ€™s because in a module, name is the moduleâ€™s name in the Python package namespace. æ„æ€æ˜¯ logger.getLogger() æ—¶ä¼ å…¥ç›¸åŒçš„å˜é‡,ä¼šæ°¸è¿œè¿”å›åŒä¸€ä¸ªå¯¹è±¡,æ¯”å¦‚æˆ‘åœ¨å½“å‰è¿›ç¨‹å†…çš„ä»»ä½•åœ°æ–¹, ä½¿ç”¨ log = logger.getLogger(\"work\") ç”Ÿæˆçš„logå¯¹è±¡ä¸€ç›´æ˜¯åŒä¸€ä¸ªå¯¹è±¡,è¿™å°±æ˜¯å•ä¾‹æ¨¡å¼,å®˜æ–¹æ¨èä¼ å…¥ __name__ å› ä¸ºä»–æ˜¯PythonåŒ…å‘½åç©ºé—´ä¸­æ¨¡å—çš„åç§°ã€‚ ä½¿ç”¨loggingæ¥è®²å•ä¾‹çº¯ç²¹æ˜¯ä¸€æ—¶é—´æ²¡æƒ³åˆ°æœ‰å•¥èƒ½ä¸¾ä¾‹å­çš„, æˆ‘ä»¬å°±å…ˆå‡å¦‚ä»–ä¸æ˜¯å•ä¾‹çš„å§ğŸ˜¬ ä¸å†™å•ä¾‹çš„æ™®é€šç±» æ‰‹åŠ¨å†™ä¸€ä¸ªå•ä¾‹å®Œå…¨æ˜¯ä¸ºäº†è®°å¿†å•ä¾‹æ¨¡å¼çš„ä½¿ç”¨,åªæ˜¯ä»¥ logging æ¨¡å—ä¸¾ä¾‹ å…ˆå†™ä¸€ä¸ªæ™®é€šçš„ç±», è¿™ä¸ªç±»å°è£…äº†loggingç±», æ²¡æœ‰è€ƒè™‘å•ä¾‹é—®é¢˜ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859import loggingimport threadingfrom logging import StreamHandler, handlersclass MyLogger: # log æ—¥å¿— def __init__(self, *args, **kwargs): # æ¥æ”¶å‚æ•° self.level = (kwargs[\"level\"] if kwargs.get(\"level\") else \"debug\") # æ—¥å¿—ç­‰çº§ self.format = (kwargs[\"format\"] if kwargs.get( \"format\") else \"%(asctime)s % (levelname)-8s[%(filename)s:%(lineno)d(%(funcName)s)] %(message)s\") # æ ¼å¼åŒ–ç»“æ„ self.console = (kwargs[\"console\"] if kwargs.get(\"console\") else True) # æ˜¯å¦è¾“å‡º self.file = (kwargs[\"file\"] if kwargs.get(\"file\") else None) # ä¿å­˜çš„æ–‡ä»¶å self.when = (kwargs[\"when\"] if kwargs.get(\"when\") else \"D\") # æ—¥å¿—æ–‡ä»¶æŒ‰æ—¶é—´åˆ‡åˆ† self.backCount = (kwargs[\"backCount\"] if kwargs.get(\"backCount\") else 30) # ä¿ç•™æ—¥å¿—æ–‡ä»¶æœ€å¤§æ•°é‡ # æ—¥å¿—çº§åˆ«åŒ¹é… self.level_relations = { \"debug\": logging.DEBUG, \"info\": logging.INFO, \"warning\": logging.WARNING, \"error\": logging.ERROR, \"critical\": logging.CRITICAL } self.logger = logging.getLogger(__name__) self.format = logging.Formatter(self.format) if not self.level_relations.get(self.level): self.level = \"debug\" self.logger.setLevel(self.level_relations[self.level]) if self.console: # è¾“å‡º streamHandler = logging.StreamHandler() streamHandler.setFormatter(self.format) self.logger.addHandler(streamHandler) if self.file: # ä¿å­˜ timeHandler = handlers.TimedRotatingFileHandler( filename=self.file, when=self.when, backupCount=self.backCount, encoding=\"utf-8\" ) timeHandler.setFormatter(self.format) self.logger.addHandler(timeHandler)if __name__ == \"__main__\": def test(): l = MyLogger(level=\"debug\") l.logger.warning(\"test\") ts = [] for i in range(10): t = threading.Thread(target=test) t.start() ts.append(t) for t in ts: t.join() å¦‚æœæˆ‘ä»¬åŒæ—¶èµ·å¤šä¸ªçº¿ç¨‹å»ä½¿ç”¨, å¯èƒ½å°±ä¼šå‡ºç°æ„æ–™ä¹‹å¤–çš„é—®é¢˜ åˆ©ç”¨ __new__ å®ç°å•ä¾‹ æˆ‘ä»¬çŸ¥é“,pythonå®ä¾‹åŒ–æ—¶å…¶å®æ˜¯å…ˆèµ° __new__ å†èµ° __init__ æˆ‘ä»¬å¯ä»¥é‡å†™ __new__ æ–¹æ³•,å¦‚æœå‘ç°å·²ç”Ÿæˆå¯¹è±¡ç›´æ¥è¿”å›è¯¥å¯¹è±¡ åŒæ—¶ä¸ºäº†é˜²æ­¢å¤šçº¿ç¨‹çš„èµ„æºç«äº‰,æˆ‘ä»¬ä½¿ç”¨çº¿ç¨‹é”æ¥ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è®¿é—® __new__ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172import loggingimport threadingfrom logging import StreamHandler, handlersclass MyLogger: # log æ—¥å¿— # ä½¿ç”¨çº¿ç¨‹é”é˜²æ­¢åŒä¸€æ—¶é—´å¤šä¸ªçº¿ç¨‹è°ƒç”¨__new__ _instance_lock = threading.Lock() def __init__(self, *args, **kwargs): # æ¥æ”¶å‚æ•° self.level = (kwargs[\"level\"] if kwargs.get(\"level\") else \"debug\") # æ—¥å¿—ç­‰çº§ self.format = (kwargs[\"format\"] if kwargs.get( \"format\") else \"%(asctime)s %(levelname)-8s[%(filename)s:%(lineno)d(%(funcName)s)] %(message)s\") # æ ¼å¼åŒ–ç»“æ„ self.console = (kwargs[\"console\"] if kwargs.get(\"console\") else True) # æ˜¯å¦è¾“å‡º self.file = (kwargs[\"file\"] if kwargs.get(\"file\") else None) # ä¿å­˜çš„æ–‡ä»¶å self.when = (kwargs[\"when\"] if kwargs.get(\"when\") else \"D\") # æ—¥å¿—æ–‡ä»¶æŒ‰æ—¶é—´åˆ‡åˆ† self.backCount = (kwargs[\"backCount\"] if kwargs.get(\"backCount\") else 30) # ä¿ç•™æ—¥å¿—æ–‡ä»¶æœ€å¤§æ•°é‡ # æ—¥å¿—çº§åˆ«åŒ¹é… self.level_relations = { \"debug\": logging.DEBUG, \"info\": logging.INFO, \"warning\": logging.WARNING, \"error\": logging.ERROR, \"critical\": logging.CRITICAL } self.logger = logging.getLogger(__name__) self.format = logging.Formatter(self.format) if not self.level_relations.get(self.level): self.level = \"debug\" self.logger.setLevel(self.level_relations[self.level]) if self.console: # è¾“å‡º streamHandler = logging.StreamHandler() streamHandler.setFormatter(self.format) self.logger.addHandler(streamHandler) if self.file: # ä¿å­˜ timeHandler = handlers.TimedRotatingFileHandler( filename=self.file, when=self.when, backupCount=self.backCount, encoding=\"utf-8\" ) timeHandler.setFormatter(self.format) self.logger.addHandler(timeHandler) # å®ä¾‹åŒ–æ—¶å…ˆèµ°è¿™é‡Œ def __new__(cls, *args, **kwargs): # å•ä¾‹æ¨¡å¼ if not hasattr(MyLogger, \"_instance\"): # æ£€æŸ¥è¿™ä¸ªç±»æœ‰æ²¡æœ‰_instanceå±æ€§ with MyLogger._instance_lock: # è·å–é” if not hasattr(MyLogger, \"_instance\"): # è¿™é‡Œè·å–åˆ°é”, ä½†æ˜¯æœ‰å¯èƒ½åœ¨è·å–ä¸­æœ‰å¦ä¸€ä¸ªçº¿ç¨‹å·²ç»åˆ›å»ºäº†å¯¹è±¡, æ‰€ä»¥è¿™é‡Œå†åˆ¤æ–­ä¸€æ¬¡ # æ²¡æœ‰å®ä¾‹åŒ–è¿‡ MyLogger._instance = object.__new__(cls) # è°ƒç”¨objectçš„__new__æ–¹æ³•, ç„¶åè‡ªåŠ¨è°ƒç”¨æœ¬ç±»çš„__init__è¿›è¡Œå®ä¾‹åŒ–, å°†å®ä¾‹åŒ–çš„å¯¹è±¡èµ‹å€¼ return MyLogger._instance # å¦‚æœå·²ç»æœ‰äº†è¿™ä¸ªå±æ€§ç›´æ¥è¿”å›if __name__ == \"__main__\": def test(): l = MyLogger(level=\"debug\", file=\"test.log\") l.logger.warning(\"test\") ts = [] for i in range(10): t = threading.Thread(target=test) t.start() ts.append(t) for t in ts: t.join() è¿è¡Œæµ‹è¯•ä»£ç , å‘ç°è¿˜æ˜¯ä¼šæœ‰é—®é¢˜ è°ƒè¯•åå‘ç°, å³ä½¿ä»£ç æ­£ç¡®æ•æ‰åˆ°äº† _instance å·²ç»å­˜åœ¨, å°†å…¶è¿”å›äº†, ä½†æ˜¯å› ä¸º _instance æ˜¯ __new__ çš„, è¿˜æ²¡æœ‰è¿›è¡Œ __init__ è°ƒç”¨, æ‰€ä»¥æ¯æ¬¡åˆé‡æ–°è¿è¡Œ __init__ , å› ä¸º __init__ é‡Œæœ‰ç»™ logging æ·»åŠ  handler çš„æ“ä½œ, æ‰€ä»¥éšç€çº¿ç¨‹çš„å¢å¤š, æ¯æ¬¡éƒ½ä¼šå¤šæ·»åŠ ä¸€ä¸ª handler, å¯¼è‡´è®°å½•ä¸€æ¬¡ logging è®°å½•äº†å¤šä¸ª handler, æ¯æ¬¡è®°å½•æ—¥å¿—å°±ä¼šé‡å¤è®°å½•å¾ˆå¤šæ¬¡ åˆ©ç”¨__call__å®ç° æˆ‘ä»¬å°†ä»£ç æ”¹é€ æˆ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576import loggingimport threadingfrom logging import StreamHandler, handlersclass SingletonType(type): # è¯¥ç±»ç»§æ‰¿å…ƒç±» _instance_lock = threading.Lock() # çº¿ç¨‹é” def __call__(cls, *args, **kwargs): # å•ä¾‹æ¨¡å¼ if not hasattr(cls, \"_instance\"): # æ£€æŸ¥è¿™ä¸ªç±»æœ‰æ²¡æœ‰_instanceå±æ€§ with cls._instance_lock: # è·å–é” if not hasattr(cls, \"_instance\"): # è¿™é‡Œè·å–åˆ°é”, ä½†æ˜¯æœ‰å¯èƒ½åœ¨è·å–ä¸­æœ‰å¦ä¸€ä¸ªçº¿ç¨‹å·²ç»åˆ›å»ºäº†å¯¹è±¡, æ‰€ä»¥è¿™é‡Œå†åˆ¤æ–­ä¸€æ¬¡ # æ²¡æœ‰å®ä¾‹åŒ–è¿‡ cls._instance = super(SingletonType, cls).__call__(*args, **kwargs) # æ²¡æœ‰å®ä¾‹åŒ–è¿‡, è°ƒç”¨typeåŸºç±»çš„__call__æ–¹æ³•, èµ°æ­£å¸¸çš„æµç¨‹ return cls._instanceclass MyLogger(metaclass=SingletonType): # log æ—¥å¿— # ä½¿ç”¨çº¿ç¨‹é”é˜²æ­¢åŒä¸€æ—¶é—´å¤šä¸ªçº¿ç¨‹è°ƒç”¨__new__ _instance_lock = threading.Lock() def __init__(self, *args, **kwargs): # æ¥æ”¶å‚æ•° self.level = (kwargs[\"level\"] if kwargs.get(\"level\") else \"debug\") # æ—¥å¿—ç­‰çº§ self.format = (kwargs[\"format\"] if kwargs.get( \"format\") else \"%(asctime)s %(levelname)-8s[%(filename)s:%(lineno)d(%(funcName)s)] %(message)s\") # æ ¼å¼åŒ–ç»“æ„ self.console = (kwargs[\"console\"] if kwargs.get(\"console\") else True) # æ˜¯å¦è¾“å‡º self.file = (kwargs[\"file\"] if kwargs.get(\"file\") else None) # ä¿å­˜çš„æ–‡ä»¶å self.when = (kwargs[\"when\"] if kwargs.get(\"when\") else \"D\") # æ—¥å¿—æ–‡ä»¶æŒ‰æ—¶é—´åˆ‡åˆ† self.backCount = (kwargs[\"backCount\"] if kwargs.get(\"backCount\") else 30) # ä¿ç•™æ—¥å¿—æ–‡ä»¶æœ€å¤§æ•°é‡ # æ—¥å¿—çº§åˆ«åŒ¹é… self.level_relations = { \"debug\": logging.DEBUG, \"info\": logging.INFO, \"warning\": logging.WARNING, \"error\": logging.ERROR, \"critical\": logging.CRITICAL } self.logger = logging.getLogger(__name__) self.format = logging.Formatter(self.format) if not self.level_relations.get(self.level): self.level = \"debug\" self.logger.setLevel(self.level_relations[self.level]) if self.console: # è¾“å‡º streamHandler = logging.StreamHandler() streamHandler.setFormatter(self.format) self.logger.addHandler(streamHandler) if self.file: # ä¿å­˜ timeHandler = handlers.TimedRotatingFileHandler( filename=self.file, when=self.when, backupCount=self.backCount, encoding=\"utf-8\" ) timeHandler.setFormatter(self.format) self.logger.addHandler(timeHandler)if __name__ == \"__main__\": def test(): l = MyLogger(level=\"debug\", file=\"test.log\") l.logger.warning(\"test\") ts = [] for i in range(10): t = threading.Thread(target=test) t.start() ts.append(t) for t in ts: t.join() åœ¨è¿™ä¸ªä»£ç ä¸­, æˆ‘ä»¬æŒ‡å®šäº†MyLogger çš„å…ƒç±»æ˜¯ SingletonType, å…¶å®åœ¨pythonä¸­å®ä¾‹åŒ–å¯¹è±¡éƒ½æ˜¯åœ¨å£°æ˜è¿™ä¸ªç±»æ—¶æ‰§è¡Œtypeçš„__new__å’Œ__init__(è¿™é‡Œæ¯æ¬¡å£°æ˜ä¸€ä¸ªæ–°çš„ç±»éƒ½ä¼šèµ°ä¸€é), ç„¶ååœ¨åˆ›å»ºå¯¹è±¡æ—¶æ‰§è¡Œtypeçš„__call__, åœ¨__call__ä¸­è°ƒç”¨è‡ªå®šä¹‰ç±»çš„__new__å’Œ__init__ æˆ‘ä»¬ä¸»è¦æ˜¯ä¿®æ”¹äº†SingletonType çš„__call__, å½“å®ä¾‹åŒ–æ—¶é¦–å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨äº†, ä¸å­˜åœ¨å†èµ°super ä¹Ÿå°±æ˜¯ type çš„__call__æµç¨‹ ä¸€æ–‡ææ‡‚ä»€ä¹ˆæ˜¯Pythonçš„metaclass - çŸ¥ä¹ (zhihu.com) å½“ç„¶å¯¹äºè‡ªå®šä¹‰metaclass, å¼€å‘è€…ä»¬æœ‰ç›¸å½“ä¸€éƒ¨åˆ†æ˜¯è®¤ä¸ºå…¶ä¼šç ´åä»£ç çš„å¯è¯»æ€§ç­‰, å¦‚æœä½ ä¹Ÿè¿™ä¹ˆè§‰å¾—, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹ä¸€ä¸ªæ–¹æ³• è‡ªå†™åˆå§‹åŒ–æ–¹æ³• æˆ‘ä»¬å›çœ‹ç¬¬ä¸€ç§æ–¹æ³•, ä¹‹æ‰€ä»¥æœ‰é—®é¢˜æ˜¯æ¯æ¬¡åœ¨__init__æ—¶ä¼šæ·»åŠ ä¸€ä¸ªhandler, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä¿®æ”¹é€»è¾‘, è®©ä»–é€šè¿‡åˆ«çš„æ–¹æ³•æ¥æ·»åŠ handler 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273import loggingimport threadingfrom logging import StreamHandler, handlersclass MyLogger: # log æ—¥å¿— # ä½¿ç”¨çº¿ç¨‹é”é˜²æ­¢åŒä¸€æ—¶é—´å¤šä¸ªçº¿ç¨‹è°ƒç”¨__new__ _instance_lock = threading.Lock() def _instance_init(self, *args, **kwargs): # æ¥æ”¶å‚æ•° self.level = (kwargs[\"level\"] if kwargs.get(\"level\") else \"debug\") # æ—¥å¿—ç­‰çº§ self.format = (kwargs[\"format\"] if kwargs.get( \"format\") else \"%(asctime)s %(levelname)-8s[%(filename)s:%(lineno)d(%(funcName)s)] %(message)s\") # æ ¼å¼åŒ–ç»“æ„ self.console = (kwargs[\"console\"] if kwargs.get(\"console\") else True) # æ˜¯å¦è¾“å‡º self.file = (kwargs[\"file\"] if kwargs.get(\"file\") else None) # ä¿å­˜çš„æ–‡ä»¶å self.when = (kwargs[\"when\"] if kwargs.get(\"when\") else \"D\") # æ—¥å¿—æ–‡ä»¶æŒ‰æ—¶é—´åˆ‡åˆ† self.backCount = (kwargs[\"backCount\"] if kwargs.get(\"backCount\") else 30) # ä¿ç•™æ—¥å¿—æ–‡ä»¶æœ€å¤§æ•°é‡ # æ—¥å¿—çº§åˆ«åŒ¹é… self.level_relations = { \"debug\": logging.DEBUG, \"info\": logging.INFO, \"warning\": logging.WARNING, \"error\": logging.ERROR, \"critical\": logging.CRITICAL } self.logger = logging.getLogger(__name__) self.format = logging.Formatter(self.format) if not self.level_relations.get(self.level): self.level = \"debug\" self.logger.setLevel(self.level_relations[self.level]) if self.console: # è¾“å‡º streamHandler = logging.StreamHandler() streamHandler.setFormatter(self.format) self.logger.addHandler(streamHandler) if self.file: # ä¿å­˜ timeHandler = handlers.TimedRotatingFileHandler( filename=self.file, when=self.when, backupCount=self.backCount, encoding=\"utf-8\" ) timeHandler.setFormatter(self.format) self.logger.addHandler(timeHandler) # å®ä¾‹åŒ–æ—¶å…ˆèµ°è¿™é‡Œ def __new__(cls, *args, **kwargs): # å•ä¾‹æ¨¡å¼ if not hasattr(MyLogger, \"_instance\"): # æ£€æŸ¥è¿™ä¸ªç±»æœ‰æ²¡æœ‰_instanceå±æ€§ with MyLogger._instance_lock: # è·å–é” if not hasattr(MyLogger, \"_instance\"): # è¿™é‡Œè·å–åˆ°é”, ä½†æ˜¯æœ‰å¯èƒ½åœ¨è·å–ä¸­æœ‰å¦ä¸€ä¸ªçº¿ç¨‹å·²ç»åˆ›å»ºäº†å¯¹è±¡, æ‰€ä»¥è¿™é‡Œå†åˆ¤æ–­ä¸€æ¬¡ # æ²¡æœ‰å®ä¾‹åŒ–è¿‡ MyLogger._instance = object.__new__(cls) # è°ƒç”¨objectçš„__new__æ–¹æ³•, ç„¶åè‡ªåŠ¨è°ƒç”¨æœ¬ç±»çš„__init__è¿›è¡Œå®ä¾‹åŒ–, å°†å®ä¾‹åŒ–çš„å¯¹è±¡èµ‹å€¼ MyLogger._instance._instance_init(*args, **kwargs) # åªæœ‰ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æ—¶æ‰æ‰§è¡Œhandler return MyLogger._instance # å¦‚æœå·²ç»æœ‰äº†è¿™ä¸ªå±æ€§ç›´æ¥è¿”å›if __name__ == \"__main__\": def test(): l = MyLogger(level=\"debug\", file=\"test.log\") l.logger.warning(\"test\") ts = [] for i in range(10): t = threading.Thread(target=test) t.start() ts.append(t) for t in ts: t.join() ä¿è¯æ¯æ¬¡åªåœ¨éœ€è¦çš„æ—¶å€™æ·»åŠ handler å³å¯","link":"/2021/09/04/realize_single_case/"},{"title":"Redis å¸¸é—®çŸ¥è¯†ç‚¹(ç®€ç•¥)","text":"redisçš„æ•°æ®ç±»å‹ å­—ç¬¦ä¸²(string) stringæ˜¯redisæœ€åŸºæœ¬çš„ç±»å‹, ä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªvalue, stringå¯ä»¥åŒ…å«ä»»ä½•æ•°æ®, ç”šè‡³æ˜¯åºåˆ—åŒ–çš„å¯¹è±¡ä¹Ÿå¯ä»¥, ä¸€ä¸ªvalueæœ€å¤§å®¹é‡ä¸º512MB å“ˆå¸Œ(Hash) Hashæ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„é›†åˆ, ç±»ä¼¼äºåç«¯è¯­è¨€çš„å­—å…¸, æ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨, å¾ˆé€‚åˆç”¨æ¥å­˜å‚¨å¯¹è±¡ åˆ—è¡¨(List) listæ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨, é‡Œé¢çš„å…ƒç´ æ˜¯æœ‰åºçš„, åœ¨æ·»åŠ æ–°å…ƒç´ çš„æ—¶å€™å¯ä»¥é€‰æ‹©æ·»åŠ åˆ°åˆ—è¡¨çš„å¤´éƒ¨æˆ–å°¾éƒ¨, æ¯ä¸ªåˆ—è¡¨çš„æ•°æ®é•¿åº¦æœ€å¤šä¸º40å¤šäº¿ é›†åˆ(Set) Setæ˜¯stringç±»å‹çš„æ— åºé›†åˆ, ä¸€ä¸ªkeyå¯¹åº”å¤šä¸ªstringçš„value, å› ä¸ºæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„, æ‰€ä»¥å¯¹é›†åˆçš„æ“ä½œ, å¤æ‚åº¦éƒ½æ˜¯O(1) æœ‰åºé›†åˆ(ZSet) ä¸æ™®é€šçš„Setä¸åŒçš„æ˜¯, ZSetçš„valueæ˜¯æœ‰åºçš„. åœ¨ZSetä¸­, valueè¿˜æœ‰ä¸€ä¸ªscoreå­—æ®µ, æ’åºæ—¶æŒ‰ç…§scoreä»å°åˆ°å¤§æ’åº Redisçš„è¿‡æœŸå¤±æ•ˆæœºåˆ¶ Redisåœ¨è®¾ç½®ä»»ä½•æ•°æ®ç±»å‹æ—¶, éƒ½å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´, ä¸º-1æ˜¯æ°¸ä¸è¿‡æœŸ, ä»¥ç§’ä¸ºå•ä½ Redisä½¿ç”¨ä¸¤ç§ç­–ç•¥æ¥åˆ é™¤è¿‡æœŸçš„æ•°æ®: æƒ°æ€§æ¸…é™¤ åœ¨è®¿é—®keyæ—¶, å¦‚æœkeyå·²ç»è¿‡æœŸäº†, å°†keyåˆ é™¤ å®šæ—¶æ¸…ç† Rediså†…éƒ¨å­˜åœ¨ä¸€ä¸ªå®šæ—¶ä»»åŠ¡, é»˜è®¤ 25ms æ‰§è¡Œä¸€æ¬¡. æ¯æ¬¡æ¸…ç†éƒ½ä¼šéå†æ‰€æœ‰ db, ä»æ¯ä¸ª db ä¸­éšæœºå–20ä¸ª key, å¦‚æœè¿‡æœŸå°±åˆ é™¤key, å¦‚æœå…¶ä¸­æœ‰5ä¸ª key è¿‡æœŸ, å°±ç»§ç»­å¯¹è¿™ä¸ª db å‰©ä¸‹çš„ key æ¸…ç†, å¦åˆ™æ¸…ç†ä¸‹ä¸€ä¸ª db. Redisæ•°æ®æ·˜æ±° å¦‚æœæ‰§è¡Œå†™å…¥å‘½ä»¤æ—¶, å‘ç°å†…å­˜ä¸å¤Ÿ, å°±ä¼šæŒ‰ç…§é…ç½®å¥½çš„æ·˜æ±°ç­–ç•¥æ¸…ç†å†…å­˜, æ·˜æ±°ç­–ç•¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§: noeviction ä¸åˆ é™¤, å¦‚æœå†…å­˜ä¸å¤Ÿäº†, ç›´æ¥è¿”å›å†™å…¥é”™è¯¯ allkeys-lru åœ¨æ‰€æœ‰keyä¸­, ä¼˜å…ˆåˆ é™¤æœ€å°‘ä½¿ç”¨(è®¿é—®)çš„key(lru ç®—æ³•) allkeys-random åœ¨æ‰€æœ‰keyä¸­, éšæœºåˆ é™¤ä¸€éƒ¨åˆ†key volatile-lru åœ¨æ‰€æœ‰è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­, ä¼˜å…ˆåˆ é™¤æœ€å°‘ä½¿ç”¨çš„key(lru ç®—æ³•) volatile-random åœ¨æ‰€æœ‰è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­, éšæœºåˆ é™¤ä¸€éƒ¨åˆ†key volatile-ttl åœ¨æ‰€æœ‰è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­, ä¼˜å…ˆåˆ é™¤å‰©ä½™æ—¶é—´çŸ­çš„key volatile-lfu åœ¨æ‰€æœ‰è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­, ä¼˜å…ˆåˆ é™¤æœ€å°‘ä½¿ç”¨(è®¿é—®)çš„key(lfu ç®—æ³•) allkeys-lfu åœ¨æ‰€æœ‰keyä¸­, ä¼˜å…ˆåˆ é™¤æœ€å°‘ä½¿ç”¨(è®¿é—®)çš„key(lfu ç®—æ³•) lru ç®—æ³• lru ç®—æ³•æ˜¯æœ€å¼€å§‹çš„æ·˜æ±°ç®—æ³•, lru è®¤ä¸º, å¦‚æœä¸€ä¸ªæ•°æ®è¿‘æœŸæ²¡æœ‰è®¿é—®, é‚£ä¹ˆä¹‹åä¸€æ®µæ—¶é—´ä¹Ÿä¸ä¼šè®¿é—® lfu ç®—æ³• lfu ç®—æ³•åœ¨Redis4.0ä¹‹åæ¨å‡º, lfu è®¤ä¸º, ä¸€ä¸ªæ•°æ®åœ¨ä¸€æ®µæ—¶é—´å†…è¢«è®¿é—®çš„æ¬¡æ•°è¶Šå¤š, ä¹‹åè¢«è®¿é—®çš„æ¦‚ç‡è¶Šå¤§. RedisæŒä¹…åŒ–æ–¹æ¡ˆ RDB æŠŠæ•°æ®æŒ‰ç…§å¿«ç…§çš„å½¢å¼ä¿å­˜åœ¨ç£ç›˜ä¸­, è¾¾åˆ°è§¦å‘æ¡ä»¶æ—¶, ç”Ÿæˆä¸€ä¸ªå¿«ç…§, ç„¶åæ›¿æ¢åŸæœ‰çš„æŒä¹…åŒ–æ–‡ä»¶ æ¯æ¬¡è¿›è¡Œsaveæ—¶, ä¼šé˜»å¡Redisçš„ä¸»çº¿ç¨‹, å‘ç¡¬ç›˜ä¸­å†™æ•°æ®ä¼šé€ æˆä¸€å®šçš„ I/O å‹åŠ› AOF æ¯æ¬¡æœ‰æ–°çš„æ•°æ®æ“ä½œ, å°±æŠŠæ–°çš„æ•°æ®æŒä¹…åŒ– æ¯æ¬¡å¯¹æ•°æ®è¿›è¡Œæ“ä½œ, ä¼šå°†æ“ä½œè®°å½•å†™å…¥åˆ°aof_bufç¼“å†²åŒºçš„æœ«å°¾, Redisæ¯éš”ä¸€æ®µæ—¶é—´(é»˜è®¤æ˜¯1s), ä¼šå°†aof_bufç¼“å†²åŒºé‡Œçš„æ•°æ®å†™å…¥å’Œä¿å­˜åˆ°aofæ–‡ä»¶ä¸­. å°†ç¼“å†²åŒºçš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜æ—¶ä¼šæœ‰ I/O å‹åŠ›, è€Œä¸”å†™å…¥çš„é¢‘ç‡æ¯”RDBé«˜å¾ˆå¤š, åŒæ­¥è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé€ æˆ 2s çš„é˜»å¡ é˜²æ­¢AOFæ–‡ä»¶è¶Šæ¥è¶Šå¤§, å¯ä»¥æ‰§è¡ŒBGREWRITEAOFå‘½ä»¤, ç”Ÿæˆæ–°çš„AOFæ–‡ä»¶, æ–°çš„ä¿®æ”¹è®°å½•ä¼šå†™è¿›æ–°çš„AOFæ–‡ä»¶ ä¸¤è€…ä¹‹é—´çš„åŒºåˆ« æ¨èä½¿ç”¨ AOF ä½œä¸ºæŒä¹…åŒ– aof æ¯” rdb æ›´æ–°çš„é¢‘ç‡æ›´é«˜ aof æ¯” rdb æ›´å®‰å…¨, ä½†æ˜¯æ›´å¤§ rdb çš„æ€§èƒ½æ¯” aof å¥½ RDBå’ŒAOFæ··åˆ 4.0æ–°å¢çš„æ··åˆæŒä¹…åŒ–æ–¹å¼, åœ¨AOFæ–‡ä»¶ä¸­, å‰åŠæ®µæ˜¯RDBæ ¼å¼, ååŠæ®µæ˜¯AOFæ ¼å¼ ç»“åˆäº†RDBå’ŒAOFçš„ä¼˜ç‚¹, é€Ÿåº¦æ›´å¿«, åŒæ—¶å¢é‡æ›´æ–°çš„æ•°æ®é€šè¿‡AOFçš„æ–¹å¼ä¿å­˜, å‡å°‘å¯èƒ½çš„æ•°æ®ä¸¢å¤± ä½†æ˜¯ä¸4.0ä¹‹å‰çš„ç‰ˆæœ¬ä¸å…¼å®¹, åŒæ—¶é˜…è¯»æ€§å·® æŒä¹…åŒ–é€‰æ‹© å¿…é¡»è¦å¼ºè°ƒçš„æ˜¯, åœ¨ä¸éœ€è¦è€ƒè™‘æ•°æ®ä¸¢å¤±çš„æƒ…å†µä¸‹, ä¸éœ€è¦è€ƒè™‘æŒä¹…åŒ–. å•æœºæƒ…å†µä¸‹, å¦‚æœå¯ä»¥æ¥æ”¶åå‡ åˆ†é’Ÿçš„Redisä¸å¯ç”¨, å¯ä»¥ç›´æ¥é€‰æ‹©RDBæŒä¹…åŒ–, å¯¹æ€§èƒ½çš„å½±å“æ›´å°, å¦‚æœå¯¹æ•°æ®ä¸¢å¤±çš„å®¹å¿åº¦ä¸é«˜, åªèƒ½é€‰æ‹©AOF å¦‚æœä½ ä½¿ç”¨çš„æ˜¯å¤šèŠ‚ç‚¹éƒ¨ç½², æœ€å¥½è¿˜æ˜¯å¼€å¯æŒä¹…åŒ–, é˜²æ­¢èŠ‚ç‚¹éƒ½å‡ºç°æ•…éšœæ—¶, é‡æ–°æ‹‰èµ·åæ²¡æœ‰æ•°æ®. å¤šèŠ‚ç‚¹å¯ä»¥é€‰æ‹©å°†ä¸»èŠ‚ç‚¹ä¸å¼€å¯æŒä¹…åŒ–, ä»æœåŠ¡å™¨å¼€å¯AOFæŒä¹…åŒ–, å¹¶å®šæ—¶å¤‡ä»½AOFæ–‡ä»¶. Rediså½“åšç¼“å­˜ç³»ç»Ÿ Rediså¸¸è¢«å½“åšç¼“å­˜ä½¿ç”¨, å°†ä¸€äº›æ•°æ®ç¼“å­˜åœ¨ Redis ä¸­, ä¸ç”¨æ¯æ¬¡éƒ½è®¿é—®æ•°æ®åº“, å‡å°‘å‹åŠ›, åŒæ—¶Redisè‡ªå¸¦çš„æ•°æ®è¿‡æœŸæœºåˆ¶, å¯ä»¥æ–¹ä¾¿çš„ç»´æŠ¤ç¼“å­˜ ç¼“å­˜çš„å¸¸è§ä½¿ç”¨æ–¹å¼ è¿™é‡Œè·Ÿå…·ä½“çš„ä¸šåŠ¡æœ‰å…³ ç­‰å¾…ç¼“å­˜è‡ªå·±è¿‡æœŸ åœ¨ç”¨æˆ·è¯·æ±‚æŸä¸ªæ•°æ®æ—¶, ä¼˜å…ˆä»Redisä¸­æŸ¥è¯¢æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ•°æ®, å¦‚æœå­˜åœ¨ç›´æ¥è¿”å›, å¦‚æœä¸å­˜åœ¨å°±ä»æ•°æ®åº“ä¸­è·å–æ•°æ®å¹¶å½•å…¥åˆ°Redisä¸­, å½“æ•°æ®åº“ä¸­çš„æ•°æ®æ›´æ–°æ—¶, ä¸å¯¹redisä¸­çš„è€æ•°æ®ç¼“å­˜è¿›è¡Œå¤„ç†, ç­‰å¾…ç¼“å­˜è‡ªå·±è¿‡æœŸåå†ä»æ•°æ®åº“ä¸­æ‹‰å–æ–°çš„æ•°æ® ä¼˜ç‚¹: ä¸å¿…å…³æ³¨ç¼“å­˜è¿‡æœŸç­–ç•¥, å¼€å‘æˆæœ¬ä½, ç®¡ç†æˆæœ¬ä½, å‡º BUG æ¦‚ç‡ä½ ç¼ºç‚¹: å®Œå…¨ä¾èµ–è¿‡æœŸæ—¶é—´, æ—¶é—´çŸ­å®¹æ˜“é€ æˆç¼“å­˜é¢‘ç¹å¤±æ•ˆ, æ—¶é—´é•¿å®¹æ˜“é€ æˆæ•°æ®æ›´æ–°åè€çš„ç¼“å­˜å­˜åœ¨æ—¶é—´é•¿ ä¸»åŠ¨åˆ é™¤ç¼“å­˜ åœ¨ç”¨æˆ·è¯·æ±‚æŸä¸ªæ•°æ®æ—¶, ä¼˜å…ˆä»Redisä¸­æŸ¥è¯¢æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ•°æ®, å¦‚æœå­˜åœ¨ç›´æ¥è¿”å›, å¦‚æœä¸å­˜åœ¨å°±ä»æ•°æ®åº“ä¸­è·å–æ•°æ®å¹¶å½•å…¥åˆ°Redisä¸­, å½“æ•°æ®åº“ä¸­çš„æ•°æ®æ›´æ–°æ—¶, åˆ é™¤redisé‡Œçš„ç¼“å­˜æ•°æ®, ç­‰å¾…ä¸‹æ¬¡æŸ¥è¯¢æ—¶, èµ°æœªå‘½ä¸­ç¼“å­˜çš„æµç¨‹ ä¼˜ç‚¹: é”™è¯¯ç¼“å­˜çš„å­˜åœ¨æ—¶é—´çŸ­, åªå¢åŠ äº†æ›´æ–°æ•°æ®æ—¶çš„åˆ é™¤ç¼“å­˜é€»è¾‘ ç¼ºç‚¹: åç«¯éœ€è¦åŒæ—¶è¿æ¥æ•°æ®åº“å’ŒRedis, æŸè€—åŒå€çš„è¿æ¥èµ„æº ä¸»åŠ¨æ›´æ–°ç¼“å­˜ åœ¨ç”¨æˆ·è¯·æ±‚æŸä¸ªæ•°æ®æ—¶, ä¼˜å…ˆä»Redisä¸­æŸ¥è¯¢æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ•°æ®, å¦‚æœå­˜åœ¨ç›´æ¥è¿”å›, å¦‚æœä¸å­˜åœ¨å°±ä»æ•°æ®åº“ä¸­è·å–æ•°æ®å¹¶å½•å…¥åˆ°Redisä¸­, å½“æ•°æ®åº“ä¸­çš„æ•°æ®æ›´æ–°æ—¶, ä¸»åŠ¨å°†Redisä¸­çš„ç¼“å­˜æ›´æ–°ä¸ºæœ€æ–°æ•°æ®, åŒæ—¶é‡ç½®è¿‡æœŸæ—¶é—´ ä¸ºäº†ä¿è¯é€Ÿåº¦å’Œæ•ˆç‡, æ›´æ–°ç¼“å­˜è¿™ä¸€æ­¥ä½¿ç”¨æ¶ˆè´¹è€…æ¥åš, å°†éœ€è¦æ›´æ–°çš„æ•°æ®æ¨å…¥æ¶ˆæ¯é˜Ÿåˆ—, ç”±æ¶ˆè´¹è€…æ¥æ¥æ”¶å¤„ç†æ•°æ® ä¼˜ç‚¹: ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—, é™ä½ä»£ç çš„è€¦åˆæ€§, æ—§ç¼“å­˜å­˜åœ¨æ—¶é—´å¾ˆçŸ­ ç¼ºç‚¹: å¦‚æœå¤šåç«¯åŒæ—¶ä¿®æ”¹åŒä¸€ä¸ªç¼“å­˜, å¯èƒ½å› ä¸ºç½‘ç»œä¼ è¾“é—®é¢˜, å¯¼è‡´å…ˆåé¡ºåºé”™è¯¯, æœªå°†æ•°æ®ä¿®æ”¹ä¸ºæ­£ç¡®çš„æœ€ç»ˆç»“æœ, åŒæ—¶å¼•å…¥äº†æ¶ˆæ¯é˜Ÿåˆ—, å¢åŠ æˆæœ¬ è®¢é˜…æ—¥å¿—æ¥ä¿®æ”¹ç¼“å­˜ å‡å¦‚æ•°æ®åº“æ˜¯MySQL, å¯ä»¥é€šè¿‡è®¢é˜…MySQLçš„binlogæ—¥å¿—, é€šè¿‡è§£ææ—¥å¿—æ¥è·å–æ•°æ®, åŒæ­¥åˆ°ç¼“å­˜ä¸­ ä¼˜ç‚¹: å®Œå…¨è§£è€¦, å»¶è¿Ÿä½, å¯é æ€§å¼º ç¼ºç‚¹: å¼€å‘æˆæœ¬é«˜, åŒæ­¥æœåŠ¡å‡ºç°é—®é¢˜æ—¶Redisçš„ç¼“å­˜å®Œå…¨ä¸å¯ä¿¡ ä¸€èˆ¬çš„æ–¹æ¡ˆä¸€æ¯”è¾ƒé€‚ç”¨, å› ä¸ºå…¶å¼€å‘å¿«, Bug å°‘, é€‚åˆå¯¹ç¼“å­˜å»¶è¿Ÿæ²¡æœ‰ç‰¹åˆ«è¦æ±‚çš„ä¸šåŠ¡ ç¼“å­˜ç©¿é€ ç¼“å­˜ç©¿é€æŒ‡çš„æ˜¯ç”¨æˆ·æƒ³è¦è·å–ä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®, å› ä¸ºç¼“å­˜æ˜¯åœ¨æ²¡æœ‰å‘½ä¸­æ—¶æ‰å†™å…¥, å¯¼è‡´ä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦è½åˆ°æ•°æ®åº“ä¸­, å¦‚æœæµé‡å¾ˆå¤§æœ‰å¯èƒ½æ‹–å®æ•°æ®åº“ è§£å†³æ–¹æ³• å¦‚æœæŸä¸ªæ•°æ®æŸ¥è¯¢ä¸åˆ°, æ¯”å¦‚æŸ¥è¯¢nameä¸ºs1çš„ä¿¡æ¯, æŸ¥è¯¢ä¸åˆ°æ—¶, å°†æŸ¥è¯¢ä¸åˆ°çš„æ ‡è¯†ä¹Ÿè®°å½•è¿›ç¼“å­˜ä¸­, è®¾ç½®è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´, å½“ç¬¬äºŒæ¬¡æŸ¥è¯¢æ—¶, ç›´æ¥å‘½ä¸­ç¼“å­˜, è¿”å›ä¸å­˜åœ¨ ç¼“å­˜è¡€å´© ç¼“å­˜è¡€å´©æŒ‡çš„æ˜¯åœ¨è®¾ç½®ç¼“å­˜æ˜¯è®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´, å¯¼è‡´ç¼“å­˜åœ¨æŸä¸€æ—¶åˆ»å…¨éƒ¨è¿‡æœŸå¤±æ•ˆ, å…¨éƒ¨æŸ¥è¯¢è¿›æ•°æ®åº“, å¯¼è‡´æ•°æ®åº“å‹åŠ›ç¬é—´å¢å¤§ è§£å†³ åœ¨å†™å…¥ç¼“å­˜æ—¶è®¾ç½®æ—¶é—´æ®µå†…éšæœºçš„è¿‡æœŸæ—¶é—´, ä¾‹å¦‚20-30åˆ†é’Ÿçš„éšæœºå€¼è¿‡æœŸ ç¼“å­˜å‡»ç©¿ åœ¨æŸä¸ªç¼“å­˜åˆšå¥½è¿‡æœŸçš„æ—¶å€™, æœ‰å¤§é‡çš„è¯·æ±‚å¹¶è¡Œè·å–è¿™æ¡æ•°æ®, å› ä¸ºç¼“å­˜åˆšåˆšå¤±æ•ˆ, æ–°çš„ç¼“å­˜è¿˜æ²¡è½å…¥, å¯¼è‡´éƒ½è®¿é—®æ•°æ®åº“æŸ¥è¯¢æ•°æ®, æ•°æ®åº“å‹åŠ›ç¬é—´å¢å¤§ è§£å†³ åœ¨ç¼“å­˜å¤±æ•ˆæ—¶, åœ¨redisä¸­ç•™ä¸‹æ ‡è¯†ä½, æ ‡å¿—è¿™ä¸ªæ•°æ®æ­£åœ¨ä»æ•°æ®åº“è·å–æ•°æ®ä¸­, å½“æœ‰æ–°çš„è¯·æ±‚è·å–è¿™æ¡æ•°æ®æ—¶, å¦‚æœæ‰¾åˆ°äº†è¿™ä¸ªæ ‡è¯†ä½, ä»£è¡¨æœ‰å…¶ä»–çš„è¿æ¥æ­£åœ¨è·å–æ•°æ®, ç­‰å¾…ä¸€æ®µæ—¶é—´åç›´æ¥ä»redisä¸­é‡æ–°è·å–æ•°æ®, è€Œä¸ä»æ•°æ®åº“ä¸­è·å– å¯ä»¥ä½¿ç”¨redisçš„SETNXæ¥æ’å…¥æ ‡è¯†ä½, SETNXåªæœ‰keyä¸å­˜åœ¨æ—¶æ‰åˆ›å»º(è¿”å›1), å­˜åœ¨åˆ™è¿”å›å·²ç»å­˜åœ¨, å¯ä»¥ä½¿ç”¨SETNXæ¥åˆ¤æ–­å½“å‰æœ‰æ²¡æœ‰è¿æ¥æ­£åœ¨æ›´æ–°ç¼“å­˜ çƒ­ key é—®é¢˜ ä»€ä¹ˆæ˜¯çƒ­ key ç±»ä¼¼äºå¾®åšçƒ­æœæ¦œ, çŸ¥ä¹çƒ­æœæ¦œè¿™äº›, è®¿é—®é¢‘ç‡å¾ˆé«˜çš„ key å°±æˆä¸ºçƒ­ç‚¹ key, å½“è¯·æ±‚çƒ­ç‚¹ key æ—¶, ç”±äºè¯·æ±‚é‡å¾ˆå¤§, å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜æœåŠ¡å®•æœº å±å®³ çƒ­ key ä¼šè®©æµé‡é›†ä¸­, å¦‚æœè¾¾åˆ°äº†ç¡¬ä»¶ä¸Šé™, æ¯”å¦‚ç½‘å¡æ»¡äº†, ä¼šå¯¼è‡´å…¶ä»– key è®¿é—®å‡ºç°å µå¡, ç”šè‡³æœ‰å¯èƒ½ç›´æ¥å°†ç¼“å­˜æœåŠ¡æˆ–è€…è¿™ä¸ªèŠ‚ç‚¹å¤±æ•ˆ, å¦‚æœæ˜¯åˆ†ç‰‡å­˜å‚¨ç¼“å­˜, åˆ™å¯èƒ½å¯¼è‡´æ•´ä¸ªç‰‡ç¼“å­˜ä¸¢å¤±, å…¶ä»–ç‰‡æ²¡æœ‰æ­¤æ•°æ®, åŒæ ·çš„ä¹Ÿå¯èƒ½å¯¼è‡´ç¼“å­˜å‡»ç©¿, å¼•èµ·ä¸šåŠ¡å´©æºƒ å¦‚ä½•æ‰¾åˆ°çƒ­ key æ ¹æ®ä¸šåŠ¡åˆ¤æ–­, æ¯”å¦‚ çƒ­æœæ¦œ/ æ¨èå•†å“/ çƒ­è¯„ ç­‰åœ¨è®¾è®¡æ—¶å°±åº”è¯¥è€ƒè™‘åˆ°å¯èƒ½å‡ºç°çƒ­ key é—®é¢˜ å®¢æˆ·ç«¯è¿›è¡ŒåŸ‹ç‚¹æ”¶é›†ç»Ÿè®¡åä¸ŠæŠ¥ æœåŠ¡æœ‰ä»£ç†å±‚çš„è¯å¯ä»¥åœ¨ä»£ç†å±‚è¿›è¡Œæ”¶é›†å’Œåˆ†æ å¦‚ä½•è§£å†³ å¦‚æœæ˜¯åˆ†ç‰‡, å¢åŠ åˆ†ç‰‡å‰¯æœ¬, åˆ†æ‹…è¯»å–æµé‡ å¯¹çƒ­ key è¿›è¡Œå¤‡ä»½, è¯»å–æ—¶éšæœºè®¿é—®å…¶ä¸­çš„ä¸€ä¸ªå‰¯æœ¬ åœ¨å®¢æˆ·ç«¯ä½¿ç”¨æœ¬åœ°ç¼“å­˜, åªåœ¨æœ¬åœ°ç¼“å­˜è¿‡æœŸæˆ–è€…ä¸å­˜åœ¨æˆ–è€…ç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»åˆ·æ–°æ‰è¯·æ±‚ç¼“å­˜æœåŠ¡å™¨ ä¸ºä»€ä¹ˆä¸ä½¿ç”¨Memcachedä½œä¸ºç¼“å­˜æ¡†æ¶ Memcachedåˆå¤§åˆé‡, æ²¡æœ‰ç‰¹åˆ«å¿…è¦ä¸ä½¿ç”¨ Redisé€Ÿåº¦æ›´å¿« ä¸ºä»€ä¹ˆä¸ä½¿ç”¨è¯­è¨€è‡ªå¸¦çš„æ•°æ®ç»“æ„ä½œä¸ºç¼“å­˜ å¤šä¸ªåç«¯æ— æ³•è¿›è¡Œæ•°æ®å…±äº« ç”³è¯·çš„å†…å­˜æœ‰é™ æ— æ³•æŒä¹…åŒ– æ— æ³•åˆ†å¸ƒå¼ æ— æ³•å•ç‹¬éƒ¨ç½² ç¼“å­˜é¢„çƒ­ åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶, å°†å¸¸ç”¨çš„æ•°æ®ä¸»åŠ¨å†™å…¥åˆ°ç¼“å­˜ä¸­, é¿å…ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ä»æ•°æ®åº“è·å– æ–¹å¼ æ•°æ®é‡ä¸å¤§æ—¶åœ¨å·¥ç¨‹å¯åŠ¨æ—¶è¿›è¡ŒåŠ è½½ç¼“å­˜ æ•°æ®é‡å¤§æ—¶, é€šè¿‡æ‰§è¡Œå®šæ—¶è„šæœ¬è¿›è¡Œç¼“å­˜åˆ·æ–° æ•°æ®é‡ç‰¹å¤§æ—¶, ä¼˜å…ˆä¿è¯çƒ­ key åŠ è½½åˆ°ç¼“å­˜ ç¼“å­˜é™çº§ æŒ‡çš„æ˜¯åœ¨ç¼“å­˜å¤±æ•ˆæˆ–è€…ç¼“å­˜æœåŠ¡å™¨ç›´æ¥æŒ‚æ‰çš„æ—¶å€™, ä¸å»è®¿é—®æ•°æ®åº“, ç›´æ¥è¿”å›é»˜è®¤æ•°æ®. é™çº§æœåŠ¡ä¸€èˆ¬æ˜¯æœ‰æŸçš„, ä½¿ç”¨æ—¶ä»£è¡¨ç€é—®é¢˜å‡ºç°äº† RESP RESPæ˜¯ Redisçš„åºåˆ—åŒ–åè®®, ä»…ç”¨ä½œRedisçš„å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯è¿›è¡Œé€šè®¯ RESPçš„ä¼˜ç‚¹æ˜¯: å®ç°ç®€å•, è§£æå¿«é€Ÿ, å¯è¯»æ€§å¼º RESPå¯ä»¥åºåˆ—åŒ–ä¸åŒçš„æ•°æ®ç±»å‹, æ¯”å¦‚: æ•´å½¢, å­—ç¬¦ä¸², æ•°ç»„ç­‰ç­‰, å¹¶ä¸”ä¸“é—¨ä¸ºé”™è¯¯æä¾›äº†ç±»å‹ RESPæ˜¯äºŒè¿›åˆ¶å®‰å…¨åè®®, åœ¨å¤„ç†æ‰¹é‡æ•°æ®æ—¶, ä¹Ÿä¸ç”¨é€æ¡å•ç‹¬çš„è¿›è¡Œå¤„ç†, åœ¨æ‰¹é‡ä¼ è¾“æ•°æ®æ—¶, æœ‰å‚æ•°æ ‡è¯†äº†æ•°æ®é•¿åº¦ RESPæ”¯æŒäº”ä¸­æ•°æ®ç±»å‹: å­—ç¬¦ä¸²: ä»¥+å¼€å¤´ é”™è¯¯: ä»¥-å¼€å¤´ æ•´å½¢: ä»¥:å¼€å¤´ æ‰¹é‡å­—ç¬¦ä¸²: ä»¥$å¼€å¤´ æ•°ç»„: ä»¥*å¼€å¤´ æ¶æ„æ¨¡å¼ å•æœº å•æœºéƒ¨ç½²åœ¨å•ä¸ªæœºå™¨ä¸Š ä¼˜ç‚¹: æ–¹ä¾¿å¿«é€Ÿç®€å•çœèµ„æº ç¼ºç‚¹: å†…å­˜å®¹é‡å’Œå¤„ç†èƒ½åŠ›æœ‰é™, æ²¡åŠæ³•é«˜å¯ç”¨ ä¸»ä»å¤åˆ¶ ä½¿ç”¨è‡ªå¸¦çš„ä¸»ä»å¤åˆ¶åŠŸèƒ½, å°†æŸä¸ªèŠ‚ç‚¹è®¾ç½®ä¸ºä¸», å…¶ä»–ä¸ºä», rediså°†ä¸»ä¸­çš„æ•°æ®å¤åˆ¶åˆ°è‹¥å¹²ä»èŠ‚ç‚¹ä¸­, æ¯æ¬¡æ›´æ–°ä¹Ÿæ˜¯, å‰ææ˜¯èƒ½å¤Ÿè¿æ¥ ä¼˜ç‚¹: è¯»(ä»)å†™(ä¸»)åˆ†ç¦», åˆ†æ•£Rediså‹åŠ› ç¼ºç‚¹: æ— æ³•ä¿è¯é«˜å¯ç”¨, å†™æ•°æ®çš„å‹åŠ›ä¾æ—§å…¨åœ¨ä¸»èŠ‚ç‚¹ å“¨å…µ Redis Sentinel Documentation â€“ Redis å“¨å…µæ¨¡å¼ä¹Ÿæ˜¯ä¸»ä»æ¨¡å¼, åªæ˜¯æœ‰è‡³å°‘ä¸‰ä¸ªå“¨å…µèŠ‚ç‚¹, ä¼šä¸æ–­çš„æ£€æŸ¥å„ä¸ªèŠ‚ç‚¹æ˜¯å¦åœ¨æ­£å¸¸è¿è½¬, å½“èŠ‚ç‚¹é”™è¯¯æ—¶, å¦‚æœæ˜¯ä»èŠ‚ç‚¹åˆ™è‡ªåŠ¨å‰”é™¤, ä¸»èŠ‚ç‚¹åˆ™è¿›è¡Œæ•…éšœè½¬ç§», å¦‚æœæ˜¯ä¸»èŠ‚ç‚¹ä¸‹çº¿, åˆ™ä»å‰©ä¸‹çš„ä»èŠ‚ç‚¹ä¸­é€‰å–ä¸€ä¸ªèŠ‚ç‚¹æˆä¸ºä¸»èŠ‚ç‚¹, åŒæ—¶è¿˜ä¼šå‘æŒ‡å®šçš„ API å‘å…¶ä»–ç¨‹åºå‘é€é”™è¯¯é€šçŸ¥ ä¼˜ç‚¹: é«˜å¯ç”¨, è‡ªåŠ¨ç›‘æ§å„ä¸ªèŠ‚ç‚¹å¹¶è¿›è¡Œæ•…éšœè½¬ç§» ç¼ºç‚¹: ä¸»ä»æ¨¡å¼, å½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶, æ•…éšœè½¬ç§»éœ€è¦ä¸€å®šæ—¶é—´, è¿˜æœ‰å¯èƒ½ä¼šä¸¢å¼ƒæ•°æ®, è€Œä¸”æ²¡æœ‰è§£å†³ä¸»èŠ‚ç‚¹çš„å‹åŠ› é›†ç¾¤ Redis-clusteræ— ä¸­å¿ƒç»“æ„, å…¶ä¸­çš„èŠ‚ç‚¹ä¸å…¶ä»–èŠ‚ç‚¹æ•°æ®å…±äº«, æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜äº†æ•°æ®å’Œæ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€, æ¯ä¸ªèŠ‚ç‚¹éƒ½å’Œå…¶ä»–èŠ‚ç‚¹è¿æ¥ ä¼˜ç‚¹: æ— ä¸­å¿ƒç»“æ„, èŠ‚ç‚¹é—´æ•°æ®å…±äº«, å¯åŠ¨æ€æ–°å¢å’Œåˆ é™¤èŠ‚ç‚¹, å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸‹çº¿ä¸å½±å“å…¶ä»–èŠ‚ç‚¹ ç¼ºç‚¹: æ•°æ®éš”ç¦»æ€§å·®, å®¹æ˜“ç›¸äº’å½±å“, æ•°æ®é€šè¿‡å¼‚æ­¥è¿›è¡Œå¤åˆ¶, ä¸ä¿è¯æ•°æ®å¼ºä¸€è‡´æ€§ CAP C(ä¸€è‡´æ€§) åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ•°æ®, åœ¨æŸä¸€æ—¶åˆ»æ˜¯å¦ç­‰åŒäºåŒæ ·çš„å€¼ A(å¯ç”¨æ€§) ä¸€éƒ¨åˆ†èŠ‚ç‚¹æ•…éšœå, é›†ç¾¤æ•´ä½“æ˜¯å¦è¿˜èƒ½å“åº”å®¢æˆ·ç«¯çš„è¯»å†™è¯·æ±‚ P(åˆ†åŒºå®¹é”™æ€§) å¦‚æœç³»ç»Ÿä¸èƒ½åœ¨æŒ‡å®šçš„æ—¶é™å†…è¾¾åˆ°æ•°æ®çš„ä¸€è‡´æ€§, å°±æ„å‘³ç€å‘ç”Ÿäº†åˆ†åŒºçš„é—®é¢˜, æ­¤æ—¶éœ€è¦åœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´åšå‡ºé€‰æ‹© æ‚²è§‚é”å’Œä¹è§‚é” æ‚²è§‚é” è·å–æ•°æ®æ—¶éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹è¿™ä¸ªæ•°æ®, æ‰€ä»¥åœ¨æ¯æ¬¡æ‹¿åˆ°æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”, åˆ«äººæ‹¿åˆ°é”ä¹‹å‰æ— æ³•æ‹¿åˆ°æ•°æ® ä¹è§‚é” è·å–æ•°æ®æ—¶éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹è¿™ä¸ªæ•°æ®, ä¸ä¼šä¸Šé”, ä½†æ˜¯åœ¨æ•°æ®æ›´æ–°ä¹‹å‰, å»æ•°æ®åº“ä¸­æŸ¥çœ‹åˆ«äººæœ‰æ²¡æœ‰æ›´æ–°è¿™ä¸ªæ•°æ®, å¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·æ¥åš, æ¯”å¦‚Redisä¸­çš„INCRå‘½ä»¤ ä¸¤ç§é”çš„é€‰å‹ ä¸èƒ½è¯´å“ªä¸ªé”æ˜¯ç»å¯¹å¥½çš„, ä¸¤è€…ä¹‹é—´å„æœ‰ä¼˜ç¼º, å…·ä½“è¿˜æ˜¯éœ€è¦çœ‹ä¸šåŠ¡: ä¹è§‚é”é€‚ç”¨äºå†™å¾ˆå°‘çš„æƒ…å†µä¸‹, å†²çªçœŸçš„å¾ˆå°‘å‘é€æ—¶, ä¸åŠ é”å¯ä»¥çœå»åŠ é”è§£é”çš„æ—¶é—´, æé«˜æ•ˆç‡ å½“ä½ åœ¨è®¾è®¡çš„è¿‡ç¨‹ä¸­, å°±æ„è¯†åˆ°å¯èƒ½ä¼šå‘ç”Ÿæ•°æ®çš„å†²çª, é‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨æ‚²è§‚é”æ¥ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ ä¸ºä»€ä¹ˆRedisæ˜¯å•çº¿ç¨‹ Redis6.0ä¿®æ”¹ä¸ºå¤šçº¿ç¨‹å¤„ç†, ä¹‹å‰éƒ½æ˜¯å•çº¿ç¨‹ Redis6.0ä¹Ÿåªæ˜¯å¤„ç†ç½‘ç»œæ•°æ®å’Œåè®®è§£æä½¿ç”¨äº†å¤šçº¿ç¨‹, æ‰§è¡Œå‘½ä»¤ä¾æ—§æ˜¯å•çº¿ç¨‹ Redisæ˜¯åŸºäºå†…å­˜çš„æ“ä½œ, å› æ­¤CPUä¸æ˜¯ç“¶é¢ˆ, å…¶ç“¶é¢ˆæ›´å¤šæ˜¯å†…å­˜å¤§å°å’Œç½‘ç»œå¸¦å®½, è€Œä½¿ç”¨å¤šçº¿ç¨‹ä¼šæé«˜Rediså¼€å‘éš¾åº¦, å¯èƒ½å¸¦æ¥æ›´å¤š BUG Redis6.0å°†ç½‘ç»œæ•°æ®å¤„ç†ä¿®æ”¹ä¸ºäº†å¤šçº¿ç¨‹, æé«˜äº†ç½‘ç»œå¤„ç†çš„æ•ˆç‡, å……åˆ†åˆ©ç”¨ CPU èµ„æº, åˆ†æ‘Š I/O ä»»åŠ¡, æ•ˆç‡åŸºæœ¬ä¸Šç¿»å€ ä¼˜ç‚¹ ä½¿ç”¨å•çº¿ç¨‹ç¼–å†™Redis, ä¼šä½¿å¾—ä»£ç å˜å¾—æ¸…æ™°, å‡å°‘ BUG, æé«˜å¯è¯»æ€§, ä¹Ÿæ— éœ€è€ƒè™‘æ•°æ®çš„åŠ é”é—®é¢˜, æé«˜æ€§èƒ½, ä¹Ÿä¸å­˜åœ¨çº¿ç¨‹æˆ–è€…è¿›ç¨‹åˆ‡æ¢å¸¦æ¥çš„æ€§èƒ½æŸè€— ç¼ºç‚¹ æ— æ³•å……åˆ†çš„å‘æŒ¥å¤šæ ¸æœºå™¨çš„ä¼˜åŠ¿ Redisä¸ºä»€ä¹ˆå¿« å®Œå…¨åŸºäºå†…å­˜, æ•°æ®å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­(ä¸å¼€å¯æŒä¹…åŒ–), æ²¡æœ‰ç£ç›˜ I/O å•çº¿ç¨‹æ¨¡å‹, æ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€, ä¸ç”¨åŠ é”, æ²¡æœ‰æ€§èƒ½æ¶ˆè€— Redisä¸»ä»åŒæ­¥å®ç° æ–°èŠ‚ç‚¹ å½“ä¸€ä¸ªæ–°èŠ‚ç‚¹ä¸Šçº¿å, å¦‚æœæ˜¯ä»èŠ‚ç‚¹, ä¼šä»ä¸»èŠ‚ç‚¹æ‹‰å–å…¨é‡æ•°æ®, è¿›è¡Œå…¨é‡åŒæ­¥ æ—§èŠ‚ç‚¹ä¸Šçº¿ èŠ‚ç‚¹å°†ä¹‹å‰çš„æœ€åä¸€æ¬¡åŒæ­¥çš„ id å’Œåç§»é‡å‘é€åˆ°ä¸»èŠ‚ç‚¹, ä¸»èŠ‚ç‚¹è¿›åˆ¤æ–­å¹¶å°†éœ€è¦åŒæ­¥çš„æ•°æ®æ¨é€åˆ°èŠ‚ç‚¹ä¸­ å¦‚æœ id ä¸å½“å‰ä¸»èŠ‚ç‚¹æœ€æ–°çš„ id ä¸ä¸€è‡´, å°±ä¼šè¿›è¡Œå…¨é‡åŒæ­¥ å¦‚æœ id ä¸å½“å‰ä¸»èŠ‚ç‚¹æœ€æ–°çš„ id ä¸€è‡´, å°±ä¼šè¿›è¡Œéƒ¨åˆ†åŒæ­¥ å…¨é‡åŒæ­¥ ä¸»èŠ‚ç‚¹é‡æ–°ç”Ÿæˆä¸€ä¸ªRDBæ•°æ®å¿«ç…§æ–‡ä»¶, å‘é€ç»™èŠ‚ç‚¹, èŠ‚ç‚¹è§£æRDBæ–‡ä»¶, å¹¶å°†æ•°æ®è½½å…¥åˆ°èŠ‚ç‚¹ä¸­, åŒæ—¶, åœ¨åŒæ­¥è¿‡ç¨‹ä¸­, å¦‚æœæœ‰æ–°çš„æ“ä½œ, ä¹Ÿä¼šç”±ä¸»èŠ‚ç‚¹è®°å½•åå‘é€ç»™èŠ‚ç‚¹ éƒ¨åˆ†åŒæ­¥ æ ¹æ®åç§»é‡, ä¸»èŠ‚ç‚¹è·å–æœ€åå‡ æ¬¡æ“ä½œæ—¥å¿—, å‘é€ç»™èŠ‚ç‚¹ å‘½ä»¤ä¼ æ’­ åœ¨åŒæ­¥å®Œæˆå, å°±è¿›å…¥åˆ°äº†å‘½ä»¤ä¼ æ’­é˜¶æ®µ. å½“ä¸»èŠ‚ç‚¹æœ‰æ–°çš„æ•°æ®ä¿®æ”¹æ—¶, å¼‚æ­¥çš„å‘é€ç»™å…¶ä»–èŠ‚ç‚¹ å“¨å…µçš„å®ç°æ•…éšœè½¬ç§» æ£€æµ‹èŠ‚ç‚¹ä¸‹çº¿ æ¯éš”ä¸€æ®µæ—¶é—´(é»˜è®¤2s), å“¨å…µèŠ‚ç‚¹ä¼šç»™ä¸»èŠ‚ç‚¹å‘é€PINGå‘½ä»¤, å¦‚æœä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å›å¤, å“¨å…µå°±è®¤ä¸ºä¸»èŠ‚ç‚¹å®¢è§‚ä¸‹çº¿ ç„¶å, å“¨å…µèŠ‚ç‚¹ä¼šå‘å…¶ä»–å“¨å…µèŠ‚ç‚¹å‘é€å‘½ä»¤, è·å–å…¶ä»–å“¨å…µå†…è¿™ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€, å½“å…¶ä»–å“¨å…µä¹Ÿè®¤ä¸ºè¯¥èŠ‚ç‚¹ä¸‹çº¿åˆ°è¾¾ä¸€å®šæ•°é‡å, å°±ç¡®è®¤ç¡®å®å®¢è§‚ä¸‹çº¿äº† å“¨å…µé€‰ä¸¾ ä¸»èŠ‚ç‚¹å®¢è§‚ä¸‹çº¿å, å¤šä¸ªå“¨å…µä¹‹é—´äº’ç›¸é€šä¿¡, é€‰ä¸¾å‡ºä¸€ä¸ªé¢†å¯¼è€…å“¨å…µ, è¿™ä¸ªé¢†å¯¼è€…å“¨å…µå¯¹ä¸»èŠ‚ç‚¹è¿›è¡Œæ•…éšœè½¬ç§» é€‰ä¸¾ä½¿ç”¨Raftç®—æ³•, å°±æ˜¯æœ€å…ˆæ£€æµ‹åˆ°ä¸»èŠ‚ç‚¹ä¸‹çº¿çš„å“¨å…µèŠ‚ç‚¹, å‘å…¶ä»–å“¨å…µèŠ‚ç‚¹å‘é€ç”³è¯·æˆä¸ºé¢†å¯¼è€…çš„å‘½ä»¤, å¦‚æœå…¶ä»–å“¨å…µæ²¡æœ‰åŒæ„è¿‡å…¶ä»–å“¨å…µçš„ç”³è¯·, å°±åŒæ„æœ¬æ¬¡ç”³è¯·, å½“åŒæ„çš„ç¥¨æ•°è¿‡åŠ, å°±æˆä¸ºé¢†å¯¼è€…å“¨å…µ, å¦åˆ™ç”±å¦å¤–çš„å“¨å…µèŠ‚ç‚¹é‡æ–°ç”³è¯·, ä¸€èˆ¬æƒ…å†µä¸‹, ç¬¬ä¸€æ¬¡é€‰ä¸¾å°±ä¼šæˆåŠŸ, å˜æˆé¢†å¯¼è€… æ•…éšœè½¬ç§» é¢†å¯¼è€…å“¨å…µä»èŠ‚ç‚¹ä¸­æŒ‰ç…§è§„åˆ™é€‰å‡ºä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºä¸»èŠ‚ç‚¹, ç­›é€‰çš„è§„åˆ™æ˜¯: æ’é™¤ä¸å¥åº·çš„èŠ‚ç‚¹(ä¸‹çº¿çš„/æ–­çº¿çš„/æœ€è¿‘5s å†…æ²¡æœ‰å›å¤å“¨å…µINFOå‘½ä»¤çš„/ä¸æ—§çš„ä¸»èŠ‚ç‚¹æ–­å¼€æ—¶é—´é•¿çš„) æ ¹æ®ä¼˜å…ˆçº§, å¤åˆ¶åç§»é‡, æ¥é€‰æ‹©ä¸€ä¸ªä»èŠ‚ç‚¹ä¸ºä¸»èŠ‚ç‚¹ ç„¶åå‘è¿™ä¸ªä»èŠ‚ç‚¹å‘é€å‡çº§å‘½ä»¤, è®©ä»èŠ‚ç‚¹å˜æˆä¸»èŠ‚ç‚¹, è€çš„ä¸»èŠ‚ç‚¹æ›´æ–°ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ Redisçš„å¸¸ç”¨ä½¿ç”¨åœºæ™¯ ç¼“å­˜ç³»ç»Ÿ, å­˜å‚¨æ•°æ® æ’è¡Œæ¦œç³»ç»Ÿ, ä½¿ç”¨æœ‰åºé›†åˆ è®¡æ•°å™¨ç³»ç»Ÿ, æ¯”å¦‚ æµè§ˆé‡, æ’­æ”¾é‡, åœ¨çº¿äººæ•° åˆ†å¸ƒå¼é”, å¤šä¸ªåç«¯ä½¿ç”¨åŒä¸€ä¸ªèµ„æºæ—¶, åŠ é”é˜²æ­¢ç«äº‰ æ¶ˆæ¯ç³»ç»Ÿ, æ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿæä¾›äº†Redisä½œä¸ºä¸­é—´ä»¶ä½¿ç”¨ Luaåœ¨Redisä¸­çš„ä½¿ç”¨ ä»€ä¹ˆæ˜¯Lua The Programming Language Lua Luaæ˜¯ä¸ªè„šæœ¬è¯­è¨€, ä½¿ç”¨Cè¯­è¨€ç¼–å†™, ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥å„ç§åº”ç”¨ç¨‹åºä¸­, ä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å®šåˆ¶åŠŸèƒ½ ä¸ºä»€ä¹ˆä½¿ç”¨Lua å‡å°‘ç½‘ç»œå¼€é”€: å¯¹äºå®¢æˆ·ç«¯æ¥è®², å¯ä»¥å°†å¤šä¸ªæ“ä½œæ”¾ç½®è¿›ä¸€ä¸ªè„šæœ¬ä¸­æ‰§è¡Œ, åªéœ€è¦ä¸€æ¬¡ç½‘ç»œé€šä¿¡ åŸå­æ“ä½œ: è„šæœ¬ä¸­é€šå¸¸æœ‰å¤šæ­¥æ“ä½œ, Redisä¼šå°†è„šæœ¬ä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œ, ä¸­é—´ä¸ä¼šæ’å…¥å…¶ä»–å‘½ä»¤, é¿å…èµ„æºç«äº‰ å¯å¤ç”¨: è„šæœ¬å¯æ°¸è¿œå­˜åœ¨Redisä¸­, å…¶ä»–ä¸åŒè¯­è¨€çš„å®¢æˆ·ç«¯éƒ½å¯ä»¥å¤ç”¨è¿™ä¸ªè„šæœ¬ æ–¹ä¾¿: Redisçš„2.6ä¹‹åå°±é»˜è®¤é›†æˆäº†luaç¯å¢ƒ, æ— éœ€å¼•å…¥æ’ä»¶æˆ–è€…ä¿®æ”¹é…ç½®æ–‡ä»¶ç­‰æ–¹å¼å¼€å¯ luaçš„æ™®éç”¨æ³• å°†è„šæœ¬å†™è¿›xx.luaä¸­, æˆ–è€…ä»¥å˜é‡çš„æ–¹å¼å†™åœ¨ä»£ç ä¸­ ä½¿ç”¨SCRIPT LOADå°†è„šæœ¬ load è¿›è„šæœ¬ç¼“å­˜ä¸­, Redisè¿”å›è¿™ä¸ªè„šæœ¬çš„sha1æ ¡éªŒå’Œ ä½¿ç”¨EVALSHA sha1 numkeys key [key ...] arg [arg ...] è°ƒç”¨å‡½æ•° luaçš„å‚æ•° luaå¯ä»¥é€šè¿‡ä¼ å‚çš„æ–¹å¼æ¥è¿›è¡Œå˜é‡çš„è¾“å…¥,EVALSHA sha1 numkeys key [key ...] arg [arg ...] åˆ†ä¸ºå‡ éƒ¨åˆ†: sha1å­—æ®µä¸ºload æ—¶è¿”å›çš„æ ¡éªŒå’Œ numkeysæŒ‡keyçš„æ•°é‡, æ¯”å¦‚EVALSHA 5332031c6b470dc5a0dd9b4bf2030dea6d65de91 1 test 500 100 , æ­¤æ—¶keyæœ‰1ä¸ªä¸ºtest, argæœ‰ä¸¤ä¸ªä¸º500 å’Œ100 åœ¨è„šæœ¬ä¸­, é€šè¿‡ KEYS[1], KEYS[2]ç­‰ç­‰æ¥æŒ‰ä½ç½®è·å–å‚æ•°key, é€šè¿‡ARGV[1], ARGV[2]ç­‰ç­‰æ¥æŒ‰ä½ç½®è·å–å‚æ•°arg å“¨å…µæ¨¡å¼ä¸­luaçš„æ‰§è¡Œé€»è¾‘ åœ¨ load è„šæœ¬æ—¶, ä¼šå°†è„šæœ¬å­˜å‚¨åœ¨æ¯ä¸ªèŠ‚ç‚¹ åœ¨è°ƒç”¨è„šæœ¬æ—¶, ä¼šè°ƒç”¨å½“å‰èŠ‚ç‚¹çš„è„šæœ¬ redisè§„å®š, åœ¨è¿è¡Œluaè„šæœ¬æ—¶, å¿…é¡»ä¸èƒ½åœ¨ä»£ç ä¸­å«æœ‰éšæœºæ€§è´¨çš„ä»£ç , ä¾‹å¦‚ç”Ÿæˆéšæœºæ•°, ç›®çš„æ˜¯é˜²æ­¢åœ¨èŠ‚ç‚¹ a æ‰§è¡Œè„šæœ¬ç»“æœä¸èŠ‚ç‚¹ b æ‰§è¡Œç»“æœä¸ä¸€è‡´ åˆ†å¸ƒå¼é” lua è„šæœ¬ä¿è¯åŸå­æ€§ è¦ç‚¹ ä½¿ç”¨ lua è„šæœ¬æ¥å®ŒæˆåŠ è§£é”æ­¥éª¤, ç›®çš„æ˜¯ lua è„šæœ¬è¿è¡Œæ˜¯åŸå­æ€§çš„, é˜²æ­¢èµ„æºç«äº‰ value éšæœºç”Ÿæˆ, ç›®çš„æ˜¯é˜²æ­¢ key è¿‡æœŸæ—¶é—´è®¾ç½®çš„ä¸åˆç†, åœ¨ç¬¬ä¸€ä¸ªé”åŠ ä¸Šå, æœªä¸»åŠ¨è§£é”å‰, key è¿‡æœŸ, æ­¤æ—¶ç¬¬äºŒä¸ªçº¿ç¨‹è¯·æ±‚åŠ é”, æŸ¥è¯æ²¡æœ‰ key, åˆ™æ­£å¸¸åŠ é”, è€Œç¬¬ä¸€ä¸ªçº¿ç¨‹ç»“æŸåè¿›è¡Œè§£é”, å¦‚æœæ²¡æœ‰å”¯ä¸€æ ‡è¯†è¿›è¡Œåˆ¤æ–­, å°±ä¼šå°†çº¿ç¨‹2çš„é”è§£é™¤ åŠ é” ä½¿ç”¨setnx, å¦‚æœ key å­˜åœ¨åˆ™ä¸åšä»»ä½•åŠ¨ä½œ, key ä¸å­˜åœ¨æ’å…¥ value key ä¸å­˜åœ¨æ—¶éœ€è¦ç»§ç»­ç»™è¿™ä¸ª key è®¾ç½®è¶…æ—¶æ—¶é—´ value è¦æ±‚éšæœºç”Ÿæˆ è§£é” è·å– key çš„ value value ä¸€è‡´åˆ™åˆ é™¤ ä¸ä¸€è‡´ä»£è¡¨å·²ç»è¢«å ç”¨, æ­¤æ—¶ç›´æ¥é€€å‡º","link":"/2022/02/04/redis_interview/"},{"title":"requirements è¯­æ³•","text":"requirements è¯­æ³• ä¹‹å‰ä¸€ç›´è‹¦äºä¸€ä¸ªé—®é¢˜,æ¯”å¦‚ä¸€äº›åŒ…åœ¨Winä¸Šå®‰è£…ä¸äº†,æ¯”å¦‚ uvloop ä½†æ˜¯ä¸ºäº†æé«˜æ•ˆç‡,ä»£ç ä¸­å¿…é¡»æœ‰è¿™ä¸ªæ¨¡å— åœ¨è¿è¡Œä¸­å¯ä»¥é€šè¿‡ os æ¨¡å—åˆ¤æ–­æ˜¯å¦ä½¿ç”¨, é‚£ä¾èµ–æ–‡ä»¶å‘¢? requirements.txt è¦ä¸è¦æœ‰ uvloop å‘¢? å…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯­æ³•æ¥èµ‹äºˆ requirements.txt ä¸€å®šçš„çµæ´»æ€§. æ¯”å¦‚,æˆ‘ä»¬ä½¿ç”¨ pip freeze &gt; requirements.txt æ—¶,è¾“å‡ºçš„å¤§è‡´ä¸º 12redis==3.2.1requests==2.21.0 æ¯ä¸€è¡Œä¸º æ¨¡å—å==ç‰ˆæœ¬å·, è¿™å…¶å®å°±æ˜¯ä¸€ç§è¯­æ³•, ç”¨æ¥æ ‡è®°å®‰è£…çš„æ¨¡å—çš„ç‰ˆæœ¬å·, å…¶å®ä»–è¿˜æœ‰å¾ˆå¤šè¯­æ³• è¯¦è§å®˜æ–¹æ–‡æ¡£ PEP508-doc æ ¹æ®æ“ä½œç³»ç»Ÿç¡®å®šæ˜¯å¦å®‰è£…ä¾èµ– è¿™é‡ŒæŠ›ç –å¼•ç‰,åªå†™ä¸€ä¸ªä¾‹å­,å°±æ˜¯æ ¹æ®ç³»ç»ŸOSåˆ¤æ–­è¦ä¸è¦è£…æŸä¸ªæ¨¡å— æ¯”å¦‚ uvloop, ä¸æ”¯æŒ Windows æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ 1uvloop==0.14.0;platform_system==\"Linux\" è¿™æ ·å°±æ˜¯åˆ¤æ–­å½“å‰ç¯å¢ƒ,å¦‚æœä¸º Linux å°±å®‰è£… 0.14.0 çš„ uvloop æ¨¡å—,å¦‚æœæ˜¯å…¶ä»–ç¯å¢ƒå°± å¿½ç•¥ éœ€è¦æ³¨æ„çš„æ˜¯, Linux æ˜¯è¡¨æ ¼ä¸­å†™çš„å¯é€‰å€¼(è¯¦è§å®˜æ–¹æ–‡æ¡£çš„platform_systemæ ) è¯·ä¸¥æ ¼åŒºåˆ†å¤§å°å†™å¹¶ä¸è¦å†™é”™,å†™é”™ä¸ä¼šæŠ¥é”™ä½†æ˜¯è¯†åˆ«ä¸äº†","link":"/2021/09/04/requirements_syntax/"},{"title":"Rustç¨‹åºè®¾è®¡è¯­è¨€(1)","text":"å®‰è£… brew brew install rust å…¶ä»– å®˜ç½‘ æ ¡éªŒæ˜¯å¦å®‰è£…æˆåŠŸ å®‰è£…ååœ¨å‘½ä»¤è¡Œè¾“å…¥ rustc --version å¦‚æœçœ‹åˆ°rustçš„ç‰ˆæœ¬å·å³å¯, ä¾‹å¦‚ rustc 1.42.0 (b8cedc004 2020-03-09) æ‰“å¼€å†…ç½®çš„æ–‡æ¡£ å‘½ä»¤è¡Œè¾“å…¥ rustup doc, ä¼šè°ƒç”¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€æœ¬åœ°çš„å†…ç½®æ–‡æ¡£ VsCodeé…ç½®æ’ä»¶ æ’ä»¶å•†åŸè¾“å…¥ rust, æ’ç¬¬ä¸€çš„å°±æ˜¯, å®‰è£…åæ‰“å¼€rusté¡¹ç›®ä¼šæç¤ºä¸‹è½½ä¾èµ–, åŒæ„å³å¯ Hello,world ç¼–å†™ä¸€ä¸ªè¾“å‡º hello, world çš„ç¨‹åº ç¼–å†™ä¸æ‰§è¡Œ åœ¨æŸä¸ªåœ°æ–¹æ–°å»ºæ–‡ä»¶å¤¹ hello_world , åœ¨æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶ main.rs , ç¼–å†™ä»£ç å¦‚ä¸‹ 123fn main() { println!(\"hello, world\");} ä¿å­˜ååœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ rustc main.rs ä¼šç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ main, æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶, æ‰“å° hello, world, ä¾‹å¦‚ 1234âœ hello_world rustc main.rs âœ hello_world ./main hello, worldâœ hello_world è§£æ rustçš„ä»£ç å†™åœ¨ .rs åç¼€çš„æ–‡ä»¶ä¸­ rustæ¨èä½¿ç”¨ä¸‹åˆ’çº¿æ–¹æ³•æ¥å‘½å, æ¯”å¦‚ hello_world è€Œä¸æ˜¯ helloWorld æˆ–è€… helloworld rustçš„ç¼©è¿›æ˜¯4ä¸ªç©ºæ ¼è€Œä¸æ˜¯ä¸€ä¸ªtab æˆ‘ä»¬æ¥è§£æä»£ç  12fn main() {} fnä»£è¡¨å®šä¹‰ä¸€ä¸ªå‡½æ•°, è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª main å‡½æ•°, mainå‡½æ•°æ˜¯ç‰¹æ®Šçš„å‡½æ•°, æ¯ä¸ªå¯æ‰§è¡Œçš„rustç¨‹åºéƒ½ä»mainå‡½æ•°å¼€å§‹, main() ä»£è¡¨è¿™ä¸ªå‡½æ•°ä¸éœ€è¦ä»»ä½•å‚æ•°, å¦‚æœæœ‰çš„è¯åº”è¯¥å®šä¹‰åœ¨ () ä¸­. () åç›´æ¥è·Ÿçš„ {} ä»£è¡¨å‡½æ•°æœ¬ä½“, rustè¦æ±‚å‡½æ•°å†…éƒ¨çš„ä»£ç éƒ½è¢«è¿™ä¸ªå¤§æ‹¬å·åŒ…è£¹, è€Œ main(){} ä¹Ÿä»£è¡¨äº†è¿™ä¸ªå‡½æ•°æ²¡æœ‰ä»»ä½•çš„è¿”å›å€¼, ä¸€èˆ¬æ¥è¯´ { ä¸å‡½æ•°ååœ¨åŒä¸€è¡Œ, å¹¶ä½¿ç”¨ç©ºæ ¼åˆ†å¼€ rustçš„æ–°ç‰ˆæœ¬è‡ªå¸¦äº†ä»£ç çš„æ ¼å¼åŒ–å·¥å…· rust fmt, ä½¿ç”¨ä»–å¯ä»¥å°†ä½ çš„ä»£ç æ ¼å¼åŒ–çš„æ›´åŠ è§„èŒƒ åœ¨å½“å‰å‘½ä»¤è¡Œä¸­ä½¿ç”¨ rustfmt main.rs æŸ¥çœ‹æ ¼å¼åŒ–åçš„ä»£ç , å¦‚æœä½ çš„ä»£ç åŸæ¥æ˜¯ 1fn main() {println!(\"hello, world\");} æ ¼å¼åŒ–ä¹‹åå˜æˆäº† 123fn main() { println!(\"hello, world\");} è€Œå…¶ä¸­çš„ 1println!(\"hello, world\"); åˆ™æ˜¯å‡½æ•°çš„é€»è¾‘, ä¸Šé¢è¯´åˆ°äº†ç¼©è¿›æ˜¯å››ä¸ªç©ºæ ¼ println! æ˜¯rustå†…ç½®çš„å®(macro), ç±»ä¼¼äºå†…ç½®çš„è¯­æ³•, è€Œå¼•å…¥å†…ç½®çš„å‡½æ•°åˆ™æ˜¯ println, è¿™ä¸ªä¹‹åå†è¯´æ˜ \"hello, world\"æ˜¯ä¼ å…¥è¿™ä¸ªå®çš„å‚æ•°, æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸², ç„¶åè¯¥å­—ç¬¦ä¸²å°±ä¼šè¢«è¾“å‡ºåˆ°å‘½ä»¤è¡Œä¸­ rustä¸­ä½¿ç”¨ ; ä½œä¸ºä¸€è¡Œçš„ç»“æŸ, ä»£è¡¨è¿™ä¸ªè¡¨è¾¾å¼ç»“æŸ, ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼å¼€å§‹ ç¼–è¯‘ rustæ˜¯ä¸€é—¨é™æ€è¯­è¨€, ä»–ä¹Ÿæ˜¯éœ€è¦ç¼–è¯‘çš„, è¿˜è®°å¾—æˆ‘ä»¬å†™å®Œååœ¨å‘½ä»¤è¡Œè¾“å…¥ rustc main.rs å—, è¿™å°±æ˜¯åœ¨ç¼–è¯‘ä»£ç , ç¼–è¯‘å®Œæˆåä¼šç”Ÿæˆç¼–è¯‘å¹³å°å¯æ‰§è¡Œçš„æ–‡ä»¶ hello, cargo è®¤è¯†cargo cargo æ˜¯rustçš„æ„å»ºç³»ç»Ÿå’Œä¾èµ–ç®¡ç†å·¥å…·, ç±»ä¼¼äºgolangçš„ go mod åœ¨å®é™…çš„ç¼–å†™é¡¹ç›®ä¸­, å¸¸å¸¸éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹çš„å‡½æ•°, æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦ cargo æ¥å¸®åŠ©æˆ‘ä»¬ç®¡ç† cargoåœ¨å®‰è£… rust æ—¶å°±å·²ç»å®‰è£…åˆ°äº†ä½ çš„ç”µè„‘ä¸­ ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ 1cargo --version æ¥æŸ¥çœ‹cargoçš„ç‰ˆæœ¬, ä¾‹å¦‚ cargo 1.42.0 (86334295e 2020-01-31) ä½¿ç”¨cargoå»ºç«‹é¡¹ç›® æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ cargo æ¥å»ºç«‹æ–°é¡¹ç›®, è€Œä¸æ˜¯æ‰‹åŠ¨å»ºç«‹æ–‡ä»¶å¤¹ 12345âœ student lsâœ student cargo new hello_cargo Created binary (application) `hello_cargo` packageâœ student lshello_cargo å¯ä»¥çœ‹åˆ°, åœ¨æ‰§è¡Œ cargo new hello_cargo ä¹‹å, åŸæœ¬ç©ºçš„æ–‡ä»¶å¤¹ä¸‹å‡ºç°äº† hello_cargo æ–‡ä»¶å¤¹, è¿™ä¸æˆ‘ä»¬æ‰§è¡Œ new æ—¶çš„è¾“å…¥æ˜¯ç›¸åŒçš„ æˆ‘ä»¬çš„é¡¹ç›®å°±åœ¨è¿™é‡Œ é‡Œé¢å·²ç»å¤šäº†å‡ ä¸ªæ–‡ä»¶, ç›®å½•æ ‘å¦‚ä¸‹ 12345678910111213141516171819.â”œâ”€â”€ .gitâ”‚ â”œâ”€â”€ HEADâ”‚ â”œâ”€â”€ configâ”‚ â”œâ”€â”€ descriptionâ”‚ â”œâ”€â”€ hooksâ”‚ â”‚ â””â”€â”€ README.sampleâ”‚ â”œâ”€â”€ infoâ”‚ â”‚ â””â”€â”€ excludeâ”‚ â”œâ”€â”€ objectsâ”‚ â”‚ â”œâ”€â”€ infoâ”‚ â”‚ â””â”€â”€ packâ”‚ â””â”€â”€ refsâ”‚ â”œâ”€â”€ headsâ”‚ â””â”€â”€ tagsâ”œâ”€â”€ .gitignoreâ”œâ”€â”€ Cargo.tomlâ””â”€â”€ src â””â”€â”€ main.rs å¯ä»¥çœ‹åˆ°, cargoä¼šåœ¨ hello-cargo ä¸‹åˆå§‹åŒ– git, å¹¶ä¸”ä¸ºæˆ‘ä»¬ç”Ÿæˆäº† .gitignore å¿½ç•¥æ–‡ä»¶, å…¶ä¸­é»˜è®¤å¿½ç•¥äº† /target ç›®å½•, æˆ‘ä»¬ä¹‹åå†ä»‹ç»è¿™ä¸ªæ–‡ä»¶å¤¹ åŒæ—¶ç”Ÿæˆäº† cargo.toml æ–‡ä»¶, tomlæ ¼å¼æ˜¯ä¸€ç§é…ç½®æ–‡ä»¶çš„æ ¼å¼, ä»–çš„å†…å®¹å¤§è‡´å¦‚ä¸‹ 123456789[package]name = \"hello_cargo\"version = \"0.1.0\"authors = [\"example &lt;example@example.com&gt;\"]edition = \"2018\"# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html[dependencies] å…¶ä¸­, packageä¸‹ä¸ºé¡¹ç›®çš„ä¿¡æ¯, nameä¸ºé¡¹ç›®å, versionä¸ºç‰ˆæœ¬, authorsä¸ºåˆ›å»ºäºº(è¯»å–gitçš„ä¿¡æ¯), editionè¿™ä¸ªé¡¹ç›®åˆ›å»ºæ—¶çš„å¤§ç‰ˆæœ¬å·, ç›®å‰æ˜¯2018 é‡Œé¢çš„Valueå†…å®¹æ˜¯å¯ä»¥ä¿®æ”¹çš„, å¦‚æœä¿¡æ¯ä¸å‡†ç¡®ä½ å¯ä»¥æ‰‹åŠ¨è¿›è¡Œä¿®æ”¹ æˆ‘ä»¬çœŸæ­£çš„ä»£ç åœ¨ src/main.rs ä¸­, é‡Œé¢å·²ç»é»˜è®¤æ·»åŠ äº† main å‡½æ•° 123fn main() { println!(\"Hello, world!\");} rustå¸Œæœ›ä½ å°†æ‰€æœ‰çš„æºä»£ç æ”¾ç½®åœ¨è¿™ä¸ªsrcç›®å½•ä¸‹, åœ¨æ ¹ç›®å½•åªæ”¾ç½® README.md/ é…ç½®æ–‡ä»¶ ç­‰ä¸æ¶‰åŠåˆ°ä»£ç çš„ä¸œè¥¿ å¦‚æœå½“å‰ç›®å½•å·²ç»åœ¨ git çš„æ§åˆ¶ä¸‹, é‚£ä¹ˆä½¿ç”¨ cargo new é»˜è®¤ä¸ä¼šåˆ›å»ºgitç›¸å…³çš„æ–‡ä»¶, ä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨å‚æ•° --vcs=git æ¥å¼ºåˆ¶åˆ›å»º, æ›´å¤šç”¨æ³•å¯æŸ¥çœ‹ cargo new --help æ‰§è¡Œcargo cargo build åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ 123âœ hello_cargo git:(master) âœ— cargo build Compiling hello_cargo v0.1.0 (/Users/Work/Code/Rust/student/hello_cargo) Finished dev [unoptimized + debuginfo] target(s) in 0.76s æˆ‘ä»¬ä¼šå‘ç°åœ¨ç›®å½•ä¸‹ç”Ÿæˆæ–‡ä»¶å¤¹ /target åœ¨é‡Œé¢çš„ /debug ä¸­åˆ™æœ‰å¯æ‰§è¡Œæ–‡ä»¶ hello_cargo æˆ‘ä»¬æ‰§è¡Œä»– 12âœ hello_cargo git:(master) âœ— ./target/debug/hello_cargoHello, world! æ‰€ä»¥, æˆ‘ä»¬ build åä¼šæŠŠç”Ÿæˆçš„æ–‡ä»¶æ”¾ç½®åœ¨ /target/debug ä¸‹, å½“ç„¶ target ä¸‹è¿˜æœ‰å¾ˆå¤šæ–‡ä»¶, æˆ‘ä»¬ä¹‹åå†è¯´ å½“æŸä¸ªé¡¹ç›®ç¬¬ä¸€æ¬¡build, è¿˜ä¼šåœ¨æ ¹ç›®å½•ç”Ÿæˆ Cargo.lock æ–‡ä»¶, é‡Œé¢ä¼šå­˜æ”¾ä¸€äº›å…·ä½“çš„ä¾èµ–, ä¸€èˆ¬ä¸éœ€è¦æˆ‘ä»¬ä¿®æ”¹ cargo run æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ cargo run æ¥ç›´æ¥è¿è¡Œ build å‡ºçš„ç¨‹åº, ä¸ä¸Šé¢çš„æ–¹å¼æ²¡æœ‰åŒºåˆ« 1234âœ hello_cargo git:(master) âœ— cargo run Finished dev [unoptimized + debuginfo] target(s) in 0.00s Running `target/debug/hello_cargo`Hello, world! æ›´å¼ºå¤§çš„æ˜¯, å¦‚æœä½ ä¿®æ”¹äº†æºä»£ç , æ­¤æ—¶ä½ æ— éœ€æ‰§è¡Œ build, ç›´æ¥æ‰§è¡Œ run å¯è‡ªè¡Œ buildç„¶åæ‰§è¡Œ æ¯”å¦‚æˆ‘ä»¬å°† main.rs ä¿®æ”¹ä¸º 1234fn main() { println!(\"Hello, world!\"); println!(\"Hello, world!\");} ä¿å­˜åç›´æ¥æ‰§è¡Œ cargo run 123456âœ hello_cargo git:(master) âœ— cargo run Compiling hello_cargo v0.1.0 (/Users/Work/Code/Rust/student/hello_cargo) Finished dev [unoptimized + debuginfo] target(s) in 0.27s Running `target/debug/hello_cargo`Hello, world!Hello, world! å¦‚æœä½ äº‹å…ˆæ²¡æœ‰ build, ä¹Ÿå°±æ˜¯æ²¡æœ‰ target æ–‡ä»¶å¤¹, æ‰§è¡Œ cargo runä¹Ÿä¼šè‡ªå·±build cargo check å¦‚æœä½ åªæƒ³ç¡®è®¤ä½ ç¼–å†™çš„ä»£ç æ˜¯å¦å¯ä»¥è¿è¡Œè€Œä¸æƒ³buildå‡ºæ–‡ä»¶, å¯ä»¥æ‰§è¡Œ cargo check, å¯ä»¥åœ¨ä¸ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„å‰æä¸‹æ£€æŸ¥ä½ çš„ä»£ç æ˜¯å¦å¯ä»¥ç¼–è¯‘ 123âœ hello_cargo git:(master) âœ— cargo check Checking hello_cargo v0.1.0 (/Users/chenming/Work/Code/Rust/student/hello_cargo) Finished dev [unoptimized + debuginfo] target(s) in 0.13s cargo release å½“ä½ çš„é¡¹ç›®éœ€è¦å‘å¸ƒæˆ–è€…è¿å‡ºç¨³å®šç‰ˆçš„æ—¶å€™, ä½¿ç”¨ cargo build --release , ä¸æ™®é€šçš„buildä¸åŒçš„æ˜¯, è¯¥æ“ä½œä¼šä¼˜åŒ–ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶, æé«˜æ‰§è¡Œé€Ÿåº¦ç­‰ç­‰, å½“ç„¶, å› ä¸ºä¼˜åŒ–åŸå› , release çš„è€—æ—¶ä¼šæ¯”æ™®é€šçš„ build æ…¢ä¸€äº›, ç¼–è¯‘å®Œæˆåä¼šæ”¾ç½®åœ¨ /target/release æ–‡ä»¶å¤¹ä¸‹, å»ºè®®æ¯æ¬¡å‘å¸ƒæ—¶éƒ½é‡‡ç”¨æ­¤æ–¹å¼ç¼–è¯‘ ä»£ç æ ¼å¼åŒ– ä¹‹å‰æåˆ°å¯¹æŸä¸€ä¸ª rs æ–‡ä»¶æ ¼å¼åŒ–ä»£ç ä½¿ç”¨ rustfmt xx.rs å¦‚æœå¯¹æ•´ä¸ªé¡¹ç›®éƒ½æ ¼å¼åŒ–, ä½¿ç”¨ cargo fmt å³å¯ å¦‚æœä½ åªæƒ³æŸ¥çœ‹å“ªäº›æ˜¯éœ€è¦æ ¼å¼åŒ–çš„è€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹å¥½æ–‡ä»¶, ä½¿ç”¨ cargo fmt -- --check å³å¯ æœ€å¥½å¯¹æ¯ä¸ªé¡¹ç›®éƒ½æ˜¯ç”¨targoæ¥ç®¡ç†, è¿™æ ·å¯¹é¡¹ç›®æ¥è®²æ˜¯æœ€å¥½çš„ è®¾è®¡çŒœè°œæ¸¸æˆç¨‹åº è¿™ä¸ªç¨‹åºçš„æµç¨‹æ˜¯, ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•°å­—, ç„¶åç¨‹åºè‡ªå·±éšæœºå‡ºä¸€ä¸ªæ•°å­—, å°†è¿™ä¸¤ä¸ªæ•°å­—è¿›è¡Œå¯¹æ¯” å»ºç«‹æ–°é¡¹ç›® ä½¿ç”¨ cargo å»ºç«‹æ–°é¡¹ç›®å¹¶è¿›å…¥ç›®å½• 12345âœ student cargo new guessing_game Created binary (application) `guessing_game` packageâœ student lsguessing_gameâœ student cd guessing_game æ­¤æ—¶åœ¨ /src/main.rs ä¸­å·²ç»æœ‰ä¸€ä¸ª main å‡½æ•°äº†, æˆ‘ä»¬ä¿®æ”¹ main å‡½æ•° å¤„ç†ç”¨æˆ·è¾“å…¥çš„æ•°å­— æˆ‘ä»¬å°†ä»£ç ä¿®æ”¹æˆä¸‹é¢çš„ 12345678910use std::io; // å¼•å…¥æ ‡å‡†åº“fn main() { println!(\"è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: \"); // æ‰“å° let mut guess = String::new(); // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡guess io::stdin() // è°ƒç”¨stdin .read_line(&amp;mut guess) // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š println!(\"ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: {}\", guess) // è¾“å‡ºè·å–åˆ°çš„è¾“å…¥} å€¼å¾—æ³¨æ„çš„æ˜¯, rustçš„æ³¨é‡Šæ˜¯ //, ä»–ä¸ä¼šç¼–è¯‘//åçš„å†…å®¹ç›´åˆ°æœ¬è¡Œçš„ç»“å°¾ è¿™æ®µä»£ç çš„ç›®çš„æ˜¯è¯»å–ç”¨æˆ·è¾“å…¥çš„æ•°å­—å¹¶è¾“å‡º åœ¨ç¬¬ä¸€è¡Œ, æˆ‘ä»¬ä½¿ç”¨ use è¯­æ³•æ¥å¼•å…¥æ ‡å‡†åº“ std::io, ç±»ä¼¼äºPython/Goçš„import æˆ‘ä»¬é¦–å…ˆåœ¨è¾“å…¥æ¡†ä¸­è¾“å‡ºæç¤º è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: let åœ¨ç¬¬5è¡Œ, æˆ‘ä»¬ä½¿ç”¨ let æ¥åˆ›å»ºä¸€ä¸ª å˜é‡, ä½†æ˜¯ä¸å…¶ä»–è¯­è¨€ä¸åŒçš„æ˜¯, å¦‚æœä½ åªæ˜¯ä½¿ç”¨ let, é‚£ä¹ˆä½ åˆ›å»ºçš„å˜é‡çš„å€¼æ˜¯ä¸å¯å˜çš„, ä¾‹å¦‚ä»¥ä¸‹ä»£ç  12let a = \"1212\";a = \"1111\" ; æˆ‘ä»¬ä½¿ç”¨ cargo check æ¥æ£€æŸ¥ä¼šçˆ†å‡ºé”™è¯¯ 123456789101112error[E0384]: cannot assign twice to immutable variable `a` --&gt; src/main.rs:5:5 |4 | let a = \"1212\"; | - | | | first assignment to `a` | help: make this binding mutable: `mut a`5 | a = \"1111\" ; | ^^^^^^^^^^ cannot assign twice to immutable variableerror: aborting due to previous error å‘Šè¯‰æˆ‘ä»¬ä¸èƒ½å¯¹ä¸å¯å˜çš„å˜é‡è¿›è¡ŒäºŒæ¬¡èµ‹å€¼ æ‰€ä»¥, å¦‚æœè¿™ä¸ªå˜é‡åœ¨ä»¥åéœ€è¦é‡æ–°èµ‹å€¼, æˆ‘ä»¬éœ€è¦ä½¿ç”¨ let mut 12let mut a = \"1212\";a = \"1111\" ; å¯¹äºæ–°å»ºå˜é‡æ¥è¯´, è¿˜æ˜¯è¦æ ¹æ®ç”¨é€”æ¥è¿›è¡Œè®¾è®¡ 12let mut a = \"1212\"; // å¯å˜å˜é‡let b = \"dddd\" // ä¸å¯å˜å˜é‡ å›åˆ°ä»£ç ä¸­, æˆ‘ä»¬çœ‹åˆ°, æˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªå¯å˜å˜é‡ guess, ä»–çš„å€¼æ˜¯ String::new() , ä»£è¡¨ç€ä½¿ç”¨äº† String çš„new æ–¹æ³•, ç”Ÿæˆäº†ä¸€ä¸ª String å®ä¾‹, String ä»£è¡¨ç€ rust çš„å­—ç¬¦ä¸²ç±»å‹, é‚£ä¹ˆ, String::new()ä»£è¡¨ç”Ÿæˆäº†ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„åˆå§‹å€¼, ä¹Ÿå°±æ˜¯ç©ºå­—ç¬¦ä¸² ::new ä»£è¡¨è°ƒç”¨ new æ–¹æ³•, newå¯¹äºString æ¥è¯´æ˜¯å…³è”å‡½æ•°(associated function) , é€šå¸¸æˆ‘ä»¬è®¤ä¸ºnewæ˜¯String çš„é™æ€æ–¹æ³•, ä¸€äº›é¢å‘å¯¹è±¡çš„è¯­è¨€é€šå¸¸éƒ½æœ‰è¿™ä¸ªæ¦‚å¿µ, æŒ‡çš„æ˜¯ç±»è‡ªæœ‰çš„æ–¹æ³•, è€Œä¸éœ€è¦å¯¹è±¡å»è°ƒç”¨ åœ¨ rust ä¸­, æ–°å»ºä¸€ä¸ªæ–°çš„ç±»å‹çš„åˆå§‹å€¼é€šå¸¸ä½¿ç”¨ ::new 123io::stdin() // è°ƒç”¨stdin .read_line(&amp;mut guess) // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š è¿™ä¸‰è¡Œä»£ç å…¶å®æ˜¯ä¸€æ¡è¯­å¥, æˆ‘ä»¬ä¹‹å‰æåˆ°, ; ä»£è¡¨ä¸€æ®µä»£ç çš„ç»“æŸ, æ‰€ä»¥rustä¼šå°†è¿™ä¸‰è¡Œåˆå¹¶æˆä¸€æ¡è¯­å¥æ¥è§£æ, æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿™ä¸‰è¡Œç¼©çŸ­ä¸º, è¿™æ ·ä¼šå‡å°‘ä»£ç çš„å¯è¯»æ€§ 1io::stdin().read_line(&amp;mut guess).expect(\"è¯»å–å¤±è´¥\"); è¿™æ®µä»£ç çš„æ„æ€æ˜¯è°ƒç”¨ io æ¨¡å—çš„é™æ€æ–¹æ³• stdin, æ­¤æ–¹æ³•å›ä¼ ä¸€ä¸ªå®ä¾‹ stdin, åŒ¹é…æ ‡å‡†è¾“å…¥æ§åˆ¶ ç„¶åç»§ç»­è°ƒç”¨å®ä¾‹çš„ read_line æ–¹æ³•, æ­¤æ–¹æ³•å¯¹æ ‡å‡†è¾“å…¥ä»£ç æ‰§è¡Œ read_line å‘½ä»¤, æ¥è·å–ä½¿ç”¨è€…çš„è¾“å…¥ä¿¡æ¯, æˆ‘ä»¬è¿˜å°†ç”Ÿæˆçš„å¯å˜å˜é‡ guess ä¼ é€’è¿›å», ä»£è¡¨å°†ç”¨æˆ·è¾“å…¥çš„ç»“æœä¼ é€’ç»™ guess &amp; ä»£è¡¨è¿™ä¸ªå‚æ•°æ˜¯å¼•ç”¨(reference) , è¿™è®©ä»£ç ä¸­çš„å¤šä¸ªéƒ¨åˆ†å…±äº«ä¸€ä¸ªå€¼, ä¸éœ€è¦æ¯æ¬¡éƒ½å¤åˆ¶å€¼åˆ°ä¸€ä¸ªæ–°çš„åœ°å€, å¼•ç”¨æ˜¯ä¸ªå¤æ‚çš„æ¦‚å¿µ, rust å¯ä»¥è®©ä½ å®‰å…¨åˆè½»æ¾çš„ä½¿ç”¨å¼•ç”¨, è¿™ä¸ªä¹‹åå†è®², ä½ ç°åœ¨éœ€è¦çŸ¥é“çš„æ˜¯, å¼•ç”¨é»˜è®¤ä¹Ÿæ˜¯ä¸å¯å˜çš„, å› æ­¤åœ¨åé¢åŠ ä¸Š mut ä»£è¡¨è¿™ä¸ªæ˜¯å¯å˜å¼•ç”¨, å› æ­¤ä½ å¿…é¡»å†™ &amp;mut guess è€Œä¸æ˜¯ &amp;guess ä½¿ç”¨Resultç±»å‹å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯ .expect(\"è¯»å–å¤±è´¥\"); è¿™ä¸ªä»£ç å¤„ç†äº† read_line æ–¹æ³•å¯èƒ½å‡ºç°çš„é”™è¯¯, å› ä¸º read_line è¿”å›äº† io::Result å¯¹è±¡, åœ¨ rust ä¸­æœ‰å¾ˆå¤šåº“éƒ½æœ‰ Resultç±», Resultå®é™…ä¸Šæ˜¯ç§æšä¸¾(enumerations/enums), æšä¸¾æ˜¯æ‹¥æœ‰å›ºå®šçš„å€¼çš„ç±»å‹, è¿™äº›å€¼è¢«ç§°ä¸ºæšä¸¾çš„å˜ä½“(variants), å¯¹äºResult æ¥è¯´, å˜ä½“æœ‰ ok å’Œ Error, okä»£è¡¨æˆåŠŸ, error ä»£è¡¨å¤±è´¥, è¿”å› Result çš„ç›®çš„æ˜¯è®©ä½¿ç”¨è€…åœ¨é”™è¯¯å‘ç”Ÿæ—¶å»å¤„ç†è¿™ä¸ªé—®é¢˜, io::Result è‡ªå¸¦äº†æ–¹æ³• expect, å½“Resultè¿”å› æ—¶ä¾¿ä¼šè§¦å‘ expect, å¦‚æœæ˜¯ ok åˆ™ä»£è¡¨æ²¡æœ‰å‡ºç°é—®é¢˜, expect ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œä»»ä½•æ“ä½œ å½“æˆ‘ä»¬ä¸å¯¹ expect è¿›è¡Œæ•æ‰, æˆ‘ä»¬åœ¨ç¼–è¯‘æ—¶å°±ä¼šå‡ºç°å¦‚ä¸‹è­¦å‘Š 1234567891011use std::io; // å¼•å…¥æ ‡å‡†åº“fn main() { println!(\"è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: \"); // æ‰“å° let mut guess = String::new(); // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡guess io::stdin() // è°ƒç”¨å‡½æ•°stdin .read_line(&amp;mut guess); // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ // .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š println!(\"ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: {}\", guess) // è¾“å‡ºè·å–åˆ°çš„è¾“å…¥} 12345678910111213âœ guessing_game git:(master) âœ— cargo build Compiling guessing_game v0.1.0 (/Users/Work/Code/Rust/student/guessing_game)warning: unused `std::result::Result` that must be used --&gt; src/main.rs:6:5 |6 | / io::stdin() // è°ƒç”¨å‡½æ•°stdin7 | | .read_line(&amp;mut guess); // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ | |_______________________________^ | = note: `#[warn(unused_must_use)]` on by default = note: this `Result` may be an `Err` variant, which should be handled Finished dev [unoptimized + debuginfo] target(s) in 0.62s æç¤ºä½ æ²¡æœ‰å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯, è¿™é‡Œæˆ‘ä»¬å…ˆæ·»åŠ  expect ä¿è¯å…¶ç¼–è¯‘æ—¶ä¸è­¦å‘Š, è‡³äºæ€ä¹ˆå»ä½¿ç”¨ expect æˆ‘ä»¬ä¹‹åå†è¯´ println!æ‰“å°è¾“å…¥çš„æ•°å­— 1println!(\"ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: {}\", guess) // è¾“å‡ºè·å–åˆ°çš„è¾“å…¥ è¿™é‡Œæ˜¯å°†ç”¨æˆ·è¾“å…¥çš„æ•°å­—æ‰“å°å‡ºæ¥, {}ä»£è¡¨å ä½ç¬¦, å°† guess çš„å€¼å¡«å……åˆ° {} ä¸­, {} å¯ä»¥å¤šä¸ª, ä¾‹å¦‚ 1234let x = 5;let y = 10;println!(\"x = {} è€Œä¸” y = {}\", x, y); è¾“å‡º 1x = 5 è€Œä¸” y = 10 è¿è¡Œç¬¬ä¸€ä¸ªéƒ¨åˆ† æ˜¾ç„¶çš„, ç¨‹åºè¿˜æ²¡æœ‰ç¼–å†™å®Œæˆ, ç›®å‰åªèƒ½è·å–åˆ°ç”¨æˆ·çš„è¾“å…¥å¹¶æ‰“å°å‡ºæ¥ 1234567âœ guessing_game git:(master) âœ— cargo run Compiling guessing_game v0.1.0 (/Users/Work/Code/Rust/student/guessing_game) Finished dev [unoptimized + debuginfo] target(s) in 0.60s Running `target/debug/guessing_game`è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: 3ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: 3 ç”Ÿæˆéšæœºçš„ç§˜å¯†æ•°å­— æ—¢ç„¶æ˜¯çŒœè°œæ¸¸æˆ, é‚£ä¹ˆç³»ç»Ÿéœ€è¦ç”Ÿæˆä¸€ä¸ªéšæœºçš„æ•°å­—æ¥è¿›è¡Œæ¯”å¯¹å†³å®šå¯¹é”™ ä½¿ç”¨Crateæ¥è·å–æ›´å¤šåŠŸèƒ½ crate.io æ˜¯rustå®˜æ–¹çš„ä»“åº“, é‡Œé¢æ˜¯rustå„ç§å„æ ·çš„åŒ…(ç±»ä¼¼Pythonçš„pypi), æˆ‘ä»¬éœ€è¦ä½¿ç”¨å…¶ä¸­çš„ä¸€ä¸ªåŒ… rand æ¥å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆéšæœºæ•°å­— å¦‚ä½•å°†randæ·»åŠ è¿›æˆ‘ä»¬çš„é¡¹ç›®å‘¢? æˆ‘ä»¬æ‰¾åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„Cargo.toml æ–‡ä»¶, å¹¶ç¼–è¾‘ 12345678910[package]name = \"guessing_game\"version = \"0.1.0\"authors = [\"xx &lt;xx@Outlook.com&gt;\"]edition = \"2018\"# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html[dependencies]rand = \"0.5\" æˆ‘ä»¬åœ¨ [dependencies] ä¸‹æ–°å¢åŒ… rand è®¾ç½®å…¶ç‰ˆæœ¬ä¸º 0.5 ,è¿™ä»£è¡¨é™åˆ¶randçš„ç‰ˆæœ¬åœ¨0.5`ä¸­, é¿å…å‡ºç°å…¼å®¹é—®é¢˜ ç„¶åæˆ‘ä»¬ä½¿ç”¨ cargo build èƒ½çœ‹åˆ°cargoè‡ªåŠ¨ä¸‹è½½äº†æˆ‘ä»¬æŒ‡å®šçš„åŒ…, å¦‚æœæˆ‘ä»¬æŒ‡å®šçš„åŒ…éœ€è¦ä¾èµ–å…¶ä»–çš„åŒ…, cargoä¹Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ä¸‹è½½(æ¯”å¦‚ä¸‹é¢çš„ rand_core) 123456âœ guessing_game git:(master) âœ— cargo build Updating crates.io index Downloaded rand v0.5.6 Downloaded rand_core v0.3.1 ...... Finished dev [unoptimized + debuginfo] target(s) in 11.13s crate.ioå—ç½‘ç»œå½±å“, åœ¨å›½å†…å¯èƒ½ä¼šå‡ºç°é€šä¿¡é—®é¢˜, å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æºæ¯”å¦‚USTC å¦‚æœä½ å‡ºç°Blocking waiting for file lock on package cacheé”™è¯¯, å°è¯•åˆ é™¤ ~/.cargo/.package-cache æ–‡ä»¶ é€šè¿‡Cargo.lockç¡®ä¿é¡¹ç›®ä¾èµ–çš„æ­£ç¡®æ€§ å½“æˆ‘ä»¬é€šè¿‡ cargo å®‰è£…æ–°çš„ä¾èµ–å, æˆ‘ä»¬ä¼šå‘ç° Cargo.lock æ–‡ä»¶ä¹Ÿå‘ç”Ÿäº†å˜åŒ–, å¢åŠ äº†æˆ‘ä»¬æ·»åŠ çš„ä¾èµ–çš„å…·ä½“çš„ä¿¡æ¯, æ¯”å¦‚ 123456789101112[[package]]name = \"rand\"version = \"0.5.6\"source = \"registry+https://github.com/rust-lang/crates.io-index\"checksum = \"c618c47cd3ebd209790115ab837de41425723956ad3ce2e6a7f09890947cacb9\"dependencies = [ \"cloudabi\", \"fuchsia-cprng\", \"libc\", \"rand_core 0.3.1\", \"winapi\",] cargoé€šè¿‡è¯¥æ–‡ä»¶æ¥ä¿è¯ä¾èµ–çš„å®Œæ•´æ€§å’Œå‡†ç¡®æ€§, å½“æˆ‘ä»¬è”åˆå¼€å‘æ—¶, åªè¦å°† Cargo.lock Cargo.toml ä¸Šä¼ è‡³é¡¹ç›®ä¸­, é€šè¿‡ cargo build å³å¯ä¸‹è½½åŒæ ·çš„ä¾èµ– å‡çº§Crateä¾èµ– å¦‚æœä¾èµ–æœ‰å°ç‰ˆæœ¬çš„å‡çº§, è¿™é€šå¸¸æ˜¯ä¿®å¤BUGå’Œæé«˜æ€§èƒ½, ä½¿ç”¨ cargo update å¯ä»¥æ›´æ–°ä¾èµ–, cargoä¼šæ ¹æ® cargo.toml çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬å‡çº§å…¼å®¹è¯¥ç‰ˆæœ¬çš„å°ç‰ˆæœ¬æ›´æ–°, ç„¶åæ›´æ–° cargo.toml å’Œ cargo.lock ä¸­çš„å†…å®¹ ä¾‹å¦‚ ä½ æŒ‡å®šäº†rand ç‰ˆæœ¬ä¸º rand=0.8 åˆ™å¦‚æœå½“å‰çš„ç‰ˆæœ¬æ˜¯ 0.8.3 æ–°ç‰ˆæœ¬æ˜¯ 0.8.5ä¼šè‡ªåŠ¨æ›´æ–° å¦‚æœæ–°ç‰ˆæœ¬ä¸º 0.9.1 åˆ™ä¸ä½ æŒ‡å®šçš„ç‰ˆæœ¬ä¸åŒ, åˆ™ä¸æ›´æ–° å¦‚æœä½ æƒ³æ›´æ–°åˆ° 0.9 ç‰ˆæœ¬, éœ€æ‰‹åŠ¨çš„ç¼–è¾‘ toml æ–‡ä»¶ç„¶åæ‰§è¡Œ update, ä½†æ˜¯å› ä¸ºå¤§ç‰ˆæœ¬çš„æ›´æ–°å¯èƒ½ä¼´éšç€åŠŸèƒ½çš„ä¿®æ”¹, å¿…é¡»è¦åœ¨æ‰‹åŠ¨å‡çº§å‰ç¡®è®¤æ–°ç‰ˆæœ¬çš„å…¼å®¹æ€§ ç”Ÿæˆéšæœºæ•°å­— ä¿®æ”¹ä»£ç ä¸º 12345678910111213use std::io; // å¼•å…¥æ ‡å‡†åº“use rand::Rng;fn main() { println!(\"è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: \"); // æ‰“å° let secret_number = rand::thread_rng().gen_range(1, 101); // éšæœºç”Ÿæˆä¸€ä¸ª1-100çš„æ•°å­— println!(\"ç”Ÿæˆçš„æ•°å­—æ˜¯: {}\", secret_number); // æ‰“å°ç”Ÿæˆçš„æ•°å­— let mut guess = String::new(); // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡guess io::stdin() // è°ƒç”¨å‡½æ•°stdin .read_line(&amp;mut guess) // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š println!(\"ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: {}\", guess) // è¾“å‡ºè·å–åˆ°çš„è¾“å…¥} æ³¨æ„åˆ°æˆ‘ä»¬æ–°å¢äº†ä¸¤è¡Œä»£ç  1234 use rand::Rng; ....let secret_number = rand::thread_rng().gen_range(1, 101); // éšæœºç”Ÿæˆä¸€ä¸ª1-100çš„æ•°å­— println!(\"ç”Ÿæˆçš„æ•°å­—æ˜¯: {}\", secret_number); // æ‰“å°ç”Ÿæˆçš„æ•°å­— åœ¨æœ€å¼€å§‹, æˆ‘ä»¬å¼•å…¥äº†æ–°çš„æ¨¡å—, rand::Rng, éœ€è¦æ³¨æ„çš„æ˜¯, æˆ‘ä»¬åœ¨ä¸‹é¢ä½¿ç”¨ rand çš„æ—¶å€™å¹¶æ²¡æœ‰ä½¿ç”¨ Rng, å®é™…ä¸Šè¿™ä¸ª Rng è¢«ç§°ä½œ ç‰¹å¾(trait) å®ƒå®šä¹‰äº†æ•°å­—ç”Ÿæˆå™¨çš„å·¥ä½œæ–¹æ³•, å¿…é¡»å°†å…¶å¼•å…¥æ‰å¯ä»¥æ­£å¸¸ç”Ÿæˆæ•°å­—, å…³äºç‰¹å¾çš„æ›´å¤šæƒ…å†µ, æˆ‘ä»¬ä¹‹åå†åšè®²è§£ é‡è¦çš„æ˜¯ç”Ÿæˆéšæœºæ•°å­—è¿™ä¸€æ®µ, æˆ‘ä»¬ä½¿ç”¨ randåŒ…çš„thread_rngæ–¹æ³•, è¿™ä¼šè¿”å›ä¸€ä¸ªéšæœºæ•°å­—çš„ç”Ÿæˆå™¨, ä»¥å½“å‰çš„å·¥ä½œè¿›ç¨‹åšä¸ºç§å­, ç„¶åæˆ‘ä»¬è°ƒç”¨è¿™ä¸ªç”Ÿæˆå™¨çš„ gen_range æ–¹æ³•, è¿™ä¸ªæ–¹æ³•æ˜¯ç”±æˆ‘ä»¬å¼•å…¥çš„ Rng å®šä¹‰çš„, ä»–æ¥å—ä¸¤ä¸ªå‚æ•°, æœ€å¤§å€¼å’Œæœ€å°å€¼, æˆ‘ä»¬ä¼ å…¥ 1, 101 ä»£è¡¨ç”Ÿæˆ 1-100çš„æ•°å­—, ä»–æ˜¯é¡¾å¤´ä¸é¡¾å°¾çš„, æ‰€ä»¥æˆ‘ä»¬è¦å¡«åˆ°101 æˆ‘ä»¬å°†å…¶æ‰“å°å‡ºæ¥è¿è¡Œ, ç›®çš„æ˜¯æµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸, äº‹å®ä¸Šç¨‹åºå¹¶æœªå®Œæˆ 12345678âœ guessing_game git:(master) âœ— cargo run Compiling guessing_game v0.1.0 (/Users/Work/Code/Rust/student/guessing_game) Finished dev [unoptimized + debuginfo] target(s) in 0.51s Running `target/debug/guessing_game`è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: ç”Ÿæˆçš„æ•°å­—æ˜¯: 61ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: 1 å°†çŒœæµ‹çš„æ•°å­—ä¸ç”Ÿæˆçš„æ•°å­—è¿›è¡Œæ¯”è¾ƒ åœ¨ä¸Šé¢, æˆ‘ä»¬ç”Ÿæˆäº†æ•°å­—å¹¶è·å–åˆ°äº†ç”¨æˆ·è¾“å…¥çš„æ•°å­—, è¿™ä¸€æ­¥æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªæ•°å­—è¿›è¡Œæ¯”è¾ƒ 12345678910111213141516171819use std::io; // å¼•å…¥æ ‡å‡†åº“use rand::Rng;use std::cmp::Ordering;fn main() { println!(\"è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: \"); // æ‰“å° let secret_number = rand::thread_rng().gen_range(1, 101); // éšæœºç”Ÿæˆä¸€ä¸ª1-100çš„æ•°å­— println!(\"ç”Ÿæˆçš„æ•°å­—æ˜¯: {}\", secret_number); // æ‰“å°ç”Ÿæˆçš„æ•°å­— let mut guess = String::new(); // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡guess io::stdin() // è°ƒç”¨å‡½æ•°stdin .read_line(&amp;mut guess) // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š println!(\"ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: {}\", guess); // è¾“å‡ºè·å–åˆ°çš„è¾“å…¥ match guess.cmp(&amp;secret_number){ Ordering::Less =&gt; println!(\"å¤ªå°äº†\"), Ordering::Greater =&gt; println!(\"å¤ªå¤§äº†\"), Ordering::Equal =&gt; println!(\"æ­£ç¡®\"), }} æˆ‘ä»¬å…ˆå¼•å…¥äº† std::cmp::Ordering , Orderingæ˜¯ä¸€ä¸ªæšä¸¾, å…¶å˜ä½“ä¸º Less, Greater, Equal. å½“ä½ å¯¹ä¸¤ä¸ªæ•°å­—è¿›è¡Œæ¯”è¾ƒæ—¶ä¼šæœ‰è¿™ä¸‰ç§ç»“æœ cmpæ–¹æ³•ä¼šå¯¹æ•°å­—è¿›è¡Œæ¯”è¾ƒ, æˆ‘ä»¬ä¼ å…¥å¼•ç”¨ secret_number , ç›®çš„æ˜¯å°† guess ä¸ secret_number è¿›è¡Œæ¯”è¾ƒ, ä»–ä¼šå›ä¼ æˆ‘ä»¬å¼•å…¥çš„ Ordering å˜ä½“ match æœ‰æ—¶å€™, æˆ‘ä»¬éœ€è¦å¯¹æŸä¸ªæšä¸¾çš„å˜ä½“è¿›è¡Œåˆ†åˆ«å¤„ç†, æ¯”å¦‚è¿™é‡Œ, æˆ‘ä»¬æ ¹æ®æ•°å­—æ¯”è¾ƒç»“æœæ¥æç¤ºç”¨æˆ·æ•°å­—çš„èŒƒå›´ æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ match è¯­æ³• match ç”±**åˆ†æ”¯(arms)ç»„æˆ, æ¯ä¸ªåˆ†æ”¯åŒ…å«ä¸€ä¸ªæ¨¡å¼(pattern)**å’Œä»–çš„å¤„ç†é€»è¾‘, å½“åŒ¹é…åˆ°è¿™ä¸ªæ¨¡å¼, å°±ä¼šæ‰§è¡Œå¯¹åº”çš„é€»è¾‘. åœ¨æ‰§è¡Œå®Œæ¯•ååˆ™é€€å‡º math ä¸å†è¿›è¡Œä¸‹é¢çš„åŒ¹é…, matchçš„å…·ä½“ç»†èŠ‚ä¼šåœ¨ä¹‹åè®²è§£ ä½†æ˜¯æˆ‘ä»¬è¿è¡Œæ—¶ä¼šå‘ç°ä»–ä¼šæŠ¥é”™ 1234567891011121314151617âœ guessing_game git:(master) âœ— cargo run Compiling guessing_game v0.1.0 (/Users/Work/Code/Rust/student/guessing_game)error[E0308]: mismatched types --&gt; src/main.rs:15:21 |15 | match guess.cmp(&amp;secret_number){ | ^^^^^^^^^^^^^^ expected struct `std::string::String`, found integer | = note: expected reference `&amp;std::string::String` found reference `&amp;{integer}`error: aborting due to previous errorFor more information about this error, try `rustc --explain E0308`.error: could not compile `guessing_game`.To learn more, run the command again with --verbose. è¿™æ˜¯å› ä¸º, guessçš„ç±»å‹æ˜¯å­—ç¬¦ä¸², è€Œsecret_numberæ˜¯æ•°å€¼,è¿™å°±ä¼šå¯¼è‡´ å‹åˆ¥ç„¡æ³•é…å°ï¼ˆmismatched typesï¼‰, rustæ˜¯é™æ€ç±»å‹çš„è¯­è¨€, è¿™ä¸¤ä¸ªæ˜¯æ— æ³•è¿›è¡Œç›´æ¥æ¯”è¾ƒçš„ å…³äºæ•°å€¼, rustæœ‰å¤šä¸ªæ•°å€¼ç±»å‹, åˆ†åˆ«ä¸º i3232ä½å…ƒæ•°å­—, u32æ— ç¬¦å·32ä½å…ƒæ•°å­—, i6464ä½å…ƒæ•°å­—, u6464ä½æ— ç¬¦å·å…ƒæ•°å­—ç­‰ç­‰, é»˜è®¤çš„ç±»å‹ä¸º i32, å› æ­¤ secret_number ä¸º i32 åŒæ—¶æˆ‘ä»¬ä¹Ÿé¢ä¸´ä¸€ä¸ªé—®é¢˜, å°±æ˜¯ç”¨æˆ·è¾“å…¥çš„ä¸æ˜¯æ•°å­—æ€ä¹ˆåŠ æ­¤æ—¶æˆ‘ä»¬éœ€è¦å°†guessè½¬æ¢ä¸ºæ•°å­—, è®©ä»–ä»¬å¯ä»¥æ¯”è¾ƒ, å°†ä»£ç ä¿®æ”¹ä¸º 1234567891011121314151617181920use std::io; // å¼•å…¥æ ‡å‡†åº“use rand::Rng;use std::cmp::Ordering;fn main() { println!(\"è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: \"); // æ‰“å° let secret_number = rand::thread_rng().gen_range(1, 101); // éšæœºç”Ÿæˆä¸€ä¸ª1-100çš„æ•°å­— println!(\"ç”Ÿæˆçš„æ•°å­—æ˜¯: {}\", secret_number); // æ‰“å°ç”Ÿæˆçš„æ•°å­— let mut guess = String::new(); // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡guess io::stdin() // è°ƒç”¨å‡½æ•°stdin .read_line(&amp;mut guess) // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š let guess: u32 = guess.trim().parse().expect(\"è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­—\"); println!(\"ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: {}\", guess); // è¾“å‡ºè·å–åˆ°çš„è¾“å…¥ match guess.cmp(&amp;secret_number){ Ordering::Less =&gt; println!(\"å¤ªå°äº†\"), Ordering::Greater =&gt; println!(\"å¤ªå¤§äº†\"), Ordering::Equal =&gt; println!(\"æ­£ç¡®\"), }} æˆ‘ä»¬æ·»åŠ äº†ä¸€è¡Œ 1let guess: u32 = guess.trim().parse().expect(\"è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­—\"); æ³¨æ„åˆ°, ä¹‹å‰æœ‰å®šä¹‰è¿‡ guess ä¸º string ç±»å‹, è¿™é‡Œæ˜¯å°†ä»–é‡æ–°å®šä¹‰ä¸ºä¸€ä¸ªu32ç±»å‹çš„æ•°å€¼, è¿™åœ¨rustä¸­è¢«ç§°ä¸ºé®è”½(shadow), æˆ‘ä»¬é®è”½äº†åŸæ¥çš„guess, é®è”½è®©æˆ‘ä»¬å¯ä»¥é‡å¤çš„ä½¿ç”¨ä¸€ä¸ªå˜é‡å, guess.trim()å¯ä»¥å»é™¤è¿™ä¸ªå­—ç¬¦ä¸²å‰åçš„ç©ºç™½å’Œæ¢è¡Œ, è€Œ.parse()åˆ™å¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ç±»å‹, åŒæ—¶æˆ‘ä»¬æ•æ‰expect, å¦‚æœè½¬æ¢å¤±è´¥, åˆ™å‘Šè¯‰ç”¨æˆ·å‡ºç°é”™è¯¯äº†, æˆ‘ä»¬æ¥æ‰§è¡Œä»£ç  12345678âœ guessing_game git:(master) âœ— cargo run Finished dev [unoptimized + debuginfo] target(s) in 0.00s Running `target/debug/guessing_game`è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: ç”Ÿæˆçš„æ•°å­—æ˜¯: 54 1ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: 1å¤ªå°äº† 12345678âœ guessing_game git:(master) âœ— cargo run Finished dev [unoptimized + debuginfo] target(s) in 0.00s Running `target/debug/guessing_game`è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: ç”Ÿæˆçš„æ•°å­—æ˜¯: 9ffff111thread 'main' panicked at 'è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­—: ParseIntError { kind: InvalidDigit }', src/main.rs:13:22note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace ä½¿ç”¨æˆ·å¾ªç¯è¾“å…¥ ç›®å‰çš„ç¨‹åº, ç”¨æˆ·è¾“å…¥ä¸€æ¬¡å¤±è´¥åå°±ç»“æŸäº†ç¨‹åº, ä¸ºäº†æå‡ä½“éªŒ, æˆ‘ä»¬éœ€è¦è®©ç”¨æˆ·å¯ä»¥å¾ªç¯è¾“å…¥ loop loopè¯­æ³•å¯ä»¥ç”Ÿæˆä¸€ä¸ªæ­»å¾ªç¯, æˆ‘ä»¬å°†ä»£ç ä¿®æ”¹ä¸º 12345678910111213141516171819202122use std::io; // å¼•å…¥æ ‡å‡†åº“use rand::Rng;use std::cmp::Ordering;fn main() { let secret_number = rand::thread_rng().gen_range(1, 101); // éšæœºç”Ÿæˆä¸€ä¸ª1-100çš„æ•°å­— println!(\"ç”Ÿæˆçš„æ•°å­—æ˜¯: {}\", secret_number); // æ‰“å°ç”Ÿæˆçš„æ•°å­— loop{ println!(\"è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: \"); // æ‰“å° let mut guess = String::new(); // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡guess io::stdin() // è°ƒç”¨å‡½æ•°stdin .read_line(&amp;mut guess) // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š let guess: u32 = guess.trim().parse().expect(\"è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­—\"); println!(\"ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: {}\", guess); // è¾“å‡ºè·å–åˆ°çš„è¾“å…¥ match guess.cmp(&amp;secret_number){ Ordering::Less =&gt; println!(\"å¤ªå°äº†\"), Ordering::Greater =&gt; println!(\"å¤ªå¤§äº†\"), Ordering::Equal =&gt; println!(\"æ­£ç¡®\"), } }} loopæ˜¯ä¸€ä¸ªæ­»å¾ªç¯, å› æ­¤æˆ‘ä»¬ä¸åœçš„è¾“å…¥æ•°å­—å»æ¯”è¾ƒ, é€€å‡ºçš„æ–¹æ³•åªæœ‰å¼ºåˆ¶å…³é—­ç¨‹åºæ¯”å¦‚ ctrl+c, æˆ–è€…è¾“å…¥ä¸€ä¸ªæ— æ³•è§£æä¸ºæ•°å€¼çš„å­—ç¬¦ä¸²è®©ä»–æŠ¥é”™ 12345678910111213âœ guessing_game git:(master) âœ— cargo run Compiling guessing_game v0.1.0 (/Users/Work/Code/Rust/student/guessing_game) Finished dev [unoptimized + debuginfo] target(s) in 0.40s Running `target/debug/guessing_game`ç”Ÿæˆçš„æ•°å­—æ˜¯: 79è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: 11ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: 11å¤ªå°äº†è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: ffthread 'main' panicked at 'è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­—: ParseIntError { kind: InvalidDigit }', src/main.rs:14:26note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace break æˆ‘ä»¬éœ€è¦åœ¨ç”¨æˆ·çŒœä¸­ä¹‹åè®©ä»–ç»“æŸè¿™ä¸ªæ¸¸æˆ, ä½¿ç”¨ break è¯­æ³•å¯ä»¥é€€å‡ºå¾ªç¯ 12345678910111213141516171819202122232425use std::io; // å¼•å…¥æ ‡å‡†åº“use rand::Rng;use std::cmp::Ordering;fn main() { let secret_number = rand::thread_rng().gen_range(1, 101); // éšæœºç”Ÿæˆä¸€ä¸ª1-100çš„æ•°å­— println!(\"ç”Ÿæˆçš„æ•°å­—æ˜¯: {}\", secret_number); // æ‰“å°ç”Ÿæˆçš„æ•°å­— loop{ println!(\"è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: \"); // æ‰“å° let mut guess = String::new(); // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡guess io::stdin() // è°ƒç”¨å‡½æ•°stdin .read_line(&amp;mut guess) // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š let guess: u32 = guess.trim().parse().expect(\"è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­—\"); println!(\"ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: {}\", guess); // è¾“å‡ºè·å–åˆ°çš„è¾“å…¥ match guess.cmp(&amp;secret_number){ Ordering::Less =&gt; println!(\"å¤ªå°äº†\"), Ordering::Greater =&gt; println!(\"å¤ªå¤§äº†\"), Ordering::Equal =&gt; { println!(\"ä½ çŒœä¸­äº†, æ¸¸æˆç»“æŸ\"); break; }, } }} å½“çŒœä¸­æ—¶, ä½¿ç”¨breaké€€å‡ºå¾ªç¯, å› ä¸ºä¸‹é¢æ²¡æœ‰ä»£ç äº†,å°±ç›´æ¥é€€å‡º 123456789101112âœ guessing_game git:(master) âœ— cargo run Finished dev [unoptimized + debuginfo] target(s) in 0.00s Running `target/debug/guessing_game`ç”Ÿæˆçš„æ•°å­—æ˜¯: 25è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: 11ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: 11å¤ªå°äº†è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: 25ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: 25ä½ çŒœä¸­äº†, æ¸¸æˆç»“æŸ å¯¹é”™è¯¯è¿›è¡Œå¤„ç† ç°åœ¨, ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ— æ³•è½¬æˆæ•°å€¼çš„å­—ç¬¦ä¸²ä¼šå¯¼è‡´ç¨‹åºç»“æŸ, æˆ‘ä»¬ç°åœ¨éœ€è¦å¤„ç†è¿™ä¸ªé”™è¯¯, è®©ä»–åœ¨é”™è¯¯æ—¶é‡æ–°è¾“å…¥, ä¸è®©ä»£ç ç»“æŸ, æˆ‘ä»¬åº”è¯¥å¯¹æ¯ä¸ªé”™è¯¯éƒ½æ•æ‰å¤„ç†, é¿å…ç¨‹åºå…³é—­, è¿™å¯¹æ¯ä¸ªç¨‹åºéƒ½æ˜¯ä¸€æ ·çš„ æˆ‘ä»¬å°†expectçš„å¤„ç†å˜æˆä¸€ä¸ªmatch, å½“åˆ†æ”¯æ£€æµ‹åˆ°Erroræ—¶è¿›è¡Œç‰¹æ®Šçš„å¤„ç† 12345678910111213141516171819202122232425262728293031use std::io; // å¼•å…¥æ ‡å‡†åº“use rand::Rng;use std::cmp::Ordering;fn main() { let secret_number = rand::thread_rng().gen_range(1, 101); // éšæœºç”Ÿæˆä¸€ä¸ª1-100çš„æ•°å­— println!(\"ç”Ÿæˆçš„æ•°å­—æ˜¯: {}\", secret_number); // æ‰“å°ç”Ÿæˆçš„æ•°å­— loop{ println!(\"è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: \"); // æ‰“å° let mut guess = String::new(); // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡guess io::stdin() // è°ƒç”¨å‡½æ•°stdin .read_line(&amp;mut guess) // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š let guess: u32 = match guess.trim().parse() { Ok(num) =&gt; num, Err(_) =&gt; { println!(\"è¾“å…¥äº†ä¸€ä¸ªæ— æ³•è§£æçš„å­—ç¬¦ä¸²\"); continue; }, }; println!(\"ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: {}\", guess); // è¾“å‡ºè·å–åˆ°çš„è¾“å…¥ match guess.cmp(&amp;secret_number){ Ordering::Less =&gt; println!(\"å¤ªå°äº†\"), Ordering::Greater =&gt; println!(\"å¤ªå¤§äº†\"), Ordering::Equal =&gt; { println!(\"ä½ çŒœä¸­äº†, æ¸¸æˆç»“æŸ\"); break; }, } }} æˆ‘ä»¬åœ¨ä¸Šé¢è¯´è¿‡, parseè¿”å›ä¸€ä¸ªæšä¸¾, é‚£æˆ‘ä»¬å°±ä½¿ç”¨matchåˆ¤æ–­è¿™ä¸ªæšä¸¾çš„åˆ†æ”¯, ä»–ä¼šæœ‰ä¸¤ç§æƒ…å†µ, OK å’ŒErr, å¦‚æœæ˜¯OKåˆ™ä»£è¡¨æ­£ç¡®, æˆ‘ä»¬å°†å›ä¼ çš„numåŸæ ·è¿”å›ç»™guess, å¦‚æœErr ä»£è¡¨å¤±è´¥, åœ¨å¤±è´¥æ—¶æˆ‘ä»¬å°±ä¸å…³å¿ƒnumæ˜¯ä»€ä¹ˆäº†, æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨_ æ¥å—, ç„¶åæ‰“å°å‘Šè¯‰ç”¨æˆ·å‡ºç°äº†é”™è¯¯, ä½¿ç”¨breakå…³é”®å­—è·³å‡ºå½“å‰çš„å¾ªç¯ 12345678910111213141516âœ guessing_game git:(master) âœ— cargo run Compiling guessing_game v0.1.0 (/Users/Work/Code/Rust/student/guessing_game) Finished dev [unoptimized + debuginfo] target(s) in 0.44s Running `target/debug/guessing_game`ç”Ÿæˆçš„æ•°å­—æ˜¯: 82è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: 11ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: 11å¤ªå°äº†è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: ffè¾“å…¥äº†ä¸€ä¸ªæ— æ³•è§£æçš„å­—ç¬¦ä¸²è¾“å…¥ä½ çš„çŒœæµ‹æ•°å­—: 82ä½ çŒœæµ‹çš„æ•°å­—æ˜¯: 82ä½ çŒœä¸­äº†, æ¸¸æˆç»“æŸ å¦‚æœæ˜¯çœŸå®çš„ç¨‹åº, åº”è¯¥å°†ç¨‹åºç”Ÿæˆçš„æ•°å€¼æ‰“å°å»é™¤, è¿™é‡Œä¿ç•™åªæ˜¯ä¸ºäº†æ–¹ä¾¿è°ƒè¯•","link":"/2021/09/04/rust_programming_language(1)/"},{"title":"Rustç¨‹åºè®¾è®¡è¯­è¨€(2)","text":"å˜é‡ä¸å¯å˜æ€§ rusté»˜è®¤ä½ åˆ›å»ºçš„å˜é‡æ˜¯ä¸å¯å˜å˜é‡, è¿™æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å®‰å…¨æ€§, rusté¼“åŠ±ä½ å¤šä½¿ç”¨ä¸å¯å˜å˜é‡, å½“ç„¶å½“ä½ æœ‰éœ€è¦çš„æ—¶å€™, ä½ å¯ä»¥å°†å…¶å˜æˆå¯å˜å˜é‡ æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®æ¥å¼€å§‹æœ¬ç«  cargo new variables ä¿®æ”¹main.rsä¸º 123456fn main() { let x = 5; println!(\"{}\", x); x = 6; println!(\"{}\", x);} è¿è¡Œä»–, ä¼šæŠ¥é”™ 1234567891011121314151617181920âœ variables git:(master) âœ— cargo run Compiling variables v0.1.0 (/Users/Work/Code/Rust/student/variables)error[E0384]: cannot assign twice to immutable variable `x` --&gt; src/main.rs:4:5 |2 | let x = 5; | - | | | first assignment to `x` | help: make this binding mutable: `mut x`3 | println!(\"{}\", x);4 | x = 6; | ^^^^^ cannot assign twice to immutable variableerror: aborting due to previous errorFor more information about this error, try `rustc --explain E0384`.error: could not compile `variables`.To learn more, run the command again with --verbose. è¿™é‡Œçš„é”™è¯¯æ˜¯ cannot assign twice to immutable variable, å‘Šè¯‰ä½ ä¸èƒ½å¯¹ä¸å¯å˜å˜é‡äºŒæ¬¡èµ‹å€¼ ruståŠ å…¥è¿™ä¸ªé™åˆ¶æ˜¯ä¸ºäº†ä»£ç çš„å®‰å…¨æ€§, å› ä¸ºå¯¹äºå¼€å‘è€…æ¥è¯´, å»ºç«‹ä¸å¯å˜å˜é‡çš„ç›®çš„æ˜¯ä¸å¸Œæœ›ä»–èƒ½å¤Ÿä¿®æ”¹, å¦‚æœä½ å¯ä»¥ä¿®æ”¹, å°±å¯èƒ½ä¼šå¯¼è‡´ä»£ç æœç€æ— æ³•é¢„æ–™çš„æ–¹å‘å‘å±• åœ¨rustä¸­, ç¼–è¯‘å™¨ä¼šç¡®ä¿ä½ åˆ›å»ºçš„ä¸å¯å˜å˜é‡æ°¸è¿œä¸è¢«ä¿®æ”¹, è¿™èƒ½è®©ä½ æ›´åŠ ä¸“æ³¨çš„è€ƒè™‘æ­£å¸¸çš„é€»è¾‘ åŒæ—¶æˆ‘ä»¬å¯ä»¥è®¾ç½®å¯å˜å˜é‡æ¥è§£å†³é—®é¢˜, ä½¿ç”¨ mut æ¥æ ‡è¯†è¿™ä¸ªå˜é‡æ˜¯å¯å˜çš„, æ¯”å¦‚ 123456fn main() { let mut x = 5; println!(\"{}\", x); x = 6; println!(\"{}\", x);} æ­¤æ—¶å°±å¯ä»¥æ­£å¸¸çš„è¿è¡Œ 123456âœ variables git:(master) âœ— cargo run Compiling variables v0.1.0 (/Users/Work/Code/Rust/student/variables) Finished dev [unoptimized + debuginfo] target(s) in 0.60s Running `target/debug/variables`56 å¯¹äºå¤§å‹çš„é¡¹ç›®æ¥è¯´, å°†å˜é‡è®¾ç½®æˆå¯å˜ç„¶åæ›´æ”¹å…¶å€¼è¦æ¯”å°†å˜é‡è®¾ç½®ä¸ºä¸å¯å˜ç„¶åè¯»å–å…¶å€¼å¤åˆ¶ç»™æ–°çš„å˜é‡æ•ˆç‡æ›´é«˜ å˜é‡ä¸å¸¸é‡çš„åŒºåˆ« å½“ä½ åˆ›å»ºä¸€ä¸ªä¸å¯å˜å˜é‡ æ—¶, ä½ ä»ç„¶å¯ä»¥åœ¨åç»­ä¸­ä¿®æ”¹ä»–ä¸ºå¯å˜å˜é‡, ä½†æ˜¯å¯¹äºå¸¸é‡æ¥è®², åˆ›å»ºè¿‡ååŠ æ— æ³•é€šè¿‡ä»»ä½•æ–¹å¼ä¿®æ”¹, ä»–ä¸æ˜¯é¢„è®¾æ— æ³•ä¿®æ”¹, è€Œæ˜¯æ°¸è¿œæ— æ³•ä¿®æ”¹ å½“ä½ ä½¿ç”¨ const å…³é”®å­—æ¥åˆ›å»ºå¸¸é‡æ—¶, å¿…é¡»è¦æŒ‡å®šä»–çš„ç±»å‹ å¸¸é‡åªèƒ½è¢«å¸¸é‡è¡¨è¾¾å¼æ¥è®¾ç½®, ä¸èƒ½é€šè¿‡æŸä¸ªå‡½æ•°çš„è¿”å›å€¼æˆ–è€…è¿è¡Œæ—¶äº§ç”Ÿçš„æ•°å€¼æ¥è®¾ç½® rustçš„å¸¸é‡é€šå¸¸ä½¿ç”¨å…¨å¤§å†™çš„å­—æ¯, å¤šä¸ªå•è¯é—´ä½¿ç”¨_è¿æ¥çš„æ–¹å¼æ¥å‘½å, ä¾‹å¦‚ 1const MAX_POINTS: u32 = 100_000; // åˆ›å»ºå¸¸é‡ MAX_POINTS , ç±»å‹æ˜¯u32, å€¼æ˜¯100000 å…¶ä¸­, 100000ä¸100_000æ˜¯ä¸€æ ·çš„æ•°å€¼, åŠ _å¯ä»¥æå‡å¯è¯»æ€§ é®è”½(shadowing) å¯¹äºå˜é‡æ¥è®², æˆ‘ä»¬å¯ä»¥åœ¨ç»™æŸä¸ªå˜é‡èµ‹å€¼å, é€šè¿‡é®è”½çš„æ–¹å¼æ¥é‡æ–°èµ‹å€¼, æˆ–è€…è¯´æ˜¯è¦†ç›– ä½¿ç”¨ let æ¥å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å˜é‡é‡æ–°å£°æ˜, è¿™æ ·æ–°çš„å˜é‡å°±ä¼šé®è”½åŸæ¥çš„å˜é‡ 12345678fn main() { let a = 1; println!(\"{}\", a); let a = 5; println!(\"{}\", a); let a = a+1; println!(\"{}\", a);} è¾“å‡º 123156 éœ€è¦æ³¨æ„çš„æ˜¯, æˆ‘ä»¬åœ¨é®è”½æ—¶, å¿…é¡»è¦å¸¦ä¸Šletå…³é”®å­—, å¦åˆ™ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ æˆ‘ä»¬çŸ¥é“, ä½¿ç”¨ mut å¯ä»¥è®¾ç½®å¯å˜å˜é‡, ä»–ä¸é®è”½çš„ä¸åŒæ˜¯é®è”½å¯¹æŸä¸ªå˜é‡æ“ä½œæ—¶å¯ä»¥è®¾ç½®ä¸åŒçš„ç±»å‹, è€Œmutä¸å¯ä»¥, æ¯”å¦‚ 12let spaces = \" \";let spaces = spaces.len(); è¿™é‡Œ spaces ä»å­—ç¬¦ä¸²ç±»å‹é®è”½æˆäº†æ•°å­—ç±»å‹ 12let mut spaces = \" \";spaces = spaces.len(); è¿™æ®µä»£ç æ˜¯æ— æ³•ç¼–è¯‘çš„, å› ä¸ºmutæ— æ³•æ”¹å˜å€¼çš„ç±»å‹ 12345fn main() { let mut a = 1; println!(\"{}\", a); a = \"dadad\"} 123456789101112âœ variables git:(master) âœ— cargo run Compiling variables v0.1.0 (/Users/Work/Code/Rust/student/variables)error[E0308]: mismatched types --&gt; src/main.rs:4:9 |4 | a = \"dadad\" | ^^^^^^^ expected integer, found `&amp;str`error: aborting due to previous errorFor more information about this error, try `rustc --explain E0308`.error: could not compile `variables`. æ•°æ®ç±»å‹ æ•°æ®ç±»å‹åˆ†ä¸ºä¸¤ç§: çº¯é‡(scalar)å’Œå¤åˆ(compound) Rustæ˜¯ä¸€ä¸ªé™æ€ç±»å‹è¯­è¨€, å› æ­¤, æ‰€æœ‰å˜é‡åœ¨ç¼–è¯‘æ—¶ç¼–è¯‘å™¨å°±å¿…é¡»çŸ¥é“ä»–çš„ç±»å‹, å¦‚æœæ— æ³•å¾—çŸ¥å°±ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ å½“ç„¶, ä¸€èˆ¬æƒ…å†µä¸‹, ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¯†åˆ«å‡ºæˆ‘ä»¬æƒ³è¦è®¾ç½®çš„ç±»å‹, æ¯”å¦‚ 1let a = 1; ä½†æ˜¯å¯¹äºå‡½æ•°æ¥è®², æœ‰æ—¶å€™å¯èƒ½æœ‰å¤šä¸ªå¯èƒ½çš„ç»“æœè¿”å›, æ¯”å¦‚ 1let guess: u32 = \"42\".parse().expect(\"errorï¼\"); åœ¨ç¼–è¯‘æ—¶å°±ä¼šå‡ºç°é”™è¯¯ 1234567891011 Compiling variables v0.1.0 (/Users/Work/Code/Rust/student/variables)warning: unused variable: `guess` --&gt; src/main.rs:2:9 |2 | let guess: u32 = \"42\".parse().expect(\"é€™ä¸æ˜¯æ•¸å­—ï¼\"); | ^^^^^ help: consider prefixing with an underscore: `_guess` | = note: `#[warn(unused_variables)]` on by default Finished dev [unoptimized + debuginfo] target(s) in 0.40s Running `target/debug/variables` çº¯é‡ çº¯é‡çš„ç±»å‹ä»£è¡¨å•ä¸€çš„å€¼, rustæœ‰å››ç§çº¯é‡, åˆ†åˆ«ä¸º æ•´æ•°/æµ®ç‚¹æ•°/å­—ç¬¦/å¸ƒå°” æ•´æ•° æ•´æ•°æŒ‡çš„æ˜¯æ²¡æœ‰å°æ•°ç‚¹çš„æ•°å­—, ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨è¿‡ u32, è¿˜æœ‰å…¶ä»–çš„å‡ ç§ é•¿åº¦ å¸¦æ­£è´Ÿå· ä¸å¸¦æ­£è´Ÿå·(æ­£æ•´æ•°) 8ä½ i8 u8 16ä½ i16 u16 32ä½ i32 u32 64ä½ i64 u64 128ä½ i128 u128 ç³»ç»Ÿæ¶æ„ isize usize é¦–å…ˆ, å¸¦æ­£è´Ÿå·ä¸ä¸å¸¦æ­£è´Ÿå·çš„åŒºåˆ«å°±æ˜¯å­—é¢æ„æ€, å¸¦æ­£è´Ÿå·å¯ä»¥è¡¨ç¤ºè´Ÿæ•°, ä¸å¸¦åˆ™åªèƒ½è¡¨ç¤ºæ­£æ•´æ•° ç„¶å, é•¿åº¦ä»£è¡¨äº†è¿™ä¸ªå˜é‡åœ¨è®°å¿†ä½“å†…å­˜å‚¨çš„å¤§å°, ä¹Ÿå½±å“äº†æ•°å­—çš„èŒƒå›´, è€Œisizeå’Œusizeåˆ™ä¸ç³»ç»Ÿæœ‰å…³, å¦‚æœä½ çš„ç³»ç»Ÿæ˜¯32ä½, åˆ™æ˜¯32ä½çš„é•¿åº¦, 64å°±æ˜¯64 å¯¹äºæŸä¸ªæ•°å­—, ä½ å¯ä»¥å°†ç±»å‹æ‹¼åœ¨å€¼åé¢æ¥æ ‡è¯†è¿™ä¸ªå€¼æ˜¯ä»€ä¹ˆç±»å‹, æ¯”å¦‚54u16ä»£è¡¨æ˜¯u16ä½çš„å€¼æ˜¯54 é»˜è®¤çš„æ•´æ•°æ˜¯i32, è¿™åœ¨rustä¸­æ˜¯è¿è¡Œé€Ÿåº¦æœ€å¿«çš„ç±»å‹ æ•´æ•°æº¢å‡º ä¸¾ä¸ªä¾‹å­, å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªu8çš„å˜é‡, é‚£ä¹ˆä»–çš„é•¿åº¦åªæœ‰8ä½, åªèƒ½å®¹çº³ 1-255 ä¹‹é—´çš„æ•°å€¼, å¦‚æœä½ ç»™ä»–èµ‹å€¼æˆ 256, æˆ–è€…å¤§äº255çš„æ•°å­—, å°±ä¼šå‘ç”Ÿæ•´æ•°æº¢å‡º, å¦‚æœä½ æ˜¯åœ¨é»˜è®¤æƒ…å†µä¸‹ç¼–è¯‘çš„è¯, åˆ™ä¼šåœ¨è¿è¡Œæ—¶é€ æˆpanicé”™è¯¯, å¦‚æœä½ æ˜¯ç¼–è¯‘æˆç¨³å®šç‰ˆ(release), ç¨‹åºåœ¨æ£€æµ‹åˆ°æº¢å‡ºæ—¶ä¼šå¤„ç†è¿™ä¸ªé”™è¯¯, å¹¶ä¸ä¼šè®©ä»–ç›´æ¥panicä½†æ˜¯ä¼šä½¿åŸæœ‰çš„å€¼å‘ç”Ÿå˜åŒ–, é€ æˆé€»è¾‘é”™è¯¯. æµ®ç‚¹æ•° æµ®ç‚¹æ•°æœ‰ f32(å•ç²¾åº¦) å’Œ f64(åŒç²¾åº¦), é»˜è®¤æ˜¯f64 12345fn main() { let x = 2.0; // f64 let y: f32 = 3.0; // f32} æ•°å€¼è¿ç®— æ•°å€¼ä¹‹é—´å½“ç„¶å¯ä»¥è¿›è¡Œè¿ç®— 12345678910111213141516fn main() { // åŠ  let sum = 5 + 10; // æ¸› let difference = 95.5 - 4.3; // ä¹˜ let product = 4 * 30; // é™¤ let quotient = 56.7 / 32.2; // æ±‚ä½™ let remainder = 43 % 5;} å¸ƒå°”å€¼ true(çœŸ)å’Œfalse(å‡) 12345fn main() { let t = true; let f: bool = false; } å­—ç¬¦ å•ä¸ªå­—ç¬¦ä½¿ç”¨å•å¼•å·æ¥è¡¨ç¤º, ä¾‹å¦‚ä¸€ä¸ªå­—æ¯/ä¸­æ–‡/è¡¨æƒ…, å½“æˆ‘ä»¬éœ€è¦è¡¨è¾¾ä¸æ­¢ä¸€ä¸ªå­—ç¬¦æ—¶, å°±éœ€è¦ä½¿ç”¨åŒå¼•å· 12345678fn main() { let c = 'z'; let z = 'â„¤'; let heart_eyed_cat = 'ğŸ˜»'; let a = \"1111111\"; let b = 'æˆ‘'; let d: char = 'ä»–';} rustçš„charä¸unicodeç±»ä¼¼, ç¡®åˆä¸æ˜¯å®Œå…¨ä¸€æ ·, æˆ‘ä»¬ä¹‹åä¼šè¯¦ç»†è§£é‡Š å¤åˆç±»å‹ å¤åˆç±»å‹æœ‰ä¸¤ä¸ªæœ€åŸºæœ¬çš„, å…ƒç»„(tuples)å’Œé˜µåˆ—(arrays) å…ƒç»„ å…ƒç»„æ˜¯å°†ä¸åŒæˆ–ç›¸åŒçš„æ•°æ®ç±»å‹æ”¾ç½®åˆ°ä¸€èµ·çš„å¸¸è§ç”¨æ³•, éœ€è¦æ³¨æ„çš„æ˜¯å…ƒç»„çš„é•¿åº¦åœ¨ç¡®å®šåæ— æ³•æ›´æ”¹ å…ƒç»„çš„è®¾ç«‹æ˜¯ç”¨æ‹¬å·æ‹¬èµ·æ¥, å› ä¸ºä¸€ä¸ªå…ƒç»„å†…çš„æ¯ä¸ªæ•°æ®éƒ½æœ‰å¯èƒ½æœ‰ç‹¬ç«‹çš„æ•°æ®ç±»å‹, æ‰€ä»¥åœ¨å¿…è¦æ—¶ä¹Ÿå¯ä»¥æŒ‡å®šæ¯ä¸ªçš„ç±»å‹, å¦‚æœä¸æŒ‡å®šrustä¼šè‡ªå·±åˆ¤æ–­ 123fn main() { let tup: (i32, f64, u8) = (500, 6.4, 1);} è¿™é‡Œçš„å˜é‡tupå°±æ˜¯å…ƒç»„, å…ƒç»„å†…æœ‰å¤šä¸ªå…ƒç´ , æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¨¡å¼é…å¯¹(pattern matching), æ¥è·å–æ¯ä¸€ä¸ªå…ƒç´ çš„å€¼ 1234567fn main() { let tup = (500, 6.4, 1); let (x, y, z) = tup; println!(\"y çš„æ•¸å€¼ç‚ºï¼š{}\", y);} è¿™ç§å°†å…ƒç»„æ‰“æ•£ç„¶ååˆ†åˆ«èµ‹å€¼ç»™ x/y/z, éœ€è¦ä¿è¯æ¥å—è€…å’Œå…ƒç»„çš„é•¿åº¦æ˜¯ä¸€è‡´çš„, è¿™ç§ä¹Ÿè¢«æˆä¸ºè§£æ„(destructuring) è¿˜æœ‰ä¸€ç§é€šè¿‡ç´¢å¼•æ¥å–å…¶ä¸­æŸä¸ªå€¼çš„æ–¹æ³•, åœ¨rustä¸­é€šè¿‡.æ¥è·å–, æ¯”å¦‚ 123456789fn main() { let x: (i32, f64, u8) = (500, 6.4, 1); let five_hundred = x.0; let six_point_four = x.1; let one = x.2;} ç´¢å¼•å’Œå…¶ä»–è¯­è¨€ä¸€æ ·, éƒ½æ˜¯ä»0å¼€å§‹çš„, å¹¶ä¸”ä¸èƒ½è¶…å‡ºç´¢å¼•å¤§å° é˜µåˆ— ä¸å…ƒç»„ä¸åŒçš„æ˜¯, ä¸€ä¸ªé˜µåˆ—çš„å…ƒç´ å¿…é¡»æ˜¯åŒä¸€ä¸ªæ•°æ®ç±»å‹, è€Œä¸”å’Œå…ƒç»„ä¸€æ ·, é˜µåˆ—é•¿åº¦åœ¨ç¡®å®šåæ— æ³•æ›´æ”¹ é˜µåˆ—çš„è®¾ç«‹æ˜¯ä½¿ç”¨ä¸­æ‹¬å·, ä¾‹å¦‚ 123fn main() { let a = [1, 2, 3, 4, 5];} å½“ä½ å¸Œæœ›å°†æ•°æ®æ”¾ç½®åœ¨å †æ ˆä¸Šè€Œä¸æ˜¯å †ä¸Šæ—¶(æˆ‘ä»¬ä¹‹åä¼šè¯¦ç»†è§£è¯»), æˆ–è€…å½“ä½ æƒ³è¦ç¡®ä¿å§‹ç»ˆæ‹¥æœ‰å›ºå®šæ•°é‡çš„å…ƒç´ æ—¶, ä½ å¯ä»¥ä½¿ç”¨é˜µåˆ—æ¥åš å½“ä½ ä¸çŸ¥é“æœ‰å¤šå°‘ä¸ªæ•°æ®æ—¶(å¾ˆå¤šæ—¶å€™æ˜¯è¿™æ ·), é˜µåˆ—å’Œå…ƒç»„éƒ½å°†ä¸é€‚åˆä½¿ç”¨, æ­¤æ—¶, rustæ ‡å‡†åº“æä¾›äº†**çŸ¢é‡(vector)**ç±»å‹, ä»–æ˜¯å¯ä»¥æ”¹å˜é•¿åº¦çš„, å¦‚æœä½ ä¸ç¡®å®šåº”è¯¥ä½¿ç”¨çŸ¢é‡è¿˜æ˜¯é˜µåˆ—æ—¶, ä½ åº”è¯¥ä½¿ç”¨çŸ¢é‡æ¥åˆ›å»º, çŸ¢é‡çš„å…·ä½“ç»†èŠ‚ä¹‹åå†è®²è¿° å½“ä½ æ˜ç¡®çš„çŸ¥é“æ•°æ®çš„æ•°é‡æ—¶, ä½ å°±å¯ä»¥æ”¾å¿ƒçš„ä½¿ç”¨é˜µåˆ—, ä¾‹å¦‚, æ¯å¹´æœ‰12ä¸ªæœˆ 12let months = [\"ä¸€æœˆ\", \"äºŒæœˆ\", \"ä¸‰æœˆ\", \"å››æœˆ\", \"äº”æœˆ\", \"å…­æœˆ\", \"ä¸ƒæœˆ\", \"å…«æœˆ\", \"ä¹æœˆ\", \"åæœˆ\", \"åä¸€æœˆ\", \"åäºŒæœˆ\"]; è¿™é‡Œrustä¼šè‡ªå·±åˆ¤åˆ«é˜µåˆ—çš„ç±»å‹å’Œé•¿åº¦, å½“ç„¶ä½ ä¹Ÿå¯ä»¥æŒ‡å®š 1let a: [i32; 5] = [1, 2, 3, 4, 5]; è¿™é‡Œ, i32 æ˜¯æ¯ä¸ªå…ƒç´ çš„ç±»å‹, 5æ˜¯è¿™ä¸ªé˜µåˆ—çš„é•¿åº¦ å¦‚æœä½ æƒ³ç»™æ¯ä¸ªå…ƒç´ éƒ½è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼, å¯ä»¥è¿™æ ·å†™ 1let a = [3; 5]; ä¼šç”Ÿæˆé˜µåˆ—[3, 3, 3, 3, 3], å³açš„é•¿åº¦ä¸º5, æ¯ä¸ªé»˜è®¤å€¼éƒ½æ˜¯3 è·å–é˜µåˆ—å…ƒç´  æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥è·å–å¯¹åº”çš„å€¼ 123456fn main() { let a = [1, 2, 3, 4, 5]; let first = a[0]; let second = a[1];} æ— æ•ˆçš„é˜µåˆ—å…ƒç´ è·å– å¯¹äº/é˜µåˆ—æ¥è®², å½“ä½ è·å–ä¸å­˜åœ¨çš„ç´¢å¼•æ˜¯, æœ‰å¯èƒ½ä¼šå‡ºç°ç¼–è¯‘é€šè¿‡è€Œè¿è¡Œæ—¶å‡ºç°é”™è¯¯çš„æƒ…å†µ, æ¯”å¦‚ 1234567fn main() { let a = [1, 2, 3, 4, 5]; let element = a[10]; println!(\"å…ƒç´ çš„æ•¸å€¼ç‚ºï¼š{}\", element);} æˆ‘ä»¬ä½¿ç”¨checkåŠŸèƒ½å‘ç°å¹¶æ²¡æœ‰æ£€æŸ¥å‡ºé”™è¯¯ 123âœ variables git:(master) âœ— cargo check Checking variables v0.1.0 (/Users/Work/Code/Rust/student/variables) Finished dev [unoptimized + debuginfo] target(s) in 0.12s ä½†æ˜¯å½“æˆ‘ä»¬è¿è¡Œæ—¶, å½“æ‰§è¡Œåˆ°è¿™é‡Œæ—¶, rustä¼šæŠ›å‡ºé”™è¯¯, è€Œå¯¹äºå…¶ä»–çš„åº•å±‚è¯­è¨€(ä¾‹å¦‚C), åˆ™ä¸ä¼šæŠ¥é”™ä½†æ˜¯ä¼šå¾—åˆ°ä¸å¯é¢„æ–™çš„å€¼, rustè¿™æ ·åšå‡å°‘äº†ä¸å¯é¢„æ–™çš„BUGçš„äº§ç”Ÿ, è¿™æ˜¯Rustçš„å®‰å…¨åŸåˆ™ä¹‹ä¸€ 123456789101112131415âœ variables git:(master) âœ— cargo run Compiling variables v0.1.0 (/Users/Work/Code/Rust/student/variables)error: index out of bounds: the len is 5 but the index is 10 --&gt; src/main.rs:4:19 |4 | let element = a[10]; | ^^^^^ | = note: `#[deny(const_err)]` on by defaulterror: aborting due to previous errorerror: could not compile `variables`.To learn more, run the command again with --verbose.","link":"/2021/09/04/rust_programming_language(2)/"},{"title":"Rustç¨‹åºè®¾è®¡è¯­è¨€(3)","text":"è¿ç®—ç¬¦ è¿ç®—ç¬¦æœ¬èº«ä¸å…¶ä»–è¯­è¨€ä¸€æ ·, æœ¬æ¥åŸç‰ˆä¹¦æ²¡å†™, ä½†æ˜¯è¿˜æ˜¯æœ‰ç”¨çš„, è¿™é‡Œè¿˜æ˜¯ç¨å¾®è®°ä¸€ä¸‹ Rust è¯­è¨€æ”¯æŒä»¥ä¸‹å››ç§è¿ç®—ç¬¦ ç®—æœ¯è¿ç®—ç¬¦ ä½è¿ç®—ç¬¦ å…³ç³»è¿ç®—ç¬¦ é€»è¾‘è¿ç®—ç¬¦ ç®—æ•°è¿ç®—ç¬¦ åç§° è¿ç®—ç¬¦ åŠ  + å‡ - ä¹˜ * é™¤ / æ±‚ä½™ % Rust ä¸æ”¯æŒè‡ªå¢(++)å’Œè‡ªå‡(â€“) å…³ç³»è¿ç®—ç¬¦ åç§° è¿ç®—ç¬¦ å¤§äº &gt; å°äº &lt; å¤§äºç­‰äº &gt;= å°äºç­‰äº &lt;= ç­‰äº == ä¸ç­‰äº != é€»è¾‘è¿ç®—ç¬¦ åç§° è¿ç®—ç¬¦ é€»è¾‘ä¸ &amp;&amp; é€»è¾‘æˆ– || é€»è¾‘é ! ä½è¿ç®—ç¬¦ ä½è¿ç®—ç¬¦çš„ç›¸å…³æ“ä½œé€»è¾‘,å¯è‡ªè¡Œç™¾åº¦ åç§° è¿ç®—ç¬¦ ä½ä¸ &amp; ä½æˆ– | å¼‚æˆ– ^ ä½é ! å·¦ç§» &lt;&lt; å³ç§» &gt;&gt; å‡½æ•° å‡½æ•°åœ¨rustä¸­æ— å¤„ä¸åœ¨, å¯¹äºrustç¨‹åºæ¥è®², mainå‡½æ•°æ˜¯è®¸å¤šç¨‹åºçš„å…¥å£, ä¹‹å‰æˆ‘ä»¬çŸ¥é“, å»ºç«‹ä¸€ä¸ªå‡½æ•°çš„å…³é”®å­—æ˜¯ fn rustä½¿ç”¨ä¸‹åˆ’çº¿å‘½åæ³•æ¥å‘½å, è¿™ä¸ªä¹‹å‰ä¹Ÿæœ‰æåˆ°è¿‡ æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ç¨‹åº 123456789fn main() { println!(\"Hello, world!\"); another_function();}fn another_function() { println!(\"hello another_function!\");} rustä¸­, å‡½æ•°çš„èŒƒå›´ç”± {} æŒ‡å®š, ä¹Ÿå°±æ˜¯è¯´, è¿™æ®µä»£ç ä¸­æœ‰ä¸¤ä¸ªå‡½æ•°, main å’Œ another_function, ç¨‹åºçš„å…¥å£æ˜¯ main, åœ¨ main ä¸­è°ƒç”¨äº† another_function, å½“æˆ‘ä»¬ä»ä¸Šå¾€ä¸‹çœ‹çš„æ—¶å€™, ä¼šå‘ç°åœ¨ another_function æœªå®šä¹‰ä¹‹å‰å°±è°ƒç”¨äº† another_function, è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„, rust å¹¶ä¸ä¼šæŠ¥é”™, åªè¦ä½ å­˜åœ¨, ä¸ç®¡åœ¨å“ªé‡Œéƒ½å¯ä»¥. åœ¨å‡½æ•°ä¸­é€»è¾‘æ˜¯ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œçš„, å› æ­¤ä¼šå…ˆæ‰“å° Hello, world!, åœ¨æ‰§è¡Œ another_function, another_function ä¸­ä¼šæ‰“å° hello another_function! 123456âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun) Finished dev [unoptimized + debuginfo] target(s) in 1.00s Running `target/debug/fun`Hello, world!hello another_function! å‡½æ•°çš„å‚æ•° å¾ˆå¤šæ—¶å€™, å‡½æ•°éœ€è¦æ ¹æ®å‚æ•°æ¥è¿›è¡Œæ“ä½œ, rustéœ€è¦åœ¨å»ºç«‹å‡½æ•°æ—¶å®šä¹‰å‚æ•°çš„åç§°ä¸ç±»å‹, å†™åœ¨å‡½æ•°ååçš„ () ä¸­ 1234567fn main() { another_function(5);}fn another_function(x: i32) { println!(\"x = {}\", x);} 12345âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun) Finished dev [unoptimized + debuginfo] target(s) in 0.40s Running `target/debug/fun`x = 5 å¯¹äºå‡½æ•° another_function æ¥è®², æˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªå‚æ•° x, ä»–æ˜¯ i32 ç±»å‹, éœ€è¦æ³¨æ„çš„æ˜¯, æˆ‘ä»¬å¿…é¡»å¯¹æ¯ä¸ªå‚æ•°éƒ½è¯´æ˜ç±»å‹, ä¸ç„¶ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ å½“æŸä¸ªå‡½æ•°çš„éœ€è¦å¤šä¸ªå‚æ•°æ—¶, æˆ‘ä»¬è¿™æ ·å†™ 12345678fn main() { another_function(1, 2);}fn another_function(x: i32, y: i32) { println!(\"x = {}\", x); println!(\"y is {}\", y);} å‡½æ•°çš„å†…å®¹åŒ…å«äº†é™ˆè¿°å¼å’Œè¡¨è¾¾å¼ å‡½æ•°çš„å†…å®¹æ˜¯ç”±ä¸€ç³»åˆ—çš„ é™ˆè¿°å¼(statements) å’Œåœ¨åé¢çš„å¯é€‰çš„ è¡¨è¾¾å¼(expression) ç»„æˆçš„, rustæ˜¯åŸºäºè¡¨è¾¾å¼çš„è¯­è¨€, ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»è¿™ä¸¤ä¸ªçš„åŒºåˆ« é™ˆè¿°å¼æ˜¯ä¸€ç³»åˆ—åŠ¨ä½œçš„æŒ‡ä»¤, é™ˆè¿°å¼ä¸å›ä¼ ä»»ä½•æ•°æ® è¡¨è¾¾å¼åˆ™æ˜¯é€šè¿‡é€»è¾‘å¤„ç†æ¥äº§ç”Ÿç»“æœ, ä¹Ÿå°±æ˜¯è¯´è¡¨è¾¾å¼è¿”å›æ•°æ® æ¯”å¦‚ä»£ç  123fn main() { let a = 1;} è¿™é‡Œçš„mianå‡½æ•°æœ¬èº«æ˜¯ä¸€ä¸ªé™ˆè¿°å¼, å› ä¸ºä»–ä¸è¿”å›ä»»ä½•æ•°æ® è¿™é‡Œçš„ let a = 1; ä¹Ÿæ˜¯ä¸€ä¸ªé™ˆè¿°å¼, å› ä¸ºä»–ä¸è¿”å›ä»»ä½•æ•°æ®, å› ä¸ºä»–ä¸è¿”å›ä»»ä½•æ•°æ®, æ‰€ä»¥ä½ ä¸èƒ½æ¥å—ä»–çš„è¿”å›æ•°æ®, ä¾‹å¦‚ 123fn main() { let b = (let a = 1);} è¿™å°±ä¼šå¯¼è‡´ç¼–è¯‘å‡ºé”™, å› ä¸ºlet a = 1æ˜¯ä¸€ä¸ªé™ˆè¿°å¼, ä»–ä¸è¿”å›ä»»ä½•æ•°æ®, ä½†æ˜¯ä½ è¯•å›¾ä½¿ç”¨è¿”å›å€¼æ¥ä½œä¸º b çš„å€¼ è€Œè¡¨è¾¾å¼åˆ™ä¼šç»™å‡ºç»“æœ, æ¯”å¦‚ 1+1 ä¼šè¿”å›2, è¡¨è¾¾å¼å¯ä»¥æ˜¯é™ˆè¿°å¼çš„ä¸€éƒ¨åˆ†, æ¯”å¦‚ let a = 1ä¸­çš„1å°±æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼, ä»–è¿”å›äº†ä¸€ä¸ª1, åŒæ—¶æˆ‘ä»¬ä½¿ç”¨{}äº§ç”Ÿçš„ä½œç”¨åŸŸä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼, ä¾‹å¦‚ 12345678910fn main() { let x = 5; let y = { let x = 3; x + 1 }; println!(\"y = {}\", y);} å…¶ä¸­, è¡¨è¾¾å¼ 1234let y = { let x = 3; x + 1}; ä¼šè¿”å›4, æ­¤æ—¶ä½¿ç”¨ y æ¥æ”¶å°±èƒ½è·å¾— 4, è¿™æ˜¯å› ä¸º x + 1åé¢å¹¶æ²¡æœ‰å¸¦ä¸Š ;, å¦‚æœä½ åŠ ä¸Šäº† ; åˆ™ä¸ä¼šè¿”å›ç»“æœ, è¿™æ˜¯å¿…é¡»è¦è®°ä½çš„ å‡½æ•°è¿”å›å€¼ å‡½æ•°çš„è¿”å›å€¼å®šä¹‰æ˜¯-&gt;, å†™åœ¨æ¥æ”¶å‚æ•°çš„()å, åŒæ ·çš„è¦å®šä¹‰ä»–çš„ç±»å‹. ä½†æ˜¯æ— éœ€å‘½å 123456789fn five() -&gt; i32 { 5}fn main() { let x = five(); println!(\"x = {}\", x);} éœ€è¦æ³¨æ„, five å‡½æ•°é‡Œç›´æ¥å†™äº†5, ä½†æ˜¯æ²¡æœ‰è·Ÿ;, æ‰€ä»¥ä»–ä¼šè¿”å›5, åŒæ—¶ five å®šä¹‰äº†è¿”å›å€¼æ˜¯ä¸€ä¸ª, ç±»å‹æ˜¯ i32 åŒæ—¶ main ä¸­å®šä¹‰äº† x æ¥æ¥å— five çš„è¿”å›å€¼, æ‰€ä»¥ x ä¸º 5, åŒæ—¶å‡½æ•° five ä¸ºè¡¨è¾¾å¼ 12345âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun) Finished dev [unoptimized + debuginfo] target(s) in 0.57s Running `target/debug/fun`x = 5 å½“æˆ‘ä»¬ä¸º 5 åŠ ä¸Š ;, five å°±å˜æˆäº† é™ˆè¿°å¼, æ­¤æ—¶åœ¨ç¼–è¯‘æ—¶å°±ä¼šæŠ¥é”™ 123456789101112131415161718âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun)error[E0308]: mismatched types --&gt; src/main.rs:1:14 |1 | fn five() -&gt; i32 { | ---- ^^^ expected `i32`, found `()` | | | implicitly returns `()` as its body has no tail or `return` expression2 | 5; | - help: consider removing this semicolonerror: aborting due to previous errorFor more information about this error, try `rustc --explain E0308`.error: could not compile `fun`.To learn more, run the command again with --verbose. å½“è¿™ä¸ªå‡½æ•°æœ‰å¤šä¸ªè¿”å›å€¼, åˆ™ä½¿ç”¨()åŒ…è£¹ 123456789fn five() -&gt; (i32, i32) { (5, 6)}fn main() { let x = five(); println!(\"x0 = {}, x1 = {}\", x.0, x.1);} 12345âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun) Finished dev [unoptimized + debuginfo] target(s) in 0.25s Running `target/debug/fun`x0 = 5, x1 = 6 æ³¨é‡Š ä¸€ä¸ªå¥½çš„ç¨‹åº, æ³¨é‡Šå¹¶ä¸å¯å°‘. å¤šå†™**æ³¨é‡Š(comments)**å¯¹è‡ªå·±å’Œä»–äººéƒ½æœ‰å¥½å¤„ ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šå°†æ³¨é‡Šéƒ¨åˆ†å»é™¤, æ‰€ä»¥ä¸ç”¨æ‹…å¿ƒä¼šå¢åŠ ç¼–è¯‘æ–‡ä»¶çš„å¤§å° rustçš„æ³¨é‡Šä½¿ç”¨ // , ä¸€èˆ¬ä¼šåœ¨ // ååŠ ä¸Šä¸€ä¸ªç©ºæ ¼ 1// è¿™é‡Œæ˜¯æ³¨é‡Š éœ€è¦æ³¨æ„çš„æ˜¯, //æ ‡è¯†æ”¹è¡Œä¸ºæ³¨é‡Š, å› æ­¤ // åä¸€ç›´åˆ°æœ¬è¡Œç»“æŸä¹‹é—´çš„æ‰€æœ‰ä¸œè¥¿éƒ½è¢«ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯æ³¨é‡Š å½“éœ€è¦å¤šè¡Œæ³¨é‡Šæ—¶, ä¸ºæ¯ä¸€è¡Œéƒ½åŠ ä¸Š // å³å¯ 12// æ³¨é‡Š1// æ³¨é‡Š2 æ³¨é‡Šä¹Ÿå¯ä»¥åŠ åœ¨æŸä¸€è¡Œä»£ç çš„ç»“æŸ 123fn main() { let x = 3; // æ³¨é‡Š} æ§åˆ¶æµç¨‹ åœ¨ç¨‹åºä¸­, ä¸€ä¸ªæµç¨‹é€šå¸¸æœ‰å¤šä¸ªåˆ†æ”¯, æˆ‘ä»¬éœ€è¦åœ¨æŸä¸ªæ—¶å€™æ ¹æ®æŸä¸ªæ¡ä»¶æ¥å†³å®šæ€ä¹ˆåš ifè¡¨è¾¾å¼ ifè¡¨è¾¾å¼æ ¹æ®æ¡ä»¶çš„ä¸åŒæ‰§è¡Œä¸åŒçš„ä»£ç . å½“æ»¡è¶³æ¡ä»¶æ—¶å°±æ‰§è¡Œè¿™æ®µä»£ç , ä¸æ»¡è¶³æ—¶å°±ä¸æ‰§è¡Œ 12345678fn main(){ let a = 5; if a &lt; 5{ println!(\"&lt;5\") }else{ println!(\"&gt;=5\") }} è¿™é‡Œæˆ‘ä»¬åˆ¤æ–­aæ˜¯å¦å°äº5, æ ¹æ®ä¸åŒçš„æƒ…å†µæ¥æ‰“å°ä¸åŒçš„ç»“æœ éœ€è¦æ³¨æ„çš„æ˜¯, å…¶ä¸­æŸä¸ªåˆ†æ”¯çš„é€»è¾‘å¿…é¡»ä½¿ç”¨ {} åŒ…è£¹ å¹¶ä¸”, a&lt;5 è¿”å›çš„æ˜¯ä¸€ä¸ªbool, rustä¸­ifè¡¨è¾¾å¼åªèƒ½ä½¿ç”¨boolæ¥è¿›è¡Œåˆ¤æ–­, åŠ å…¥æˆ‘ä»¬å°†ä»£ç ä¿®æ”¹æˆ 12345678fn main(){ let a = 5; if a{ println!(\"&lt;5\") }else{ println!(\"&gt;=5\") }} åˆ™ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥, è¿™æ˜¯å› ä¸ºaæ˜¯int è€Œä¸æ˜¯bool 1234567891011121314âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun)error[E0308]: mismatched types --&gt; src/main.rs:3:8 |3 | if a{ | ^ expected `bool`, found integererror: aborting due to previous errorFor more information about this error, try `rustc --explain E0308`.error: could not compile `fun`.To learn more, run the command again with --verbose. rustå¹¶ä¸ä¼šå°†å…¶ä»–éboolå€¼è‡ªåŠ¨è½¬åŒ–æˆbool ä½¿ç”¨ else if å¤„ç†å¤šä¸ªæƒ…å†µ ä½¿ç”¨å¤šä¸ªelse ifå’Œifå’Œelseä¸€èµ·ä½¿ç”¨æ¥å¤„ç†å¤šä¸ªåˆ†æ”¯ 123456789101112fn main(){ let a = 5; if a == 4{ println!(\"4\") }else if a == 5{ println!(\"5\") }else if a == 5{ println!(\"51\") }else{ println!(\"not\") }} éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨è¿™ä¸ªä»£ç å—ä¸­, åˆ¤æ–­åªä¼šæˆåŠŸä¸€æ¬¡, ä¹Ÿå°±æ˜¯è¯´, åœ¨è¿™ä¸ªå¤šé‡åˆ¤æ–­ä¸­, å³ä½¿aå¯ä»¥ä¸ºtrueä¸¤æ¬¡, ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡, ä¹Ÿå°±æ˜¯åªä¼šæ‰“å°5 è€Œä¸æ˜¯51 å½“ä½ æœ‰å¤šä¸ªåˆ†æ”¯æ—¶, ä¸æ¨èä½¿ç”¨å¤§é‡çš„ else if, è¿™æ ·ä¼šå¯¼è‡´ä»£ç çœ‹èµ·æ¥ä¸å‹å¥½, åé¢ä¼šæ¨èä½¿ç”¨match åœ¨letä¸­ä½¿ç”¨if 123456789fn main(){ let t = true; let s = if t{ 5 }else{ 6 }; println!(\"{}\", s)} è¿™é‡Œå°±æ˜¯, æˆ‘ä»¬åœ¨èµ‹å€¼çš„æ—¶å€™, æ ¹æ®tçš„ä¸åŒæ¥è¿”å›ä¸åŒçš„å€¼ç»™s, è¿™é‡Œæ³¨æ„, å†™ä¸€ä¸ªæ•°å­—æœ¬èº«å°±æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼, ä¹Ÿå°±æ˜¯è¯´å¦‚æœtä¸ºtrue, så°±ä¸º5, å…¶ä»–ä¸º6 12345âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun) Finished dev [unoptimized + debuginfo] target(s) in 0.36s Running `target/debug/fun`5 è¿™ç§å†™æ³•æœ‰ä¸€ä¸ªé™åˆ¶, å°±æ˜¯ifçš„è¿”å›å€¼å¿…é¡»æ˜¯åŒä¸€ç±»å‹, sä¸å¯èƒ½æœ‰å¯èƒ½æ˜¯intæœ‰å¯èƒ½æ˜¯str, ä¾‹å¦‚ 123456789fn main(){ let t = true; let s = if t{ 5 }else{ \"6\" }; println!(\"{}\", s)} è¿™ç§å°±ä¼šæŠ¥é”™ 123456789101112131415161718192021âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun)error[E0308]: `if` and `else` have incompatible types --&gt; src/main.rs:6:9 |3 | let s = if t{ | _____________-4 | | 5 | | - expected because of this5 | | }else{6 | | \"6\" | | ^^^ expected integer, found `&amp;str`7 | | }; | |_____- `if` and `else` have incompatible typeserror: aborting due to previous errorFor more information about this error, try `rustc --explain E0308`.error: could not compile `fun`.To learn more, run the command again with --verbose. å› ä¸ºruståœ¨ç¼–è¯‘æ—¶å°±å¿…é¡»å‡†ç¡®çš„çŸ¥é“sçš„ç±»å‹, ä½†æ˜¯så¯èƒ½ä¼šæœ‰ä¸¤ç§ç±»å‹, è¿™æ ·ä¼šå¯¼è‡´ä»£ç æœ‰å¯èƒ½å‡ºç°é—®é¢˜ å¾ªç¯ å¾ªç¯å¯ä»¥é‡å¤çš„æ‰§è¡ŒæŸæ®µä»£ç  rustæœ‰ä¸‰ç§å¾ªç¯: loop/while/for loop loopå…³é”®å­—ä¼šè®©rustä¸€ç›´é‡å¤æ‰§è¡Œä»£ç ä¸€ç›´åˆ°æ˜ç¡®çš„è¦æ±‚ç»“æŸ çœ‹ä»¥ä¸‹ä»£ç  12345fn main(){ loop{ println!(\"a\") }} æ­¤ç¨‹åºæ˜¯æ­»å¾ªç¯, ä¸åœçš„æ‰“å°å­—ç¬¦ä¸²a, å› ä¸ºæ²¡æœ‰ä½¿ç”¨å…³é”®å­—break, æ‰€ä»¥ä¸ä¼šç»ˆæ­¢å¾ªç¯ ä»å¾ªç¯è¿”å› 12345678910fn main(){ let mut c = 0; let r = loop{ c += 1; if c == 10{ break c*2; } }; println!(\"{}\", r)} æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå˜é‡æ¥æ¥å—æŸä¸ªå¾ªç¯çš„è¿”å›å€¼ whileå¾ªç¯ æˆ‘ä»¬ä½¿ç”¨å¾ªç¯æ—¶, å¤šä¼šä½¿ç”¨ä¸€ä¸ªå¤§çš„åµŒå¥—, æ¯”å¦‚loop{}, å…¶å®rustä¸­çš„whileå¯ä»¥åœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹å‡å°‘ä»£ç , æ¯”å¦‚ 12345678fn main(){ let mut c = 4; while c != 0{ c -= 1; println!(\"{}\", c) } println!(\"OK\")} whileå¯ä»¥ä¸ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ä¸€èµ·ä½¿ç”¨, æ¯”å¦‚è¿™é‡Œå°±æ˜¯åˆ¤æ–­c!=0, å¦‚æœc!=0ä¸ºfalseæ—¶åˆ™é€€å‡ºå¾ªç¯. è€Œåœ¨å¾ªç¯å†…åˆ™å¯¹cè¿›è¡Œ-1, ä»£ç é€»è¾‘ç­‰åŒäº 1234567891011fn main(){ let mut c = 4; loop { c -= 1; println!(\"{}\", c); if c == 0{ break; }; } println!(\"OK\")} forå¾ªç¯ ä½¿ç”¨éå†æ¥æè¿°forå¯èƒ½æ›´ä¸ºå‡†ç¡®, forå¹¶ä¸æ˜¯æ­»å¾ªç¯, è€Œæ˜¯éå†å®Œæˆå°±ç»“æŸ 123456fn main(){ let c = [1, 2, 3, 4]; for i in c.iter(){ println!(\"{}\", i) }} è¿™é‡Œæˆ‘ä»¬éå†cè¿™ä¸ªæ•°ç»„, æ³¨æ„c.iter()å¯ä»¥ç”Ÿæˆä¸€ä¸ªrange, æ¯æ¬¡æŠ›å‡ºcçš„ä¸€ä¸ªå…ƒç´ , ä½¿ç”¨forå¯ä»¥é˜²æ­¢ç´¢å¼•è¶…å‡ºèŒƒå›´ 12345678âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun) Finished dev [unoptimized + debuginfo] target(s) in 0.42s Running `target/debug/fun`1234 å†æ¯”å¦‚ 123456fn main(){ let c = [1, 2, 3, 4]; for i in c.iter().rev(){ println!(\"{}\", i) }} revæ–¹æ³•å¯ä»¥ç¿»è½¬ä¸€ä¸ªrange, å› æ­¤ä¼šè¾“å‡º4-1 12345678âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun) Finished dev [unoptimized + debuginfo] target(s) in 0.32s Running `target/debug/fun`4321 ç»ƒä¹  ç¼–å†™ç¨‹åºå®ç°æ‘„æ°åº¦ä¸åæ°åº¦ä¹‹é—´çš„è½¬æ¢ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455use std::io; // å¼•å…¥æ ‡å‡†åº“fn main(){ loop { println!(\"é€‰æ‹©è½¬æ¢æ¨¡å¼: 1: æ‘„æ°åº¦è½¬åæ°åº¦ 2: åæ°åº¦è½¬æ‘„æ°åº¦ å…¶ä»–ä»»æ„é”®: é€€å‡º &gt;&gt;&gt;\"); let mut model = String::new(); io::stdin().read_line(&amp;mut model).expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š if model.trim() == \"1\"{ println!(\"è¾“å…¥ä½ è¦è½¬æ¢çš„æ‘„æ°åº¦&gt;&gt;&gt;\"); let mut c = String::new(); io::stdin().read_line(&amp;mut c).expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š let c: f32 = match c.trim().parse() { Ok(num) =&gt; num, Err(_) =&gt; { println!(\"è¾“å…¥äº†ä¸€ä¸ªæ— æ³•è§£æçš„å­—ç¬¦ä¸²\"); continue; }, }; let f = transformation_centigrade(c); println!(\"æ‘„æ°åº¦:{}å¯¹åº”çš„åæ°åº¦æ˜¯:{}\", c, f); } else if model.trim() == \"2\"{ println!(\"è¾“å…¥ä½ è¦è½¬æ¢çš„åæ°åº¦&gt;&gt;&gt;\"); let mut f = String::new(); io::stdin().read_line(&amp;mut f).expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š let f: f32 = match f.trim().parse() { Ok(num) =&gt; num, Err(_) =&gt; { println!(\"è¾“å…¥äº†ä¸€ä¸ªæ— æ³•è§£æçš„å­—ç¬¦ä¸²\"); continue; }, }; let c = transformation_fahrenheit_degree(f); println!(\"åæ°åº¦:{}å¯¹åº”çš„æ‘„æ°åº¦æ˜¯:{}\", f, c); } else{ println!(\"exit.\"); break; } }}// åæ°åº¦2æ‘„æ°åº¦fn transformation_fahrenheit_degree(f: f32) -&gt; f32{ return (f-32.0)/1.8;}// æ‘„æ°åº¦2åæ°åº¦fn transformation_centigrade(c: f32) -&gt; f32{ return 32.0+c*1.8;} è¿è¡Œ 12345678910111213141516171819202122232425262728âœ fun git:(master) âœ— cargo run Finished dev [unoptimized + debuginfo] target(s) in 0.00s Running `target/debug/fun`é€‰æ‹©è½¬æ¢æ¨¡å¼: 1: æ‘„æ°åº¦è½¬åæ°åº¦ 2: åæ°åº¦è½¬æ‘„æ°åº¦ å…¶ä»–ä»»æ„é”®: é€€å‡º &gt;&gt;&gt;1è¾“å…¥ä½ è¦è½¬æ¢çš„æ‘„æ°åº¦&gt;&gt;&gt;222æ‘„æ°åº¦:222å¯¹åº”çš„åæ°åº¦æ˜¯:431.59998é€‰æ‹©è½¬æ¢æ¨¡å¼: 1: æ‘„æ°åº¦è½¬åæ°åº¦ 2: åæ°åº¦è½¬æ‘„æ°åº¦ å…¶ä»–ä»»æ„é”®: é€€å‡º &gt;&gt;&gt;2è¾“å…¥ä½ è¦è½¬æ¢çš„åæ°åº¦&gt;&gt;&gt;4444åæ°åº¦:4444å¯¹åº”çš„æ‘„æ°åº¦æ˜¯:2451.111é€‰æ‹©è½¬æ¢æ¨¡å¼: 1: æ‘„æ°åº¦è½¬åæ°åº¦ 2: åæ°åº¦è½¬æ‘„æ°åº¦ å…¶ä»–ä»»æ„é”®: é€€å‡º &gt;&gt;&gt;qexit. ç”Ÿæˆ n é˜¶æ–æ³¢é‚£å¥‘æ•°åˆ— 123456789101112131415161718192021222324252627282930313233343536use std::io; // å¼•å…¥æ ‡å‡†åº“fn main(){ loop { println!(\"è¾“å…¥æœŸæœ›çš„n&gt;&gt;&gt;\"); let mut n = String::new(); io::stdin().read_line(&amp;mut n).expect(\"è¯»å–å¤±è´¥\"); let n: usize = match n.trim().parse() { Ok(num) =&gt; num, Err(_) =&gt; { println!(\"è¾“å…¥äº†ä¸€ä¸ªæ— æ³•è§£æçš„å­—ç¬¦ä¸²\"); continue; }, }; let mut c: usize = 0; let mut s0 = 0; let mut s1 = 1; println!(\"ç»“æœ: \"); loop{ if c == n{ break; }; let mut f = 0; if c == 0{ f = 0; }else{ f = s0+s1; } s0 = s1; s1 = f; c+=1; print!(\"{} \", f) } println!(\"\") }} è¿è¡Œ 123456789101112131415161718192021âœ fun git:(master) âœ— cargo run Compiling fun v0.1.0 (/Users/Work/Code/Rust/student/fun)warning: value assigned to `f` is never read --&gt; src/main.rs:23:21 |23 | let mut f = 0; | ^ | = note: `#[warn(unused_assignments)]` on by default = help: maybe it is overwritten before being read? Finished dev [unoptimized + debuginfo] target(s) in 0.48s Running `target/debug/fun`è¾“å…¥æœŸæœ›çš„n&gt;&gt;&gt;3ç»“æœ: 0 1 1 è¾“å…¥æœŸæœ›çš„n&gt;&gt;&gt;1ç»“æœ: 0 æ‰“å°æ­Œæ›² â€œThe Twelve Days of Christmasâ€ çš„æ­Œè¯, ä½¿ç”¨å¾ªç¯ 1234567891011121314151617181920212223fn main(){ let days = [\"first\", \"second\", \"third\", \"fourth\", \"fifth\", \"sixth\", \"seventh\", \"eighth\", \"ninth\", \"tenth\", \"eleventh\", \"twelfth\"]; let gift = [\"a partridge in a pear tree\", \"two turtle doves\", \"three French hens\", \"four calling birds\", \"five golden rings\", \"six geese a-laying\", \"seven swans a-swimming\", \"eight maids a-milking\", \"nine ladies dancing\", \"ten lords a-leaping\", \"eleven pipers piping\", \"twelve drummers drumming\"]; let mut n = 0; println!(\"The Twelve days of Christmas\"); for d in days.iter(){ print!(\"On the {} day of Christmas, my true love sent to me: \", d); let mut gi = n; loop{ if gi != 0{ print!(\"{}, \", gift[gi]); gi -= 1; }else if n == 0{ print!(\"{} \\n\", gift[gi]); break; }else{ print!(\"and {} \\n\", gift[gi]); break; } }; n += 1 };} è¿è¡Œ 12345678910111213The Twelve days of ChristmasOn the first day of Christmas, my true love sent to me: a partridge in a pear tree On the second day of Christmas, my true love sent to me: two turtle doves, and a partridge in a pear tree On the third day of Christmas, my true love sent to me: three French hens, two turtle doves, and a partridge in a pear tree On the fourth day of Christmas, my true love sent to me: four calling birds, three French hens, two turtle doves, and a partridge in a pear tree On the fifth day of Christmas, my true love sent to me: five golden rings, four calling birds, three French hens, two turtle doves, and a partridge in a pear tree On the sixth day of Christmas, my true love sent to me: six geese a-laying, five golden rings, four calling birds, three French hens, two turtle doves, and a partridge in a pear tree On the seventh day of Christmas, my true love sent to me: seven swans a-swimming, six geese a-laying, five golden rings, four calling birds, three French hens, two turtle doves, and a partridge in a pear tree On the eighth day of Christmas, my true love sent to me: eight maids a-milking, seven swans a-swimming, six geese a-laying, five golden rings, four calling birds, three French hens, two turtle doves, and a partridge in a pear tree On the ninth day of Christmas, my true love sent to me: nine ladies dancing, eight maids a-milking, seven swans a-swimming, six geese a-laying, five golden rings, four calling birds, three French hens, two turtle doves, and a partridge in a pear tree On the tenth day of Christmas, my true love sent to me: ten lords a-leaping, nine ladies dancing, eight maids a-milking, seven swans a-swimming, six geese a-laying, five golden rings, four calling birds, three French hens, two turtle doves, and a partridge in a pear tree On the eleventh day of Christmas, my true love sent to me: eleven pipers piping, ten lords a-leaping, nine ladies dancing, eight maids a-milking, seven swans a-swimming, six geese a-laying, five golden rings, four calling birds, three French hens, two turtle doves, and a partridge in a pear tree On the twelfth day of Christmas, my true love sent to me: twelve drummers drumming, eleven pipers piping, ten lords a-leaping, nine ladies dancing, eight maids a-milking, seven swans a-swimming, six geese a-laying, five golden rings, four calling birds, three French hens, two turtle doves, and a partridge in a pear tree","link":"/2021/09/04/rust_programming_language(3)/"},{"title":"Rustç¨‹åºè®¾è®¡è¯­è¨€(4)","text":"å‰è¨€ æ‰€æœ‰æƒç³»ç»Ÿæ˜¯Rustæœ€ä¸ºç‹¬ç‰¹çš„æ€§è´¨, ä»–è®©Rustæ— éœ€åƒåœ¾å›æ”¶å³å¯ä¿éšœå†…å­˜çš„å®‰å…¨. æ‰€ä»¥, ç†è§£æ‰€æœ‰æƒæ€ä¹ˆå·¥ä½œæ˜¯éå¸¸é‡è¦çš„, æœ¬ç« , æˆ‘ä»¬å°†è®²åˆ°æ‰€æœ‰æƒå’Œç›¸å…³çš„åŠŸèƒ½, å€Ÿç”¨, sliceä»¥åŠRustå¦‚ä½•åœ¨å†…å­˜ä¸­æ”¾ç½®æ•°æ® ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ rustçš„æ ¸å¿ƒä¹‹ä¸€å°±æ˜¯æ‰€æœ‰æƒ å¯¹äºè¿è¡Œä¸­çš„ç¨‹åºæ¥è¯´, ä»–å¿…é¡»å¯¹ä½¿ç”¨çš„å†…å­˜è¿›è¡Œç®¡ç†, åŒæ—¶å¯¹äºè¿è¡Œä¸­äº§ç”Ÿçš„åƒåœ¾, ç¨‹åºä¹Ÿéœ€è¦è¿›è¡Œé”€æ¯, ä»¥å…å‡ºç°å†…å­˜æ³„éœ²ç­‰é—®é¢˜ æŸäº›è¯­è¨€è‡ªå¸¦äº†åƒåœ¾å›æ”¶æœºåˆ¶, åœ¨ç¨‹åºè¿è¡Œæ—¶ä¸æ–­çš„æ‰«æå¯»æ‰¾ä¸å†ä½¿ç”¨çš„å†…å­˜å°†å…¶é‡Šæ”¾ å¦ä¸€äº›è¯­è¨€è¦æ±‚ç¨‹åºå‘˜é€šè¿‡ä»£ç æ¥è‡ªå·±åˆ†é…å’Œé‡Šæ”¾å†…å­˜ è€Œrustä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰ç§, é€šè¿‡æ‰€æœ‰æƒç³»ç»Ÿæ¥ç®¡ç†å†…å­˜, ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šæ ¹æ®è§„åˆ™æ¥è¿›è¡Œæ£€æŸ¥. åœ¨è¿è¡Œæ—¶å¯ä»¥ä¿è¯ä¸ä¼šå‡æ…¢ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ æ ˆ(stack)ä¸å †(heap) æ ˆå’Œå †éƒ½æ˜¯åœ¨ç¨‹åºè¿è¡Œä¸­å¯ä¾›ä½¿ç”¨çš„å†…å­˜, ä»–ä»¬çš„ç»“æ„å¹¶ä¸ç›¸åŒ, æ ˆæ˜¯æœ‰åºçš„, ä»–å°±åƒä¸€ä¸ªæ°´æ¡¶, æœ€ä¸Šé¢çš„æ˜¯æ ˆé¡¶, å‘è¿™ä¸ªæ ˆé‡Œå­˜æ”¾æ•°æ®å«åšè¿›æ ˆ, ä»–åƒä¸€ä¸ªæ°´æ¡¶, æ‰€ä»¥å­˜å‚¨æ•°æ®åªèƒ½å­˜æ”¾åœ¨æ°´æ¡¶çš„æœ€ä¸Šé¢, å½“ç§»é™¤æ•°æ®å‡ºæ ˆçš„æ—¶å€™, ä¹Ÿåªèƒ½ä»æ ˆé¡¶ç§»é™¤, æ‰€ä»¥, æ ˆéµå¾ªå…ˆè¿›åå‡ºçš„é€»è¾‘. æ ˆä¸­çš„æ‰€æœ‰æ•°æ®éƒ½å¿…é¡»å ç”¨å·²çŸ¥ä¸”å›ºå®šçš„å¤§å°, è€Œä¸”æ ˆä¸­çš„æ•°æ®æ˜¯æœ‰å¤§å°é™åˆ¶çš„, æ‰€ä»¥åœ¨ç¨‹åºè¿è¡Œä¸­å‡ºç°çš„å¤§å°æœªçŸ¥æˆ–è€…å¯èƒ½å˜åŒ–çš„æ•°æ®, å¿…é¡»å­˜å‚¨åœ¨å †ä¸Š, å †ä¸æ˜¯æœ‰åºçš„, å½“ä½ å‘å †ä¸­å­˜å‚¨ä¸€ä¸ªæ•°æ®, æ“ä½œç³»ç»Ÿé¦–å…ˆåœ¨å †çš„æŸå¤„æ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´, æŠŠå®ƒæ ‡è®°ä¸ºå·²ä½¿ç”¨, ç„¶åå›ä¼ è¯¥ç©ºé—´çš„æŒ‡é’ˆ, è¿™ä¸ªè¿‡ç¨‹å«åšåœ¨å †ä¸Šåˆ†é…å†…å­˜, æŒ‡é’ˆçš„å¤§å°æ˜¯å·²çŸ¥ä¸”å›ºå®šçš„ æ‰€ä»¥å¯ä»¥æŠŠçœŸæ­£çš„æ•°æ®å­˜å‚¨åœ¨å †ä¸­, å°†æŒ‡é’ˆå­˜æ”¾åœ¨æ ˆä¸­, å½“éœ€è¦è®¿é—®çœŸå®æ•°æ®æ—¶, å…ˆè·å–æŒ‡é’ˆ, å†è®¿é—®æŒ‡é’ˆ å…¥æ ˆæ¯”åœ¨å †ä¸Šåˆ†é…å†…å­˜å¿«, è¿™æ˜¯å› ä¸ºæ ˆåœ¨å»ºç«‹æ—¶æ¯ä¸€å—æ•°æ®çš„å¤§å°æ˜¯å›ºå®šçš„, è€Œä¸”æ˜¯æœ‰åºçš„, æ“ä½œç³»ç»Ÿæ— éœ€ä¸ºæ–°æ•°æ®å»æœç´¢åˆé€‚çš„å†…å­˜ç©ºé—´. å½“åœ¨å †ä¸Šåˆ†é…å†…å­˜æ—¶, ç³»ç»Ÿéœ€è¦å…ˆæ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„å†…å­˜, ç„¶ååšè®°å½• è®¿é—®å †ä¸Šçš„æ•°æ®ä¹Ÿæ¯”è®¿é—®æ ˆçš„æ•°æ®æ…¢, å †ä¸Šé¢çš„æ•°æ®é€šè¿‡æŒ‡é’ˆè®¿é—®, ç°ä»£å¤„ç†å™¨åœ¨å†…å­˜ä¸­è·³è½¬è¶Šå°‘é€Ÿåº¦å°±è¶Šå¿«(ç¼“å­˜), è€Œå †æ˜¯æ— åºçš„, æ„å‘³ç€æŒ‡é’ˆæŒ‡å‘çš„åœ°æ–¹å¯èƒ½éœ€è¦å¾ˆå¤šæ¬¡å†…å­˜è·³è½¬ åŒæ ·çš„, å› ä¸ºè¿™ä¸ªåŸå› , å¤„ç†å™¨åœ¨å¤„ç†æ•°æ®å½¼æ­¤ç›¸è¿‘çš„æ—¶å€™(æ¯”å¦‚æ ˆ)æ¯”è¿œçš„æ—¶å€™(å †)æ•ˆç‡æ›´é«˜. åœ¨å †ä¸Šåˆ†é…å¤§é‡ç©ºé—´ä¹Ÿä¼šæ¶ˆè€—æ—¶é—´. å½“ä»£ç è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶, ä¼šå°†å‡½æ•°çš„å€¼å’Œå‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡å‹å…¥æ ˆä¸­, å½“è¿™ä¸ªå‡½æ•°ç»“æŸæ—¶, è¿™äº›æ•°æ®å°±å±äºåƒåœ¾, ç†åº”è¢«å›æ”¶, æ­¤æ—¶åˆ™å‡ºæ ˆ, å› ä¸ºæ ˆæ˜¯åè¿›å…ˆå‡º, å¯¼è‡´è¿™ç§å›æ”¶æ˜¯å¿«é€Ÿçš„, ç¬¦åˆé€»è¾‘çš„, rustçš„æ‰€æœ‰æƒå°±æ˜¯è¿™æ ·åšçš„ è·Ÿè¸ªå“ªéƒ¨åˆ†ä»£ç æ­£åœ¨ä½¿ç”¨å“ªäº›æ•°æ®, æœ€å¤§é™åº¦çš„å‡å°‘å †ä¸Šé‡å¤æ•°æ®çš„æ•°é‡, åŒæ—¶æ¸…ç†å †ä¸Šä¸å†ä½¿ç”¨çš„æ•°æ®, è¿™äº›å°±æ˜¯æ‰€æœ‰æƒç³»ç»Ÿéœ€è¦å»å…³å¿ƒçš„ 12345678910111213// å‡è®¾ä¸€ä¸ªæŠ½è±¡çš„æ ˆ []{ A; // Aå…¥æ ˆ, [A] B; // Bå…¥æ ˆ, [B, A] { a; // aå…¥æ ˆ, [a, B, A] b; // bå…¥æ ˆ, [b, a, B, A] }; // å‡½æ•°ç»“æŸäº†, aå’Œbæ˜¯åƒåœ¾äº†, å°†aå’Œbå‡ºæ ˆ, ç›´æ¥å–æ ˆé¡¶çš„çš„ä¸€æ®µå³å¯,ä¿è¯æ•ˆç‡çš„åŒæ—¶ä¹Ÿç¬¦åˆé€»è¾‘(ä»£ç ä»ä¸Šå¾€ä¸‹æ‰§è¡Œçš„é¡ºåº), [b, a, B, A] -&gt; [B, A] C; // Cå…¥æ ˆ, [C, B, A] D; // Då…¥æ ˆ, [D, C, B, A]} æ‰€æœ‰æƒçš„åŸºæœ¬è§„åˆ™ Rustä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æœ‰ä¸”åªæœ‰ä¸€ä¸ªè¢«ç§°ä¸ºå…¶ æ‰€æœ‰è€… çš„å˜é‡ å€¼åœ¨ä»»ä¸€æ—¶åˆ»æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€… æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸæ—¶, è¿™ä¸ªå€¼å°†ä¼šè¢«ä¸¢å¼ƒ å˜é‡ä½œç”¨åŸŸ æ¯ä¸ªå˜é‡éƒ½æœ‰å…¶ ä½œç”¨åŸŸ(scope), ä½œç”¨åŸŸæ˜¯ä¸€ä¸ª é¡¹(item) åœ¨ç¨‹åºä¸­æœ‰æ•ˆçš„èŒƒå›´ 1let s=\"hello\"; è¿™é‡Œçš„å˜é‡sç»‘å®šåˆ°äº†å­—ç¬¦ä¸²helloä¸­, è¿™ä¸ªå­—ç¬¦ä¸²ç¼–ç è¿›äº†ç¨‹åºä»£ç ä¸­, é‚£ä¹ˆsä»å£°æ˜å¼€å§‹åˆ°å½“å‰ä½œç”¨åŸŸç»“æŸæ—¶éƒ½æ˜¯æœ‰æ•ˆçš„ 12345fn main() { // sæœªå£°æ˜ let s = \"hello\"; // såœ¨è¿™é‡Œç”Ÿæ•ˆ // å¯ä»¥ä½¿ç”¨s}// å‡½æ•°ç»“æŸ, ä½œç”¨åŸŸä¹Ÿç»“æŸ, sæ— æ³•ä½¿ç”¨äº† è¿™é‡Œæœ‰ä¸¤ä¸ªå…³é”®ç‚¹ sè¿›å…¥ä½œç”¨åŸŸæ—¶, sæ˜¯æœ‰æ•ˆçš„ sç¦»å¼€ä½œç”¨åŸŸ, sæ— æ•ˆ Stringç±»å‹ ä¸Šé¢çš„ä¾‹å­æ¥è¯´, så› ä¸ºæ˜¯ä¸å¯å˜çš„, åŠ ä¸Šå…¶æ•°æ®å¾ˆå°, æ‰€ä»¥æœ¬ä½“å­˜å‚¨åœ¨æ ˆä¸­ æœ¬æ¬¡æµ‹è¯•å°†æŠŠæ•°æ®çš„æœ¬ä½“æ”¾ç½®åœ¨å †ä¸­, è€Œå°†æŒ‡é’ˆæ”¾ç½®åœ¨æ ˆä¸­ æˆ‘ä»¬è¿™é‡Œä½¿ç”¨Stringä½œä¸ºä¾‹å­, ä¸“æ³¨äºStringä¸æ‰€æœ‰æƒç›¸å…³éƒ¨åˆ†. å¯¹äºåœ¨ç¼–è¯‘æ—¶æ— æ³•çŸ¥é“å…·ä½“çš„å€¼çš„å˜é‡, ä¹Ÿå°±æ˜¯è¯´å¹¶ä¸çŸ¥é“å¤§å°, ä»–å°±ä¼šè¢«åˆ†é…åˆ°å †ä¸Š, æ¯”å¦‚String 1let s = String::from(\"hello\"); è¿™é‡Œçš„::æ˜¯è¿ç®—ç¬¦, å…·ä½“çš„è¯¦æƒ…æˆ‘ä»¬åœ¨ä¹‹åçš„ç« èŠ‚è¯´æ˜. 12345fn main() { let mut s = String::from(\"hello\"); s.push_str(\", world\"); // åœ¨såæ‹¼æ¥å­—ç¬¦ä¸² println!(\"{}\", s); // hello, world} è¿™é‡Œå¾—åˆ°çš„sæ˜¯å¯å˜çš„, ä»–å¯ä»¥é€šè¿‡è°ƒç”¨ push_str å‡½æ•°æ¥ä¿®æ”¹è‡ªå·± å†…å­˜ä¸åˆ†é… å¯¹äºå­—ç¬¦ä¸²å­—é¢å€¼æ¥è¯´, æˆ‘ä»¬åœ¨ç¼–è¯‘æ—¶å°±èƒ½å‡†ç¡®çš„çŸ¥é“å…¶å†…å®¹, æ‰€ä»¥ç›´æ¥ç¡¬ç¼–ç è¿›æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­, è¿™ä½¿å¾—å­—ç¬¦ä¸²å­—é¢å€¼å¿«é€Ÿä¸”é«˜æ•ˆ. è¿™é‡Œçš„å‰ææ˜¯å­—ç¬¦ä¸²å­—é¢å€¼çš„ä¸å¯å˜æ€§, ä½†æ˜¯, å¯¹äºæœªçŸ¥çš„æ–‡æœ¬, æˆ‘ä»¬æ— æ³•åœ¨å¼€å§‹æ—¶ç¡®å®šå¤§å°, å› ä¸ºä»–æ˜¯å¯ä»¥æ”¹å˜çš„. å¯¹äºstringç±»å‹, ä¸ºäº†è®©ä»–å¯ä»¥æ”¯æŒä¸€ä¸ªå¯å˜çš„, å¯å¢é•¿çš„æ–‡æœ¬ç‰‡æ®µ, éœ€è¦åœ¨å †ä¸Šåˆ†é…ä¸€å—åœ¨ç¼–è¯‘æ—¶æœªçŸ¥å¤§å°çš„å†…å­˜å­˜æ”¾æ•°æ®, è¿™å°±æœ‰ä¸¤ä¸ªé—®é¢˜ å¿…é¡»åœ¨è¿è¡Œæ—¶å‘æ“ä½œç³»ç»Ÿè¯·æ±‚å†…å­˜ å½“stringå¤„ç†å®Œæˆåå°†å†…å­˜è¿”å›ç»™æ“ä½œç³»ç»Ÿ å¦‚ä½•åœ¨è¿è¡Œæ—¶è¯·æ±‚å†…å­˜å‘¢? å½“æˆ‘ä»¬è°ƒç”¨String::from æ—¶, ä»–ä¼šè¯·æ±‚æ‰€éœ€è¦çš„å†…å­˜ å¦‚ä½•åœ¨å¤„ç†å®Œæˆåå°†å†…å­˜è¿”ç»™æ“ä½œç³»ç»Ÿå‘¢? åœ¨æœ‰åƒåœ¾å›æ”¶ GC çš„è¯­è¨€ä¸­, GCä¼šè®°å½•å’Œæ¸…ç†ä¸å†ä½¿ç”¨çš„å†…å­˜, ä½œä¸ºå¼€å‘è€…æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒä»–, æ²¡æœ‰GCåˆ™éœ€è¦å¼€å‘è€…æ‰‹åŠ¨çš„é‡Šæ”¾, å°±è·Ÿè¯·æ±‚ä¸€æ ·éœ€è¦æˆ‘ä»¬å†™åœ¨ä»£ç ä¸­, æ­£ç¡®çš„å¤„ç†å†…å­˜å›æ”¶é€šå¸¸æ¯”è¾ƒå›°éš¾, å¦‚æœå¿˜è®°å›æ”¶ä¼šæµªè´¹å†…å­˜, å¯¼è‡´å†…å­˜æ³„éœ²ç­‰. å¦‚æœå›æ”¶è¿‡æ—©, å¯èƒ½ä¼šåœ¨åç»­çš„ä½¿ç”¨ä¸­å‡ºç°æ— æ•ˆå˜é‡, å¦‚æœé‡å¤å›æ”¶ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜, æ‰€ä»¥è¦å‡†ç¡®çš„åœ¨åˆé€‚çš„åœ°æ–¹å¯¹ä¸€ä¸ª åˆ†é…(allocate) é…å¯¹ä¸€ä¸ª é‡Šæ”¾(free) åœ¨Rustä¸­, å†…å­˜åœ¨æ‹¥æœ‰ä»–çš„å˜é‡ç¦»å¼€ä½œç”¨åŸŸæ—¶å°±è¢«è‡ªåŠ¨é‡Šæ”¾, ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ 123456{ let mut s = String::from(\"hello\"); // åˆ›å»ºs, sæ­¤æ—¶æ˜¯æœ‰æ•ˆçš„, åœ¨æ­¤ä½œç”¨åŸŸä¸­ s.push_str(\", world\"); // ä½¿ç”¨ä¿®æ”¹s, åœ¨såæ‹¼æ¥å­—ç¬¦ä¸² println!(\"{}\", s); // hello, world} // è¯¥ä½œç”¨åŸŸå·²ç»“æŸ, ä½œç”¨åŸŸå†…çš„ä½¿ç”¨çš„å†…å­˜éœ€è¦é‡Šæ”¾// så¤±æ•ˆäº† è¿™é‡Œ, å½“sç¦»å¼€å½“å‰æœ‰æ•ˆçš„ä½œç”¨åŸŸæ—¶, Rustä¸ºæˆ‘ä»¬è‡ªåŠ¨è°ƒç”¨å‡½æ•°drop (å‰ææ˜¯è¯¥æ•°æ®ç±»å‹æœ‰drop), è¯¥å‡½æ•°å¯ä»¥å°†å˜é‡é‡Šæ”¾, Rustä¼šåœ¨ç»“å°¾}è‡ªåŠ¨è°ƒç”¨ éœ€è¦é‡Šæ”¾çš„å˜é‡çš„drop å˜é‡ä¸æ•°æ®äº¤äº’: ç§»åŠ¨ å¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªå˜é‡èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡, å…¶æ•°æ®ä¼šæ€ä¹ˆå¤„ç†å‘¢? 123let x = 5; // xä¸º5let y = x; // copy xçš„å€¼5, èµ‹å€¼ç»™y// xå’Œyéƒ½ç­‰äº5 å› ä¸º5æ˜¯åœ¨ç¼–è¯‘æ—¶å°±å¯ä»¥ç¡®å®šçš„, æ‰€ä»¥è¿™ä¸¤ä¸ª5è¢«æ”¾å…¥äº†æ ˆä¸­ é‚£ä¹ˆå¯¹äºæ— æ³•ç¡®å®šå¤§å°çš„å˜é‡æ¥è¯´, ä¾‹å¦‚ 12let s1 = String::from(\"s1\");let s2 = s1; ä¹‹å‰è¯´è¿‡, å¯¹äºä¸å¯é¢„æµ‹çš„å˜é‡, æˆ‘ä»¬ä¼šåœ¨æ ˆä¸Šå­˜å‚¨æŒ‡é’ˆè€Œåœ¨å †ä¸Šå­˜å‚¨çœŸæ­£çš„æ•°æ®, é‚£ä¹ˆå¯¹äºs1æ¥è¯´, åœ¨æ ˆä¸Šçš„æ•°æ®ä¸º name value ptr(æŒ‡é’ˆ) å †ä¸Šçš„åœ°å€ len(é•¿åº¦) 2 capacity(å®¹é‡) 2 æŒ‡é’ˆæŒ‡å‘çš„å †çš„æ•°æ®ä¸º index value 0 s 1 1 è¿™å°±æ˜¯å°†s1ç»‘å®šç»™å˜é‡s1åœ¨å†…å­˜ä¸­çš„è¡¨ç°å½¢å¼ æˆ‘ä»¬æ³¨æ„åˆ°, æ ˆä¸Šçš„æ•°æ®æœ‰ é•¿åº¦ å’Œ å®¹é‡, é•¿åº¦æŒ‡çš„æ˜¯å½“å‰ä½¿ç”¨äº†å¤šå°‘å­—èŠ‚çš„å†…å­˜, å®¹é‡æŒ‡çš„æ˜¯ä»æ“ä½œç³»ç»Ÿç”³è¯·äº†å¤šå°‘å­—èŠ‚çš„å†…å­˜, è¿™ä¸¤ä¸ªæ˜¯ä¸ä¸€æ ·çš„, ä¸è¦æ··æ·† è€Œæˆ‘ä»¬å°†s1èµ‹å€¼ç»™s2æ—¶, å®é™…ä¸Šåªæ˜¯ä»æ‹·è´äº†s1åœ¨æ ˆä¸Šçš„æ•°æ®, ä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶ s1ä¸s2å…±åŒæŒ‡å‘äº†ä¸€ä¸ªå †åœ°å€, è¿™è·Ÿå…¶ä»–è¯­è¨€çš„ æµ…COPY(shallow copy) éå¸¸åƒ, è¿™æ ·åšçš„å¥½å¤„æ˜¯ä½¿æ“ä½œå˜å¾—å¿«é€Ÿ, å¦‚æœæ˜¯ æ·±COPY(deep copy) , æ„å‘³ç€éœ€è¦å°†å †ä¸Šçš„æ•°æ®æ‰¾åˆ°,å†æ’å…¥åˆ°å †çš„å¦ä¸€ä¸ªåœ°æ–¹, å¦‚æœå †ä¸Šçš„å€¼å¾ˆå¤§, åˆ™ä¼šé€ æˆæ•ˆç‡çš„ä½ä¸‹ ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´é—®é¢˜å‡ºç°, ä¾‹å¦‚å½“s1ä¸s2ç¦»å¼€äº†ä½œç”¨åŸŸæ—¶, Rust ä¼šå¯¹s1å’Œs2è¿›è¡Œæ¸…ç†, ä½†æ˜¯ä»–ä»¬å®é™…ä¸ŠæŒ‡å‘äº†åŒä¸€ä¸ªåœ°å€, ä¸¤æ¬¡æ¸…ç†ä¸€ä¸ªå†…å­˜, è¿™å°±ä¼šå‡ºç°å‰æ–‡æåˆ°çš„ äºŒæ¬¡é‡Šæ”¾(double free) é—®é¢˜, å› æ­¤, Rustä½¿ç”¨äº†ä¸åŒçš„æ–¹æ³•, å³ ç§»åŠ¨(move) , å°±æ˜¯åœ¨è¿è¡Œ s2=s1 æ—¶, å°†s1æ— æ•ˆåŒ– 123456fn main() { let s1 = String::from(\"s1\"); // åˆ›å»ºs1 let s2 = s1; // å°†s1æ ˆä¸Šçš„æ•°æ®è½¬ç§»åˆ°s2ä¸Š, s1å¤±æ•ˆäº† println!(\"{}\", s1); // s1ä¸å¯ç”¨, æ‰€ä»¥ä¼šå‡ºé”™ println!(\"{}\", s2); // s2å¯ç”¨} // dropæ—¶, å…ˆå¤„ç†s2çš„Dropå†s2çš„æ ˆ, s1æ— äº†, åªæ¸…ç†s1çš„æ ˆ è¿è¡Œè¯¥ä»£ç æ—¶, ä¼šå‡ºé”™ 1234567891011121314error[E0382]: borrow of moved value: `s1` --&gt; src/main.rs:4:20 |2 | let s1 = String::from(\"s1\"); | -- move occurs because `s1` has type `std::string::String`, which does not implement the `Copy` trait3 | let s2 = s1; | -- value moved here4 | println!(\"{}\", s1); | ^^ value borrowed here after moveerror: aborting due to previous errorFor more information about this error, try `rustc --explain E0382`.error: could not compile `ownership`. Rustç¦æ­¢ä½ ä½¿ç”¨æ— æ•ˆçš„å¼•ç”¨ æ‰€ä»¥, Ruståœ¨å¤„ç†è¿™ä¸ªs2 = s1æ—¶, å…ˆå°†s1çš„æ ˆæ•°æ®å¤åˆ¶ä¸€ä»½ç»™s2, ç„¶åå°†s1ç½®ç©º, è¿™æ ·å°±è§£å†³äº†äºŒæ¬¡é‡Šæ”¾çš„é—®é¢˜ éœ€è¦çŸ¥é“çš„æ˜¯, Rustçš„è®¾è®¡åŸåˆ™æ˜¯: æ°¸è¿œä¸ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®çš„æ·±æ‹·è´, è¿™æ˜¯å‡ºäºå¯¹æ€§èƒ½å½±å“çš„è€ƒè™‘ å˜é‡ä¸æ•°æ®äº¤äº’: å…‹éš† å¦‚æœä½ ç¡®å®éœ€è¦è¿›è¡Œæ·±copy, ä½ å¯ä»¥ä½¿ç”¨å†…ç½®å‡½æ•°clone 123456fn main() { let s1 = String::from(\"s1\"); // åˆ›å»ºs1, s1è¿›å…¥ä½œç”¨åŸŸ let s2 = s1.clone(); // s1çš„å †æ•°æ®å¤åˆ¶ä¸ºå¦ä¸€ä»½, ç„¶åé‡æ–°ç”Ÿæˆæ ˆæ•°æ®, æŒ‡å‘æ–°çš„å †æ•°æ®, s2è¿›å…¥ä½œç”¨åŸŸ println!(\"{}\", s1); // æœªå‘ç”Ÿè½¬ç§», s1è¿˜æ˜¯å¯ç”¨çš„ println!(\"{}\", s2); // s2å¯ç”¨} // dropæ—¶, s1å’Œs2çš„å †æ•°æ®å¹¶ä¸æ˜¯ä¸€ä¸ª, æ‰€ä»¥æ²¡æœ‰äºŒæ¬¡é‡Šæ”¾çš„é—®é¢˜, å…ˆè¿›åå‡ºæ‰€ä»¥å…ˆæ¸…ç†s2 å¿…é¡»è¦æ³¨æ„çš„æ˜¯, è¿™æ ·ä¼šå¯¹èµ„æºå’Œæ€§èƒ½é€ æˆä¸€å®šçš„æŸè€—, åœ¨ç¡®ä¿ä½ å¿…é¡»è¿™æ ·åšæ—¶æ‰éœ€è¦è¿›è¡Œå…‹éš†æ“ä½œ åªåœ¨æ ˆä¸Šçš„æ•°æ®: æ‹·è´ è€Œå¯¹äºåªåœ¨æ ˆä¸Šä¿å­˜çš„æ•°æ®, ä¹Ÿå°±æ˜¯åœ¨ç¼–è¯‘æ—¶å°±çŸ¥é“å€¼çš„æ•°æ®æ¥è¯´, ä¸å­˜åœ¨è½¬ç§»å’Œå…‹éš†, å› ä¸ºä»–æ˜¯åªä¿å­˜åœ¨æ ˆä¸Š, æ‰€ä»¥è¿›è¡Œæ‹·è´é€Ÿåº¦å¾ˆå¿«,Ruståœ¨å¤„ç†è¿™ç§æ•°æ®çš„èµ‹å€¼æ—¶ç›´æ¥copyæ ˆçš„æ•°æ®åˆ°å¦ä¸€ä¸ªå˜é‡, æ‰€ä»¥ä¸¤ä¸ªå˜é‡éƒ½å¯ç”¨ 12345fn main() { let s1 = 1; // åˆ›å»ºs1, è¿›å…¥ä½œç”¨åŸŸ let s2 = s1; // æ‹·è´s1çš„æ ˆæ•°æ®ç”Ÿæˆs2, s2è¿›å…¥ä½œç”¨åŸŸ println!(\"{},{}\", s1, s2) // s1ä¸s2éƒ½å¯ä»¥ä½¿ç”¨} // i32æ²¡æœ‰drop, æ ¹æ®å…ˆè¿›å…ˆå‡º, æ¸…ç†s2å†s1 æ€ä¹ˆåˆ†è¾¨ä»€ä¹ˆæ˜¯ä¼šå‡ºç°ç§»åŠ¨çš„å‘¢, Rustæœ‰ä¸€ä¸ªå«åšCopyçš„traitçš„ç‰¹æ®Šæ³¨è§£, å¦‚æœæŸä¸ªç±»å‹æ‹¥æœ‰è¿™ä¸ªæ³¨è§£, é‚£ä¹ˆæ—§çš„å˜é‡åœ¨èµ‹å€¼ç»™æ–°çš„å˜é‡åä¾æ—§å¯ç”¨. å¦‚æœä¸€ä¸ªç±»å‹æœ‰Dropæ³¨è§£, é‚£ä¹ˆä»–å°±æ— æ³•ä½¿ç”¨Copyæ³¨è§£. ä»–ä»¬æ˜¯æ— æ³•å…±å­˜çš„. ä»€ä¹ˆç±»å‹æ˜¯Copyçš„å‘¢? å¯ä»¥æŸ¥çœ‹å¯¹åº”çš„æ–‡æ¡£. ä¸€èˆ¬çš„, ä»»ä½•ç®€å•æ ‡é‡å€¼çš„ç»„åˆå¯ä»¥æ˜¯Copyçš„, ä¸éœ€è¦åˆ†é…å†…å­˜æˆ–è€…æŸç§å½¢å¼çš„èµ„æºç±»å‹æ˜¯Copyçš„, æ¯”å¦‚ æ‰€æœ‰æ•´æ•°ç±»å‹ å¸ƒå°”ç±»å‹ æ‰€æœ‰æµ®ç‚¹ç±»å‹ å­—ç¬¦ç±»å‹, char å…ƒç»„, å½“å…¶åŒ…å«çš„ç±»å‹éƒ½æ˜¯Copyæ—¶ dropä¸å†…å­˜é‡Šæ”¾çš„å…³ç³» è¿™é‡Œæ˜¯æœ¬äººè®°å½•çš„ éœ€è¦æ³¨æ„çš„æ˜¯, Rusté‡Šæ”¾å†…å­˜æœ‰ä¸¤ç§ å¦‚æœæ˜¯æœ‰dropæ³¨è§£çš„æ•°æ®ç±»å‹(ä¾‹å¦‚String), å…ˆæ‰§è¡Œdropæ–¹æ³•,å†å°†æ ˆæ•°æ®åˆ é™¤ è€Œæ²¡æœ‰dropæ³¨è§£çš„æ•°æ®ç±»å‹(ä¾‹å¦‚i32), ç›´æ¥å°†æ ˆæ•°æ®åˆ é™¤ ä¸ºä»€ä¹ˆdropä¸copyæ³¨è§£ä¸èƒ½å…¼å®¹ è¿™é‡Œæ˜¯æœ¬äººè®°å½•çš„ æˆ‘ä»¬çŸ¥é“, copyæ³¨è§£ä»£è¡¨ç€è¯¥æ•°æ®ç±»å‹å¹¶ä¸ä¼šå‘ç”Ÿè½¬ç§», ä¹Ÿå°±æ˜¯è¯´å‘ç”Ÿ s1 = s2 æ—¶,s2 ä¾æ—§å­˜åœ¨, åœ¨å†…éƒ¨é€»è¾‘ä¸­æ˜¯Copyä¸€ä»½æ ˆæ•°æ®, æœ‰copy çš„æ•°æ®ç±»å‹ä¸€èˆ¬åªå°†æ•°æ®æ”¾ç½®åœ¨æ ˆä¸Š, åœ¨é€€å‡ºä½œç”¨åŸŸæ—¶, åªéœ€è¦æ¸…ç†æ ˆæ•°æ®å³å¯, è€Œæ‹¥æœ‰dropçš„æ•°æ®ç±»å‹, rustä¼šä¼˜å…ˆè°ƒç”¨dropæ–¹æ³•, ä¸€èˆ¬æ¥è®², drop ä¸€èˆ¬æ˜¯æ¸…ç†å †çš„æœ‰å…³æ•°æ®, copyçš„ä¸éœ€è¦æ¸…ç†, æ‰€ä»¥ä¸ºäº†ä¿æŒç»Ÿä¸€, å°±è§„å®šäº†ä¸¤è€…ä¸å…¼å®¹ å¦‚æœæŸä¸ªç±»å‹åŒæ—¶æ‹¥æœ‰Copyå’ŒDropæ³¨è§£çš„è¯, é¦–å…ˆæ‹¥æœ‰Dropä¸€èˆ¬éƒ½éœ€è¦å°†æ•°æ®æœ¬ä½“æ”¾ç½®è¿›å †, é‚£æ ·åœ¨é‡å¤èµ‹å€¼æ—¶åˆæœ‰Copyä¼šCopyä¸€ä»½æ ˆæ•°æ®, å°±é€ æˆäº†ä¸¤ä¸ªå˜é‡å®é™…ä¸ŠæŒ‡å‘äº†åŒä¸€ä¸ªèµ„æº, åœ¨æ¸…ç†æ—¶å°±ä¼šå‘ç”ŸäºŒæ¬¡é‡Šæ”¾çš„é—®é¢˜ æ‰€æœ‰æƒä¸å‡½æ•° 123456789101112131415161718fn main() { let s = String::from(\"s\"); // åˆ›å»ºs, è¿›å…¥ä½œç”¨åŸŸ takes_ownership(s); // sè½¬ç§»è¿›äº†å‡½æ•°takes_ownershipçš„some_stringä¸­ println!(\"{}\", s); // è¿™é‡Œä¼šæŠ¥é”™, å› ä¸ºså·²ç»è½¬ç§», sä¸å¯ç”¨äº† let i = 5; // iè¿›å…¥ä½œç”¨åŸŸ makes_copy(i); println!(\"{}\", i); // iå¯ç”¨, å› ä¸ºiæ˜¯å­˜å‚¨åœ¨æ ˆä¸Š, æœ‰`Copy`ç›´æ¥å¤åˆ¶ä¸€ä»½è¿›makes_copyçš„some_integer} // så’Œié€€å‡ºä½œç”¨åŸŸ, æ ˆæ˜¯å…ˆè¿›åå‡º, æ‰€ä»¥å…ˆæ¸…ç†i, iæ²¡æœ‰`Drop`æ‰€ä»¥ç›´æ¥åˆ é™¤æ ˆ, så·²ç»è¢«è½¬ç§»æ‰€ä»¥ä¸åšç‰¹æ®Šæ“ä½œfn takes_ownership(some_string: String) { // some_string è¿›å…¥ä½œç”¨åŸŸ println!(\"{}\", some_string);} // some_string ç§»å‡ºä½œç”¨åŸŸå¹¶è°ƒç”¨`drop`æ–¹æ³•ã€‚å ç”¨çš„å†…å­˜è¢«é‡Šæ”¾fn makes_copy(some_integer: i32) { // some_integer è¿›å…¥ä½œç”¨åŸŸ println!(\"{}\", some_integer);} // å°† some_integer é‡Šæ”¾, å› ä¸ºi32æ²¡æœ‰`drop`æ³¨è§£æ‰€ä»¥åªæ¸…ç†æ ˆæ•°æ® è¿”å›å€¼ä¸ä½œç”¨åŸŸ å¦‚æœå‡½æ•°æ˜¯æ‹¥æœ‰è¿”å›å€¼, å¦‚æœè¿”å›å€¼æ˜¯drop, åˆ™ä¼šå°†è¿”å›å€¼ç§»åŠ¨ç»™è¿”å›å€¼çš„æ¥æ”¶è€…, å¦‚æœæ˜¯copy, åˆ™æ˜¯copyç»™è¿”å›å€¼ å˜é‡çš„æ‰€æœ‰æƒæ€»æ˜¯éµå¾ªç›¸åŒçš„æ¨¡å¼: å°†å€¼ä»˜ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ç§»åŠ¨ä»–. å½“æŒæœ‰å †ä¸­æ•°æ®å€¼çš„å˜é‡ç¦»å¼€ä½œç”¨åŸŸæ—¶, å †ä¸­å€¼ä¼šé€šè¿‡dropè¢«æ¸…ç†, é™¤éæ•°æ®è¢«ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå˜é‡ çœ‹ä¸‹é¢ä»£ç  1234567891011121314151617181920212223fn main() { let s1 = gives_ownership(); // s1æ¥å—è¿”å›å€¼, è¿›å…¥ä½œç”¨åŸŸ let s2 = String::from(\"s2\"); // åˆ›å»ºs2, è¿›å…¥ä½œç”¨åŸŸ let s3 = takes_and_gives_back(s2); // s2ä¼ å…¥takes_and_gives_backå‡½æ•°, s2è½¬ç§»ç»™è¯¥å‡½æ•°çš„a_string, éšås3æ¥å—è¿”å›å€¼, è¿›å…¥ä½œç”¨åŸŸ println!(\"{}\", s2); // è¿™é‡Œs2å·²ç»å‘ç”Ÿè½¬ç§», æŒ‡é’ˆä¸ºç©º, æ‰€ä»¥ä½¿ç”¨ä¼šæŠ¥é”™ println!(\"{}, {}\", s1, s3); // s1å’Œs3å¯ç”¨} // é€€å‡ºä½œç”¨åŸŸ, æ¸…ç†s3&gt;s2&gt;s1// s2ä¸ºç©ºfn gives_ownership() -&gt; String { let some_string = String::from(\"gives_ownership\"); some_string // å¦‚æœè¿™é‡Œè¿”å›äº†, è€Œè¿”å›å€¼æ˜¯Stringç±»å‹, æœ‰Dropæ³¨è§£, ä¼šå‘ç”Ÿæ‰€æœ‰æƒçš„ç§»åŠ¨, ç§»åŠ¨ç»™æ¥å—è€…, some_stringå¤±æ•ˆäº†} // some_string ç§»é™¤ä½œç”¨åŸŸ, å› ä¸º some_string å·²ç»è½¬ç§»æ‰€ä»¥åªåˆ é™¤æ ˆfn takes_and_gives_back(a_string: String) -&gt; String { a_string // å¦‚æœè¿™é‡Œè¿”å›äº†, è€Œè¿”å›å€¼æ˜¯Stringç±»å‹, æœ‰Dropæ³¨è§£, ä¼šå‘ç”Ÿç§»åŠ¨, ç§»åŠ¨ç»™æ¥å—è€…, a_stringå¤±æ•ˆäº†} // a_string ç§»é™¤ä½œç”¨åŸŸ, å› ä¸º a_string å·²ç»è½¬ç§»æ‰€ä»¥åªåˆ é™¤æ ˆ è¿™æ ·å°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜, å¦‚æœæŸä¸ªå˜é‡æ˜¯æ‹¥æœ‰Dropçš„, é‚£ä¹ˆè¿™ä¸ªå˜é‡éœ€è¦ä½œä¸ºæŸä¸ªå‡½æ•°çš„å‚æ•°ä½¿ç”¨, æˆ‘ä»¬ä¼ å…¥åˆ°è¿™ä¸ªå‡½æ•°ä¸­æ€»ä¼šä½¿åŸæœ‰çš„å˜é‡å¤±æ•ˆ, é‚£ä¹ˆå¦‚æœæˆ‘è¿˜éœ€è¦å†ä½¿ç”¨è¿™ä¸ªå˜é‡å‘¢? æœ‰ä¸€ä¸ªæŠ˜ä¸­çš„åŠæ³•, åœ¨å‡½æ•°ä¸­å†å°†å‚æ•°å€¼ä¼ å‡º, ä¾‹å¦‚ 123456789101112fn main() { let s1 = String::from(\"s1\"); let (s2, len) = calculate_length(s1); // s1è½¬ç§»äº†, ç”¨s2æ¥å—åŸæ¥çš„s1 println!(\"The length of '{}' is {}.\", s2, len);}fn calculate_length(s: String) -&gt; (String, usize) { let length = s.len(); // len() è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ (s, length) // å°†sä¹Ÿè¿”å›} ä½†æ˜¯è¿™æ ·å¤ªLOWäº†, ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜, Rustæä¾›äº†å¼•ç”¨(references) å¼•ç”¨å’Œå€Ÿç”¨ å¼•ç”¨å¯ä»¥åœ¨ä¸è½¬ç§»æ‰€æœ‰æƒçš„æƒ…å†µä¸‹ä½¿ç”¨å˜é‡ 12345678910fn main() { let s1 = String::from(\"hello\"); // s1è¿›å…¥ä½œç”¨åŸŸ let len = calculate_length(&amp;s1); // å°† &amp;s1 ä¼ å…¥, &amp;æ„æ€æ˜¯å¼•ç”¨, å³å°†s1çš„å¼•ç”¨ä¼ å…¥å‡½æ•°calculate_length println!(\"The length of '{}' is {}.\", s1, len); // ä»å¯ä»¥ä½¿ç”¨s1, å› ä¸ºæœªå‘ç”Ÿæ‰€æœ‰æƒè½¬ç§»}fn calculate_length(s: &amp;String) -&gt; usize { // å› ä¸ºç±»å‹å˜æˆäº†Stringçš„å¼•ç”¨, æ‰€ä»¥æ¥æ”¶å‚æ•°ç±»å‹å‘ç”Ÿå˜åŒ– s.len()} &amp;ä»£è¡¨å¯¹æŸä¸ªå¼•ç”¨, å¼•ç”¨å…è®¸ä½ ä½¿ç”¨å€¼ä½†ä¸è·å–å…¶æ‰€æœ‰æƒ, æ¯”å¦‚ä¸Šé¢çš„ s1, å½“ s1ä¼ å…¥åˆ° calculate_length çš„å‚æ•° s æ—¶, å®é™…ä¸Šsæ˜¯ s1 çš„å¼•ç”¨, ç±»ä¼¼äºæŒ‡é’ˆ, æŒ‡å‘äº†s1 ä¸&amp;(å¼•ç”¨)ç›¸åçš„æ“ä½œæ˜¯è§£å¼•ç”¨(dereferences), ä»–çš„è¿ç®—ç¬¦æ˜¯ *, ä¹‹åä¼šè®²åˆ° &amp;s1 è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæŒ‡å‘s1çš„å¼•ç”¨, ä½†æ˜¯å¹¶ä¸æ‹¥æœ‰ä»–, å› ä¸ºä¸æ‹¥æœ‰ä»–, æ‰€ä»¥å½“å¼•ç”¨ç¦»å¼€ä½œç”¨åŸŸæ—¶å…¶æŒ‡å‘çš„å€¼ä¹Ÿä¸ä¼šè¢«æ¸…ç† åœ¨ calculate_length ç»“æŸæ—¶, sç¦»å¼€ä½œç”¨åŸŸ, ç†åº”æ¸…ç†, ä½†æ˜¯å› ä¸ºsåªæ˜¯ä¸ªå¼•ç”¨ç±»å‹, æ‰€ä»¥åªæŠŠsæ¸…ç†å¹¶ä¸ä¼šæ¸…ç†så¯¹åº”çš„çœŸæ­£çš„å˜é‡ å¯¹äºå‡½æ•° calculate_length æ¥è¯´, å…¶æ¥å—äº†Stringçš„å¼•ç”¨, è¿™ç§è¡Œä¸ºè¢«ç§°ä¸º å€Ÿç”¨ éœ€è¦æ³¨æ„çš„æ˜¯, å¦‚æœä½ å€Ÿç”¨äº†æŸä¸ªå˜é‡, é‚£ä½  é»˜è®¤æƒ…å†µä¸‹ æ˜¯æ— æ³•ä¿®æ”¹è¿™ä¸ªå˜é‡çš„å€¼çš„ 123456789fn main() { let mut s = String::from(\"hello\"); change(&amp;s);}fn change(some_string: &amp;String) { some_string.push_str(\", world\"); // å°è¯•è¿½åŠ å­—ç¬¦ä¸²} ä¼šæŠ¥é”™ 123456789101112error[E0596]: cannot borrow `*some_string` as mutable, as it is behind a `&amp;` reference --&gt; src/main.rs:8:5 |7 | fn change(some_string: &amp;String) { | ------- help: consider changing this to be a mutable reference: `&amp;mut std::string::String`8 | some_string.push_str(\", world\"); // å°è¯•è¿½åŠ å­—ç¬¦ä¸² | ^^^^^^^^^^^ `some_string` is a `&amp;` reference, so the data it refers to cannot be borrowed as mutableerror: aborting due to previous errorFor more information about this error, try `rustc --explain E0596`.error: could not compile `ownership`. æç¤ºä½ æ— æ³•ä¿®æ”¹ä»–, å½“ç„¶è¿™æ˜¯é»˜è®¤æƒ…å†µä¸‹ å¯å˜å¼•ç”¨ æŸäº›æƒ…å†µä¸‹å¯ä»¥ä¿®æ”¹å¼•ç”¨çš„å€¼, æˆ‘ä»¬ä¿®æ”¹ä»£ç æˆ 12345678910fn main() { let mut s = String::from(\"hello\"); change(&amp;mut s); // &amp;mut è¡¨ç¤ºæ˜¯å¯å˜çš„å¼•ç”¨ println!(\"{}\", s) // hello, world}fn change(some_string: &amp;mut String) { // åŒæ ·çš„å‚æ•°ç±»å‹ä¹Ÿè¦ mut some_string.push_str(\", world\"); // å°è¯•è¿½åŠ å­—ç¬¦ä¸²} è¿™æ ·å³å¯è¿è¡Œ, ä½†æ˜¯æ³¨æ„, å¯å˜å¼•ç”¨æœ‰å‡ ä¸ªé™åˆ¶ åœ¨ç‰¹å®šä½œç”¨åŸŸçš„ç‰¹å®šæ•°æ®åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ ä¾‹å¦‚ä»¥ä¸‹ä»£ç  123456fn main() { let mut s = String::from(\"hello\"); let r1 = &amp;mut s; let r2 = &amp;mut s; // é”™è¯¯, å› ä¸ºsçš„ &amp;mut åŒæ—¶åªèƒ½å‡ºç°ä¸€ä¸ª println!(\"{},{}\", r1, r2);} ä¼šæŠ¥é”™ 1234567891011121314error[E0499]: cannot borrow `s` as mutable more than once at a time --&gt; src/main.rs:4:14 |3 | let r1 = &amp;mut s; | ------ first mutable borrow occurs here4 | let r2 = &amp;mut s; | ^^^^^^ second mutable borrow occurs here5 | println!(\"{},{}\", r1, r2) | -- first borrow later used hereerror: aborting due to previous errorFor more information about this error, try `rustc --explain E0499`.error: could not compile `ownership`. è¿™æ˜¯ä¸ºäº†é¿å…å‡ºç°æ•°æ®ç«äº‰çš„é—®é¢˜, æ•°æ®ç«äº‰é€šå¸¸ç”±è¿™ä¸‰ç§è¡Œä¸ºé€ æˆ: ä¸¤ä¸ªæˆ–å¤šä¸ªæŒ‡é’ˆåŒæ—¶è®¿é—®ä¸€ä¸ªæ•°æ® è‡³å°‘ä¸€ä¸ªæŒ‡é’ˆå†™å…¥æ•°æ® æ²¡æœ‰åŒæ­¥æ•°æ®çš„æœºåˆ¶ æ•°æ®ç«äº‰å¯èƒ½å¯¼è‡´å‡ºç°BUG, å¹¶ä¸”è®©å¼€å‘è€…éš¾ä»¥å®šä½å’Œè§£å†³é—®é¢˜, æ‰€ä»¥Ruståœ¨ç¼–è¯‘æ—¶ä¼šæ£€æŸ¥è¿™ä¸ªé—®é¢˜ å½“ç„¶, è¿™ä¸ªé™åˆ¶åªæ˜¯å­˜åœ¨äºåŒä¸€ä¸ªä½œç”¨åŸŸ, ä¾‹å¦‚ä¸‹é¢çš„ä»£ç æ˜¯å¯ä»¥çš„ 1234567fn main() { let mut s = String::from(\"hello\"); { let r1 = &amp;mut s; } // å¯å˜å¼•ç”¨r1é€€å‡ºä½œç”¨åŸŸ let r2 = &amp;mut s; // å¯ä»¥é‡æ–°åˆ›å»º} åœ¨ç‰¹å®šä½œç”¨åŸŸçš„ç‰¹å®šæ•°æ®ä¸èƒ½åŒæ—¶æ‹¥æœ‰å¯å˜å’Œä¸å¯å˜å¼•ç”¨ 12345678910fn main() { let mut s = String::from(\"hello\"); let r1 = &amp;s; // ä¸å¯å˜1 let r2 = &amp;s; // ä¸å¯å˜2 let r3 = &amp;mut s; // å¯å˜1 println!(\"{}, {}, and {}\", r1, r2, r3); // ä¼šæŠ¥é”™, å› ä¸ºä¸å¯å˜ä¸å¯å˜å¼•ç”¨æ— æ³•å…±å­˜ } æŠ¥é”™ 12345678910111213141516error[E0502]: cannot borrow `s` as mutable because it is also borrowed as immutable --&gt; src/main.rs:6:14 |4 | let r1 = &amp;s; // ä¸å¯å˜1 | -- immutable borrow occurs here5 | let r2 = &amp;s; // ä¸å¯å˜26 | let r3 = &amp;mut s; | ^^^^^^ mutable borrow occurs here7 | 8 | println!(\"{}, {}, and {}\", r1, r2, r3); | -- immutable borrow later used hereerror: aborting due to previous errorFor more information about this error, try `rustc --explain E0502`.error: could not compile `ownership`. ä¸¤è€…ä¸èƒ½å…±å­˜, Rustè®¤ä¸ºå¦‚æœä½ ä½¿ç”¨äº†ä¸å¯å˜å¼•ç”¨. ä½ ä¸€å®šä¸å¸Œæœ›ä»–åœ¨æŸäº›æ—¶å€™å˜åŒ–, æ‰€ä»¥ç¦æ­¢å…±å­˜, ä½†æ˜¯å¯¹äºå¤šä¸ªä¸å¯å˜å¼•ç”¨, æ˜¯å¯ä»¥çš„. å› ä¸ºéƒ½æ˜¯è¯»å–, å°±æ˜¯å®‰å…¨çš„, æ²¡æœ‰åŠæ³•å½±å“åˆ°åˆ«äºº, æ‰€ä»¥å¯ä»¥ä¸€ä¸ªä½œç”¨åŸŸå¯ä»¥æœ‰å¤šä¸ªä¸å¯å˜å¼•ç”¨å­˜åœ¨ æ ‡é¢˜æ‰€è¨€çš„æ˜¯ç‰¹å®šä½œç”¨åŸŸ, å¯¹äºå¼•ç”¨æ¥è¯´, ä»–çš„ä½œç”¨åŸŸä»å£°æ˜çš„åœ°æ–¹å¼€å§‹åˆ°æœ€åä¸€æ¬¡ä½¿ç”¨ä¸ºæ­¢. å¦‚æœå£°æ˜æœªä½¿ç”¨, é‚£ä¹ˆåªå­˜åœ¨äºå£°æ˜çš„é‚£ä¸€è¡Œ, å½“ç„¶æœ€å¥½ä¸è¦å£°æ˜å´ä¸ä½¿ç”¨, è¿™æ˜¯ä¸å¥½çš„ä¹ æƒ¯ 123456789fn main() { let mut s = String::from(\"hello\"); let r1 = &amp;s; // ä¸å¯å˜1, æœªä½¿ç”¨ let r2 = &amp;s; // ä¸å¯å˜2, æœªä½¿ç”¨ let r3 = &amp;mut s; // å¯å˜1, ä½¿ç”¨ println!(\"{}\", r3); // è¿™é‡Œå·²ç»è¶…å‡ºäº†r1å’Œr2çš„ä½œç”¨åŸŸ, å› ä¸ºr1/r2æœªä½¿ç”¨, ä½œç”¨åŸŸåªæœ‰ç”Ÿæˆçš„ä¸€è¡Œ} 12345678910fn main() { let mut s = String::from(\"hello\"); let r1 = &amp;s; // ä¸å¯å˜1, æœªä½¿ç”¨ let r2 = &amp;s; // ä¸å¯å˜2, æœªä½¿ç”¨ println!(\"{},{}\", r1, r2); // è¿™é‡Œæ˜¯r1/r2æœ€åä¸€æ¬¡ä½¿ç”¨, r1/r2ä½œç”¨åŸŸåˆ°æ­¤ç»“æŸ let r3 = &amp;mut s; // å¯å˜1, ä½¿ç”¨ println!(\"{}\", r3); // å¯ä½¿ç”¨, å½“å‰ä½œç”¨åŸŸæ— ä¸å¯å˜å¼•ç”¨} å‚æ‚¬å¼•ç”¨ å‚æ‚¬æŒ‡é’ˆæŒ‡çš„æ˜¯æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹å·²ç»è¢«åˆ†é…ç»™äº†å…¶ä»–çš„æŒæœ‰è€…. åœ¨Rustä¸­, ç¼–è¯‘å™¨ç¡®ä¿äº†æ°¸è¿œä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜, å› ä¸ºå½“ä½ æ‹¥æœ‰å¼•ç”¨æ—¶, ç¼–è¯‘å™¨ä¼šç¡®ä¿æ•°æ®ä¸ä¼šåœ¨å…¶å¼•ç”¨ä¹‹å‰ç¦»å¼€ä½œç”¨åŸŸ 12345678910fn main() { let res = dangle(); // æ¥æ”¶è¿”å›çš„å¼•ç”¨ println!(\"{}\", res);}fn dangle() -&gt; &amp;String { let s = String::from(\"hello\"); // sè¿›å…¥ä½œç”¨åŸŸ &amp;s // å°†sçš„å¼•ç”¨è¿”å›} // å‡½æ•°ç»“æŸ, sçš„æ•°æ®ä¼šè¢«æ¸…ç†, ä½†æ˜¯sçš„å¼•ç”¨è¿”å›å‡ºå»äº† è¿™é‡Œçš„ res æ˜¯å‡½æ•° dangle å†…éƒ¨ç”Ÿæˆçš„å˜é‡çš„å¼•ç”¨, ä½†æ˜¯è¯¥å‡½æ•°å†…éƒ¨çš„å˜é‡ä¼šç»“æŸåé”€æ¯, æ­¤æ—¶ä½ è·å–åˆ°çš„å¼•ç”¨å°±æ˜¯é”™è¯¯çš„, å°±ä¼šå‘ç”Ÿæ‚¬å‚å¼•ç”¨çš„é—®é¢˜, Rustä¼šåœ¨ç¼–è¯‘æ—¶äºˆä»¥æ‹¦æˆª 123456789101112error[E0106]: missing lifetime specifier --&gt; src/main.rs:6:16 |6 | fn dangle() -&gt; &amp;String { | ^ help: consider giving it a 'static lifetime: `&amp;'static` | = help: this function's return type contains a borrowed value, but there is no value for it to be borrowed fromerror: aborting due to previous errorFor more information about this error, try `rustc --explain E0106`.error: could not compile `ownership`. å¦‚æœæœ‰è¿™æ ·çš„éœ€æ±‚, ä½ åº”è¯¥ç›´æ¥è¿”å›å˜é‡, è€Œä¸æ˜¯ä»–çš„å¼•ç”¨, è¿™æ ·ä¼šå‘ç”Ÿæ‰€æœ‰æƒçš„ç§»åŠ¨ 12345678910fn main() { let res = dangle(); // æ¥æ”¶è¿”å› println!(\"{}\", res);}fn dangle() -&gt; String { let s = String::from(\"hello\"); // sè¿›å…¥ä½œç”¨åŸŸ s // å°†sè¿”å›} // å‡½æ•°ç»“æŸ, sè§¦å‘äº†æ‰€æœ‰æƒçš„ç§»åŠ¨ slices sliceæ˜¯æ²¡æœ‰æ‰€æœ‰æƒçš„. sliceå…è®¸ä½ å¼•ç”¨é›†åˆä¸­æŸä¸€çŸ­è¿ç»­çš„å…ƒç´ åºåˆ—, è€Œä¸å¼•ç”¨æ•´ä¸ªé›†åˆ å‡è®¾æœ‰è¿™æ ·çš„éœ€æ±‚, å†™ä¸€ä¸ªå‡½æ•°, æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸², è¿”å›å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå•è¯. å¦‚æœå‡½æ•°åœ¨è¯¥å­—ç¬¦ä¸²ä¸­æ²¡æœ‰æ‰¾åˆ°ç©ºæ ¼, é‚£ä¹ˆè¿™æ•´ä¸ªå°±æ˜¯ä¸€ä¸ªå•è¯, å¦‚æœæœ‰ç©ºæ ¼, åˆ™ç¬¬ä¸€ä¸ªç©ºæ ¼å‰çš„æ˜¯ä¸€ä¸ªå•è¯ åˆç‰ˆä»£ç å¦‚ä¸‹ 123456789101112fn first_word(s: &amp;String) -&gt; usize { // æ¥æ”¶å¼•ç”¨, è¿”å›ç´¢å¼• let bytes = s.as_bytes(); // è½¬æ¢æˆbyteså…ƒç»„ for (i, &amp;item) in bytes.iter().enumerate() { // ç”Ÿæˆè¿­ä»£å™¨å¹¶å¾ªç¯ä»– // iæ˜¯å½“å‰éå†åˆ°çš„ç´¢å¼•, &amp;itemæ˜¯å½“å‰å†…å®¹çš„å¼•ç”¨ if item == b' ' { // å¦‚æœé‡åˆ°äº†ç©ºæ ¼ return i; // å°†ç´¢å¼•return } } // å¦‚æœæ²¡æœ‰æ‰¾åˆ°, è¯æ˜å…¨éƒ¨éƒ½æ˜¯ä¸€ä¸ªå•è¯, æ‰€ä»¥è¿”å›æ•´ä½“çš„ç´¢å¼• s.len()} sæ˜¯åŸæœ¬çš„å­—ç¬¦ä¸²çš„å¼•ç”¨, å› ä¸ºæˆ‘ä»¬å¹¶ä¸éœ€è¦è¯¥å­—ç¬¦ä¸²çš„æ‰€æœ‰æƒ æˆ‘ä»¬è¿”å›çš„æ˜¯è¯¥å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªå•è¯çš„ç´¢å¼• .as_bytes()æ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢æˆbyteså…ƒç»„, .iter()æ˜¯è¿”å›é‡Œé¢çš„æ¯ä¸€ä¸ªå€¼, è€Œ.enumerate() åˆ™æ˜¯æ¥æ”¶.iter()è¿”å›çš„å€¼è¿›ä¸€æ­¥åŒ…è£…. è¿”å›ä¸€ä¸ªå…ƒç»„, åˆ†ä¸ºç´¢å¼•å’Œå€¼çš„å¼•ç”¨, å½“å½“å‰å­—èŠ‚ä¸ºç©ºæ ¼çš„æ—¶å€™, è¯æ˜éœ€è¦è¿”å›äº†, å•è¯ç»“æŸ, äºæ˜¯å°†ç´¢å¼•ç›´æ¥è¿”å›, å½“éå†å®Œä¹Ÿæ²¡æœ‰çš„æ—¶å€™è¯æ˜æ•´ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ä¸€ä¸ªå•è¯, æ­¤æ—¶å°†æ•´ä¸ªé•¿åº¦è¿”å› è¿™æ ·çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜, ä½†æ˜¯è¿™é‡Œè¿”å›çš„ç´¢å¼•é•¿åº¦å…¶å®ä¸æˆ‘ä»¬ä¼ å…¥çš„sä¸æ˜¯ç»‘å®šçš„, æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¯èƒ½é‡åˆ°è¿™æ ·çš„é—®é¢˜, åœ¨æŸä¸€ä¸ªåœ°æ–¹æ±‚å‡ºç»“æœ, åœ¨åé¢è°ƒç”¨æ—¶å‘ç°ä¸åŒ¹é…, åŸæ¥æ˜¯æºæ•°æ®è¢«æ”¹åŠ¨äº†, ä¾‹å¦‚ 1234567fn main(){ let mut s = String::from(\"word\"); let k = first_word(&amp;s); s.clear(); // è¿™é‡Œè°ƒç”¨clearæ–¹æ³•, ä¼šè·å–sçš„å¯å˜å¼•ç”¨, å­—ç¬¦ä¸²å˜æˆåˆå§‹å€¼, ä¹Ÿå°±æ˜¯ç©ºä¸² println!(\"{}\", k) // kä¾æ—§æ˜¯åŸæ¥çš„\"word\"æ—¶çš„ç»“æœ // åç»­ä¸­ä½¿ç”¨ k å°±ä¼šå‡ºç°é—®é¢˜, å› ä¸ºså·²ç»å˜æ›´} å› ä¸º first_word è™½ç„¶éœ€è¦äº†sçš„ä¸å¯å˜å¼•ç”¨, ä½†æ˜¯è¿”å›å€¼æ˜¯æ™®é€šçš„æ•°å­—, ä¸sæ— å…³, æ‰€ä»¥æ‰§è¡Œ first_word ä¹‹åä¸å¯å˜å¼•ç”¨é€€å‡ºä½œç”¨åŸŸäº†, æ‰€ä»¥å¯ä»¥åœ¨ clear é‡Œé¡ºåˆ©çš„ç”³è¯·å¯å˜å¼•ç”¨, ä»è€Œä¿®æ”¹å€¼ å­—ç¬¦ä¸²slice å­—ç¬¦ä¸²sliceæ˜¯Stringä¸­ä¸€éƒ¨åˆ†å€¼çš„å¼•ç”¨ 123456fn main(){ let s = String::from(\"hello world\"); let h = &amp;s[0..5]; let w = &amp;s[6..11]; println!(\"h={},w={}\", h, w)} å¦‚ä¸Šé¢çš„ä»£ç . &amp;s[0..5]ä»£è¡¨å¼•ç”¨äº†sçš„ç´¢å¼•0-5ä¹‹é—´çš„å†…å®¹, è¯­æ³•æ˜¯[start_index..end_index], start_indexæ˜¯sliceä¸­çš„å¼€å§‹ç´¢å¼•, end_indexæ˜¯sliceä¸­æœ€åä¸€ä¸ªä½ç½®çš„åä¸€ä¸ªå€¼ç´¢å¼•. ä¾‹å¦‚[0..5]å®é™…ä¸Šæ˜¯sçš„ç´¢å¼•0åˆ°ç´¢å¼•4, ä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²helloçš„å¼•ç”¨, æˆ‘ä»¬è¿è¡ŒæŸ¥çœ‹ç»“æœ 1h=hello,w=world è¿™ç§æ–¹æ³•ä¸æ˜¯å¼•ç”¨æ•´ä¸ªå­—ç¬¦ä¸², è€Œæ˜¯å­—ç¬¦ä¸²ä¸­çš„æŸä¸€æ®µ Rustçš„..rangeè¯­æ³•, è¿˜æœ‰å¤šç§ç®€ç•¥å†™æ³• å¦‚æœä»ç´¢å¼•0å¼€å§‹, å¯ä»¥å¿½ç•¥0, å¯ä»¥è¾¾åˆ°ä¸€æ ·çš„æ•ˆæœ 1234let s = String::from(\"hello\");let slice = &amp;s[0..2]; // helet slice = &amp;s[..2]; // he å¦‚æœä¸€ç›´åˆ°ç´¢å¼•æœ€å, ä¹Ÿå¯ä»¥èˆå¼ƒå°¾éƒ¨çš„æ•°å­— 123456let s = String::from(\"hello\");let len = s.len();let slice = &amp;s[3..len]; // llolet slice = &amp;s[3..]; // llo å¦‚æœæ˜¯åŒæ—¶èˆå¼ƒå¼€å¤´å’Œç»“å°¾, åˆ™æ˜¯å°†æ•´ä¸ªå­—ç¬¦ä¸²è·å– 123456let s = String::from(\"hello\");let len = s.len();let slice = &amp;s[0..len]; // hellolet slice = &amp;s[..]; // hello æˆ‘ä»¬å°†ä¹‹å‰çš„ä»£ç ä¿®æ”¹ä¸ºæ–°çš„å­—ç¬¦ä¸²sliceå¼•ç”¨çš„æ–¹å¼, ä¹‹åä¼šè§£é‡Šä¸ºä»€ä¹ˆè¿™æ ·åš 12345678910fn first_word(s: &amp;String) -&gt; &amp;str { let bytes = s.as_bytes(); for (i, &amp;item) in bytes.iter().enumerate() { if item == b' ' { return &amp;s[..i]; // è¿”å›sçš„å¼•ç”¨, ä»0åˆ°å½“å‰ç©ºæ ¼çš„ç´¢å¼• } } &amp;s[..] // å…¨éƒ¨éƒ½æ˜¯ä¸€ä¸ªå•è¯, å°±æŠŠæ•´ä¸ªè¿”å›} é‚£ä¹ˆè¿™æ ·å†™çš„å¥½å¤„æ˜¯ä»€ä¹ˆå‘¢? å›å¿†ä¸€ä¸‹å€Ÿç”¨çš„è§„åˆ™, å½“æŸä¸ªå€¼å·²ç»æœ‰ä¸å¯å˜å¼•ç”¨æ—¶, æ— æ³•ç”Ÿæˆå¯å˜å¼•ç”¨äº†, å¯¹äºsæ¥è®², å‡½æ•° fiest_word è¿”å›çš„æ˜¯sçš„ä¸å¯å˜å¼•ç”¨, è€Œåæˆ‘ä»¬åœ¨å°è¯•æ”¹å˜sçš„å€¼çš„æ—¶å€™.clear()å°è¯•ç”³è¯·sçš„å¯å˜å¼•ç”¨, è¿™æ ·å°±ä¼šå¯¼è‡´ç¼–è¯‘æ—¶å‡ºç°é—®é¢˜, é¿å…å‡ºç°BUG, æˆ‘ä»¬æŒ‰ç…§ä¹‹å‰çš„è°ƒç”¨, å°è¯• .clear() 12345678910111213141516error[E0502]: cannot borrow `s` as mutable because it is also borrowed as immutable --&gt; src/main.rs:17:5 |15 | let word = first_word(&amp;s); | -- immutable borrow occurs here16 | 17 | s.clear(); | ^^^^^^^^^ mutable borrow occurs here18 | 19 | println!(\"the first word is: {}\", word); | ---- immutable borrow later used hereerror: aborting due to previous errorFor more information about this error, try `rustc --explain E0502`.error: could not compile `ownership`. ä¼šåœ¨ç¼–è¯‘å™¨å°±æŠ¥é”™, é˜²æ­¢å‡ºç°BUG å­—ç¬¦ä¸²å­—é¢å€¼å…¶å®å°±æ˜¯slice åŸæ¥åœ¨Rustä¸­, ç›´æ¥ç»™å˜é‡èµ‹å€¼å­—ç¬¦ä¸² 1let s = \"s\"; è¿™é‡Œ, sç±»å‹å°±æ˜¯ &amp;str, ä»–æ˜¯ä¸€ä¸ªæŒ‡å‘ç¨‹åºç‰¹å®šå†…éƒ¨ä½ç½®çš„slice, æ‰€ä»¥ä»–æ˜¯ä¸å¯å˜çš„, å› ä¸ºå°±æ˜¯ä¸å¯å˜å¼•ç”¨ å­—ç¬¦ä¸²sliceä½œä¸ºå‚æ•° ä¿®æ”¹åçš„è·å–å•è¯å‡½æ•°å®šä¹‰æ˜¯ 1fn first_word(s: &amp;String) -&gt; &amp;str {} è€Œæ›´å¥½çš„æ–¹å¼æ˜¯å®šä¹‰ä¸º 1fn first_word(s: &amp;str) -&gt; &amp;str {} è¿™æ ·çš„ç›®çš„æ˜¯æé«˜å…¼å®¹æ€§, ä¸Šé¢è¯´äº†, ä½¿ç”¨let s = \"s\"; ç±»å‹æ˜¯ &amp;str, æ‰€ä»¥æ–°å†™æ³•å¯ä»¥å…¼å®¹è¿™ç§å­—ç¬¦ä¸², å½“ç„¶å¯¹äºStringç±»å‹, æˆ‘ä»¬å¯ä»¥é€šè¿‡è½¬åŒ–æˆsliceæ¥ä½¿ç”¨ 12345678910111213141516fn main() { let my_string = String::from(\"hello world\"); // first_word ä¸­ä¼ å…¥ `String` çš„ slice let word = first_word(&amp;my_string[..]); let my_string_literal = \"hello world\"; // å› ä¸ºå­—ç¬¦ä¸²å­—é¢å€¼å°±æ˜¯å­—ç¬¦ä¸² sliceï¼Œ // è¿™æ ·å†™ä¹Ÿå¯ä»¥ï¼Œå³ä¸ä½¿ç”¨ slice è¯­æ³•ï¼ let word = first_word(my_string_literal); // &amp;str ä¹Ÿå¯ä»¥ç»§ç»­çš„ç”Ÿæˆ slice let word = first_word(&amp;my_string_literal[..]);} å…¶ä»–ç±»å‹çš„slice å­—ç¬¦ä¸²sliceé‡Œé¢å­˜æ”¾çš„æ˜¯å­—ç¬¦ä¸², å…¶å®å…¶ä»–ç±»å‹ä¹Ÿæ˜¯å¯ä»¥çš„ 12let a = [1, 2, 3, 4, 5];let b = &amp;a[..2]; é‚£ä¹ˆè¿™ä¸ªsliceçš„ç±»å‹å°±æ˜¯ &amp;[i31], ä½¿ç”¨æ–¹æ³•ä¸å­—ç¬¦ä¸²sliceå¹¶æ— åŒºåˆ«, ä½ å¯ä»¥å¯¹ç´¢å¼•é›†åˆä½¿ç”¨slice, å…·ä½“çš„ä¿¡æ¯ä¼šåœ¨ä¹‹åè¯¦è§£ æ€»ç»“ æ‰€æœ‰æƒåˆ°è¿™é‡Œå°±ç»“æŸäº†, æ‰€æœ‰æƒ, å€Ÿç”¨å’Œsliceå¯ä»¥è®©Rustç¨‹åºå˜å¾—æ›´åŠ çš„å®‰å…¨, å½“ä½ è€å¿ƒçš„çœ‹åˆ°è¿™é‡Œ, å¯èƒ½ä½ å¯¹Rustçš„ç‹¬ç‰¹çš„ç¼–ç¨‹æ€æƒ³æœ‰äº†å¤§è‡´çš„ç†è§£ Rustè®¾ç½®äº†è¯¸å¤šé™åˆ¶, å¹¶ä¸”å¸Œæœ›ä½ å†™å‡ºæ•…æ„è®¾å¡(qia)çš„ä»£ç , ç›®çš„æ˜¯è®©ç¨‹åºæ›´åŠ å®‰å…¨, åœ¨ç¼–è¯‘æœŸå°±æŠŠå¯èƒ½å‡ºç°çš„é—®é¢˜æš´éœ²å‡ºæ¥, è®©ä½ å»ä¸»åŠ¨è§£å†³, è€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶, æˆ–è€…æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­æ‰å‡ºç°é—®é¢˜. è¿™éœ€è¦å¼€å‘è€…æ—¶åˆ»ç•™æ„éµå¾ªRustçš„è§„èŒƒ, ä½†æ˜¯è¿™ä¸€åˆ‡éƒ½æ˜¯å€¼å¾—çš„. è€ŒRustçš„æ‰€æœ‰æƒç³»ç»Ÿ, è®©ä½ æ— éœ€å…³æ³¨åƒåœ¾çš„å›æ”¶, å½“ç„¶æ­é…ä½œç”¨åŸŸ/å¼•ç”¨/å€Ÿç”¨ä¸€èµ·ä½¿ç”¨éœ€è¦å¼€å‘è€…å…³æ³¨å˜é‡çš„ä½¿ç”¨å’Œä½œç”¨åŸŸ","link":"/2021/09/04/rust_programming_language(4)/"},{"title":"Rustç¨‹åºè®¾è®¡è¯­è¨€(5)","text":"ç»“æ„ä½“ä½¿ç”¨ç»“æ„ä½“æ¥ç»„ç»‡å…³è”æ•°æ® golangé‡Œæœ‰åŒæ ·çš„ç±»å‹, å­¦åˆ°è¿™é‡Œæ„Ÿè§‰æœ‰ç‚¹èˆ’æœäº† struct, æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ•°æ®ç±»å‹, å…¶ä¸­å¯åŒ…å«è‹¥å¹²ä¸ªå€¼, ä»è€Œå½¢æˆé€‚åˆä½ ä¸šåŠ¡çš„ç»„åˆ, æ¯”å¦‚goçš„struct(ç»“æ„ä½“) å®šä¹‰å’Œå®ä¾‹åŒ– ç»“æ„ä½“çš„æ¯ä¸€ä¸ªéƒ¨åˆ†å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹, è·Ÿå…ƒç»„ä¸åŒçš„æ˜¯, ç»“æ„ä½“éœ€è¦å¯¹æ¯ä¸€ä¸ªæ•°æ®è¿›è¡Œå‘½å, è¿™æ˜¯ä¸ºäº†å®šä¹‰è¿™ä¸ªå€¼, ä¹Ÿæ˜¯ä¸ºäº†ç»™è¿™ä¸ªå€¼å£°æ˜æ„ä¹‰. å› ä¸ºæœ‰äº†è¿™äº›åå­—, ä½¿å¾—ç»“æ„ä½“æ¯”å…ƒç»„æ›´åŠ çµæ´», ä¸éœ€è¦ä¾èµ–é¡ºåºæ¥æ–¹å¼å®ä¾‹ä¸­çš„æŸä¸€ä¸ªå€¼, è€Œæ˜¯é€šè¿‡å…¶åå­—. å®šä¹‰ç»“æ„ä½“çš„å…³é”®å­—æ˜¯ struct, åé¢æ˜¯è¿™ä¸ªç»“æ„ä½“çš„åå­—, ä¸€èˆ¬æƒ…å†µä¸‹ç»“æ„ä½“çš„åå­—éƒ½åº”è¯¥èƒ½ä½“ç°å‡ºè¿™ä¸ªç»“æ„ä½“çš„ä½œç”¨, åœ¨ {} ä¸­æ¯ä¸€ä¸ªéƒ¨åˆ†, éƒ½è¢«ç§°ä¸ºä¸€ä¸ªå­—æ®µ(field) 123456struct User { name: String, // ç”¨æˆ·å email: String, // é‚®ç®± age: u64, // å¹´é¾„ active: bool, // æ´»è·ƒçŠ¶æ€} // ç»“æ„ä½“ User, ä»£è¡¨ç”¨æˆ·ä¿¡æ¯ è¦ä½¿ç”¨ç»“æ„ä½“, æˆ‘ä»¬å°±éœ€è¦å®ä¾‹åŒ–, åˆ›å»ºå®ä¾‹æ—¶éœ€è¦æŒ‡å®šè¦å®ä¾‹åŒ–çš„ç»“æ„ä½“æ˜¯å“ªä¸ª, å¹¶åœ¨ {} å†…ä½¿ç”¨ key: value çš„å½¢å¼å¯¹æŸä¸ªå­—æ®µèµ‹å€¼, æ³¨æ„è¿™é‡Œçš„å­—æ®µé¡ºåºå¯ä»¥ä¸å®šä¹‰ç»“æ„ä½“æ—¶çš„å­—æ®µé¡ºåºä¸åŒ 123456let user1 = User { name: String::from(\"user1\"), age: 23, active: false, email: String::from(\"user1@outlook.com\")}; æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å®ä¾‹åŒ–åä¿®æ”¹å­—æ®µçš„å€¼, æ­¤æ—¶è¿™ä¸ªå®ä¾‹åº”å½“æ˜¯å¯å˜çš„ 1234567let mut user1 = User { name: String::from(\"user1\"), age: 23, active: false, email: String::from(\"user1@outlook.com\")}; // mut å¯å˜user1.age = 24 // é€šè¿‡ .key çš„æ–¹å¼æ¥æ‰¾åˆ°å€¼ ä¹Ÿå¯ä»¥å°†å®ä¾‹ä½œä¸ºè¡¨è¾¾å¼çš„è¿”å›å€¼ 12345678fn build_user(name: String, email: String) -&gt; User{ User{ name: name, email: email, active: false, age: 18 }} // è¿”å›ç»“æ„ä½“ User çš„å®ä¾‹ æ³¨æ„, å½“å˜é‡æˆ–è€…å‚æ•°åå’Œç±»å‹ä¸ç»“æ„ä½“çš„å­—æ®µå®Œå…¨ä¸€è‡´æ—¶, å¯ä»¥ä½¿ç”¨ç®€ç•¥çš„å†™æ³• 123456789fn build_user(name: String, email: String) -&gt; User{ let active = false; User{ name, // name: name, Userçš„å­—æ®µnameä¸å‚æ•°nameä¸€è‡´ email, // email: email, Userçš„å­—æ®µemailä¸å‚æ•°emailä¸€è‡´ active, // active: active, Userçš„å­—æ®µactiveä¸å˜é‡activeä¸€è‡´ age: 18 }} æˆ‘ä»¬ä¹Ÿå¯ä»¥å€Ÿç”¨å·²ç»å­˜åœ¨çš„å®ä¾‹çš„æŸäº›å­—æ®µåˆ›å»ºæ–°çš„å®ä¾‹ 123456789101112let user1 = User { name: String::from(\"user1\"), age: 23, active: false, email: String::from(\"user1@outlook.com\")}; // user1let user2 = User { name: user1.name, // å€Ÿç”¨user1çš„å­—æ®µ age: user1.age, // å€Ÿç”¨user1çš„å­—æ®µ email: String::from(\"user2@outlook.com\"), active: true}; å¦‚æœå‰©ä¸‹çš„å­—æ®µå€¼éƒ½ä½¿ç”¨è€çš„å®ä¾‹çš„å€¼, è¿˜å¯ä»¥ä½¿ç”¨ç®€ç•¥çš„å†™æ³• 12345678910let user1 = User { name: String::from(\"user1\"), age: 23, active: false, email: String::from(\"user1@outlook.com\")}; // user1let user2 = User { email: String::from(\"user2@outlook.com\"), ..user1 // name/age/active éƒ½ä½¿ç”¨user1}; å…ƒç»„ç»“æ„ä½“ æœ‰æ—¶æˆ‘ä»¬æƒ³ç»™æŸä¸ªå…ƒç»„å®šä¹‰ä¸€ä¸ªåå­—, è®©è¿™ä¸ªå…ƒç»„ç»“æ„å¯ä»¥å¤ç”¨å¹¶ä¸”ä¸æ™®é€šå…ƒç»„åˆ†å¼€, æ­¤æ—¶ä½ å¯ä»¥ä½¿ç”¨ å…ƒç»„ç»“æ„ä½“, å…ƒç»„ç»“æ„ä½“ä¸åŒäºæ™®é€šçš„ç»“æ„ä½“, ä»–æ²¡æœ‰å…·ä½“çš„æ¯ä¸ªå­—æ®µçš„åå­—, åªæœ‰å­—æ®µçš„ç±»å‹, ä½†æ˜¯æ•´ä¸ªå…ƒç»„ç»“æ„ä½“æ‹¥æœ‰ä¸€ä¸ªåå­— 12345struct Color(i32, i32, i32); // å…ƒç»„ç»“æ„ä½“å®šä¹‰struct Point(i32, i32, i32); // åŒä¸Šlet black = Color(0, 0, 0); // èµ‹å€¼let origin = Point(0, 0, 0); ä¸Šé¢çš„ Color å’Œ Point è™½ç„¶éƒ½æ˜¯ i32, é•¿åº¦ä¸º3 çš„å…ƒç»„, ä½†æ˜¯å› ä¸ºä¸æ˜¯ä¸€ä¸ªç»“æ„ä½“æ‰€ä»¥æ— æ³•æ··ç”¨ åŒæ—¶å› ä¸ºæ²¡æœ‰å­—æ®µçš„åå­—, æƒ³è¦è®¿é—®å…¶ä¸­æŸä¸€ä¸ªå€¼, å¯ä»¥é€šè¿‡ç´¢å¼•æ¥è·å– ç»“æ„ä½“çš„ç”Ÿå‘½å‘¨æœŸ ä½ å¯èƒ½æ³¨æ„åˆ°äº†, æˆ‘ä»¬å®šä¹‰çš„ç»“æ„ä½“, å¹¶æ²¡æœ‰ä½¿ç”¨å¼•ç”¨, æ¯”å¦‚ä½¿ç”¨ String è€Œä¸æ˜¯&amp;str, æ˜¯å› ä¸ºè¿™è®¾è®¡åˆ°äº†ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µ, è¿™ä¸ªæ˜¯ä¹‹åçš„å†…å®¹, ç›®å‰æˆ‘ä»¬éœ€è¦è®©è¿™ä¸ªç»“æ„ä½“å†…çš„å­—æ®µçš„æ‰€æœ‰æƒåœ¨è‡ªå·±æ‰‹ä¸­, ä»¥ä¾¿æ­£å¸¸è¿è¡Œ, å¦‚æœä½ ä½¿ç”¨äº†å¼•ç”¨, ç›®å‰æ˜¯æ— æ³•ç¼–è¯‘çš„ 123456struct User { name: &amp;str, // ç”¨æˆ·å email: String, // é‚®ç®± age: u64, // å¹´é¾„ active: bool, // æ´»è·ƒçŠ¶æ€} // ç»“æ„ä½“ User, ä»£è¡¨ç”¨æˆ·ä¿¡æ¯ 12345678910111213141516error[E0106]: missing lifetime specifier --&gt; src/main.rs:3:15 |3 | name: &amp;str, // ç”¨æˆ·å | ^ expected named lifetime parameter |help: consider introducing a named lifetime parameter |2 | struct User&lt;'lifetime&gt; {3 | name: &amp;'lifetime str, // ç”¨æˆ·å |error: aborting due to previous errorFor more information about this error, try `rustc --explain E0106`.error: could not compile `t_struct`. ç­‰åˆ°ä¹‹å, æˆ‘ä»¬ä¼šè®²åˆ°æ€æ ·è§£å†³è¿™ä¸ªé—®é¢˜ ä½¿ç”¨ç»“æ„ä½“ç¼–å†™ç¤ºä¾‹ä»£ç  æˆ‘ä»¬ä½¿ç”¨ä¹‹å‰å­¦çš„çŸ¥è¯†, ç¼–å†™ä¸€æ®µä»£ç , ä»–çš„åŠŸèƒ½æ˜¯æ±‚å‡ºé•¿æ–¹å½¢çš„é¢ç§¯ 123456789fn main() { let width1 = 30; let height1 = 50; println!(\"area={}\", area(width1, height1))}fn area(width: u32, height: u32) -&gt; u32{ width * height} ä¸Šé¢çš„ä»£ç èƒ½å¤Ÿå®Œæˆæˆ‘ä»¬çš„éœ€æ±‚, ä½†æ˜¯ä»”ç»†æƒ³, ä¸€ä¸ªé•¿æ–¹å½¢, é•¿å’Œå®½åº”è¯¥æ˜¯ç»‘å®šçš„å…³ç³», å¦‚ä½•ä½“ç°ç»‘å®šå…³ç³»å‘¢? æˆ‘ä»¬å°†é•¿å’Œå®½ä½¿ç”¨å…ƒç»„ç»‘å®šåˆ°ä¸€èµ· 12345678fn main() { let rect1 = (30, 50); println!(\"area={}\", area(rect1))}fn area(dimensions: (u32, u32)) -&gt; u32{ dimensions.0 * dimensions.1} è¿™æ ·å°±å¢åŠ äº†ä¸€äº›ç»“æ„æ€§. ä½†æ˜¯é—®é¢˜å‡ºç°äº†, ä½¿ç”¨å…ƒç»„çš„æ–¹å¼, æˆ‘ä»¬æ²¡æ³•çŸ¥é“å“ªä¸€ä¸ªæ˜¯é•¿, å“ªä¸€ä¸ªæ˜¯å®½, å‡å¦‚è¯´æˆ‘ä»¬éœ€è¦æ ¹æ®é•¿å®½ä¸åŒè¿›è¡Œä¸åŒæ“ä½œ, æ¯”å¦‚åœ¨å±å¹•ä¸­ç»˜åˆ¶, é‚£å°±å¯èƒ½è®©è°ƒç”¨è€…äº§ç”Ÿç–‘é—®, ä¸çŸ¥é“å‚æ•°çš„æ„ä¹‰ äºæ˜¯æˆ‘ä»¬ä½¿ç”¨ç»“æ„ä½“æ¥è¿›è¡Œä»£ç çš„ç¼–å†™ 123456789101112131415fn main() { let rectange1 = Rectangle{ width: 20, height: 30 }; println!(\"area={}\", area(&amp;rectange1))}struct Rectangle { width: u32, height: u32}fn area(rectangle: &amp;Rectangle) -&gt; u32{ rectangle.height * rectangle.width} è¿™é‡Œçš„å‡½æ•° area ä¸ºäº†é˜²æ­¢æ‰€æœ‰æƒçš„è½¬è®©, æˆ‘ä»¬ä½¿ç”¨äº†å¼•ç”¨çš„æ–¹å¼ é€šè¿‡æ´¾ç”Ÿ trait å¢åŠ åŠŸèƒ½ æœ‰æ—¶å€™æˆ‘ä»¬æƒ³æ‰“å°ä¸€ä¸ªç»“æ„ä½“å®ä¾‹çš„å†…å®¹, ä½¿ç”¨println!æ˜¯ä¸è¡Œçš„, ä¾‹å¦‚ 1234567fn main() { let rectange1 = Rectangle{ width: 20, height: 30 }; println!(\"rec = {}\", rectange1);} 1234567891011121314error[E0277]: `Rectangle` doesn't implement `std::fmt::Display` --&gt; src/main.rs:6:26 |6 | println!(\"rec = {}\", rectange1); | ^^^^^^^^^ `Rectangle` cannot be formatted with the default formatter | = help: the trait `std::fmt::Display` is not implemented for `Rectangle` = note: in format strings you may be able to use `{:?}` (or {:#?} for pretty-print) instead = note: required by `std::fmt::Display::fmt`error: aborting due to previous errorFor more information about this error, try `rustc --explain E0277`.error: could not compile `t_struct`. è¿™æ˜¯å› ä¸º, println! å®é»˜è®¤ä½¿ç”¨ç±»å‹çš„Displayæ ¼å¼è¾“å‡º, æ„æ€æ˜¯æ‰“å°å‡ºæ¥çš„è¾“å‡º, ä¹‹å‰æ‰€æœ‰çš„åŸºæœ¬ç±»å‹éƒ½å®ç°äº†Display, ä½†æ˜¯å› ä¸ºç»“æ„ä½“, rustå¹¶ä¸çŸ¥é“ä½ æƒ³è¦è¾“å‡ºä»€ä¹ˆ, æ‰€ä»¥æ²¡æœ‰æä¾›Displayå®ç° ä½†æ˜¯rustç»™äº†æˆ‘ä»¬å»ºè®®, æŸ¥çœ‹è¾“å‡º, æœ‰ä¸€è¡Œ 1note: in format strings you may be able to use `{:?}` (or {:#?} for pretty-print) instead ä¼¼ä¹æ˜¯å‘Šè¯‰æˆ‘ä»¬åº”è¯¥è¿™æ ·è¾“å‡º, äºæ˜¯æˆ‘ä»¬å°†æ‰“å°ä¿®æ”¹ä¸º 1println!(\"rec = {:?}\", rectange1); è¿è¡Œåå‘ç°è¿˜æ˜¯ä¸è¡Œ, ä½†æ˜¯åˆç»™äº†ä¸€ä¸ªæç¤º 12345678910111213error[E0277]: `Rectangle` doesn't implement `std::fmt::Debug` --&gt; src/main.rs:6:28 |6 | println!(\"rec = {:?}\", rectange1); | ^^^^^^^^^ `Rectangle` cannot be formatted using `{:?}` | = help: the trait `std::fmt::Debug` is not implemented for `Rectangle` = note: add `#[derive(Debug)]` or manually implement `std::fmt::Debug` = note: required by `std::fmt::Debug::fmt`error: aborting due to previous errorFor more information about this error, try `rustc --explain E0277`. 12= help: the trait `std::fmt::Debug` is not implemented for `Rectangle`= note: add `#[derive(Debug)]` or manually implement `std::fmt::Debug` è¿™é‡Œå‘Šè¯‰æˆ‘ä»¬rustç¡®å®æœ‰æ‰“å°, ä½†æ˜¯æ˜¯Debugæ¨¡å¼, éœ€è¦æˆ‘ä»¬æ˜¾å¼çš„å¼€å¯, æˆ‘ä»¬å°†ä»£ç ä¿®æ”¹ä¸º 12345678910111213fn main() { let rectange1 = Rectangle{ width: 20, height: 30 }; println!(\"rec = {:?}\", rectange1);}#[derive(Debug)]struct Rectangle { width: u32, height: u32} è¿è¡Œ 123 Finished dev [unoptimized + debuginfo] target(s) in 0.40s Running `target/debug/t_struct`rec = Rectangle { width: 20, height: 30 } å¯ä»¥æ‰“å°å‡ºç»“æ„ä½“æ•°æ®äº† æˆ‘ä»¬å›çœ‹æ–°åŠ å…¥çš„æ³¨é‡Š, #[derive(Debug)], å®é™…ä¸Šæ˜¯ä¸ºç»“æ„ä½“ Rectangle åŠ å…¥äº† Debug çš„ derive, rustä¸­è¿˜æœ‰å¾ˆå¤šè¿™æ ·çš„ç”¨æ³•, æˆ‘ä»¬ä¹‹åå†è¯´ æ–¹æ³•è¯­æ³• å½“æˆ‘ä»¬å†™pythonçš„æ—¶å€™, æ€»ä¼šä½¿ç”¨åˆ°ç±»/æ–¹æ³•, ä½¿ç”¨ç±»ç”Ÿæˆå¯¹è±¡, è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•, è®©è¿™ä¸ªæ–¹æ³•ä¸ç±»æœ‰ç´§å¯†çš„è”ç³» å†æ¯”å¦‚Go, ä¹Ÿæœ‰ç±»ä¼¼çš„æ¦‚å¿µ, å…¶å®rustä¹Ÿæ˜¯æœ‰çš„, ä¾é™„äºç»“æ„ä½“struct, å¯èƒ½æ›´åƒgo, è¢«ç§°ä¹‹ä¸ºç»“æ„ä½“çš„ æ–¹æ³• å®šä¹‰æ–¹æ³• 123456789101112131415161718fn main() { let rectange1 = Rectangle{ width: 20, height: 30 }; println!(\"area={}\", rectange1.area()) // è°ƒç”¨ç»“æ„ä½“å®šä¹‰çš„æ–¹æ³•}struct Rectangle { width: u32, height: u32}impl Rectangle{ // impl ç»“æ„ä½“åç§° fn area(&amp;self) -&gt; u32 { // å®šä¹‰æ–¹æ³• area self.height * self.width }} å…¶ä¸­, impl æ˜¯å…³é”®å­—, æ„ä¸ºå®šä¹‰ç»“æ„ä½“çš„æ–¹æ³•, åœ¨å…¶ä¸­å®šä¹‰äº†æ–¹æ³•area, æ³¨æ„å‚æ•°å˜æˆäº† &amp;self, å­¦è¿‡å…¶ä»–è¯­è¨€çš„ä¸€æŠŠéƒ½çŸ¥é“è¿™ä¸ªæ˜¯ä»£è¡¨å®ä¾‹è‡ªèº«, å› ä¸ºè¿™é‡Œæˆ‘ä»¬ä¸æƒ³è·å–å®ä¾‹çš„æ‰€æœ‰æƒ, è€Œæ˜¯åªæƒ³è·å–é•¿å’Œå®½, æ‰€ä»¥ä½¿ç”¨äº† &amp;, å¦‚æœæƒ³è¦åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­ä¿®æ”¹å®ä¾‹, å¯ä»¥å°†å‚æ•°ä¿®æ”¹ä¸º &amp;mut self å°†å‚æ•°è®¾ç½®ä¸º self æ˜¯ä¸å¸¸è§çš„, è¿™ä»£è¡¨è·å–äº†å®ä¾‹çš„æ‰€æœ‰æƒ, é€šå¸¸åªæœ‰å°†self è½¬æ¢æˆåˆ«çš„å®ä¾‹æ—¶æ‰é€‚ç”¨. è°ƒç”¨ç»“æ„ä½“æ–¹æ³•çš„æ—¶å€™ä½¿ç”¨ å®ä¾‹.æ–¹æ³• å³å¯, å‚æ•°&amp;self æ˜¯è‡ªå·±ä¼šä¼ é€’çš„, æ— éœ€æ‰‹åŠ¨çš„å†™å…¥ åœ¨C/C++ä¸­, å‚æ•°selfä¸ºæŒ‡é’ˆæ—¶, è°ƒç”¨å…¶æ–¹æ³•éœ€è¦-&gt;, è€Œ.æ˜¯ä¸ä¸ºæŒ‡é’ˆæ—¶è°ƒç”¨çš„æ–¹å¼, åœ¨Rustä¸­ä¼šè‡ªå·±ä¸ºä½ è¯†åˆ«, è€Œä¸å¿…å…³æ³¨å‚æ•°æ˜¯ slef/ &amp;self/ &amp;mut self å¸¦æœ‰æ›´å¤šå‚æ•°çš„æ–¹æ³• å¾ˆå¤šæ—¶å€™è°ƒç”¨æ–¹æ³•æ—¶è‚¯å®šéœ€è¦ä¼ å…¥æ›´å¤šå‚æ•°, è¿™äº›å‚æ•°ä¸å®ä¾‹æœ¬èº«å¹¶æ— è”ç³» 1234567891011121314151617181920212223242526fn main() { let rectange1 = Rectangle{ width: 20, height: 30 }; let rectange2 = Rectangle{ width: 30, height: 50 }; println!(\"area={}\", rectange1.area()); println!(\"r2 can_hold r1 = {}\", rectange1.can_hold(&amp;rectange2)) // è°ƒç”¨, é¢å¤–å‚æ•°æ‰‹åŠ¨æŒ‡å®š}struct Rectangle { width: u32, height: u32}impl Rectangle{ fn area(&amp;self) -&gt; u32 { self.height * self.width } fn can_hold(&amp;self, other: &amp;Rectangle) -&gt; bool { // æ¥å—ä¸€ä¸ªé¢å¤–å‚æ•° other ç±»å‹æ˜¯ &amp;Rectangle self.width &gt; other.width &amp;&amp; self.height &gt; other.height }} è¿™æ—¶å€™åœ¨ self ä¹‹åè¿½åŠ å³å¯, ä¼ å…¥å‚æ•°æ—¶éœ€è¦æ‰‹åŠ¨ä¼ é€’, ä¸€æ ·æ— éœ€ä¼ å…¥self å…³è”å‡½æ•° implè¿˜å¯ä»¥å®šä¹‰ä¸éœ€è¦slefä½œä¸ºå‚æ•°çš„å‡½æ•°, è¿™ç§è¢«ç§°ä½œ å…³è”å‡½æ•°, ä»–ä»¬ä¸ç»“æ„ä½“ç›¸å…³è”, ä½†æ˜¯å› ä¸ºä¸ä¾èµ–self, æ‰€ä»¥ä¾æ—§æ˜¯å‡½æ•°è€Œä¸æ˜¯æ–¹æ³•, ä¾‹å¦‚ 1234567891011121314fn main() { let sq = Rectangle::square(20); // é€šè¿‡ :: è°ƒç”¨, å› ä¸ºä¸ä¾èµ–å®ä¾‹, æ‰€ä»¥ä¸éœ€è¦é€šè¿‡å®ä¾‹å»è°ƒç”¨, ç›´æ¥ä½¿ç”¨ç»“æ„ä½“}struct Rectangle { width: u32, height: u32}impl Rectangle { fn square(size: u32) -&gt; Rectangle { // ä¸ä¾èµ–å®ä¾‹æœ¬èº« Rectangle { width: size, height: size } }} ::çš„è¯­æ³•æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰? æ›´å¤šçš„ä½¿ç”¨æ–¹æ³•ä¹‹åä¼šè¯¦è§£ å¤šä¸ªimplå— æ¯ä¸ªç»“æ„ä½“éƒ½å…è®¸æœ‰å¤šä¸ªimplå—, æ¯”å¦‚ 123456789101112131415161718192021222324struct Rectangle { width: u32, height: u32}impl Rectangle { fn square(size: u32) -&gt; Rectangle { // ä¸ä¾èµ–å®ä¾‹æœ¬èº« Rectangle { width: size, height: size } }}impl Rectangle { fn can_hold(&amp;self, other: &amp;Rectangle) -&gt; bool { // æ¥å—ä¸€ä¸ªé¢å¤–å‚æ•° other ç±»å‹æ˜¯ &amp;Rectangle self.width &gt; other.width &amp;&amp; self.height &gt; other.height }}impl Rectangle{ fn area(&amp;self) -&gt; u32 { self.height * self.width }} è¿™æ ·æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„, ä½†æ˜¯ä¸€èˆ¬ä¸å»ºè®®è¿™æ ·åš, å› ä¸ºæ²¡æœ‰æ„ä¹‰, å¯èƒ½åœ¨ç‰¹æ®Šçš„éœ€æ±‚ä¸‹æœ‰ç”¨, æˆ‘ä»¬ä¹‹åä¼šè¯´ æšä¸¾ä¸æ¨¡å¼åŒ¹é… æšä¸¾(enumerations/ enums)å¼€å‘è€…åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰, æšä¸¾è®©ä½ å¯ä»¥é€šè¿‡åˆ—ä¸¾å¯èƒ½çš„ æˆå‘˜(variants) æ¥å®šä¹‰ä¸€ä¸ªç±»å‹ å®šä¹‰æšä¸¾ é€šè¿‡ä¸€ä¸ªåœºæ™¯æ¥ç†è§£æšä¸¾, æˆ‘ä»¬çŸ¥é“, IPåœ°å€ç›®å‰ä¸»è¦æœ‰ä¸¤ç§, IPv4 å’Œ IPv6, è¿™ä¸¤ä¸ªéƒ½å±äºIP, å‡è®¾æˆ‘ä»¬çš„ç¨‹åºæœ‰å¯èƒ½ä¼šä¸”åªä¼šå¤„ç†è¿™ä¸¤ç§IP, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†ä¸¤ä¸ªå½’å±ä¸ºä¸€èµ·, å½“ä»£ç åœ¨å¤„ç†IPæ—¶å°†å…¶å½“åšä¸€æ ·çš„æ¥å¤„ç†, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ æšä¸¾ æ¥åš. å®šä¹‰ä¸€ä¸ªæšä¸¾ IpAddrKind æ¥æ•´åˆè¿™ä¸¤ç§ç±»å‹, åˆ†åˆ«ä¸º v4 å’Œ v6 12345enum IpAddrKind { // æšä¸¾å v4, // ipv4 v6, // ipv6} ç°åœ¨, å¯¹äºç¨‹åºæ¥è®², IpAddrKindæ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨çš„æ•°æ®ç±»å‹äº† æšä¸¾å€¼ ä½¿ç”¨å®šä¹‰çš„æšä¸¾ 12let four = IpAddrKind::v4;let six = IpAddrKind::v6; æšä¸¾çš„æ¯ä¸€ä¸ªæˆå‘˜éƒ½åœ¨å…¶æšä¸¾çš„å‘½åç©ºé—´ä¸­, ä½¿ç”¨ :: å‘¼å‡º, v4å’Œv6éƒ½å±äºIpAddrKind, æ‰€ä»¥å¯ä»¥å½“åšä¸€ä¸ªç±»å‹å¤„ç† 123456789101112131415enum IpAddrKind { // æšä¸¾å v4, // ipv4 v6, // ipv6}fn a(ip: IpAddrKind){}fn main() { let four = IpAddrKind::v4; let six = IpAddrKind::v6; a(four); a(six)} å¦‚æœæˆ‘ä»¬æƒ³è¦å°†IPåœ°å€å’ŒIPç±»å‹å½¢æˆå…³è”å…³ç³», æˆ‘ä»¬å¯èƒ½ä¼˜å…ˆæƒ³åˆ°ä½¿ç”¨ç»“æ„ä½“ 123456789101112131415161718192021enum IpAddrKind { // æšä¸¾å v4, // ipv4 v6, // ipv6}struct IpAddr { // ipåœ°å€ç»“æ„ä½“ address: String, // ip kind: IpAddrKind // ç±»å‹}fn main() { let address1 = IpAddr{ kind: IpAddrKind::v4, address: String::from(\"123.234.111.222\") }; let address2 = IpAddr{ kind: IpAddrKind::v6, address: String::from(\"::1\") };} å…¶å®åœ¨æšä¸¾IpAddrKindæ—¶, æˆ‘ä»¬å°±å·²ç»çŸ¥é“äº†æ˜¯v4è¿˜æ˜¯v6, è€Œåœ¨ç»“æ„ä½“IpAddrä¸­åªå¤šå‡ºæ¥äº†å­—æ®µaddress, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç»™æšä¸¾è®¾ç½®value, æ¥è®©ä»£ç æ›´ç®€å• 12345678910enum IpAddr { // æšä¸¾å v4(String), // ipv4, Stringç±»å‹ v6(String), // ipv6, Stringç±»å‹}fn main() { let address1 = IpAddr::v4(String::from(\"127.0.0.1\")); let address2 = IpAddr::v6(String::from(\"::1\"));} å› ä¸ºIPåœ°å€å®åœ¨æ˜¯å¤ªå¸¸è§äº†, å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½ä¼šç”¨åˆ°, æ‰€ä»¥Rustå†…ç½®äº†æ•°æ®ç»“æ„ä¸“é—¨å­˜æ”¾IPåœ°å€, IpAddr in std::net - Rust (rust-lang.org), å†…éƒ¨æ˜¯è¿™æ ·å®šä¹‰çš„ 123456789101112struct Ipv4Addr { // --snip--}struct Ipv6Addr { // --snip--}enum IpAddr { V4(Ipv4Addr), V6(Ipv6Addr),} å°†æšä¸¾çš„valueè®¾ç½®æˆç»“æ„ä½“, è€Œè¿™ä¸ªç»“æ„ä½“å¯ä»¥å­˜æ”¾ä»»ä½•æ•°æ®, è¿™æ ·æ¥å¢åŠ å…¼å®¹æ€§ å› ä¸ºæˆ‘ä»¬çš„ä¾‹å­ä¸­éƒ½æ²¡æœ‰å¼•ç”¨æ ‡å‡†åº“ä¸­çš„å®šä¹‰, æ‰€ä»¥å³ä½¿æˆ‘ä»¬è‡ªå·±å®šä¹‰äº†IpAddræšä¸¾, ä¹Ÿä¸ä¼šäº§ç”Ÿå†²çª ä¸‹é¢æˆ‘ä»¬å†çœ‹ä¸€ä¸ªæ–°çš„æšä¸¾ 123456enum Message { Quit, Move { x: i32, y: i32 }, Write(String), ChangeColor(i32, i32, i32),} è¿™ä¸ªæšä¸¾Message ä¸‹é¢æœ‰4ä¸ªæˆå‘˜, Quitæ²¡æœ‰å…³è”ä»»ä½•æ•°æ®, Moveå¯¹åº”ä¸€ä¸ªåŒ¿åç»“æ„ä½“, Writeå…³è”ä¸€ä¸ªå…ƒç»„String, ChangeColorå…³è”ä¸€ä¸ªå…ƒç»„ å¦‚æœæˆ‘ä»¬å•çº¯ä½¿ç”¨ç»“æ„ä½“ä¹Ÿå¯ä»¥è¾¾åˆ°æ•ˆæœ 1234567struct QuitMessage; // ç±»å•å…ƒç»“æ„ä½“struct MoveMessage { x: i32, y: i32,}struct WriteMessage(String); // å…ƒç»„ç»“æ„ä½“struct ChangeColorMessage(i32, i32, i32); // å…ƒç»„ç»“æ„ä½“ é—®é¢˜æ˜¯, è¿™æ ·çš„è¯å°±æ²¡æœ‰å°†è¿™å‡ ä¸ªMessageå½¢æˆå…³è”å…³ç³», å¦‚æœä½¿ç”¨æšä¸¾, å› ä¸ºæšä¸¾æœ¬èº«æ˜¯ä¸€ç§ç±»å‹, å°±èƒ½å°†è¿™äº›Messageä»¥æˆå‘˜çš„æ–¹å¼åˆåˆ°ä¸€èµ· å¯¹äºæšä¸¾ç±»å‹, æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨implå…³é”®å­—æ¥ä¸ºæšä¸¾ç±»å‹å®šä¹‰æ–¹æ³•(å’Œç»“æ„ä½“ç±»ä¼¼) 12345678impl Message { fn call(&amp;self) { // æ–¹æ³•call }}let m = Message::Write(String::from(\"hello\"));m.call(); // è°ƒç”¨ å…·ä½“çš„è°ƒç”¨, selfæ–¹å¼, å¯ä»¥å‚ç…§ä¸Šæ–¹çš„ç»“æ„ä½“impl optionæšä¸¾ Optionæ˜¯æ ‡å‡†åº“å®šä¹‰çš„å¦ä¸€ä¸ªæšä¸¾, ä»–çš„åº”ç”¨å¾ˆå¹¿æ³›, ä»–ä»£è¡¨äº†ä¸€ä¸ªå€¼è¦ä¹ˆæœ‰å€¼è¦ä¹ˆæ²¡å€¼. ä½ å¯èƒ½ç°åœ¨ä¸æ˜ç™½æœ‰ä»€ä¹ˆä½œç”¨ Rustä¸­æ²¡æœ‰å…¶ä»–è¯­è¨€æœ‰çš„ç©ºå€¼åŠŸèƒ½, ç©ºå€¼(Null)ä¹Ÿæ˜¯ä¸€ä¸ªå€¼, ä»–ä»£è¡¨äº†æ²¡æœ‰å€¼. åœ¨å…¶ä»–è¯­è¨€ä¸­, å˜é‡éƒ½æœ‰ä¸¤ç§çŠ¶æ€: ç©ºå€¼å’Œéç©ºå€¼ Tony Hoareï¼Œnull çš„å‘æ˜è€…ï¼Œåœ¨ä»– 2009 å¹´çš„æ¼”è®² â€œNull References: The Billion Dollar Mistakeâ€ ä¸­æ›¾ç»è¯´åˆ°ï¼š I call it my billion-dollar mistake. At that time, I was designing the first comprehensive type system for references in an object-oriented language. My goal was to ensure that all use of references should be absolutely safe, with checking performed automatically by the compiler. But I couldnâ€™t resist the temptation to put in a null reference, simply because it was so easy to implement. This has led to innumerable errors, vulnerabilities, and system crashes, which have probably caused a billion dollars of pain and damage in the last forty years. æˆ‘ç§°ä¹‹ä¸ºæˆ‘åäº¿ç¾å…ƒçš„é”™è¯¯ã€‚å½“æ—¶ï¼Œæˆ‘åœ¨ä¸ºä¸€ä¸ªé¢å‘å¯¹è±¡è¯­è¨€è®¾è®¡ç¬¬ä¸€ä¸ªç»¼åˆæ€§çš„é¢å‘å¼•ç”¨çš„ç±»å‹ç³»ç»Ÿã€‚æˆ‘çš„ç›®æ ‡æ˜¯é€šè¿‡ç¼–è¯‘å™¨çš„è‡ªåŠ¨æ£€æŸ¥æ¥ä¿è¯æ‰€æœ‰å¼•ç”¨çš„ä½¿ç”¨éƒ½åº”è¯¥æ˜¯ç»å¯¹å®‰å…¨çš„ã€‚ä¸è¿‡æˆ‘æœªèƒ½æŠµæŠ—ä½å¼•å…¥ä¸€ä¸ªç©ºå¼•ç”¨çš„è¯±æƒ‘ï¼Œä»…ä»…æ˜¯å› ä¸ºå®ƒæ˜¯è¿™ä¹ˆçš„å®¹æ˜“å®ç°ã€‚è¿™å¼•å‘äº†æ— æ•°é”™è¯¯ã€æ¼æ´å’Œç³»ç»Ÿå´©æºƒï¼Œåœ¨ä¹‹åçš„å››åå¤šå¹´ä¸­é€ æˆäº†æ•°åäº¿ç¾å…ƒçš„è‹¦ç—›å’Œä¼¤å®³ã€‚ ç©ºå€¼çš„é—®é¢˜ä¸»è¦åœ¨äº, å½“ä½ æƒ³åƒä½¿ç”¨éç©ºå€¼ä¸€æ ·ä½¿ç”¨ç©ºå€¼, å°±ä¼šå‡ºç°æŸç§å½¢å¼ä¸Šçš„é”™è¯¯, å› ä¸ºç©ºå’Œéç©ºæ— å¤„ä¸åœ¨, æ‰€ä»¥å¾ˆå®¹æ˜“å‡ºç°è¿™ç§é—®é¢˜ rustä¸­æ²¡æœ‰ç©ºå€¼, ä»–æœ‰ä¸€ä¸ªåœ¨ç¼–ç æ—¶å¯ä»¥å­˜åœ¨æˆ–è€…ä¸å­˜åœ¨çš„æ¦‚å¿µçš„æšä¸¾, è¿™ä¸ªå°±æ˜¯Option 1234enum Option&lt;T&gt; { Some(T), None,} å› ä¸ºOptionå¤ªå¤šå¸¸ç”¨, æ‰€ä»¥ä¸éœ€å¼•ç”¨æ ‡å‡†åº“ä¹Ÿç›´æ¥å­˜åœ¨, Optionä¸‹æ‹¥æœ‰ä¸¤ä¸ªæˆå‘˜, Some(T)å’ŒNone, &lt;T&gt;æ˜¯æˆ‘ä»¬è¿˜æ²¡æœ‰è®²åˆ°çš„åŠŸèƒ½, ä»–æŒ‡çš„æ˜¯ä¸€ä¸ªæ³›ç±»å‹å‚æ•°, ç›®å‰ä½ å¯ä»¥ç†è§£æˆå¯ä»¥åŒ…å«ä»»ä½•ç±»å‹çš„æ•°æ®, æˆ‘ä»¬ä¹‹åä¼šè¯¦ç»†è®²è§£ å› ä¸ºå¯¹Optionåšäº†ç‰¹æ®Šå¤„ç†, æ‰€ä»¥Optionä¸‹é¢çš„æˆå‘˜Someå’ŒNoneä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨, æ— éœ€Option::Some 1234let some_number = Some(5);let some_string = Some(\"a string\");let absent_number: Option&lt;i32&gt; = None; å¦‚æœä½ ä½¿ç”¨æˆå‘˜None, åˆ™éœ€è¦å‘Šè¯‰Rust Option æ˜¯ä»€ä¹ˆç±»å‹, å› ä¸ºRustæ— æ³•è‡ªå·±çŸ¥é“Noneæ˜¯ä»€ä¹ˆç±»å‹ å¹¶ä¸”, å› ä¸ºä½ é€šè¿‡Optionåˆ›å»ºçš„å€¼æ˜¯Optionç±»å‹, ä»–æ— æ³•ç›´æ¥ä¸æ™®é€šçš„ç±»å‹è¿›è¡Œæ“ä½œ 123456fn main() { let x: i8 = 5; let y: Option&lt;i8&gt; = Some(5); let sum = x + y;} ä¼šæŠ¥é”™ 123456789101112error[E0277]: cannot add `std::option::Option&lt;i8&gt;` to `i8` --&gt; src/main.rs:5:17 |5 | let sum = x + y; | ^ no implementation for `i8 + std::option::Option&lt;i8&gt;` | = help: the trait `std::ops::Add&lt;std::option::Option&lt;i8&gt;&gt;` is not implemented for `i8`error: aborting due to previous errorFor more information about this error, try `rustc --explain E0277`.error: could not compile `t_enum`. å‘Šè¯‰ä½ æ— æ³•å°† i8 ä¸ Option&lt;i8&gt; è¿›è¡Œç›¸åŠ , å› ä¸ºä»–ä»¬çš„ç±»å‹ä¸åŒ, è€Œå¯¹äºi8è¿™ç§ç±»å‹, Rustå¯ä»¥ä¿è¯ä»–ä¸€å®šæ˜¯æœ‰å€¼çš„, Option&lt;i8&gt; ä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸ºNoneçš„, Rustä¸ºäº†é¿å…è¿™ä¸ªé”™è¯¯ä¸å…è®¸ç›´æ¥è®¡ç®—. è€Œè¦æƒ³è¿›è¡Œæ“ä½œ, å¿…é¡»å°† Option&lt;T&gt; è½¬æ¢æˆ T , åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å°±ä¼šè®©æˆ‘ä»¬é¢„å…ˆçš„å¤„ç†ç©ºå€¼çš„é—®é¢˜. å½“æˆ‘ä»¬å‘ç°ä¸€ä¸ªå˜é‡ä¸ºOption&lt;T&gt;æ˜¯, ç‰¢è®°å¯èƒ½æ˜¯ç©ºå€¼, è€Œå…¶ä»–çš„æ™®é€šç±»å‹, ä»–ä¸€å®šæ˜¯éç©º, å°±ä¸ç”¨è€ƒè™‘ç©ºå€¼çš„é—®é¢˜ æ€ä¹ˆå°†Option&lt;T&gt;è½¬æ¢æˆT, åœ¨ä¹‹åä¼šå‘Šè¯‰ä½ , ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹Option in std::option - Rust (rust-lang.org) matchæ§åˆ¶æµè¿ç®—ç¬¦ ç±»ä¼¼Golangæœ‰switchè¯­æ³•, Pythonå¯ä»¥ä½¿ç”¨else if ,è¾¾åˆ°å¯¹æŸä¸ªå€¼è¿›è¡Œå¤šä¸ªåˆ†æ”¯åˆ¤æ–­çš„é€»è¾‘, Rusté‡Œå½“ç„¶ä¹Ÿæ˜¯æœ‰çš„, match, Rustä¼šåœ¨ç¼–è¯‘æœŸæ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„æƒ…å†µä½ éƒ½åšäº†å¤„ç†, å½“åŒ¹é…åˆ°ç¬¦åˆæ¡ä»¶çš„åˆ†æ”¯æ—¶, å°±è¿›å…¥å¯¹åº”æ¨¡å¼çš„ä»£ç ä¸­å¤„ç† 123456789101112131415enum Coin{ // æšä¸¾ Penny, Nickel, Dime, Quarter,}fn value_in_cents(coin: Coin) -&gt; u8 { match coin { // match Coin::Penny =&gt; 1, Coin::Nickel =&gt; 5, Coin::Dime =&gt; 10, Coin::Quarter =&gt; 25, }} ä¸Šé¢æ˜¯ä¸€ä¸ªæšä¸¾å’Œä»¥æšä¸¾æˆå‘˜å½“åšæ¨¡å¼çš„matchè¡¨è¾¾å¼ è¿™é‡Œçš„å‡½æ•°value_in_cents æ¥æ”¶ä¸€ä¸ªæšä¸¾çš„å®ä¾‹, ç„¶åè¿›å…¥matchè¡¨è¾¾å¼, matchå…³é”®å­—ä¹‹åè·Ÿä¸€ä¸ªè¡¨è¾¾å¼, åœ¨è¿™é‡Œè·Ÿçš„æ˜¯coinçš„å®ä¾‹. æ²¡é”™, matchä¹‹åå¯ä»¥è·Ÿä»»ä½•ç±»å‹. è€Œ{}ä¸­çš„åˆ™æ˜¯è¿™ä¸ªmatchçš„åˆ†æ”¯, å¯¹äºåˆ†æ”¯æ¥è®², æœ‰ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆ, ä¸€ä¸ªæ¨¡å¼å’Œä¸€äº›ä»£ç . æ¯”å¦‚ç¬¬ä¸€ä¸ªåˆ†æ”¯ Coin::Penny =&gt; 1 , è¿™é‡Œçš„Coin::Pennyå°±æ˜¯æ¨¡å¼, =&gt; åè·Ÿçš„å°±æ˜¯ä»£ç , å½“åŒ¹é…åˆ°æ¨¡å¼ä¹‹å, ä¼šè¿è¡Œå®šä¹‰çš„ä»£ç  ä¸€ä¸ªmatchæœ‰å¤šä¸ªåˆ†æ”¯, åœ¨åŒ¹é…æ—¶, ä¼šä»ä¸Šåˆ°ä¸‹åŒ¹é…, ç›´åˆ°åŒ¹é…æˆåŠŸåå°±é€€å‡ºmatch åŒ¹é…åˆ°çš„ä»£ç å¦‚æœå¾ˆçŸ­, é€šå¸¸ä¸ä½¿ç”¨å¤§æ‹¬å·, å¦‚æœæœ‰å¤šè¡Œä»£ç åˆ™éœ€è¦ä½¿ç”¨, ä¾‹å¦‚ 1234567891011fn value_in_cents(coin: Coin) -&gt; u8 { match coin { // match Coin::Penny =&gt; { println!(\"Penny\"); // æ‰“å° 1 // è¿”å› }, Coin::Nickel =&gt; 5, Coin::Dime =&gt; 10, Coin::Quarter =&gt; 25, }} ç»‘å®šå€¼çš„æ¨¡å¼ æšä¸¾å¯èƒ½æ˜¯æœ‰å€¼çš„, match åŒæ ·ä¹Ÿå¯ä»¥è·å–åˆ°æšä¸¾å®ä¾‹çš„å€¼ 123456789101112#[derive(Debug)] // debugenum UsState { Alabama, Alaska,}enum Coin { Penny, Nickel, Dime(u8), Quarter(UsState),} æˆ‘ä»¬ä¸ºæšä¸¾Coinçš„æˆå‘˜Quarter è®¾ç½®å€¼ä¸ºå¦ä¸€ä¸ªæšä¸¾ 1234567891011fn value_in_cents(coin: Coin) -&gt; u8 { match coin { Coin::Penny =&gt; 1, Coin::Nickel =&gt; 5, Coin::Dime =&gt; 10, Coin::Quarter(state) =&gt; { println!(\"State quarter from {:?}!\", state); 25 }, }} ç„¶ååœ¨ match æ—¶, å¦‚æœæ˜¯ Quarter åˆ™æ‰“å°å…¶å€¼ 12345678910111213141516171819202122232425262728293031323334#[derive(Debug)] // debugenum UsState { Alabama, Alaska,}enum Coin { Penny, Nickel, Dime(u8), Quarter(UsState),}fn value_in_cents(coin: Coin) -&gt; u8 { match coin { Coin::Penny =&gt; 1, Coin::Nickel =&gt; 5, Coin::Dime(v) =&gt; { println!(\"{}\", v); 8 }, Coin::Quarter(state) =&gt; { println!(\"State quarter from {:?}!\", state); 25 }, }}fn main(){ let d = Coin::Dime(20); let q = Coin::Quarter(UsState::Alaska); let dp = value_in_cents(d); let qp = value_in_cents(q);} åœ¨è¿™é‡Œä½¿ç”¨cargo run ä¼šå‡ºç°å‡ ä¸ªæŠ¥è­¦, è¿™æ˜¯å› ä¸ºæ²¡æœ‰å°†ä¸€äº›æšä¸¾ä½¿ç”¨èµ·æ¥, è¿™é‡Œä¸ä½œç†ä¼š ä½¿ç”¨()çš„æ–¹å¼å¯ä»¥æ¥å—å¤„ç†æšä¸¾ä¸­åŒ…å«å€¼çš„æƒ…å†µ åŒ¹é… Option&lt;T&gt; matchåŒæ ·å¯ä»¥å¤„ç†Option&lt;T&gt; 123456789101112fn plus_one(x: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; { match x { None =&gt; None, Some(i) =&gt; Some(i + 1), }}fn main(){ let five = Some(5); let six = plus_one(five); let none = plus_one(None);} å› ä¸ºOptione&lt;T&gt;å¯èƒ½å­˜åœ¨ä¸ºNoneçš„æƒ…å†µ, æ‰€ä»¥é€šè¿‡matchè¿›è¡Œåˆ†åˆ«å¤„ç†, è¿™é‡Œçš„x å°±æ˜¯ä¸ºNoneæ—¶ä¸åšä»»ä½•å¤„ç†, æœ‰å€¼æ—¶è¿›è¡Œ +1 å¤„ç† åŒ¹é…æ˜¯ç©·å°½çš„ Rustçš„åŒ¹é…æ˜¯ç©·å°½çš„, ä½ å¿…é¡»ä¸ºmatchè®¾ç½®èƒ½è¦†ç›–æ‰€æœ‰æƒ…å†µçš„åˆ†æ”¯, å¦åˆ™ä¼šç¼–è¯‘å¤±è´¥ 12345678910fn plus_one(x: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; { match x { Some(i) =&gt; Some(i + 1), }}fn main(){ let five = Some(5); let six = plus_one(five);} 1234567891011121314151617181920error[E0004]: non-exhaustive patterns: `None` not covered --&gt; src/main.rs:2:11 |2 | match x { | ^ pattern `None` not covered | = help: ensure that all possible cases are being handled, possibly by adding wildcards or more match armswarning: unused variable: `six` --&gt; src/main.rs:9:9 |9 | let six = plus_one(five); | ^^^ help: consider prefixing with an underscore: `_six` | = note: `#[warn(unused_variables)]` on by defaulterror: aborting due to previous errorFor more information about this error, try `rustc --explain E0004`.error: could not compile `t_enum`. è¿™é‡Œå°±æ˜¯æ²¡æœ‰å¤„ç†ä¸ºNoneçš„æƒ…å†µ, Rustä¼šé¿å…å‡ºç°è¿™ç§é—®é¢˜ _é€šé…ç¬¦ å…¶ä»–è¯­è¨€ç±»ä¼¼çš„åˆ†æ”¯å¤„ç†, é€šå¸¸ä¼šæœ‰ä¸€ä¸ªdefault, å¦‚æœéƒ½åŒ¹é…ä¸ä¸Š, åˆ™ä¼šè¿›å…¥defaultåˆ†æ”¯, é€šå¸¸defaultåˆ†æ”¯æ˜¯å†™åœ¨æœ€åçš„ 123456789101112fn main() { let some_u8_value = 0; match some_u8_value { 1 =&gt; println!(\"one\"), 3 =&gt; println!(\"three\"), 5 =&gt; println!(\"five\"), 7 =&gt; println!(\"seven\"), _ =&gt; { println!(\"kkkkk\") }, }} Rustæœ‰ä¸€ä¸ª_, ä½œç”¨æ˜¯é€šé…ç¬¦, èƒ½åŒ¹é…æ‰€æœ‰çš„æƒ…å†µ æ¯”å¦‚è¿™é‡Œ, å¦‚æœsome_u8_valueä¸æ˜¯1/3/5/7çš„å…¶ä¸­ä¸€ä¸ª, åˆ™æœ€åä¼šåŒ¹é…åˆ°_åˆ†æ”¯ _åˆ†æ”¯éœ€è¦å†™åœ¨æœ€å, å› ä¸ºä»–æ˜¯é€šé…çš„, å‡å¦‚å†™åœ¨ç¬¬ä¸€ä½, é‚£ä¹ˆæ‰€æœ‰çš„å€¼éƒ½èƒ½åŒ¹é…è¿›_, è¿™æ ·å°±ä¼šå¯¼è‡´é€»è¾‘å‡ºç°é—®é¢˜ if letç®€å•æ§åˆ¶æµ å¦‚æœæœ‰éœ€æ±‚, å¦‚æœå€¼ä¸º3åˆ™è¿›è¡Œæ“ä½œ, å…¶ä»–åˆ™ä¸å¤„ç† 1234567fn main(){ let some_u8_value = Some(0); match some_u8_value { Some(3) =&gt; println!(\"three\"), _ =&gt; (), }} å®é™…ä¸Š, å¦‚æœä½¿ç”¨matchçš„è¯, ä¸ºäº†é€‚åº”æ— ç©·æ€§, å¿…é¡»è¿›è¡Œé€šé…ç¬¦é€‚é…, éš¾å…ä¼šå¢åŠ æ ·æ¿ä»£ç , ä¸ç®€æ´ Rustæä¾›äº†if let, æ¥å¤„ç†åªåŒ¹é…ä¸€ä¸ªæ¨¡å¼å¿½ç•¥å…¶ä»–æ¨¡å¼çš„æƒ…å†µ 123456fn main(){ let some_u8_value = Some(3); if let Some(3) = some_u8_value { println!(\"three\"); }} if let åè·Ÿä¸€ä¸ªç”±=åˆ†å‰²çš„æ¨¡å¼å’Œè¡¨è¾¾å¼, æ¯”å¦‚è¿™é‡Œ, Some(3)å°±æ˜¯æ¨¡å¼, è¡¨è¾¾å¼æ˜¯ 123{ println!(\"three\");} å½“æ¨¡å¼åŒ¹é…åè¿›è¡Œè¡¨è¾¾å¼çš„è¿è¡Œ, ä¸åŒ¹é…åˆ™ä¸è¿è¡Œ, ä¾‹å¦‚ 123456fn main(){ let some_u8_value = Some(1); if let Some(3) = some_u8_value { // ä¸è¿è¡Œ println!(\"three\"); }} ç›¸æ¯”æ™®é€šçš„match æ›´åŠ ç®€å•, ä½†æ˜¯, è¿™ç§å†™æ³•ä¼šå¤±å»ç¼–è¯‘æ—¶çš„ç©·å°½æ£€æŸ¥, è®©ä»£ç å¯èƒ½ä¼šè¶…å‡ºä½ æœŸæœ›çš„æ–¹å¼è¿è¡Œ, å› æ­¤ä½¿ä¸ä½¿ç”¨éœ€è¦è‡ªå·±è¡¡é‡ if let ä¹Ÿå¯ä»¥åŠ  else , ä½œç”¨ä¸é€šé…ç¬¦_ä¸€è‡´, ä¾‹å¦‚ 12345678fn main(){ let some_u8_value = Some(1); if let Some(3) = some_u8_value { println!(\"three\"); }else{ println!(\"other\") // æ‰“å° }} ä¹Ÿå¯ä»¥å’Œå¤šä¸ª if let ä¸€èµ·ä½¿ç”¨ 1234567891011fn main() { let some_u8_value = Some(4); if let Some(3) = some_u8_value { println!(\"three\"); } if let Some(4) = some_u8_value { println!(\"four\") } else { println!(\"other\") }} éœ€è¦è¯´æ˜çš„æ˜¯, å¦‚æœå¤šä¸ªåˆ†æ”¯äº†, æœ€å¥½è¿˜æ˜¯ä½¿ç”¨ match, è¿™æ ·åè€Œä¼šæé«˜ä»£ç ç®€æ´æ€§","link":"/2021/09/07/rust_programming_language(5)/"},{"title":"Rustç¨‹åºè®¾è®¡è¯­è¨€(6)","text":"å‰è¨€ çœŸæ­£å†™è¿‡é¡¹ç›®çš„äººéƒ½çŸ¥é“, ä»£ç è‚¯å®šä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¯ä»¥æå®šçš„, é‡Œé¢çš„é€»è¾‘éƒ½æ˜¯å¾ˆå¤æ‚çš„, æ‰€ä»¥é¡¹ç›®éƒ½æ˜¯æœ‰ç›®å½•ç»“æ„è¿™ç§ä¸œè¥¿. æˆ‘ä»¬æŒ‰ç…§é€»è¾‘çš„åˆ†ç±»å°†å…¶åˆ†å‰²å¼€, ç›®çš„æ˜¯æé«˜ä»£ç çš„å¯è¯»æ€§. éšç€é¡¹ç›®çš„å¢å¤§, æˆ‘ä»¬å°±ä¼šå¢åŠ å¤šä¸ªåŒ…çš„æ¦‚å¿µ, ä¸€ä¸ªåŒ…å¯ä»¥åŒ…å«å¤šä¸ªäºŒè¿›åˆ¶çš„crateé¡¹å’Œä¸€ä¸ªå¯é€‰çš„crateåº“, éšç€åŒ…è¶Šæ¥è¶Šå¤§, æˆ‘ä»¬å¯ä»¥å°†åŒ…çš„éƒ¨åˆ†ä»£ç æå–å‡ºæ¥, åšæˆç‹¬ç«‹çš„crate, åšæˆå¤–éƒ¨çš„ä¾èµ–é¡¹, é€šè¿‡å¼•ç”¨çš„æ–¹å¼è®©ä»£ç å¯ç”¨, æœ¬ç¯‡ä¼šè®²è¯‰è¿™äº›æ€ä¹ˆä½¿ç”¨, è€Œrustæœ‰ä¸€ä¸ªå‘½åç©ºé—´çš„æ¦‚å¿µ, è¿™äº›å°†åœ¨ä¹‹åè§£ç­”. ä¸€èˆ¬æˆ‘ä»¬è¿˜ä¼šæŠŠå¯ä»¥é‡å¤ä½¿ç”¨çš„é€»è¾‘å’Œä»£ç å•ç‹¬æ‹å‡ºæ¥, å°è£…æˆå•ç‹¬çš„åŒ…, æš´éœ²æ¥å£ç»™å…¶ä»–äººä½¿ç”¨. è¿™é‡Œè¿˜ä¼šæœ‰ä¸€ä¸ªä½œç”¨åŸŸ(scope)çš„æ¦‚å¿µ, ä»£ç æ‰€åœ¨çš„ä¸Šä¸‹æ–‡æœ‰ä¸€ç»„å®šä¹‰ä¸ºin scopeçš„åç§°, å½“é˜…è¯», ç¼–å†™, ç¼–è¯‘ä»£ç æ—¶, ç¨‹åºå‘˜å’Œç¼–è¯‘å™¨éœ€è¦çŸ¥é“ç‰¹å®šçš„ä½ç½®çš„ç‰¹å®šçš„åç§°æ˜¯å¦å¼•ç”¨äº†å˜é‡, å‡½æ•°, ç»“æ„ä½“, æšä¸¾, æ¨¡å—, å¸¸é‡æˆ–è€…å…¶ä»–æœ‰æ„ä¹‰çš„é¡¹. ä½ å¯ä»¥åˆ›å»ºä½œç”¨åŸŸ, ä»¥åŠæ”¹å˜å“ªäº›åç§°åœ¨ä½œç”¨åŸŸå†…è¿˜æ˜¯å¤–é¢. åŒä¸€ä¸ªä½œç”¨åŸŸä¸èƒ½åŒæ—¶æ‹¥æœ‰ä¸¤ä¸ªç›¸åŒåç§°çš„é¡¹ rustæœ‰è®¸å¤šåŠŸèƒ½å¯è®©ä½ ç®¡ç†ä»£ç çš„ç»„ç»‡, åŒ…æ‹¬å“ªäº›å†…å®¹å¯ä»¥å…¬å¼€, å“ªäº›ä½œä¸ºç§æœ‰çš„éƒ¨åˆ†, å’Œç¨‹åºçš„æ¯ä¸ªä½œç”¨åŸŸçš„åå­—. è¿™äº›åŠŸèƒ½, ä¹Ÿè¢«ç§°ä½œæ¨¡å—ç³»ç»Ÿ(the module system), åŒ…æ‹¬å‡ ä¸ªéƒ¨åˆ† åŒ…(packages): cargoçš„ä¸€ä¸ªåŠŸèƒ½, è®©ä½ å¯ä»¥æ„å»º. æµ‹è¯•å’Œåˆ†æcrate crates: ä¸€ä¸ªæ¨¡å—çš„æ ‘å½¢ç»“æ„, å®ƒå½¢æˆäº†åº“æˆ–è€…äºŒè¿›åˆ¶é¡¹ç›® æ¨¡å—(modules)å’Œuse: è®©ä½ æ§åˆ¶ä½œç”¨åŸŸå’Œè·¯å¾„çš„ç§æœ‰æ€§ è·¯å¾„(path): å‘½åç»“æ„ä½“, å‡½æ•°æˆ–è€…æ¨¡å—çš„æ–¹å¼ åŒ…å’Œ crate crate æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æˆ–è€…åº“, crate root æ˜¯ä¸€åˆ‡çš„å¼€å§‹, ç¼–è¯‘å™¨è®¤ä¸ºä»–æ˜¯èµ·å§‹ç‚¹, å¹¶æ„æˆä½ çš„ crate æ ¹æ¨¡å— åŒ… æ˜¯æä¾›ä¸€ç³»åˆ—åŠŸèƒ½çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ª crate, ä¸€ä¸ªåŒ…ä¼šåŒ…å«ä¸€ä¸ª cargo.toml æ–‡ä»¶, é‡Œé¢æè¿°äº†æ€æ ·æ„å»ºè¿™äº› crate ä¸€ä¸ªåŒ…ä¸­æœ€å¤šåªèƒ½åŒ…å«ä¸€ä¸ª åº“crate, å¯ä»¥åŒ…å«ä»»æ„ä¸ª äºŒè¿›åˆ¶crate, åŒ…ä¸­è‡³å°‘æœ‰ä¸€ä¸ª crate, ä¸è®ºä»–æ˜¯ åº“crate è¿˜æ˜¯ äºŒè¿›åˆ¶crate æˆ‘ä»¬ä½¿ç”¨ cargo new package_name æ¥åˆ›å»ºåŒ…, å‘ç°ä¼šç”Ÿæˆå‡ ä¸ªé»˜è®¤çš„æ–‡ä»¶ 12345678910âœ student cargo new package_modules Created binary (application) `package_modules` packageâœ student cd package_modules âœ package_modules git:(master) âœ— tree.â”œâ”€â”€ Cargo.tomlâ””â”€â”€ src â””â”€â”€ main.rs1 directory, 2 files æˆ‘ä»¬çœ‹åˆ°ä¼šåœ¨ src æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆ main.rs æ–‡ä»¶, äº‹å®ä¸Š rust è®¤ä¸º main.rs å°±æ˜¯äºŒè¿›åˆ¶ crate çš„æ ¹, ä¹Ÿå°±æ˜¯ crate root, ä½†æ˜¯å½“ src ä¸‹æœ‰ä¸€ä¸ª lib.rs æ—¶, rustè®¤ä¸ºæ­¤æ—¶è¿™ä¸ªåŒ…å¸¦æœ‰ä¸å…¶åŒåçš„çš„ åº“crate, æ­¤æ—¶ lib.rs ä¸º crate çš„æ ¹ å›åˆ°æˆ‘ä»¬è¿™é‡Œæ¥, è¿™æ—¶ åŒ… package_name ä¸‹åªæœ‰ä¸€ä¸ª äºŒè¿›åˆ¶ crate, å½“æˆ‘ä»¬åœ¨ src ä¸‹æ–°å¢ lib.rs, åˆ™æœ‰ä¸€ä¸ª äºŒè¿›åˆ¶ crate å’Œä¸€ä¸ª åº“ crate å°†å¤šä¸ªæ–‡ä»¶æ”¾è¿› src/bin ä¸‹, åˆ™ä¼šæœ‰å¤šä¸ª äºŒè¿›åˆ¶ crate, æ¯ä¸ªæ–‡ä»¶ä¼šå•ç‹¬ç¼–è¯‘æˆ äºŒè¿›åˆ¶ crate ä¸€ä¸ª crate é€šå¸¸ä»£è¡¨ä¸€ä¸ªåŠŸèƒ½å—çš„é›†åˆ, å¯ä»¥æ–¹ä¾¿çš„åˆ†äº«ç»™åˆ«äººæˆ–è€…å…¶ä»–çš„åŒ…ä½¿ç”¨, æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨äº† rand æ¥ç”Ÿæˆéšæœºæ•°, rand å°±æ˜¯ä¸€ä¸ª crate, æˆ‘ä»¬å°†å…¶ä»–äººå†™çš„ crate å¼•å…¥ç»™æˆ‘ä»¬è‡ªå·±ä½¿ç”¨, æˆ‘ä»¬ä½¿ç”¨ rand æ—¶éœ€è¦é€šè¿‡å…¶åå­— randè¿›è¡Œè®¿é—® å¯¹äºä½œç”¨åŸŸæ¥è®², ä¸€ä¸ª crate å†…éƒ¨çš„ç‰¹å¾(æ¯”å¦‚randçš„Rng), ä¼šåœ¨å†…éƒ¨ç”Ÿæ•ˆ, å½“å…¶ä»–é¡¹ç›®å¼•ç”¨äº† crate, åŠ å…¥è¿™ä¸ª crate ä¸­æœ‰ç‰¹å¾ a, è€Œæœ¬èº«çš„é¡¹ç›®ä¹Ÿæœ‰ç‰¹å¾ a, ç‰¹ä»¬ä¹Ÿä¸ä¼šæ··æ·†, å› ä¸ºå¼•ç”¨ crate å¿…é¡»åŠ ä¸Šè¿™ä¸ª crate çš„åå­—(æ¯”å¦‚rand::Rng) å®šä¹‰æ¨¡å—æ¥æ§åˆ¶ä½œç”¨åŸŸ å¦‚æœæˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ª crate ç»™å…¶ä»–é¡¹ç›®ä½¿ç”¨, é‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜, å°±æ˜¯æä¾›ä»€ä¹ˆå‡½æ•°æˆ–è€…ç‰¹å¾ç»™å¯¹æ–¹, è€Œæˆ‘ä»¬è‡ªå·±å†…éƒ¨çš„å˜é‡å’Œå‡½æ•°, è‚¯å®šæ˜¯ä¸å¸Œæœ›å¤–é¢å¯ä»¥ç›´æ¥è®¿é—®çš„, æˆ‘ä»¬å¸Œæœ›èƒ½åŒºåˆ†ç§æœ‰çš„å’Œå…¬å¼€çš„ä¸œè¥¿ æ¨¡å—å°±å¯ä»¥è®©æˆ‘ä»¬å¯¹ crate çš„ä»£ç è¿›è¡Œåˆ†ç»„, é¦–å…ˆä¼šæé«˜å¯è¯»æ€§å’Œå¤ç”¨æ€§, å¦å¤–å¯ä»¥æ§åˆ¶é¡¹çš„ç§æœ‰æ€§, å°†é¡¹åˆ†ä¸ºä¸å¯ä»¥è¢«å¤–éƒ¨ä½¿ç”¨çš„ç§æœ‰çš„(private), å’Œå¯ä»¥è¢«å¤–éƒ¨ä½¿ç”¨çš„å…¬æœ‰çš„(public) æˆ‘ä»¬ä½¿ç”¨ cargo æ–°çš„æŒ‡ä»¤æ¥æ–°å»ºä¸€ä¸ªåä¸ºrestaurantçš„åº“ crate, cargo new --lib restaurant 12345678910âœ student cargo new --lib restaurant Created library `restaurant` packageâœ student cd restaurant âœ restaurant git:(master) âœ— tree.â”œâ”€â”€ Cargo.tomlâ””â”€â”€ src â””â”€â”€ lib.rs1 directory, 2 files ä½¿ç”¨æ–°å»ºåº“ crate çš„æ–¹å¼, å‘ç°ä¸å†ç”Ÿæˆ main.rs è€Œæ˜¯ lib.rs æ ‡å¿—è¿™æ˜¯ä¸€ä¸ªåº“ crate æˆ‘ä»¬ä¿®æ”¹ lib.rs çš„ä»£ç ä¸º 123456789101112131415161718mod front_of_house { // modå®šä¹‰ä¸€ä¸ªæ¨¡å— åé¢è·Ÿçš„æ˜¯è¿™ä¸ªæ¨¡å—çš„åå­—front_of_house // æ¨¡å—çš„å†…å®¹ mod hosting { // å®šä¹‰æ¨¡å—front_of_houseä¸‹é¢çš„æ¨¡å— hosting fn add_to_waitlist() {} // æ¨¡å— hosting ä¸‹çš„å‡½æ•° fn seat_at_table() {} } mod serving { // å®šä¹‰æ¨¡å—front_of_houseä¸‹é¢çš„æ¨¡å— serving fn take_order() {} fn server_order() {} fn take_payment() {} }} modå…³é”®å­—ä¸ºå®šä¹‰æ¨¡å—ä½¿ç”¨çš„, åé¢è·Ÿçš„å°±æ˜¯æ¨¡å—çš„åå­—, {} ä¸­å°±å®šä¹‰äº†æ¨¡å—çš„å…·ä½“çš„å†…å®¹, ä¸Šè¾¹å°±å®šä¹‰äº†ä¸¤ä¸ªå­æ¨¡å—. å­æ¨¡å—ä¸­å®šä¹‰äº†3ä¸ªå‡½æ•°, æ¨¡å—å†…å¯ä»¥å®šä¹‰æ¨¡å—, å‡½æ•°, ç»“æ„ä½“, æšä¸¾, å¸¸é‡å’Œç‰¹å¾. æ¨¡å—å¯ä»¥å°†ç›¸å…³çš„å®šä¹‰å’Œä»£ç æ”¾ç½®åœ¨ä¸€èµ·, æé«˜ä»£ç çš„å¯è¯»æ€§, æ­é…æ³¨é‡Šä½¿ç”¨æ•ˆæœæ›´å¥½ ä¸Šé¢è¯´è¿‡, crateçš„æ ¹å¯èƒ½æ˜¯src/main.rsæˆ–è€…src/lib.rs, å…¶å®è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½åˆ†åˆ«åœ¨ crate æ¨¡å—ç»“æ„ä¸­è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåä¸º crate çš„æ ¹æ¨¡å—,è¿™ç§ç»“æ„è¢«ç§°ä½œ æ¨¡å—æ ‘(module tree) ä¾‹å¦‚ä¸Šé¢çš„ä»£ç , æ¨¡å—æ ‘çš„ç»“æ„ä¸º 123456789crate â””â”€â”€ front_of_house â”œâ”€â”€ hosting â”‚ â”œâ”€â”€ add_to_waitlist â”‚ â””â”€â”€ seat_at_table â””â”€â”€ serving â”œâ”€â”€ take_order â”œâ”€â”€ serve_order â””â”€â”€ take_payment æ—¢ç„¶æ˜¯æ ‘å½¢ç»“æ„, é‚£ä¹ˆä¸€å®šæœ‰çˆ¶å’Œå­çš„å…³ç³», è¿˜æœ‰å¹³çº§çš„å…„å¼Ÿå…³ç³», éœ€è¦æ³¨æ„çš„æ˜¯, æœ€ä¸Šé¢çš„ crate æ˜¯éšå¼ç”Ÿæˆçš„, æ‰€ä»¥è¢«ç§°ä¸ºæ ¹ æ¨¡å—ä¸­é¡¹çš„è·¯å¾„ æˆ‘ä»¬æƒ³å¼•ç”¨æ¨¡å—ä¸­çš„æŸä¸€ä¸ªé¡¹, å°±éœ€è¦çŸ¥é“ä»–çš„è·¯å¾„, è·¯å¾„åˆ†ä¸ºä¸¤ç§, ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ ç›¸å¯¹è·¯å¾„ (absolute path): ä» crate æ ¹å¼€å§‹, ä¸€å±‚ä¸€å±‚æ‰¾åˆ°è¯¥é¡¹ ç»å¯¹è·¯å¾„(relative path): ä»å½“å‰çš„æ¨¡å—å¼€å§‹, éƒ½ä»¥self, super æˆ–è€…å½“å‰æ¨¡å—çš„æ ‡è¯†ç¬¦ä½œä¸ºå¼€å¤´ ä¸ç®¡æ˜¯ä»€ä¹ˆè·¯å¾„, éƒ½ä¼šè·Ÿä¸€ä¸ªæˆ–è€…å¤šä¸ªç”±åŒå†’å·(::)åˆ†å‰²çš„æ ‡è¯†ç¬¦ æˆ‘ä»¬ä¿®æ”¹ä¹‹å‰çš„æ¨¡å—, ä¸ºæ–¹ä¾¿æ¼”ç¤º, å»é™¤äº†å¤šä½™çš„æ¨¡å—, æ–°å¢å¼•ç”¨æ–¹å¼ 12345678910111213141516mod front_of_house { // modå®šä¹‰ä¸€ä¸ªæ¨¡å— åé¢è·Ÿçš„æ˜¯è¿™ä¸ªæ¨¡å—çš„åå­—front_of_house // æ¨¡å—çš„å†…å®¹ mod hosting { // å®šä¹‰æ¨¡å—front_of_houseä¸‹é¢çš„æ¨¡å— hosting fn add_to_waitlist() {} // æ¨¡å— hosting ä¸‹çš„å‡½æ•° }}fn eat_at_restaurant() { // pub æ˜¯å…³é”®å­—, ä»£è¡¨è¿™ä¸ªå‡½æ•°æ˜¯å…¬æœ‰çš„ // Absolute path crate::front_of_house::hosting::add_to_waitlist(); // ç»å¯¹åœ°å€å¼•ç”¨æ¨¡å—front_of_houseçš„hostingæ¨¡å—çš„add_to_waitlistå‡½æ•° // Relative path front_of_house::hosting::add_to_waitlist(); // ç›¸å¯¹åœ°å€å¼•ç”¨} å…³é”®å­—pubæ ‡è¯†è¿™ä¸ªé¡¹æ˜¯å…¬æœ‰çš„, å¯ä»¥è¢«å¤–éƒ¨è°ƒç”¨çš„ å¯¹äºç»å¯¹åœ°å€å¼•ç”¨, ä»¥crateå¼€å¤´, å› ä¸ºè¦ä»æœ€æ ¹çš„æ¨¡å—å¼€å§‹, è€Œæœ€æ ¹çš„å°±æ˜¯crate, ç„¶åæ ¹æ®æ¨¡å—çš„å®šä¹‰æ ‘ç»“æ„ä¸€æ­¥æ­¥çš„å¯»å€, æ¯ä¸€å±‚çº§ä¸­é—´ä½¿ç”¨::è¿æ¥ ç›¸å¯¹åœ°å€æ¥è¯´, å› ä¸º front_of_house ä¸ eat_at_restaurant åœ¨ä¸€ä¸ªå±‚çº§, æ‰€ä»¥æ— éœ€åŠ  crate, å› ä¸ºä»–ä»¬éƒ½å±äºæœ€å¤§çš„ crate æ¨¡å— å…³äºç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„é‚£ç§æ¯”è¾ƒåˆé€‚, å…¶å®æ²¡æœ‰ç‰¹åˆ«çš„è¦æ±‚, ä»ä½ çš„è§’åº¦å»è€ƒè™‘å§ (æ–‡æ¡£ä¸­è¯´è€ƒè™‘åˆ°å¦‚æœæ¨¡å—ç»“æ„æœ‰å˜åŠ¨, å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„è¿˜éœ€è¦ä¿®æ”¹è·¯å¾„, æ‰€ä»¥æ¨èä½¿ç”¨ç»å¯¹è·¯å¾„) å› ä¸ºæ˜¯ä¸ªåº“ crate, æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä½¿ç”¨cargo buildè€Œä¸æ˜¯cargo run 123âœ restaurant git:(master) âœ— cargo build Compiling restaurant v0.1.0 (/Users/Work/Code/Rust/student/restaurant)error[E0603]: module `hosting` is private æˆ‘ä»¬å¯ä»¥å‘ç°, åœ¨ç¼–è¯‘ä¸­ä¼šå‡ºç°é”™è¯¯, æç¤º hosting æ¨¡å—æ˜¯ç§æœ‰çš„ æˆ‘ä»¬ä¹‹å‰è¯´è¿‡, æ¨¡å—åŒ–çš„ä½œç”¨, 1æ˜¯å¯ä»¥æ•´ç†å’Œåˆ†ç±»é¡¹, 2æ˜¯å¯ä»¥è®¾ç½®ç§æœ‰å’Œå…¬å¼€ å¯¹äºç§æœ‰åŒ–çš„å„ç§é¡¹, ä¸å…è®¸å¤–éƒ¨çš„ä»£ç å»è°ƒç”¨, è¿™æ ·å°±é¿å…äº†å¼•ç”¨æ—¶å°† crate å†…éƒ¨çš„é¡¹æš´éœ²ç»™å¤–é¢, å¯¹äºæ²¡æœ‰æŒ‡å®šç§æœ‰è¿˜æ˜¯å…¬å¼€çš„é¡¹, é»˜è®¤éƒ½æ˜¯ç§æœ‰çš„ çˆ¶æ¨¡å—åªå¯ä»¥å¼•å…¥å­æ¨¡å—çš„å…¬å¼€é¡¹ å­æ¨¡å—å¯ä»¥è®¿é—®çˆ¶æ¨¡å—çš„æ‰€æœ‰é¡¹ å…„å¼Ÿæ¨¡å—ç›´æ¥å¯ä»¥äº’ç›¸è®¿é—®æ‰€æœ‰é¡¹ ä½¿ç”¨ pub æ¥å…¬å¼€é¡¹ ä¹‹å‰è¯´è¿‡, å…³é”®å­—pubå¯ä»¥å°†æŸä¸ªé¡¹è®¾ç½®ä¸ºå…¬å¼€ æˆ‘ä»¬ä¿®æ”¹ä¹‹å‰çš„ä»£ç  12345678910111213141516mod front_of_house { // modå®šä¹‰ä¸€ä¸ªæ¨¡å— åé¢è·Ÿçš„æ˜¯è¿™ä¸ªæ¨¡å—çš„åå­—front_of_house // æ¨¡å—çš„å†…å®¹ pub mod hosting { // å®šä¹‰æ¨¡å—front_of_houseä¸‹é¢çš„æ¨¡å— hosting, pub è®¾ç½®å…¶ä¸ºå…¬å¼€ pub fn add_to_waitlist() {} // æ¨¡å— hosting ä¸‹çš„å‡½æ•°, pub è®¾ç½®å…¶ä¸ºå…¬å¼€ }}fn eat_at_restaurant() { // pub æ˜¯å…³é”®å­—, ä»£è¡¨è¿™ä¸ªå‡½æ•°æ˜¯å…¬æœ‰çš„ // Absolute path crate::front_of_house::hosting::add_to_waitlist(); // ç»å¯¹åœ°å€å¼•ç”¨æ¨¡å—front_of_houseçš„hostingæ¨¡å—çš„add_to_waitlistå‡½æ•° // Relative path front_of_house::hosting::add_to_waitlist(); // ç›¸å¯¹åœ°å€å¼•ç”¨} è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„, å¦‚æœä½ ä¸å°† add_to_waitlist è®¾ç½®ä¸ºå…¬å¼€, åªè®¾ç½® hosting ä¹Ÿæ˜¯ä¸è¡Œçš„, å› ä¸ºåªè®¾ç½®æ¨¡å—ä¸ºå…¬å¼€ä¸ä»£è¡¨é‡Œé¢çš„æ‰€æœ‰é¡¹ä¸ºå…¬å¼€, ä½ éœ€è¦è®¿é—® add_to_waitlist å‡½æ•°, æ‰€ä»¥å‡½æ•°é¡¹ä¹Ÿéœ€è¦è®¾ç½® pub, å½“ä½ ä¸è®¾ç½® hosting åªè®¾ç½® add_to_waitlist ä¹Ÿæ˜¯ä¸è¡Œ 123âœ restaurant git:(master) âœ— cargo build Compiling restaurant v0.1.0 (/Users/Work/Code/Rust/student/restaurant) Finished dev [unoptimized + debuginfo] target(s) in 0.23s super æ¥è®¾ç½®ç›¸å¯¹è·¯å¾„ è¿˜æœ‰ä¸€ç§ä½¿ç”¨superæ¥å¼€å¤´çš„æ‰¾å¯»ç›¸å¯¹è·¯å¾„çš„æ–¹å¼, çœ‹ä¸‹é¢çš„ä¾‹å­ 12345678910fn serve_order() {} // å‡½æ•° serve_ordermod back_of_house { // æ¨¡å— back_of_house fn fix_incorrect_order() { // å‡½æ•° fix_incorrect_order cook_order(); // å¼•ç”¨å‡½æ•° cook_order super::serve_order(); // ç›¸å¯¹å¼•ç”¨ serve_order (super æ–¹å¼) } fn cook_order() {} // å‡½æ•° cook_order} super ç›¸å½“äº linux è·¯å¾„ä¸­çš„ .. çš„æ„æ€, å°±æ˜¯æŒ‡çš„å½“å‰å±‚çº§çš„ä¸Šä¸€çº§, è¿™é‡Œçš„ä¸Šä¸€çº§å…¶å®å°±æ˜¯crate ç»“æ„ä½“å’Œæšä¸¾çš„å…¬æœ‰åŒ– å¯¹äºç»“æ„ä½“äº†æ¥è®², å¦‚æœç»“æ„ä½“è®¾ç½®äº†pub, åªä»£è¡¨è¿™ä¸ªç»“æ„ä½“æœ¬èº«å˜ä¸ºäº†å…¬æœ‰, ä¸‹é¢çš„å­—æ®µé»˜è®¤è¿˜æ˜¯ç§æœ‰, éœ€è¦å•ç‹¬çš„æŒ‡å®špubæ‰è¡Œ 123456789101112131415161718192021222324252627mod back_of_house { pub struct Breakfast { // è®¾ç½®å…¬å¼€çš„ç»“æ„ä½“ pub toast: String, // è®¾ç½®ç»“æ„ä½“çš„å­—æ®µ toast å…¬å¼€ seasonal_fruit: String, // ä¸è®¾ç½®é»˜è®¤ä¸å…¬å¼€ } impl Breakfast { pub fn summer(toast: &amp;str) -&gt; Breakfast { // è®¾ç½®ç»“æ„ä½“çš„æ–¹æ³• summer å…¬å¼€ Breakfast { toast: String::from(toast), seasonal_fruit: String::from(\"peaches\"), } } }}pub fn eat_at_restaurant() { // Order a breakfast in the summer with Rye toast let mut meal = back_of_house::Breakfast::summer(\"Rye\"); println!(\"{}\", meal.toast); // Change our mind about what bread we'd like meal.toast = String::from(\"Wheat\"); println!(\"I'd like {} toast please\", meal.toast); println!(\"{}\", meal.seasonal_fruit); // ä¸è¡Œ, å› ä¸ºä¸æ˜¯å…¬å¼€çš„ } è€Œå¯¹äºæšä¸¾æ¥è®², å¦‚æœä½ pubäº†ä¸€ä¸ªæšä¸¾é¡¹, åˆ™è¯¥é¡¹ä¸‹çš„æˆå‘˜å…¨éƒ¨æ˜¯å…¬æœ‰çš„ 1234567891011mod back_of_house { pub enum Appetizer { // å…¬å¼€çš„æšä¸¾é¡¹ Soup, // å…¬å¼€ Salad, // å…¬å¼€ }}pub fn eat_at_restaurant() { let order1 = back_of_house::Appetizer::Soup; let order2 = back_of_house::Appetizer::Salad;} è¿™æ˜¯ä»ä½¿ç”¨åœºæ™¯æ¥è€ƒè™‘çš„, æšä¸¾é€šå¸¸ä½œä¸ºå¤šä¸ªå¯èƒ½çš„ç»“æœæ¥ä½¿ç”¨, æ‰€ä»¥ä½ å¯èƒ½æ›´éœ€è¦å…¨éƒ¨å…¬æœ‰, è€Œæ¯ä¸€ä¸ªéƒ½å†™ä¸Špubç›¸å¯¹ç¹ç è€Œå¯¹äºç»“æ„ä½“æ¥è®², æœ‰å¯èƒ½å¹¶ä¸æ˜¯æ‰€æœ‰çš„å­—æ®µéƒ½æ˜¯éœ€è¦å…¬å¼€çš„, å…¨éƒ¨å…¬å¼€è€Œæœ‰äº›ä¸ä½¿ç”¨åè€Œä¼šé™ä½ä»£ç è´¨é‡ ä½¿ç”¨useå…³é”®å­—å°†åç§°å¼•å…¥ä½œç”¨åŸŸ åœ¨ä¸Šé¢æˆ‘ä»¬å¼•ç”¨é¡¹æ—¶, éƒ½å¿…é¡»åœ¨ä½¿ç”¨æ—¶å†™ä¸€ä¸ªé•¿é•¿çš„è·¯å¾„, è€Œä½¿ç”¨use, å¯ä»¥åªå¼•å…¥ä¸€æ¬¡, ç„¶åå°±å¯ä»¥åƒä½¿ç”¨è‡ªå·±çš„é¡¹æ—¶ä½¿ç”¨å¼•å…¥çš„é¡¹å•¦ 1234567891011121314mod front_of_house { // æ¨¡å— pub mod hosting { // å…¬å¼€æ¨¡å— pub fn add_to_waitlist() {} // å…¬å¼€å‡½æ•° }}use crate::front_of_house::hosting; // å¼•å…¥ hostingpub fn eat_at_restaurant() { // å„ç§è°ƒç”¨ hosting ä¸‹çš„é¡¹ hosting::add_to_waitlist(); hosting::add_to_waitlist(); hosting::add_to_waitlist();} ä½¿ç”¨useå¼•ç”¨éœ€è¦çš„é¡¹ä¹‹å, å°±å¯ä»¥ç›´æ¥ä½¿ç”¨é¡¹äº†, å½“ç„¶ç§æœ‰å…¬æœ‰è§„åˆ™å’Œä¹‹å‰çš„å¼•ç”¨æ–¹å¼ä¿æŒä¸€è‡´ ç›¸å¯¹è·¯å¾„ä¹Ÿæ˜¯å¯ä»¥çš„ 1234567891011121314mod front_of_house { // æ¨¡å— pub mod hosting { // å…¬å¼€æ¨¡å— pub fn add_to_waitlist() {} // å…¬å¼€å‡½æ•° }}use front_of_house::hosting; // å¼•å…¥ hostingpub fn eat_at_restaurant() { // å„ç§è°ƒç”¨ hosting ä¸‹çš„é¡¹ hosting::add_to_waitlist(); hosting::add_to_waitlist(); hosting::add_to_waitlist();} useçš„æƒ¯ç”¨æ–¹å¼ å¼•ç”¨å‡½æ•°é¡¹æ—¶ä¸è¦ç›´æ¥å¼•ç”¨åˆ°å‡½æ•° ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬ä½¿ç”¨useå¼•å…¥, æ˜¯å¼•å…¥use front_of_house::hosting ç„¶åè°ƒç”¨æ—¶ä½¿ç”¨hosting::add_to_waitlist() å¯èƒ½æœ‰äººä¼šé—®, ä¸ºä»€ä¹ˆä¸å¼•ç”¨æ—¶ä½¿ç”¨use front_of_house::hosting::add_to_waitlist åœ¨ä½¿ç”¨æ—¶ç›´æ¥add_to_waitlist() å‘¢? è¿™æ ·å…¶å®ä¹Ÿæ˜¯å¯ä»¥è¿è¡Œçš„, åªæ˜¯ä¸ç¬¦åˆä½¿ç”¨ä¹ æƒ¯, æˆ‘ä»¬å¸Œæœ›, åœ¨ä½¿ç”¨å¤–éƒ¨çš„å‡½æ•°é¡¹æ—¶, å°½é‡çš„ä¿ç•™ä¸Šä¸€çº§, æ–¹ä¾¿ä¸æœ¬åœ°çš„é¡¹åšåŒºåˆ†. å¼•ç”¨å…¶ä»–é¡¹æ—¶ç›´æ¥å¼•ç”¨åˆ°è¯¥é¡¹ å¯¹äºéå‡½æ•°çš„é¡¹, é€šå¸¸ç›´æ¥å¼•ç”¨åˆ°è¯¥é¡¹. å¤§å®¶éƒ½è¿™æ ·å†™ ä½†æ˜¯ä¹Ÿå¯èƒ½æœ‰ä¾‹å¤–, æ¯”å¦‚, ä¸¤ä¸ªä¸åŒçš„ crate æœ‰ç›¸åŒçš„é¡¹, ä¾‹å¦‚ 12345678910use std::fmt;use std::io;fn function1() -&gt; fmt::Result { // Result // --snip--}fn function2() -&gt; io::Result&lt;()&gt; { // Result // --snip--} æ­¤æ—¶å°±è¿˜æ˜¯è¦å¼•ç”¨åˆ°ä¸Šä¸€çº§, å› ä¸º rust æ— æ³•è‡ªå·±åˆ†è¾¨æŸä¸ªé¡¹æ˜¯å“ªä¸ª, å› ä¸ºä»–ä»¬çš„åå­—éƒ½ä¸€æ · ä½¿ç”¨asé‡å‘½å ä¸Šé¢è¯´çš„å¼•ç”¨å¤šä¸ª crate ä½†æ˜¯é‡Œé¢çš„é¡¹ä¸€è‡´çš„é—®é¢˜, è¿˜å¯ä»¥ä½¿ç”¨aså…³é”®å­—æ¥ä¸ºæŸä¸ªé¡¹é‡å‘½å 12345678910use std::fmt::Result;use std::io::Result as IoResult; // åœ¨æœ¬ crate ä¸­é‡å‘½åä¸º IoResult(æœ¬ crate ç”Ÿè‚–)fn function1() -&gt; Result { // --snip--}fn function2() -&gt; IoResult&lt;()&gt; { // --snip--} ä½¿ç”¨pub useé‡æ–°å¯¼å‡ºé¡¹ å¯¹äºæˆ‘ä»¬è‡ªå·±çš„ crate æ¥è®², æˆ‘ä»¬å¯¼å…¥çš„åˆ«äººçš„å…¬æœ‰é¡¹ä¼šå˜æˆæˆ‘ä»¬è‡ªå·±çš„ç§æœ‰é¡¹, å¦‚æœæˆ‘ä»¬æƒ³è¦å°†æˆ‘ä»¬å¼•å…¥çš„é¡¹å˜æˆåœ¨æˆ‘ä»¬çš„ crate ä¸­åŒæ ·ä¹Ÿæ˜¯å…¬å¼€çš„, å¯ä»¥ä½¿ç”¨pub use 12345678910111213mod front_of_house { pub mod hosting { pub fn add_to_waitlist() {} }}pub use crate::front_of_house::hosting; // é‡å¯¼å‡º, æ­¤æ—¶å¼•ç”¨æˆ‘ä»¬è¿™ä¸ª crate çš„ä»£ç ä¹Ÿå¯ä»¥å¼•ç”¨ hostingpub fn eat_at_restaurant() { // è‡ªå·±çš„ crate æ˜¯å¯ä»¥ä½¿ç”¨front_of_house::hostingçš„ hosting::add_to_waitlist(); hosting::add_to_waitlist(); hosting::add_to_waitlist();} å½“å…¶ä»–ä»£ç å¼•å…¥æˆ‘ä»¬çš„ crate æ—¶, å¯ä»¥ä½¿ç”¨hosting::add_to_waitlistæ¥å¼•å…¥å‡½æ•°add_to_waitlist, è€Œè¿™ä¸ªå‡½æ•°å¯¹äºæˆ‘ä»¬çš„ crate æ¥è®²ä¹Ÿæ˜¯æˆ‘ä»¬å¼•ç”¨çš„ ä½¿ç”¨å¤–éƒ¨åŒ… å°±åƒ pythonçš„åŒ…ä»“åº“pypiä¸€æ ·, rustä¹Ÿæœ‰è‡ªå·±çš„è½¯ä»¶ä»“åº“crates.io: Rust Package Registry, æˆ‘ä»¬ä¹‹å‰ç”¨è¿‡ä¸Šé¢çš„åŒ…rand, æ–¹æ³•æ˜¯åœ¨Cargo.tomlæ·»åŠ è¡Œ 12[dependencies]rand = \"0.5.5\" åœ¨Cargo.tomlæ·»åŠ randä¾èµ–å‘Šè¯‰cargoä»crates.ioä¸­ä¸‹è½½, å¹¶åœ¨é¡¹ç›®ä»£ç ä¸­ä½¿ç”¨ ç„¶åä½¿ç”¨useæ¥å¼•ç”¨è¿™äº›é¡¹, æ¯”å¦‚ 12345use rand::Rng;fn main() { let secret_number = rand::thread_rng().gen_range(1, 101);} æ³¨æ„æ ‡å‡†åº“ï¼ˆstdï¼‰å¯¹äºä½ çš„åŒ…æ¥è¯´ä¹Ÿæ˜¯å¤–éƒ¨çš„ crate, ä¹Ÿéœ€è¦ä½ å¼•å…¥, ä½†æ˜¯å› ä¸ºä»–å¤ªå¸¸ä½¿ç”¨äº†, æ‰€ä»¥ä»–è¢«é›†æˆåœ¨äº† Rust ä¸­, ä½ æ— éœ€ä¿®æ”¹ Cargo.toml æ¥å¼•å…¥ stdï¼Œä¸è¿‡éœ€è¦é€šè¿‡ use å°†æ ‡å‡†åº“ä¸­å®šä¹‰çš„é¡¹å¼•å…¥é¡¹ç›®åŒ…çš„ä½œç”¨åŸŸä¸­æ¥å¼•ç”¨å®ƒä»¬ï¼Œæ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨çš„ HashMapï¼š 1use std::collections::HashMap; é€šè¿‡åµŒå¥—è·¯å¾„æ¥å‡å°‘å¤§é‡çš„useè¡Œ useå…³é”®å­—æ¯ä¸€è¡Œåªèƒ½å†™ä¸€ä¸ª, ä¹Ÿå°±æ˜¯è¯´ç°åœ¨ä½ åªèƒ½åœ¨ä¸€è¡Œå¼•å…¥ä¸€ä¸ªé¡¹, å½“æˆ‘ä»¬æœ‰å¾ˆå¤šé¡¹çš„æ—¶å€™, å°±ä¼šå‡ºç°å¾ˆå¤šè¡Œçš„é—®é¢˜, æ¯”å¦‚ 12use std::cmp::Ordering;use std::io; ä»–ä»¬éƒ½å±äºstd, æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å°†ä¸¤æ¡åˆå¹¶ 1use std::{cmp::Ordering, io}; ä½¿ç”¨{}æ¥å¼•å…¥å¤šä¸ªè·¯å¾„, å‰ææ˜¯ä»–ä»¬éƒ½æ˜¯åŒä¸€ä¸ªå‰ç¼€, æ¯ä¸ªè·¯å¾„ä»¥,åˆ†å‰² å¯¹äºéœ€è¦å¼•å…¥çˆ¶è·¯å¾„åˆéœ€è¦å¼•å…¥å­è·¯å¾„çš„æ—¶å€™, å¯ä»¥ä½¿ç”¨ self æ¥ä»£è¡¨å‰ç¼€æœ¬èº« 12use std::io;use std::io::Write; ä¿®æ”¹ä¸º 1use std::io::{self, Write}; é€šè¿‡golobalå°†æ‰€æœ‰å…¬æœ‰é¡¹å¼•å…¥ æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å…³é”®å­—golobalå°†æŸä¸€ä¸ªè·¯å¾„çš„æ‰€æœ‰å…¬æœ‰é¡¹å…¨éƒ¨å¼•å…¥ 1use std::collections::*; è¿™éå¸¸ä¸æ¨èä½¿ç”¨, å› ä¸ºä½ å¾ˆå®¹æ˜“å°†å…¶ä¸‹çš„å…¬æœ‰é¡¹ä¸è‡ªå·±çš„é¡¹æ··æ·†, è€Œä¸”é€šå¸¸å¼•å…¥çš„è·¯å¾„å…¬æœ‰é¡¹ä½ ä¹Ÿä¸æ˜¯å…¨éƒ½ä¼šä½¿ç”¨åˆ° å°†æ¨¡å—åˆ†å‰²è¿›ä¸åŒæ–‡ä»¶ åˆ°ç°åœ¨ä¸ºæ­¢, ä¸Šé¢çš„ä¾‹å­ä¸­æ¨¡å—éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶lib.rsä¸­, ä½†æ˜¯å®é™…çš„å¼€å‘ä¸­, æ¨¡å—å…¶å®æ˜¯å¾ˆå¤§çš„, æˆ‘ä»¬éœ€è¦å°†å…¶åˆ†å‰²å¼€æ¥æé«˜ä»£ç çš„å¯è¯»æ€§ æˆ‘ä»¬æ–°å»ºsrc/front_of_house.rsæ–‡ä»¶, å¹¶ç¼–å†™ä»£ç  123pub mod hosting { // å®šä¹‰æ¨¡å— hosting pub fn add_to_waitlist() {} // å…¬å¼€å‡½æ•°} å†ä¿®æ”¹src/lib.rsä»£ç  123456789mod front_of_house; // å¼•å…¥åŒçº§ç›®å½•ä¸‹ front_of_house.rs ä¸­çš„é¡¹åŠ è½½æ¨¡å—pub use crate::front_of_house::hosting; // å¼•å…¥å­æ¨¡å— hostingpub fn eat_at_restaurant() { // å…¬å¼€å‡½æ•° hosting::add_to_waitlist(); // è°ƒç”¨ hosting çš„ add_to_waitlist å‡½æ•° hosting::add_to_waitlist(); hosting::add_to_waitlist();} æ­¤æ—¶ src ä¸‹çš„æ–‡ä»¶æœ‰ 123456âœ src git:(master) âœ— tree.â”œâ”€â”€ front_of_house.rsâ””â”€â”€ lib.rs0 directories, 2 files åœ¨ mod front_of_house åä½¿ç”¨åˆ†å·ï¼Œè€Œä¸æ˜¯ä»£ç å—ï¼Œè¿™å°†å‘Šè¯‰ Rust åœ¨å¦ä¸€ä¸ªä¸æ¨¡å—åŒåçš„æ–‡ä»¶ä¸­åŠ è½½æ¨¡å—çš„å†…å®¹, è¿™é‡Œæ˜¯å°† front_of_house.rs çš„ hosting å¯¼å…¥äº† æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å†åŠ äº›ç›®å½•æ¥è¡¨è¾¾æ›´å¤æ‚çš„å…³ç³», ä¸¾ä¸ªä¾‹å­ æ–°å»ºsrc/front_of_house ç›®å½•, ç¼–å†™ src/front_of_house/hosting.rsæ–‡ä»¶ 1pub fn add_to_waitlist() {} ä¿®æ”¹æ–‡ä»¶ src/front_of_house.rs 1pub mod hosting; // å¼•å…¥ åŒçº§çš„åä¸º front_of_house æ–‡ä»¶å¤¹ä¸‹çš„ hosting.rs æ–‡ä»¶çš„é¡¹ æ­¤æ—¶srcä¸‹çš„æ–‡ä»¶ç»“æ„æ˜¯ 12345678âœ src git:(master) âœ— tree.â”œâ”€â”€ front_of_houseâ”‚ â””â”€â”€ hosting.rsâ”œâ”€â”€ front_of_house.rsâ””â”€â”€ lib.rs1 directory, 3 files å¦‚ä¸Šé¢çš„æ³¨é‡Šæ‰€è¯´, å½“ä½ åœ¨ crate çš„ rs æ–‡ä»¶ä¸‹æ‰¾åˆ°äº†mod xxx; çš„æ—¶å€™, å°±ä»£è¡¨ä»–ä¼šå¼•å…¥åŒçº§ä¸ä»–æ–‡ä»¶åç›¸åŒçš„æ–‡ä»¶å¤¹ä¸‹çš„xxx.rs æ–‡ä»¶ä¸­çš„é¡¹ æˆ‘ä¸€å¼€å§‹ä¹Ÿä¸æ˜ç™½ä¸ºä»€ä¹ˆè¿™æ ·å†™, å®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿæ²¡æœ‰ç›¸å¯¹è¯¦ç»†çš„ä»‹ç», åªæ‰¾åˆ°äº†ä¸€å°èŠ‚è¯´å°±è¦è¿™æ ·å†™, å‚è§: Modules - The Rust Reference (rust-lang.org) æ€»ä¹‹æ‰¾åŒçº§å’ŒåŒåçš„æ–‡ä»¶å¤¹ä¸‹å†…å®¹å°±è¡Œäº† å¤šå±‚ç»“æ„ä¹Ÿæ˜¯è¿™æ · ä¿®æ”¹src/lib.rs 1234567891011mod front_of_house; // å¼•å…¥ front_of_house.rs æ–‡ä»¶çš„é¡¹pub use crate::front_of_house::hosting;pub use crate::front_of_house::hosting::test;pub fn eat_at_restaurant() { hosting::add_to_waitlist(); hosting::add_to_waitlist(); hosting::add_to_waitlist(); test::t();} ä¿®æ”¹src/front_of_house/hosting.rs 12pub mod test;pub fn add_to_waitlist() {} æ–°å»ºæ–‡ä»¶å¤¹src/front_of_house/hosting, ä¿®æ”¹æ–‡ä»¶src/front_of_house/hosting/test.rs 1pub fn t(){} æ­¤æ—¶ä»–çš„ç›®å½•ä¸º 12345678910âœ src git:(master) âœ— tree.â”œâ”€â”€ front_of_houseâ”‚ â”œâ”€â”€ hostingâ”‚ â”‚ â””â”€â”€ test.rsâ”‚ â””â”€â”€ hosting.rsâ”œâ”€â”€ front_of_house.rsâ””â”€â”€ lib.rs2 directories, 4 files å¯ä»¥çœ‹åˆ°, åœ¨ hosting.rs é‡Œæ–°å¢äº† pub mod test; ä»£è¡¨ç€å»ä¸ä»–åŒçº§çš„ç›®å½•ä¹Ÿå°±æ˜¯hostingä¸­å¯»æ‰¾test.rsæ–‡ä»¶, æ‰¾é‡Œé¢çš„é¡¹, å¯»æ‰¾åˆ°äº†å‡½æ•°t åœ¨ lib.rs ä¸­ä½¿ç”¨ hosting::test::t(); å³å¯è°ƒç”¨è¿™ä¸ªå‡½æ•°é¡¹ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„å¯¹äºåµŒå¥—çš„æ—¶å€™å‡å°‘ use çš„æ–¹å¼ä¿®æ”¹ lib.rs çš„å¼•ç”¨ 12345678910mod front_of_house; // å¼•å…¥ front_of_house.rs æ–‡ä»¶çš„é¡¹pub use crate::front_of_house::hosting::{self, test}; // å¼•å…¥ hosting å’Œ hosting::testpub fn eat_at_restaurant() { hosting::add_to_waitlist(); hosting::add_to_waitlist(); hosting::add_to_waitlist(); test::t();}","link":"/2021/11/11/rust_programming_language(6)/"},{"title":"Rustç¨‹åºè®¾è®¡è¯­è¨€(7)","text":"å‰è¨€ æœ€è¿‘çœŸçš„æœ‰ç‚¹ç„¦è™‘å•Š, éš¾å—äº† Rust çš„æ ‡å‡†åº“ä¸­æœ‰ä¸€äº›æˆ‘ä»¬å¸¸ç”¨çš„æ•°æ®ç»“æ„, å¸®åŠ©æˆ‘ä»¬æ›´å¿«æ›´å¥½çš„å¼€å‘ä»£ç , è¿™ç§æ•°æ®ç»“æ„è¢«ç§°ä¸ºé›†åˆ, å¤§éƒ¨åˆ†å…¶ä»–çš„æ•°æ®ç»“æ„, æ¯”å¦‚intå¤§å¤šæ•°åªèƒ½ä»£è¡¨ä¸€ä¸ªå€¼, è€Œé›†åˆå¯ä»¥æœ‰å¤šä¸ªå€¼ å½“ç„¶æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ æ•°ç»„, å…ƒç»„, ä¹Ÿæ˜¯å¯ä»¥å­˜å‚¨å¤šä¸ªå€¼, ä½†æ˜¯ä»–ä»¬æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨ æ ˆ ä¸Šçš„, ä¹‹å‰æˆ‘ä»¬è¯´è¿‡, æ ˆä¸Šçš„æ•°æ®æ˜¯éœ€è¦åœ¨åˆ†é…æ—¶å°±æŒ‡å®šå…¶å¤§å°, æ‰€ä»¥å¯¹äºåŠ¨æ€çš„å¯å˜çš„æ•°æ®é›†åˆ, æœ€å¥½è¿˜æ˜¯å­˜åœ¨å †ä¸Š, é›†åˆå°±æ˜¯è¿™æ ·, æ‰€ä»¥ä¸€èˆ¬è€Œè¨€, ä½¿ç”¨æœ¬ç¯‡ä»‹ç»çš„é›†åˆç»“æ„çš„æ—¶å€™é€šå¸¸æ¯”è¾ƒå¤š, æœ¬ç¯‡ä»‹ç»3ä¸ªåœ¨ Rustç¨‹åºä¸­è¢«å¹¿æ³›ä½¿ç”¨çš„é›†åˆ vectorå¯ä»¥ä¸€ä¸ªæ¥ä¸€ä¸ªçš„å­˜å‚¨ä¸€ç³»åˆ—æ•°é‡å¯å˜çš„å€¼ å­—ç¬¦ä¸²(string)æ˜¯å­—ç¬¦çš„é›†åˆ å“ˆå¸Œ map(hash map)å¯ä»¥å°†å€¼å’Œç‰¹å®šçš„é”®ç»‘å®š, å’Œ python çš„ dict ä»¥åŠ golangçš„ map ç±»ä¼¼ vector vector ç±»å‹æ˜¯Vec&lt;T&gt;, vector çš„ç‰¹ç‚¹æ˜¯ä»–çš„å¤šä¸ªå€¼éƒ½åœ¨å†…å­˜ä¸­å½¼æ­¤ç›¸é‚»çš„æ’åˆ—åœ¨ä¸€èµ·, è¿™æ ·ä¼šæé«˜æŸ¥æ‰¾å’Œæ“ä½œçš„é€Ÿåº¦, ä¸€ä¸ª vec ä¸‹çš„æ‰€æœ‰å€¼çš„ç±»å‹å¿…é¡»ç›¸åŒ Vec in std::vec - Rust (rust-lang.org) æ–°å»º å¯ä»¥ä½¿ç”¨Vec::newæ¥æ–°å»ºä¸€ä¸ªç©ºçš„Vec 1let v: Vec&lt;i32&gt; = Vec::new(); // æ–°å»ºä¸€ä¸ª Vec, Vec å†…éƒ¨çš„å€¼ç±»å‹æ˜¯ i32, ç°åœ¨è¿˜æ²¡æœ‰å…·ä½“çš„å€¼ è¿™ä¸€å¥çš„ä½œç”¨æ˜¯æ–°å»ºä¸€ä¸ªç©ºçš„ Vec ç±»å‹, æ­¤æ—¶å› ä¸ºæ²¡æœ‰ç»™ Vec è®¾ç½®æŒ‡å®šçš„å€¼, æ‰€ä»¥ Rust æ˜¯ä¸çŸ¥é“è¿™ä¸ª Vec éœ€è¦å­˜å‚¨çš„å€¼çš„ç±»å‹, è¿™é‡Œæˆ‘ä»¬åœ¨æ–°å»ºæ—¶å°±ä½¿ç”¨Vec&lt;i32&gt;æ¥è®¾ç½®é‡Œé¢å­˜å‚¨çš„å€¼çš„ç±»å‹ è¿˜æœ‰ä¸€ç§æ–¹æ³• 1let v = vec![1, 2, 3]; // æ–°å»ºä¸€ä¸ª Vec. åœ¨åˆ›å»ºæ—¶å°±æ’å…¥3ä¸ªå€¼ 1, 2, 3 æ³¨æ„åˆ°, vec!è¿™æ˜¯ä¸€ä¸ªå®, è¿™ä¸ªå®ä¼šæ ¹æ®æˆ‘ä»¬æä¾›çš„å€¼æ¥åˆ›å»º Vector, åŒæ—¶è‡ªå·±åˆ¤æ–­å€¼çš„ç±»å‹å¹¶ç»™è¿™ä¸ª vec è¿›è¡Œè®¾ç½®, è¿™é‡Œå°±æ˜¯è‡ªå·±æ¨æ–­å‡ºæ˜¯ i32 ç±»å‹ æ›´æ–° ä½¿ç”¨pushé‡Œå¯ä»¥é¡¹ vec é‡Œå¢åŠ å€¼ 123456let mut v: Vec&lt;i32&gt; = Vec::new(); // æ–°å»ºä¸€ä¸ª Vec, Vec å†…éƒ¨çš„å€¼ç±»å‹æ˜¯ i32, ç°åœ¨è¿˜æ²¡æœ‰å…·ä½“çš„å€¼let mut v1 = Vec::new(); // ç©ºçš„ vec, ç±»å‹è¿˜æ²¡æœ‰æŒ‡å®šlet mut v2 = vec![1, 2]; // vecv.push(3); // æ–°å¢v1.push(3); // è¿™é‡Œæ˜¯å…ˆè·å–åˆ°å€¼çš„ç±»å‹, è®¾ç½® vec çš„ç±»å‹, å†æ–°å¢åˆ° v1v2.push(3); // æ–°å¢ pushå¯ä»¥æ›´æ–° vec çš„å€¼, å‡†ç¡®è¯´æ˜¯è¿½åŠ  è¿™é‡Œçš„ v1 , åœ¨æ–°å»ºæ—¶æ²¡æœ‰æŒ‡å®šç±»å‹, è€Œæ˜¯åœ¨ push æ—¶é  rust è‡ªå·±åˆ¤æ–­, ä¹Ÿæ˜¯å¯ä»¥çš„ é‡Šæ”¾ vectoråœ¨å…¶ç¦»å¼€ä½œç”¨åŸŸæ—¶ä¼šè¢«é‡Šæ”¾æ‰ 123456{ let v = vec![1, 2, 3, 4]; // å¤„ç†å˜é‡ v} // &lt;- è¿™é‡Œ v ç¦»å¼€ä½œç”¨åŸŸå¹¶è¢«ä¸¢å¼ƒ å½“ vector è¢«ä¸¢å¼ƒ, é‡Œé¢çš„å€¼ä¹Ÿä¼šè¢«ä¸¢å¼ƒ è¯»å– è¯»å– vector çš„å€¼å¯ä»¥ä½¿ç”¨ç´¢å¼•å’Œget 123456789let v = vec![1, 2, 3, 4, 5];let third: &amp;i32 = &amp;v[2]; // è·å–ç´¢å¼•2çš„å€¼println!(\"The third element is {}\", third);match v.get(2) { // ä½¿ç”¨ get è·å–ç´¢å¼•2çš„å€¼, æ²¡æœ‰å°±æ˜¯ None, è¿™é‡Œä½¿ç”¨ match åˆ¤æ–­ Some(third) =&gt; println!(\"The third element is {}\", third), None =&gt; println!(\"There is no third element.\"),} å¯¹äºç›´æ¥è·å–ç´¢å¼•çš„æ–¹å¼, å¦‚æœç´¢å¼•è¶…å‡ºäº†èŒƒå›´, æ¯”å¦‚åªæœ‰3ä¸ªå€¼, ç»“æœä½ è·å–ç´¢å¼•3, å°±ä¼šå¯¼è‡´ç¨‹åºå‘ç”Ÿ panic, ç›´æ¥å´©æºƒ ä½¿ç”¨get, å¦‚æœè¶…å‡ºç´¢å¼•, åªä¼šè¿”å›None, æ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨ get æ¥é˜²æ­¢ç¨‹åºå´©æºƒ ä¸‹é¢å†çœ‹ä¸€ä¸ªä»£ç  1234567let mut v = vec![1, 2, 3, 4, 5]; // å¯å˜çš„ veclet first = &amp;v[0]; // å€Ÿç”¨ v çš„ç¬¬0ä¸ªå€¼v.push(6); // ç»™ v è¿½åŠ å€¼6println!(\"The first element is: {}\", first); // è§¦å‘äº† panic è¿™ä¸ªä»£ç å®é™…ä¸Šä¼šæŠ¥é”™ 123456789101112âœ t_vec git:(master) âœ— cargo run Compiling t_vec v0.1.0 (/Users/Work/Code/Rust/student/t_vec)warning: unused variable: `first` --&gt; src/main.rs:4:9 |4 | let first = &amp;v[0]; | ^^^^^ help: consider prefixing with an underscore: `_first` | = note: `#[warn(unused_variables)]` on by default Finished dev [unoptimized + debuginfo] target(s) in 0.32s Running `target/debug/t_vec` ä¹‹å‰åœ¨æ‰€æœ‰æƒé‚£é‡Œ, ä½ å·²ç»çŸ¥é“äº†, å¯å˜å¼•ç”¨å’Œä¸å¯å˜æ˜¯æ— æ³•åŒæ—¶å­˜åœ¨çš„, è¿™é‡Œçš„ first æ˜¯ä¸å¯å˜å¼•ç”¨, éšå v è‡ªå·±è¿›è¡Œäº†è¿½åŠ æ“ä½œ, è€Œåå†æ‰“å° first (ä¸å¯å˜å¼•ç”¨)å°±è§¦å‘äº†å†²çª, ä¸ºä»€ä¹ˆå¯¹ v è¿›è¡Œ push ä¼šå¯¹æ‰€æœ‰æƒè¿›è¡Œè½¬ç§»? è¿™æ˜¯å› ä¸º vector ä¹‹å‰è¯´è¿‡, é‡Œé¢çš„æ¯ä¸ªå€¼åœ¨å†…å­˜ä¸­æ˜¯ç›¸é‚»çš„, ä½†æ˜¯ç³»ç»Ÿçš„å†…å­˜åˆ†é…å¹¶ä¸å— rust æ§åˆ¶, ä¼šå‡ºç°è¿™ç§æƒ…å†µ, æœ¬æ¥è¿™ä¸ª vec é•¿åº¦ä¸º3, äºæ˜¯ rust åœ¨å†…å­˜ä¸­å­˜å‚¨äº†é•¿åº¦ä¸º3çš„æ•°æ®, æ­¤æ—¶åˆ«çš„è½¯ä»¶ä¹Ÿå‘ç³»ç»Ÿç”³è¯·äº†å†…å­˜, åœ¨ä½ çš„æ•°æ®ä¹‹å, ä¸ä½ çš„æ•°æ®ç›¸é‚», æ­¤æ—¶ä½ è·å–äº†ç´¢å¼•ä¸º0çš„åœ°å€, è€Œåè¿›è¡Œ push æ“ä½œ, æ–°å¢ä¸€ä¸ªå€¼, æ­¤æ—¶å› ä¸ºå†…å­˜ä¸­ä½ çš„ç›¸é‚»å¤„å·²ç»è¢«å…¶ä»–å€¼å é¢†, äºæ˜¯rust åªèƒ½å†è¯·æ±‚ä¸€ä¸ªæ–°çš„é•¿åº¦ä¸º4çš„åœ°å€,æŠŠ4ä¸ªå€¼é‡æ–°æ”¾å…¥æ–°çš„åœ°å€ä¿è¯ç›¸é‚», ä½ å†å»è®¿é—®ä¹‹å‰çš„ç´¢å¼•ä¸º0çš„åœ°å€, æ­¤æ—¶è¿™ä¸ªåœ°å€çš„æ‰€æœ‰æƒå°±ä¸åœ¨ä½ çš„æ‰‹ä¸Šäº†, æ‰€ä»¥ rust ä¸å…è®¸ä½ è¿›è¡Œæ“ä½œäº†. éå† å¦‚æœæƒ³è¦ä¾æ¬¡è®¿é—® vector ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ , æˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸ª vec è¿›è¡Œéå† 1234let v = vec![100, 32, 57];for i in &amp;v { println!(\"{}\", i);} ä¹Ÿå¯ä»¥éå†æ—¶å¯¹é½è¿›è¡Œä¿®æ”¹ 1234let mut v = vec![100, 32, 57];for i in &amp;mut v { *i += 50; // å€¼å¢åŠ 50} æ­é…æšä¸¾ä½¿ç”¨ vector è¿˜æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„ç‰¹ç‚¹æ˜¯, ä»–ä¹Ÿå¯ä»¥å­˜å‚¨ç›¸åŒæšä¸¾çš„å€¼, å› ä¸ºä»–è®¤ä¸ºæšä¸¾ä¹Ÿæ˜¯åŒä¸€ä¸ªç±»å‹, å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ä¸€ä¸ª vec ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å€¼, å¯ä»¥å°†è¿™äº›ç±»å‹è®¾ç½®ä¸ºåŒä¸€ä¸ªæšä¸¾çš„æˆå‘˜ 1234567891011enum SpreadsheetCell { Int(i32), Float(f64), Text(String),}let row = vec![ SpreadsheetCell::Int(3), SpreadsheetCell::Text(String::from(\"blue\")), SpreadsheetCell::Float(10.12),]; // å¯è¡Œ, æ­¤æ—¶ä»–çš„ç±»å‹æ˜¯æšä¸¾ SpreadsheetCell å…¶ä»– vector è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ–¹æ³•, æ¯”å¦‚popå¯ä»¥åˆ é™¤æœ€åä¸€ä½å€¼, å…·ä½“çš„å¯ä»¥æŸ¥çœ‹ api æ–‡æ¡£ å­—ç¬¦ä¸² æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨è¿‡å­—ç¬¦ä¸², è€Œæœ¬ç« æˆ‘ä»¬ä¼šæ·±å…¥çš„äº†è§£å­—ç¬¦ä¸² ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸² ä½ çœŸçš„äº†è§£å­—ç¬¦ä¸²å—? rust ä¸­åªæœ‰ä¸€ç§å­—ç¬¦ä¸²ç±»å‹, é‚£å°±æ˜¯str, å¯¹äºå­—ç¬¦ä¸²slice, ä»–é€šå¸¸æ˜¯ str çš„å€Ÿç”¨, ä¹Ÿå°±æ˜¯&amp;str stringç±»å‹æ˜¯æ ‡å‡†åº“æä¾›çš„, å¹¶æ²¡æœ‰å†™è¿›æ ¸å¿ƒè¯­è¨€éƒ¨åˆ†, ä»–æ˜¯å¯ä»¥å¢é•¿çš„, å¯ä»¥å˜åŠ¨çš„, æœ‰æ‰€æœ‰æƒçš„, ç¼–ç æ˜¯ UTF-8çš„å­—ç¬¦ä¸²ç±»å‹ æ–°å»º 1let mut s = String::new(); ä¸Šé¢çš„ä»£ç æ˜¯æ–°å»ºäº†ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸² s, ç„¶åæˆ‘ä»¬å¯ä»¥ç»™ s å¡«å……æ•°æ®, ä½†æ˜¯é€šå¸¸æˆ‘ä»¬ä¼šç›´æ¥åˆå§‹åŒ–å¤±è´¥æ—¶æŒ‡å®šæ•°æ®, ä¾‹å¦‚ 1234567let data = \"initial contents\"; // å­—ç¬¦ä¸²å­—é¢å€¼let s = data.to_string(); // ä½¿ç”¨ to_string æ–¹æ³•// è¯¥æ–¹æ³•ä¹Ÿå¯ç›´æ¥ç”¨äºå­—ç¬¦ä¸²å­—é¢å€¼ï¼šlet s = \"initial contents\".to_string(); // æ›´åŠ ç®€å•çš„å†™æ³•let s = String::from(\"initial contents\"); // æ›´åŠ ç®€å•çš„å†™æ³•2 åªè¦æŸä¸ªç±»å‹å®ç°äº†Displayç±»å‹, ä»–å°±å¯ä»¥ä½¿ç”¨ to_string æ–¹æ³•æ¥è½¬æ¢æˆå­—ç¬¦ä¸² å¯¹äºè¿™ä¸¤ç§ç®€å•å†™æ³•, å¹¶æ²¡æœ‰ä»€ä¹ˆä¼˜åŠ£, æ‰€ä»¥æŒ‰éœ€ä½¿ç”¨ rust ä¸­çš„å­—ç¬¦ä¸²ç¼–ç ä¸ºutf-8, æ‰€ä»¥ä»–èƒ½æ”¾å…¥ä»»ä½•å¯ä»¥æ­£ç¡®ç¼–ç çš„æ•°æ® æ›´æ–° stringçš„å¤§å°å¯ä»¥å¢åŠ , å†…å®¹ä¹Ÿå¯ä»¥ä¿®æ”¹ ä½¿ç”¨push_strå’Œpushæ¥è¿½åŠ å­—ç¬¦ä¸² ä½¿ç”¨push_stræ¥è¿½åŠ å­—ç¬¦ä¸² slice 12let mut s = String::from(\"foo\");s.push_str(\"bar\"); // s ä¸º foobar è¿™é‡Œå¯¹ s ä½¿ç”¨push_str, å¯¹ s è¿›è¡Œå­—ç¬¦ä¸²çš„è¿½åŠ , åŒæ—¶, ä¸ºäº†ä¿è¯æ‰€æœ‰æƒä¸è½¬ç§», push_strä½¿ç”¨çš„æ˜¯å­—ç¬¦ä¸² slice ä½¿ç”¨pushæ¥è¿½åŠ å­—ç¬¦(ä¸æ˜¯å­—ç¬¦ä¸²) 12let mut s = String::from(\"lo\");s.push('l'); // s = lol ä½¿ç”¨ + è¿ç®—ç¬¦æˆ–è€… fromat! å®æ‹¼æ¥å­—ç¬¦ä¸² ä½ è¿˜å¯ä»¥ä½¿ç”¨+æ–¹ä¾¿çš„ç»„åˆå­—ç¬¦ä¸² 123let s1 = String::from(\"Hello, \");let s2 = String::from(\"world!\");let s3 = s1 + &amp;s2; // æ³¨æ„ s1 è¢«ç§»åŠ¨äº†ï¼Œä¸èƒ½ç»§ç»­ä½¿ç”¨ è¿™é‡Œçš„ s3 ä¼šæˆä¸º Hello, world! , æ³¨æ„ä»£ç  s1 + &amp;s2, è¿™æ˜¯å› ä¸º+ä½¿ç”¨çš„å‡½æ•°å®šä¹‰ä¸º 1fn add(self, s: &amp;str) -&gt; String { å…¶ä¸­, self æ˜¯ s1, s ä¸º &amp;s2, è¿™é‡Œè¦æ±‚å‚æ•°æ˜¯å¼•ç”¨, é¿å…å‚æ•° s çš„æ‰€æœ‰æƒå‘ç”Ÿè½¬ç§». å…¶æ¬¡, æˆ‘ä»¬æ³¨æ„è¿™ä¸ªå‚æ•°ç±»å‹æ˜¯ str çš„å¼•ç”¨, è€Œ s2æ˜¯ String ç±»å‹, ä¸ºä»€ä¹ˆèƒ½ç¼–è¯‘è¿è¡Œå‘¢? è¿™æ˜¯å› ä¸º&amp;Stringå¯ä»¥è¢«å¼ºè½¬æˆ&amp;str, åœ¨è°ƒç”¨+æ—¶, Rust ä½¿ç”¨äº†å¼ºåˆ¶è½¬æ¢, å°†å…¶å˜æˆ&amp;str è¿™é‡Œè¯´çš„ s1çš„æ‰€æœ‰æƒè¢«ç§»åŠ¨äº†, æ˜¯å› ä¸ºå‚æ•°selfè·å–äº†æ‰€æœ‰æƒ, æ­¤æ—¶æ‰€æœ‰æƒåˆ°äº†addä¸­, æ‰€ä»¥ä¸‹é¢ä½¿ç”¨ s1ä¼šé€ æˆé”™è¯¯ è¿˜å¯ä»¥ä½¿ç”¨å®format! 12345let s1 = String::from(\"tic\");let s2 = String::from(\"tac\");let s3 = String::from(\"toe\");let s = format!(\"{}-{}-{}\", s1, s2, s3); ç±»ä¼¼äº golang çš„ fmt.Printf, å°±æ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸² ç´¢å¼•å­—ç¬¦ä¸² å¾ˆå¤šç±»å‹éƒ½å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥è®¿é—®å…¶ä¸­æŸä¸ªå…ƒç´ , ä½†æ˜¯å¯¹äºå­—ç¬¦ä¸², åˆ™æ˜¯ä¸è¡Œçš„, å­—ç¬¦ä¸²å¹¶ä¸æ”¯æŒä½¿ç”¨ç´¢å¼•è¯­æ³• å†…éƒ¨å®ç° Stringæ˜¯ä¸€ä¸ªVec&lt;u8&gt;çš„å°è£…, æ¯”å¦‚å­—ç¬¦ä¸²Holaåœ¨Rust ä¸­çš„é•¿åº¦æ˜¯å››ä¸ªå­—èŠ‚, è¿™æ˜¯æ­£ç¡®çš„, å› ä¸ºæ¯ä¸ªå­—æ¯çš„ utf8 ç¼–ç éƒ½å ç”¨1æ ¼å­å§, é‚£ä¹ˆå­—ç¬¦ä¸²Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµåˆ™ä¸åŒ, å­—ç¬¦ä¸²Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµçš„é•¿åº¦ä¸º22, è¿™æ˜¯å› ä¸ºĞ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµçš„æ¯ä¸€ä¸ªå­—ç¬¦éœ€è¦ä¸¤ä¸ªå­—èŠ‚å­˜å‚¨, ä»–æ˜¯unicode ç¼–ç , ä½†æ˜¯æŒ‰ç…§ç´¢å¼•æ¥è·å–, æ˜¯æŒ‰ç…§å­—èŠ‚å»å¯»å€, é‚£ä¹ˆé—®é¢˜å°±å‡ºç°äº†, ä½ è·å–Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµçš„ç´¢å¼•0, ä¸æ˜¯Ğ´, è€Œæ˜¯Ğ´çš„ä¸€éƒ¨åˆ†, è¿™å°±ä¸æ˜¯ä½ æƒ³è¦è·å–åˆ°çš„ç»“æœäº† æ‰€ä»¥ rust ä¸ºäº†é¿å…å‡ºç°é—®é¢˜, å°†è¿™ä¸ªåŠŸèƒ½å±è”½äº† å…¶å® rust ä¹Ÿå¯ä»¥åˆ†è¾¨å‡ºå“ªäº›å­˜å‚¨å¤šå°‘å­—èŠ‚, è€Œåœ¨ä½ è·å–ç´¢å¼•æ—¶å¯¹ä¸åŒæƒ…å†µåšç‰¹æ®Šçš„å¤„ç†, ä½†æ˜¯è¿™æ ·çš„è¯åŠ¿å¿…ä¼šé€ æˆæ€§èƒ½çš„æŸè€—, rust è¿˜éœ€è¦å¤šæ¬¡çš„åˆ¤æ–­å’Œéå†æ‰èƒ½è·å–åˆ°ä½ æƒ³è¦çš„ç»“æœ, è€Œ Rust æœŸæœ›è·å–å€¼çš„æ—¶é—´ä¸º(O(1)) ä½¿ç”¨å­—ç¬¦ä¸² slice å¦‚æœæˆ‘ä»¬å°±æ˜¯æƒ³è¦ä½¿ç”¨ç´¢å¼•, è¿™é‡Œæœ‰ä¸€ä¸ªå±é™©çš„æ–¹æ³• 123let hello = \"Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ\";let s = &amp;hello[0..4]; // Ğ´Ñ€ è·å–Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµçš„å‰4ä¸ªå­—èŠ‚, ä¹‹å‰è¯´è¿‡ä¿„è¯­æ˜¯ä¸¤ä¸ªå­—èŠ‚ä¸ºä¸€ä¸ªå­—ç¬¦, æ‰€ä»¥è¿™é‡Œæ˜¯å‰ä¸¤ä¸ªå­—ç¬¦ å¦‚æœä½ è·å–çš„æ˜¯ [0..1], å› ä¸ºé¡¾å¤´ä¸é¡¾å°¾åŸåˆ™, å®é™…ä¸Šè·å–çš„æ˜¯Ğ´çš„ä¸€éƒ¨åˆ†, é‚£ä¹ˆæ­¤æ—¶ä¼šå¯¼è‡´Panic 1thread 'main' panicked at 'byte index 1 is not a char boundary; it is inside 'Ğ—' (bytes 0..2) of `Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ`', src/libcore/str/mod.rs:2188:4 æ‰€ä»¥éå¸¸ä¸æ¨èä½¿ç”¨è¿™ä¸ªæ–¹æ³• éå†å­—ç¬¦ä¸² Rust æä¾›äº†ä¸€ç§æ–¹æ³•å¯ä»¥è®©ä½ éå†å­—ç¬¦ä¸², è¿™æ˜¯å®‰å…¨çš„, è€Œä¸”æ˜¯æŒ‰ç…§å­—ç¬¦éå†è€Œä¸æ˜¯å­—èŠ‚ 123456fn main() { let s = String::from(\"Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ\"); for c in s.chars(){ println!(\"{}\", c) }} è¿è¡Œ 1234567891011Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ è€Œå½“ä½ æƒ³éå†æ¯ä¸€ä¸ªåŸå§‹å­—èŠ‚, ä½¿ç”¨.bytes() 123456fn main() { let s = String::from(\"Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ\"); for c in s.bytes(){ println!(\"{}\", c) }} 12345678910111213141516171819202122208180209128208176208178209129209130208178209131208185209130208181 è¿™é‡Œçš„æ¯ä¸ªæ•°å­—éƒ½æ˜¯æ¯ä¸ªå­—èŠ‚çš„ ascii å¯¹ç…§ å“ˆå¸Œ map å“ˆå¸Œ map å…¶ä»–è¯­è¨€ä¹Ÿæœ‰, æ¯”å¦‚ golang çš„ map, python çš„ dict, åœ¨ Rust ä¸­ä»–æ˜¯HashMap&lt;k, v&gt;, ä»–çš„ç»“æ„æ˜¯ä¸€ä¸ªé”®ç±»å‹kå¯¹åº”ä¸€ä¸ªå€¼ç±»å‹v, ä»–é€šè¿‡å“ˆå¸Œå‡½æ•°æ¥å®ç°ä¸¤è€…çš„æ˜ å°„ç®¡ç†, ä½ å¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡æŸä¸ª k æ‰¾åˆ°å¯¹åº”çš„ v æ–°å»º ä½¿ç”¨newåˆ›å»ºä¸€ä¸ªç©ºçš„HashMap, ä½¿ç”¨insertæ¥å¢åŠ å…ƒç´  123456use std::collections::HashMap;let mut scores = HashMap::new(); // hashmapscores.insert(String::from(\"Blue\"), 10); // Blue: 10scores.insert(String::from(\"Yellow\"), 50); // Yellow: 50 å› ä¸º hashmap ç›¸å¯¹äº vector å’Œ string æ¥è¯´å¹¶ä¸æ˜¯é‚£ä¹ˆå¸¸ç”¨, æ‰€ä»¥å¹¶æ²¡æœ‰é»˜è®¤å°±å¯¼å…¥, æ‰€ä»¥éœ€è¦é€šè¿‡ use std::collections::HashMap; æ¥å¯¼å…¥åˆ°å½“å‰çš„ä»£ç ä¸­ æˆ‘ä»¬ä¹‹å‰è¯´è¿‡é›†åˆéƒ½æ˜¯å°†æ•°æ®å­˜æ”¾åœ¨å †ä¸Šçš„ æ‰€ä»¥å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œæ‰©å®¹, è€Œä¸ vector ç›¸åŒçš„æ˜¯, å“ˆå¸Œ map æ˜¯åŒè´¨çš„, æ‰€æœ‰çš„é”®éƒ½å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹, å€¼ä¹Ÿæ˜¯ å¦ä¸€ç§æ„å»ºå“ˆå¸Œ map çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ª vector çš„collectæ–¹æ³•, è¿™ä¸ª vector å¿…é¡»æ˜¯å…ƒç»„ç±»å‹, ä¾‹å¦‚ 123456use std::collections::HashMap;let teams = vec![String::from(\"Blue\"), String::from(\"Yellow\")];let initial_scores = vec![10, 50];let scores: HashMap&lt;_, _&gt; = teams.iter().zip(initial_scores.iter()).collect(); è¿™é‡Œæ˜¯ä½¿ç”¨ zip å°†ä¸¤ä¸ª vector ç»„åˆ, å†ä½¿ç”¨collectå°†å…¶è½¬æ¢æˆä¸€ä¸ª hashmap HashMap&lt;_, _&gt; æ˜¯å¿…é¡»è¦æ ‡è®°çš„, ä»–ä»£è¡¨ collect è¾“å‡ºçš„ç»“æ„. å¿…é¡»è¦æ˜¾å¼çš„æŒ‡å®šæ‰å¯ä»¥, å…¶ä¸­çš„_ä»£è¡¨å ä½ æ‰€æœ‰æƒ hashmap ä¹Ÿæœ‰æ‰€æœ‰æƒ, å¯¹äºåƒi32è¿™ç§å®ç°äº†Copyçš„ trait çš„ç±»å‹, å…¶å€¼å¯ä»¥æ‹·è´è¿›å“ˆå¸Œ map. å¯¹äºåƒstringçš„æ‹¥æœ‰æ‰€æœ‰æƒçš„å€¼, å…¶å€¼å°†è¢«ç§»åŠ¨åˆ°å“ˆå¸Œ map ä¸­, æˆä¸ºè¿™ä¸ªå€¼çš„æ‰€æœ‰è€… 123456789use std::collections::HashMap;let field_name = String::from(\"Favorite color\");let field_value = String::from(\"Blue\");let mut map = HashMap::new();map.insert(field_name, field_value); // æ’å…¥// è¿™é‡Œ field_name å’Œ field_value ä¸å†æœ‰æ•ˆï¼Œ// å°è¯•ä½¿ç”¨å®ƒä»¬çœ‹çœ‹ä¼šå‡ºç°ä»€ä¹ˆç¼–è¯‘é”™è¯¯ï¼ è€Œå°†å€¼çš„å¼•ç”¨æ’å…¥åˆ°å“ˆå¸Œ map ä¸­æ—¶, è¿™äº›å€¼æœ¬èº«ä¸ä¼šè¢«ç§»åŠ¨åˆ° map ä¸­ è®¿é—®å“ˆå¸Œ map å€¼ get ä½¿ç”¨ get 123456789use std::collections::HashMap;let mut scores = HashMap::new();scores.insert(String::from(\"Blue\"), 10); // æ’å…¥scores.insert(String::from(\"Yellow\"), 50);let team_name = String::from(\"Blue\");let score = scores.get(&amp;team_name); // è·å–key Blue çš„å€¼ å¦‚æœ key blue ä¸å­˜åœ¨, åˆ™ä¼šè¿”å›None å¾ªç¯ ä½¿ç”¨ for å¾ªç¯æ¥éå†é”®å€¼å¯¹ 12345678910use std::collections::HashMap;let mut scores = HashMap::new();scores.insert(String::from(\"Blue\"), 10);scores.insert(String::from(\"Yellow\"), 50);for (key, value) in &amp;scores { println!(\"{}: {}\", key, value);} ç‰¹åˆ«æ³¨æ„, å› ä¸ºæ˜¯ hash çš„æ–¹å¼, æ‰€ä»¥ hashmap keyæ˜¯æ— åºçš„ æ›´æ–°å“ˆå¸Œ map è¦†ç›– å¯¹äºå·²ç»å­˜åœ¨çš„ key, æˆ‘ä»¬å¯ä»¥ç›´æ¥è¦†ç›–è¿™ä¸ª key ä¸‹çš„å€¼, ç›´æ¥ä½¿ç”¨insertå³å¯ 12345678use std::collections::HashMap;let mut scores = HashMap::new();scores.insert(String::from(\"Blue\"), 10);scores.insert(String::from(\"Blue\"), 25);println!(\"{:?}\", scores); // 25 åªæ–°å»ºä¸è¦†ç›– ä½ å¯ä»¥èƒ½æ³¨æ„, ä½¿ç”¨insertä¼šç›´æ¥è¦†ç›–å€¼, é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³åªåœ¨è¿™ä¸ª key ä¸å­˜åœ¨æ—¶æ‰æ’å…¥çš„è¯, é…åˆä½¿ç”¨entryå³å¯ 123456789use std::collections::HashMap;let mut scores = HashMap::new();scores.insert(String::from(\"Blue\"), 10);scores.entry(String::from(\"Yellow\")).or_insert(50); // ä¸å­˜åœ¨å†æ’å…¥scores.entry(String::from(\"Blue\")).or_insert(50);println!(\"{:?}\", scores); entry è¿”å›äº†ä¸€ä¸ªæšä¸¾Entry, å…¶æœ‰ä¸€ä¸ªæ–¹æ³•or_insertåœ¨å»ºå¯¹åº”çš„å€¼å­˜åœ¨æ—¶å°±è¿”å›è¿™ä¸ªå€¼çš„å¯å˜å¼•ç”¨, å¦‚æœä¸å­˜åœ¨å°±å°†å‚æ•°ä½œä¸ºæ–°å€¼æ’å…¥å¹¶è¿”å›å¯å˜å¼•ç”¨ æ ¹æ®æ—§å€¼æ›´æ–° æ¯”å¦‚å¯¹å€¼è¿›è¡Œ+1è€Œä¸å…³æ³¨è¿™ä¸ªå€¼æœ¬æ¥çš„å€¼ 123456789101112use std::collections::HashMap;let text = \"hello world wonderful world\";let mut map = HashMap::new();for word in text.split_whitespace() { // éå†æ¯ä¸ªå­—ç¬¦ let count = map.entry(word).or_insert(0); // è¿™ä¸ªå­—ç¬¦ä½œä¸º key ä¸å­˜åœ¨å°± set æˆ0 *count += 1; // +1}println!(\"{:?}\", map); ä¹‹å‰è¯´è¿‡, entryä¸ç®¡æ€æ ·éƒ½ä¼šè¿”å›å€¼çš„å¯å˜å¼•ç”¨, æ‰€ä»¥æˆ‘ä»¬ç›´æ¥ä¿®æ”¹è¿™ä¸ªå¼•ç”¨çš„å€¼å³å¯ è·å–å¯è¢«ä¿®æ”¹çš„å€¼ æœ‰æ—¶å€™hashmap é‡ç‚¹å€¼å­˜å‚¨çš„å¯èƒ½æ˜¯ vector è¿™ç§é›†åˆ, è€Œæˆ‘ä»¬æƒ³è¦è·å–å€¼å¹¶è¿›è¡Œ push æˆ–è€…å…¶ä»–çš„è¿½åŠ æ“ä½œ, å¯ä»¥ä½¿ç”¨get_mut 1234let mut company = HashMap::new();company.insert(\"c1\", vec![1, 2]);let c1 = company.get_mut(\"c1\"); // è·å–å€¼çš„å¯å˜å¼•ç”¨c1.unwrap().push(3) // unwrap æ˜¯å°†ç±»å‹å‰¥ç¦»å‡ºæ¥, ä½¿ç”¨get_mutå¯ä»¥è·å¾—å€¼çš„å¯å˜å¼•ç”¨, ä»¥ä¾¿æˆ‘ä»¬ç›´æ¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ åŒæ—¶, unwrapä¹Ÿå¿…ä¸å¯å°‘, ä¸ä½¿ç”¨unwrapæ—¶, è¿è¡ŒæŠ¥é”™ 1no method named `push` found for enum `std::option::Option&lt;&amp;std::vec::Vec&lt;{integer}&gt;&gt;` in the current scope æ­¤æ—¶å¯ä»¥çœ‹å‡ºæ¥, c1çš„ç±»å‹å˜æˆäº† std::option::Option&lt;&amp;std::vec::Vec&lt;{integer}&gt;&gt;, è¢«åŒ…è£¹åœ¨äº†Option ä¸­, æˆ‘ä»¬å¿…é¡»è¦è°ƒç”¨unwrapå°†å…¶å‰¥ç¦»å‡ºæ¥, ç±»å‹å˜å›&amp;std::vec::Vec&lt;{integer}&gt; å³å¯ ç»ƒä¹ é¢˜ æ±‚å¹³å‡æ•° ç»™å®šä¸€ç³»åˆ—æ•°å­—ï¼Œä½¿ç”¨ vector å¹¶è¿”å›è¿™ä¸ªåˆ—è¡¨çš„å¹³å‡æ•°ï¼ˆmean, averageï¼‰ã€ä¸­ä½æ•°ï¼ˆæ’åˆ—æ•°ç»„åä½äºä¸­é—´çš„å€¼ï¼‰å’Œä¼—æ•°ï¼ˆmodeï¼Œå‡ºç°æ¬¡æ•°æœ€å¤šçš„å€¼ï¼›è¿™é‡Œå“ˆå¸Œ map ä¼šå¾ˆæœ‰å¸®åŠ©ï¼‰ 1234567891011121314151617fn average(v: &amp;Vec&lt;f64&gt;) -&gt; f64 { let mut sum = 0.0; for i in v{ sum += i } sum / v.len() as f64 // len è¿”å›é•¿åº¦, ç±»å‹æ˜¯ usize, é€šè¿‡ as è½¬æ¢æˆ f64 // / æ˜¯é™¤}fn main() { let v0 = vec![1.0, 2.0, 3.0, 5.0]; let v1 = vec![-1.0, -2.0, -3.0]; let v0average = average(&amp;v0); let v1average = average(&amp;v1); println!(\"v0 res = {}\", v0average); println!(\"v1 res = {}\", v1average)} è¿™é‡Œæœ‰ä¹‹å‰æ²¡æœ‰å†™åˆ°åšå®¢é‡Œçš„ vector çš„ len æ–¹æ³•, è¿”å›é•¿åº¦ å­—ç¬¦ä¸²è½¬æ¢ å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º Pig Latinï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªè¾…éŸ³å­—æ¯è¢«ç§»åŠ¨åˆ°å•è¯çš„ç»“å°¾å¹¶å¢åŠ  â€œayâ€ï¼Œæ‰€ä»¥ â€œfirstâ€ ä¼šå˜æˆ â€œirst-fayâ€ã€‚å…ƒéŸ³å­—æ¯å¼€å¤´çš„å•è¯åˆ™åœ¨ç»“å°¾å¢åŠ  â€œhayâ€ï¼ˆâ€œappleâ€ ä¼šå˜æˆ â€œapple-hayâ€ï¼‰ã€‚ç‰¢è®° UTF-8 ç¼–ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647fn pig_lation(g: &amp;str) -&gt; String { // å› ä¸º str å¿…é¡»è¦åœ¨åˆå§‹åŒ–æ—¶å°±è¦çŸ¥é“å…¶å¤§å°, æ‰€ä»¥è¿”å› string // è½¬æ¢æˆ string let general = g.to_string(); let mut is_vowel = false; let vowel = vec!['a', 'i', 'y', 'o', 'u']; // è·å–é¦–å­—æ¯, æŸ¥çœ‹æ˜¯å…ƒéŸ³è¿˜æ˜¯è¾…éŸ³ // ä¸èƒ½ç²—æš´çš„ç›´æ¥è·å–ç´¢å¼•0, éœ€å…¼å®¹å…¶ä»–è¯­è¨€ for i in general.chars(){ for k in &amp;vowel{ if i.to_string() == k.to_string() { is_vowel = true } } break } if is_vowel{ // é¦–å­—æ¯æ˜¯å…ƒéŸ³ return format!(\"{}-hey\", general) }else{ let mut p = String::new(); let mut is_first = true; let mut first_word = String::new(); for i in general.chars(){ if is_first{ // ç¬¬ä¸€æ¬¡ first_word = i.to_string(); is_first = false; continue }else{ p = p+&amp;i.to_string() } } return format!(\"{}-{}ay\", p, first_word) }}fn main() { let t0 = \"apple\"; let t1 = \"first\"; let t2 = \"è‹¹æœ\"; let r0 = pig_lation(t0); let r1 = pig_lation(t1); let r2 = pig_lation(t2); println!(\"r0 = {}\", r0); println!(\"r1 = {}\", r1); println!(\"r2 = {}\", r2)} éƒ¨é—¨æ§åˆ¶ ä½¿ç”¨å“ˆå¸Œ map å’Œ vectorï¼Œåˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ¥å£æ¥å…è®¸ç”¨æˆ·å‘å…¬å¸çš„éƒ¨é—¨ä¸­å¢åŠ å‘˜å·¥çš„åå­—ã€‚ä¾‹å¦‚ï¼Œâ€œAdd Sally to Engineeringâ€ æˆ– â€œAdd Amir to Salesâ€ã€‚æ¥ç€è®©ç”¨æˆ·è·å–ä¸€ä¸ªéƒ¨é—¨çš„æ‰€æœ‰å‘˜å·¥çš„åˆ—è¡¨ï¼Œæˆ–è€…å…¬å¸æ¯ä¸ªéƒ¨é—¨çš„æ‰€æœ‰å‘˜å·¥æŒ‰ç…§å­—å…¸åºæ’åˆ—çš„åˆ—è¡¨ã€‚ 123456789101112131415161718192021222324252627use std::{io, collections::HashMap}; // å¼•å…¥æ ‡å‡†åº“fn main(){ println!(\"CRM\"); let mut company = HashMap::new(); loop{ println!(\"è¾“å…¥æ‰€åœ¨éƒ¨é—¨-&gt;\"); let mut class = String::new(); // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ class io::stdin() // è°ƒç”¨å‡½æ•°stdin .read_line(&amp;mut class) // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š println!(\"è¾“å…¥ç”¨æˆ·å-&gt;\"); let mut name = String::new(); // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ name io::stdin() // è°ƒç”¨å‡½æ•°stdin .read_line(&amp;mut name) // è°ƒç”¨stdinçš„æ–¹æ³•read_lineè·å–è¾“å…¥å€¼ .expect(\"è¯»å–å¤±è´¥\"); // å¦‚æœè·å–é”™è¯¯æ‰“å°è­¦å‘Š let ns = company.get_mut(&amp;class); // è·å–å¯å˜å¼•ç”¨ if ns == None{ company.insert(format!(\"{}\", class), vec![format!(\"{}\", name)]); // é˜²æ­¢æ‰€æœ‰æƒè½¬ç§», ä½¿ç”¨ format é‡æ–°åˆ¶é€ ä¸€ä¸ª str }else{ ns.unwrap().push(name) // ç›´æ¥ push } for i in company.get_mut(&amp;class).unwrap(){ println!(\"{}\", i) } }}","link":"/2021/11/26/rust_programming_language(7)/"},{"title":"è®°ä¸€æ¬¡ç ´è§£ gitbook_lock å¯†ç çš„è¿‡ç¨‹","text":"å‰è¨€ ä¸çŸ¥é“å•¥æ—¶å€™èµ·çš„æ­ªé£é‚ªæ°”, å›½å†…äººå†™çš„æ–‡ç« éƒ½ä¼šåœ¨ä¸‹é¢æ ‡äºŒç»´ç , æ˜¯èµåŠ©çš„ä¹Ÿå°±ç®—äº†, è¿˜æ•´ä¸ªå…¬ä¼—å·, æˆ‘ä¹Ÿå…³æ³¨äº†å‡ ä¸ªå…¬ä¼—å·, æ—¥æ¨90%éƒ½æ˜¯å–è¯¾, æ‰¾ç‚¹è¥å…»ç®€ç›´æ˜¯ğŸ’©é‡Œæ·˜é‡‘, ä½ æ”¾å¹¿å‘Šå¯ä»¥, æˆ‘ä¸å…³æ³¨å°±è¡Œ, ç»“æœåæ¥è¶Šæ¥è¶Šç¦»è°±, æ¸æ¸çš„æœ‰äº›å˜æˆäº†å…³æ³¨å…¬ä¼—å·æ‰èƒ½çœ‹è§å†…å®¹, å¤§æ— è¯­äº†. å°±æ˜¯ç±»ä¼¼äºè¿™æ · ä»Šå¤©å°±çªå‘å¥‡æƒ³, çœ‹çœ‹èƒ½ä¸èƒ½ç»•è¿‡è¿™ç§æœºåˆ¶, ç»“æœè¿˜çœŸå‘ç°æŒºç®€å•çš„, å‡ åˆ†é’Ÿå°±æå®šäº†, äºæ˜¯è¿™é‡Œå°å°çš„è®°å½•ä¸€ä¸‹æ’æŸ¥è¿‡ç¨‹ ä¸‹é¢çš„\"ä½œè€…\"ä»£è¡¨çš„æ˜¯æˆ‘ä»¬è¦ç ´è§£çš„è¿™ä¸ªç½‘ç«™çš„ä½œè€…, è€Œæœ¬äººä»¥\"æˆ‘\"ä»£ç§° æ€è€ƒä½œè€…çš„å®ç°æ–¹å¼ ä¸€ä¸Šæ¥å°±å»å®æ“æ˜¯ä¸æ˜æ™ºçš„, ä¸€ä¸ªäººå¾ˆå®¹æ˜“èµ°å…¥æ­»èƒ¡åŒ, æˆ‘ä¹ æƒ¯åœ¨è§£å†³é—®é¢˜å‰å…ˆæ€è€ƒé—®é¢˜, æœŸæœ›èƒ½äº†è§£åŸå› å’Œç›®çš„ ä½œè€…åœ¨è¿™é‡Œå†™çš„æ˜¯\"è·å–æ³¨å†Œç åæ°¸ä¹…å…è´¹è§‚çœ‹æ–‡ç« \", é¦–å…ˆæˆ‘éšä¾¿è¾“å…¥ä¸€ä¸ªéªŒè¯ç , ç‚¹å‡»æäº¤, å‘ç°å¹¶æ²¡æœ‰è¦æ±‚æˆ‘ç™»å½•, è¿™è¯´æ˜è¿™ä¸ªéªŒè¯ç æ˜¯é€šç”¨çš„, å¯èƒ½åªæœ‰ä¸€ä¸ªæˆ–è€…æœ‰é™çš„å‡ ä¸ª, ä¸ç„¶æˆ‘ä¸ç™»å½•, ä»–æ€ä¹ˆçŸ¥é“è¿™ä¸ªéªŒè¯ç å±äºæˆ‘å‘¢? è€Œä¸”æˆ‘åœ¨ç¬¬ä¸€å®¶å…¬å¸åšè¿‡ä¸€äº›éœ€è¦å¯¹æ¥å¾®ä¿¡æ¥å£çš„åŠŸèƒ½, æˆ‘çŸ¥é“å¯¹äºå¾®ä¿¡å…¬ä¼—å·æ¥è®², è¦æƒ³åšä¸€äº›æ¯”è¾ƒå¼€æ”¾çš„æ“ä½œ, æ¯”å¦‚åšåˆ°ä¸åŒçš„äººåœ¨å…¬ä¼—å·å‘é€åŒæ ·çš„æ¶ˆæ¯, å›å¤ä¸åŒçš„å†…å®¹, éœ€è¦ä¼ä¸šå¼€å‘è€…å¼€å‘çš„å…¬ä¼—å·æ‰å¯ä»¥, ä¸ªäººçš„å¼€å‘è€…åªèƒ½åšåˆ°åœ¨åå°è®¾ç½®ç”¨æˆ·å‘é€æŸä¸ªæ¶ˆæ¯ä½ è‡ªåŠ¨å›å¤æŸä¸ªæ¶ˆæ¯, æ¶ˆæ¯æ˜¯å›ºå®šçš„, åªæœ‰æ¥è‡ªå·±çš„æ¥å£æ‰å¯ä»¥åšåˆ°éšæœºç”Ÿæˆ, è€Œä¸€èˆ¬è¿™ç§å…¬ä¼—å·éƒ½æ˜¯ä¸ªäººå…¬ä¼—å·, ä¼ä¸šçš„å¾ˆå°‘ è€Œä¸”ç½‘ç«™æœ¬èº«ä¸æ”¯æŒç™»å½•, æ²¡æœ‰åŠæ³•è¿™ä¸ªå¾®ä¿¡ç”¨æˆ·ä¸å½“å‰æ­£åœ¨æµè§ˆçš„ç”¨æˆ·å»ºç«‹å…³ç³». é‚£ä¹ˆå°±æœ‰ä¸¤ç§å¯èƒ½ è¿™ä¸ªéªŒè¯ç å°±æ”¾åˆ°äº†ç½‘é¡µä¹‹ä¸­, æˆ‘çš„æ„æ€æ˜¯ä½œè€…é  JS å»åˆ¤æ–­éªŒè¯ç æ˜¯å¦æ­£ç¡®, è¿™å°±ä»£è¡¨æ­£ç¡®ç­”æ¡ˆä¹Ÿåœ¨æŸä¸ªæ–‡ä»¶ä¸­ è¿™ä¸ªéªŒè¯ç çš„æ ¡éªŒæ˜¯é€šè¿‡ HTTP è¯·æ±‚æ¥åšçš„, è¿™ç§éœ€è¦è‡ªå·±æœ‰æœåŠ¡å™¨å†™ api, å¯èƒ½æ€§ä¸å¤§ å¦‚æœæ˜¯å¯èƒ½2, é‚£ä¹ˆå°±å¾ˆéš¾å»åšäº†, æˆ‘ä»¬è¦å…ˆçœ‹ä¸€ä¸‹æ˜¯å“ªä¸€ç§, æ ¡éªŒçš„æ–¹å¼å¾ˆç®€å•, f12æ‰“å¼€çœ‹ä¸€ä¸‹ç‚¹å‡»æäº¤æ—¶æœ‰æ²¡æœ‰å‘é€è¯·æ±‚ å¾ˆå¹¸è¿, å¹¶æ²¡æœ‰, å› ä¸ºç»å¤§éƒ¨åˆ†éƒ½ä¸æ˜¯è‡ªå·±å†™ api, è¿™æ˜¯å› ä¸º: ä¸€èˆ¬åšå®¢éƒ½ä½¿ç”¨ç°æˆçš„åšå®¢æ¡†æ¶, æ¯”å¦‚ hexo è¿™äº›, è‡ªå·±å†™å‰ç«¯çš„äººå¾ˆå°‘, å¯¹äºä½¿ç”¨æ¡†æ¶çš„äººæ¥è®², è¿™ç§ğŸ”’çš„æœºåˆ¶éƒ½æ˜¯é€šè¿‡åˆ«äººå†™çš„ç»„ä»¶æ¥åšçš„, è€Œåˆ«äººå†™ç»„ä»¶ä¸ä¼šè€ƒè™‘ä½ è‡ªå·±çš„ api æ˜¯æ€ä¹ˆå®ç°çš„, æ¥å£æ€ä¹ˆèµ°, è¿”å›çš„æ•°æ®æ˜¯ä»€ä¹ˆ, æ‰€ä»¥å…¬å¼€çš„ç»„ä»¶é™¤äº†æ¥å…¥å‡ºåçš„æœåŠ¡, æ¯”å¦‚è°·æ­Œç»Ÿè®¡è¿™äº›, å‰©ä¸‹çš„éƒ½æ˜¯æœ¬åœ°å®ç°çš„ é‚£ä¹ˆåˆ°è¿™é‡Œå°±æ˜äº†äº†, è¿™é‡Œçš„ä½œè€…ä½¿ç”¨äº†æŸä¸ªåšå®¢æ¡†æ¶çš„æŸä¸ªç»„ä»¶, è¿™ä¸ªç»„ä»¶å¯ä»¥åšåˆ°å°†æ–‡ç« éšè—éƒ¨åˆ†, åªæœ‰è¾“å…¥æ­£ç¡®çš„éªŒè¯ç æ‰èƒ½è§£é”, è€Œè¿™ä¸ªæ­£ç¡®çš„éªŒè¯ç ä¹Ÿæ˜¯å†™è¿›å‰ç«¯ä¸­çš„, ç”±æœ¬åœ°å»åšæ ¡éªŒ æŸ¥æ‰¾æ­£ç¡®çš„éªŒè¯ç  æˆ‘å…ˆä½¿ç”¨ f12 å®šä½åˆ°æäº¤æŒ‰é’®çš„å‰ç«¯å…ƒç´  1&lt;button onclick=\"bc()\" id=\"btw-submit-btn\" style=\"padding: 0 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;\"&gt;æ äº¤ &lt;/button&gt; çœ‹åˆ°è¿™é‡Œå†™äº†ç‚¹å‡»æŒ‰é’®æ—¶è§¦å‘å‡½æ•°bc, ä½†æ˜¯è¿™ä¸ªå‡½æ•°åå¤ªçŸ­äº†, æˆ‘å…ˆå°è¯•ä¸€ä¸‹èƒ½ä¸èƒ½æ‰¾åˆ°è¿™ä¸ªå‡½æ•°. ä¾æ—§æ˜¯æ‰“å¼€ f12, åœ¨ç‚¹å‡» tab æºä»£ç  ä¸€æ , è¿™é‡Œä¼šå±•ç¤ºé¡µé¢æ‰€æœ‰çš„èµ„æº é¼ æ ‡ç§»åŠ¨åˆ° top, å³é”®æœ‰ä¸€ä¸ªé€‰é¡¹: åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­æœç´¢, ç‚¹å‡»è¿™ä¸ªé€‰é¡¹, æœç´¢ bc( æœç´¢å‡ºäº†4ä¸ªåŒ¹é…, ç¬¬ä¸€ä¸ªä¸€çœ‹å°±æ˜¯ç™¾åº¦ç»Ÿè®¡, hm.baidu.com/hm.jså¤ªç†Ÿæ‚‰äº†, ç›´æ¥è·³è¿‡ ç¬¬äºŒä¸ª, çœ‹è¿™ä¸ª js å: gitbook-plugin-lock/lock.js, è¿™åº”è¯¥å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„, æŸ¥çœ‹è¿™ä¸ª js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394require(['gitbook', 'jQuery'], function(gitbook, $) { let lockTokenKey; let wechatName; let wechatQr; let verificationCode; let thisCode; let thisValue; let allPage; let articleHeightPercent; function insertPageLock(e) { let authToken= localStorage.getItem(lockTokenKey) if (authToken!==isNaN(0)||authToken!==\"\"||authToken!==undefined) { for (let i in verificationCode) { if (verificationCode[i][\"value\"] === authToken) { return true; } } } const cla = document.getElementById(\"book-search-results\"); const article = cla, height = article.scrollHeight; const halfHeight = height * articleHeightPercent; cla.style.height= halfHeight + 'px'; cla.style.overflow = 'hidden' const html = '&lt;div id=\"page-lock-wrap\" style=\"position: absolute; bottom: 0; z-index: 9999; width: 100%; margin-top: -100px; font-family: PingFangSC-Regular, sans-serif;\"&gt;' + '&lt;div id=\"page-lock-mask\" style=\"position: relative; height: 200px; background: -webkit-gradient(linear, 0 0%, 0 100%, from(rgba(255, 255, 255, 0)), to(rgb(255, 255, 255)));\"&gt;&lt;/div&gt;' + '&lt;div class=\"info\" style=\"position: absolute;left: 50%;top: 70%;bottom: 30px;transform: translate(-50%, -50%);font-size: 15px;text-align: center;background: -webkit-gradient(linear, 0 0%, 0 100%, from(rgba(255, 255, 255, 0)), to(rgb(255, 255, 255)));\"&gt;\\n' + ' &lt;div&gt;æ‰«ç æˆ–æœç´¢ï¼š&lt;span style=\"color: #E9405A; font-weight: bold;\"&gt;'+wechatName+'&lt;/span&gt;&lt;/div&gt;\\n' + ' &lt;div&gt;\\n' + ' &lt;span&gt;å‘é€ &lt;/span&gt;&lt;span class=\"token\" style=\"color: #e9415a; font-weight: bold; font-size: 17px; margin-bottom: 45px;\"&gt;'+thisCode+'&lt;/span&gt;\\n' + ' &lt;/div&gt;\\n' + ' &lt;div&gt;\\n' + ' å³å¯&lt;span style=\"color: #e9415a; font-weight: bold;\"&gt;ç«‹å³æ°¸ä¹…&lt;/span&gt;è§£é”æœ¬ç«™å…¨éƒ¨æ–‡ç« \\n' + ' &lt;/div&gt;\\n' + ' &lt;div id=\"btw-modal-input-code\" style=\"margin-top: 20px; background: rgb(255, 255, 255);\"&gt;&lt;input '+ ' id=\"btw-modal-input\" type=\"text\" maxLength=\"10\" placeholder=\"è¯·è¾“å…¥éªŒè¯ç \" '+ ' style=\"width: 160px; height: 32px; line-height: 32px; padding: 0 10px; margin: 0 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;\"&gt;'+ ' &lt;button onclick=\"bc()\" id=\"btw-submit-btn\" '+ ' style=\"padding: 0 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;\"&gt;æ '+ ' äº¤'+ ' &lt;/button&gt;&lt;/div&gt;\\n '+ ' &lt;div&gt;\\n' + ' &lt;img class=\"code-img\" style=\"width: 300px;display:unset\" src=\"'+wechatQr+'\"&gt;\\n' + ' &lt;/div&gt;\\n' + '&lt;/div&gt;' + '&lt;/div&gt;'; const child = document.createElement('div') child.innerHTML = html cla.appendChild(child) bc = function () { const val = document.getElementById('btw-modal-input').value if (val === thisValue) { cla.style.height = height + 'px'; cla.style.overflow = 'visible'; const rm = document.getElementById(\"page-lock-wrap\") rm.parentNode.removeChild(rm) localStorage.setItem(lockTokenKey, thisValue) } else if (val === \"\" || val === undefined || val === isNaN(0)) { return false; } else { alert(\"éªŒè¯ç ä¸æ­£ç¡®!\") } } } gitbook.events.bind('start', function(e, config) { lockTokenKey = config.lock.lockTokenKey || 'lock-token'; wechatName = config.lock.wechatName || ''; wechatQr = config.lock.wechatQr || ''; verificationCode = config.lock.verificationCode || ''; allPage = config.lock.allPage || false; articleHeightPercent = config.lock.articleHeightPercent || 0.5; if (articleHeightPercent &gt;= 1 || articleHeightPercent &lt;= 0) { articleHeightPercent = 0.5 } const rand = Math.floor(Math.random() * verificationCode.length) thisCode = verificationCode[rand][\"key\"] thisValue = verificationCode[rand][\"value\"] }); gitbook.events.bind('page.change', function(e) { const place = document.getElementsByClassName(\"page-lock-place\") if (allPage || place.length !== 0) { insertPageLock(e); } });}); è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°äº†å‡½æ•°bc, æ¯”å¯¹æ˜¯è¿™é‡Œ if (val === thisValue), ç›¸ç­‰åˆ™å°†ç»“æœå±•ç¤º, ä¸æƒ³ç­‰å°±å¼¹å‡ºéªŒè¯ç ä¸æ­£ç¡®, æ˜ç¡®äº†thisValueå°±æ˜¯æ­£ç¡®çš„éªŒè¯ç  æˆ‘åœ¨è¿™ä¸ª js ä¸­æœç´¢ thisValue , æ€»å…±å››å¤„, æœ‰ä¸€å¤„æ˜¯è¿™é‡Œ 123const rand = Math.floor(Math.random() * verificationCode.length) thisCode = verificationCode[rand][\"key\"]thisValue = verificationCode[rand][\"value\"] ä»ä»£ç æ¥çœ‹, æ˜¯è·å–çš„verificationCode, è¿™ä¸ªverificationCodeæ˜¯ä¸€ä¸ªåˆ—è¡¨, ç„¶åéšæœºè·å–ä¸€ä¸ªåˆ—è¡¨å†…çš„ key å’Œ value, è¿™é‡Œçš„ key å°±æ˜¯å›¾ä¸Šçš„1024, value å°±æ˜¯æ­£ç¡®çš„éªŒè¯ç äº†, è¿™é‡Œå¹¶æ²¡æœ‰å®šä¹‰å…·ä½“çš„å€¼, è¿™ä¹Ÿæ˜¯æ­£ç¡®çš„, å› ä¸ºæ—¢ç„¶æ˜¯ç»„ä»¶, è‚¯å®šä¸ä¼šè®©ç»„ä»¶çš„å¼€å‘è€…å†™æ­»æ­£ç¡®çš„éªŒè¯ç , æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶æ”¾ç½®æ­£ç¡®çš„éªŒè¯ç , è¿™é‡Œåº”è¯¥æ˜¯åŠ äº†ç‚¹èŠ±æ ·, æ¯æ¬¡è¿˜æ˜¯ä¼šéšæœºè·å–ä¸€ä¸ª key å’Œ value, æˆ‘åˆ·æ–°äº†ä¸€ä¸‹é¡µé¢, æœç„¶æç¤ºçš„è¦ç»™å…¬ä¼—å·å‘é€çš„ key å·²ç»å˜æˆå¦ä¸€ä¸ªäº†, æˆ‘çŒœæµ‹, verificationCodeçš„ç»“æ„åº”è¯¥æ˜¯ 12345[ {\"key\": \"1024\", \"value\": \"æ­£ç¡®çš„éªŒè¯ç \"}, {\"key\": \"é¢è¯•\", \"value\": \"æ­£ç¡®çš„éªŒè¯ç \"}, ...] æ‰€ä»¥æˆ‘å…¨éƒ¨æ–‡ä»¶æœç´¢ verificationCode, æœç„¶åœ¨ä¸€ä¸ª html æ–‡ä»¶ä¸­æŸ¥åˆ°äº†ä¿¡æ¯ 123456&lt;script&gt; var gitbook = gitbook || []; gitbook.push(function() { gitbook.page.hasChanged({\"page\":{\"title\":\"åŸºç¡€\",\"level\":\"2.1\",\"depth\":1,\"next\":{\"title\":\"ä¸ªäººå­¦ä¹ ç¬”è®°\",\"level\":\"2.2\",\"depth\":1,\"path\":\"Golang/å­¦ä¹ ç¬”è®°.md\",\"ref\":\"Golang/å­¦ä¹ ç¬”è®°.md\",\"articles\":[]},\"previous\":{\"title\":\"@xzghua\",\"level\":\"1.2\",\"depth\":1,\"url\":\"https://www.github.com/xzghua\",\"ref\":\"https://www.github.com/xzghua\",\"articles\":[]},\"dir\":\"ltr\"},\"config\":{\"plugins\":[\"accordion\",\"pageview-count\",\"copy-code-button\",\"click-reveal\",\"expandable-chapters\",\"donate\",\"anchor-navigation-ex\",\"hide-element\",\"statistics\",\"github-buttons\",\"lightbox\",\"custom-favicon\",\"-lunr\",\"-search\",\"search-pro\",\"insert-logo\",\"splitter\",\"gitalks\",\"lock\",\"mermaid-gb3\",\"theme-comscore\"],\"styles\":{\"website\":\"styles/website.css\",\"pdf\":\"styles/pdf.css\",\"epub\":\"styles/epub.css\",\"mobi\":\"styles/mobi.css\",\"ebook\":\"styles/ebook.css\",\"print\":\"styles/print.css\"},\"pluginsConfig\":{\"statistics\":{\"bd_url\":\"https://hm.baidu.com/hm.js\",\"cnzz_url\":\"https://s95.cnzz.com/z_stat.php\",\"google_url\":\"https://www.googletagmanager.com/gtag/js\",\"bd_token\":\"efcf1af531176f98a2ecd0648da80892\",\"cnzz_id\":1278118665},\"gitalks\":{\"flipMoveOptions\":{},\"clientID\":\"1cf16fa2a845aab2bfa4\",\"number\":-1,\"perPage\":10,\"proxy\":\"https://withered-block-2317.interview.workers.dev/?https://github.com/login/oauth/access_token\",\"admin\":[\"chuhsent\",\"xzghua\"],\"createIssueManually\":false,\"distractionFreeMode\":false,\"repo\":\"interview-comment\",\"owner\":\"wzcu\",\"enableHotKey\":true,\"clientSecret\":\"25fdef949a46bdc9507ecdea23c21ce745b56cf0\",\"pagerDirection\":\"last\",\"labels\":[\"Gitalk\"]},\"splitter\":{},\"search-pro\":{},\"accordion\":{},\"lock\":{\"verificationCode\":[{\"key\":\"1024\",\"value\":\"2048\"},{\"key\":\"666\",\"value\":\"6666\"},{\"key\":\"é¢è¯•\",\"value\":\"é€ ç«ç®­\"},{\"key\":\"2048\",\"value\":\"1024\"}],\"lockTokenKey\":\"lock-token-key\",\"wechatName\":\"æŠ€æœ¯æŠ›å…‰\",\"wechatQr\":\"http://interview.wzcu.com/static/qrcode.jpg\",\"allPage\":false,\"articleHeightPercent\":0.6},\"donate\":{\"alipay\":\"http://www.iphpt.com/static/uploads/images/alipay.jpeg\",\"alipayText\":\"æ”¯ä»˜å®æ‰“èµ\",\"button\":\"èµ\",\"title\":\"\",\"wechat\":\"http://www.iphpt.com/static/uploads/images/wechat2.jpeg\",\"wechatText\":\"å¾®ä¿¡æ‰“èµ\"},\"hide-element\":{},\"fontsettings\":{\"theme\":\"white\",\"family\":\"sans\",\"size\":2},\"click-reveal\":{},\"highlight\":{},\"mermaid-gb3\":{},\"anchor-navigation-ex\":{\"associatedWithSummary\":true,\"float\":{\"floatIcon\":\"fa fa-navicon\",\"level1Icon\":\"\",\"level2Icon\":\"\",\"level3Icon\":\"\",\"showLevelIcon\":false},\"mode\":\"float\",\"multipleH1\":true,\"pageTop\":{\"level1Icon\":\"\",\"level2Icon\":\"\",\"level3Icon\":\"\",\"showLevelIcon\":false},\"printLog\":false,\"showGoTop\":true,\"showLevel\":true},\"favicon\":\"./static/red_rocket02.png\",\"lightbox\":{\"jquery\":true,\"sameUuid\":false},\"theme-comscore\":{},\"pageview-count\":{},\"github-buttons\":{\"buttons\":[{\"user\":\"wzcu\",\"repo\":\"interview-comment\",\"type\":\"star\",\"size\":\"small\",\"count\":true},{\"user\":\"wzcu\",\"repo\":\"interview-comment\",\"type\":\"watch\",\"size\":\"small\",\"count\":true}]},\"custom-favicon\":{},\"copy-code-button\":{},\"mygitalk\":{\"clientID\":\"1cf16fa2a845aab2bfa4\",\"clientSecret\":\"25fdef949a46bdc9507ecdea23c21ce745b56cf0\",\"repo\":\"interview-comment\",\"owner\":\"wzcu\",\"admin\":[\"chuhsent\",\"xzghua\"],\"distractionFreeMode\":false,\"proxy\":\"https://withered-block-2317.interview.workers.dev/?https://github.com/login/oauth/access_token\"},\"sharing\":{\"facebook\":true,\"twitter\":true,\"google\":false,\"weibo\":false,\"instapaper\":false,\"vk\":false,\"all\":[\"facebook\",\"google\",\"twitter\",\"weibo\",\"instapaper\"]},\"theme-default\":{\"styles\":{\"website\":\"styles/website.css\",\"pdf\":\"styles/pdf.css\",\"epub\":\"styles/epub.css\",\"mobi\":\"styles/mobi.css\",\"ebook\":\"styles/ebook.css\",\"print\":\"styles/print.css\"},\"showLevel\":false},\"insert-logo\":{\"style\":\"background: none; max-height: 30px; min-height: 30px\",\"url\":\"/static/red_rocket01.jpg\"},\"expandable-chapters\":{}},\"theme\":\"default\",\"pdf\":{\"pageNumbers\":true,\"fontSize\":12,\"fontFamily\":\"Arial\",\"paperSize\":\"a4\",\"chapterMark\":\"pagebreak\",\"pageBreaksBefore\":\"/\",\"margin\":{\"right\":62,\"left\":62,\"top\":56,\"bottom\":56}},\"structure\":{\"langs\":\"LANGS.md\",\"readme\":\"README.md\",\"glossary\":\"GLOSSARY.md\",\"summary\":\"SUMMARY.md\"},\"variables\":{},\"links\":{\"sidebar\":{\"Home\":\"http://interview.wzcu.com\"}},\"gitbook\":\"*\"},\"file\":{\"path\":\"Golang/åŸºç¡€.md\",\"mtime\":\"2021-08-29T03:42:36.050Z\",\"type\":\"markdown\"},\"gitbook\":{\"version\":\"3.2.3\",\"time\":\"2021-12-05T02:37:19.012Z\"},\"basePath\":\"..\",\"book\":{\"language\":\"\"}}); }); &lt;/script&gt; è¿™é‡Œå‘ç°äº† verificationCodeçš„å€¼æ˜¯ 1\"lock\":{\"verificationCode\":[{\"key\":\"1024\",\"value\":\"2048\"},{\"key\":\"666\",\"value\":\"6666\"},{\"key\":\"é¢è¯•\",\"value\":\"é€ ç«ç®­\"},{\"key\":\"2048\",\"value\":\"1024\"}] ä¹Ÿå°±æ˜¯è¯´æœ‰4ä¸ª key, åˆ†åˆ«æ˜¯1024, 2048, é€ ç«ç®­, 666 è‡³äºæ­£ç¡®çš„éªŒè¯ç å°±æ˜¯å…¶å¯¹åº”çš„ value æˆ‘æœ¬æ¬¡çš„ key æ˜¯1024, æ‰€ä»¥æˆ‘è¾“2048ç‚¹å‡»æäº¤æœç„¶æˆåŠŸäº† æ­£ç¡®å‡­è¯å­˜å‚¨åœ¨äº†å“ªé‡Œ å…¶å®è¿™ä¸ªä¹Ÿå¾ˆç®€å•. çœ‹å‡½æ•°bcçš„ä»£ç , åœ¨éªŒè¯ç æ­£ç¡®æ—¶é‚£éƒ¨åˆ† 1localStorage.setItem(lockTokenKey, thisValue) è¿™é‡Œæ˜¯å°†æ•°æ®ä¿å­˜åœ¨ localStorage ä¸­, key æš‚æ—¶ä¸çŸ¥é“æ˜¯ä»€ä¹ˆ, è€Œ value åˆ™æ˜¯æ­£ç¡®çš„éªŒè¯ç  è€ŒlockTokenKeyåœ¨å…¨éƒ¨æ–‡ä»¶æœç´¢å, å‘ç°è·ŸverificationCodeåœ¨ä¸€èµ·å®šä¹‰äº† 1\"lockTokenKey\":\"lock-token-key\" é‚£ä¹ˆæˆ‘ä»¬ä¸ºäº†æ ¡éªŒ, æ‰“å¼€ f12, æŸ¥çœ‹ åº”ç”¨ç¨‹åº çš„ tag, æœç„¶æ‰¾åˆ°äº† æˆ‘ä»¬å°†å…¶åˆ é™¤ååˆ·æ–°é¡µé¢, å‘ç°æœç„¶åˆéœ€è¦é‡æ–°è¾“å…¥éªŒè¯ç äº† æ€»ç»“ å…¶å®è¿™æ˜¯å¾ˆç®€å•çš„ä¸€æ¬¡ç ´è§£, å‡ åˆ†é’Ÿæå®š, æ²¡æœ‰åšæ›´ç»†è‡´çš„æŸ¥æ‰¾, æ¯”å¦‚æµç¨‹é€»è¾‘, å› ä¸ºä½ çš„ç›®çš„åªæ˜¯æƒ³çœ‹æ–‡ç« è€Œå·², è€Œç±»ä¼¼è¿™ç§æ²¡æœ‰è‡ªå·±çš„ç”¨æˆ·ä½“ç³», ä½†æ˜¯åˆå‘Šè¯‰ä½ å…³æ³¨å…¬ä¼—å·å‘é€æŒ‡å®šçš„æ¶ˆæ¯è·å–æ°¸ä¹…éªŒè¯ç è®¿é—®å†…å®¹, åŸºæœ¬ä¹Ÿéƒ½æ˜¯è¿™æ ·çš„è®¨è®º å¸Œæœ›ä»¥è¿™ç§æ–¹å¼æ¥ç»™è‡ªå·±çš„å…¬ä¼—å·å¼•æµçš„åšå®¢è¶Šæ¥è¶Šå°‘, ä¸»è¦æ˜¯ä½ å†…å®¹éƒ½æ˜¯å–è¯¾, éƒ½æ˜¯åƒåœ¾å†…å®¹, å®åœ¨æ˜¯è®©äººåæ„Ÿ","link":"/2021/12/21/skip_gitbook_lock/"},{"title":"æŠ˜è…¾è…¾è®¯äº‘æœåŠ¡å™¨","text":"å‰è¨€ æœ€è¿‘çœŸçš„å¾ˆå¿™, ç”Ÿæ´»ä¸Šä¹°çš„æˆ¿å­è¦ç½‘ç­¾, åŠè´·æ¬¾æ‹‰æµæ°´å•¥çš„. å·¥ä½œä¸Šè€æ¿è§‰å¾—å·¥ä½œé‡ä¸å¤Ÿåˆå¼€å§‹995, åŒæ—¶å·¥ä½œé‡ä¹Ÿå¤šå¾ˆå¤š, åªèƒ½å‘¨æœ«å†™å†™åšå®¢äº†, çœŸæ˜¯èšŒåŸ ä½äº† ğŸ˜… åŒ11çš„æ—¶å€™å•¥éƒ½åœ¨åšæ´»åŠ¨, å„å¤§äº‘å‚å•†ä¹Ÿæ˜¯, ä½†æ˜¯é˜¿é‡Œçš„å±äºæ˜¯ â€œè€ç”¨æˆ·ä¸ç‹—ä¸èƒ½å…¥å†…â€, ç›¸æ¯”ä¹‹ä¸‹è…¾è®¯å°±å¾ˆè‰¯å¿ƒäº†, ä¸åˆ°200å—é’±ä¹°äº†3å¹´çš„2æ ¸4Gçš„è½»é‡åº”ç”¨æœåŠ¡å™¨, é¦™é¦™é¦™ ğŸ˜ å‡çº§ç³»ç»Ÿåˆ°Debian11 è´­ä¹°å®Œå°±æ˜¯æŠ˜è…¾äº†, å› ä¸ºå¹³æ—¶æ‰“ Docker éƒ½æ˜¯ç”¨ Debian, æ‰€ä»¥å½“ç„¶æ˜¯ç”¨å®ƒäº†. ä½†æ˜¯é¢„è£…çš„åªæœ‰ 10.2, æœ‰ç‚¹è€äº†, æ‰€ä»¥sshç™»å½•ä¹‹åçš„ç¬¬ä¸€ä»¶äº‹, å½“ç„¶æ˜¯æ›´æ–°ç³»ç»Ÿäº† å°† Debian10.2 å‡çº§åˆ°æœ€æ–°çš„ç¨³å®šç‰ˆ Debian11, å› ä¸ºåœ¨å›½å†…, æ‰€ä»¥å»æ‰¾äº†ä¸€ä¸‹è…¾è®¯äº‘è‡ªå·±çš„é•œåƒ, ç»“æœå‘ç°æ²¡æœ‰11, æˆ‘æœç„¶è¿˜æ˜¯å–œæ¬¢ USTC é¦–å…ˆå‡çº§ 10.2 åˆ° 10 çš„æœ€æ–°ç‰ˆ 1apt update &amp;&amp; apt upgrade -y å†æ›¿æ¢ä»“åº“åœ°å€åˆ° USTC çš„ 11 1vim /etc/apt/sources.list å°†åŸæœ‰çš„åœ°å€æ³¨é‡Šæ‰ (åœ¨å‰é¢åŠ  # ), ç„¶åç²˜è´´æ–°çš„ä»“åº“åœ°å€ 1234567891011deb https://mirrors.ustc.edu.cn/debian/ bullseye main contrib non-freedeb-src https://mirrors.ustc.edu.cn/debian/ bullseye main contrib non-freedeb https://mirrors.ustc.edu.cn/debian/ bullseye-updates main contrib non-freedeb-src https://mirrors.ustc.edu.cn/debian/ bullseye-updates main contrib non-freedeb https://mirrors.ustc.edu.cn/debian/ bullseye-backports main contrib non-freedeb-src https://mirrors.ustc.edu.cn/debian/ bullseye-backports main contrib non-freedeb https://mirrors.ustc.edu.cn/debian-security/ bullseye-security main contrib non-freedeb-src https://mirrors.ustc.edu.cn/debian-security/ bullseye-security main contrib non-free ç„¶åæŒ‰ ESC :wq ä¿å­˜ ä¿å­˜åæ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶ 1apt update &amp;&amp; apt full-upgrade æç¤ºæ˜¯å¦å‡çº§, è¾“å…¥ Y ç¡®è®¤ å‡çº§è¿‡ç¨‹å…¶å®ä¸æ…¢, å¯èƒ½æ˜¯å› ä¸ºå±å¹•æ»šåŠ¨çš„å¾ˆå¿«, æœ‰é»‘å®¢å¸å›½çš„æ„Ÿè§‰ ä¹‹åaptä¼šè¾“å‡ºè¦æ›´æ–°çš„è½¯ä»¶åŒ…, æ­¤æ—¶è¾“å…¥ q é€‰æ‹©è·³è¿‡ ä¹‹åä¼šå‡ºç°å‡ ä¸ªé€‰æ‹©ç•Œé¢, å¤§è‡´ä¸Šæ˜¯é—®ä½ éœ€ä¸éœ€è¦æ›´æ–°ä¾‹å¦‚sshé…ç½®æ–‡ä»¶ç­‰åˆ°æœ€æ–°çš„ç‰ˆæœ¬ç­‰, æä¾›çš„é»˜è®¤é€‰é¡¹ä¹Ÿå¯ä»¥ä½¿ç”¨, æˆ‘ä»¬ä½¿ç”¨ å›è½¦é”® ç¡®è®¤å³å¯, ä½†æ˜¯å› ä¸ºæˆ‘çš„æœåŠ¡å™¨æœ¬èº«å°±æ˜¯åˆšå¼€çš„, æ‰€ä»¥æˆ‘æ¯æ¬¡ä¼šä½¿ç”¨æ–¹å‘é”®æ¥é€‰æ‹©ç¬¬ä¸€ä¸ªé€‰é¡¹ è¦†ç›– å½“æ›´æ–°å®Œæˆå, æˆ‘ä»¬éœ€è¦åˆ é™¤æ›´æ–°ç•™ä¸‹çš„æ®‹ç•™ä¿¡æ¯ 1apt --purge autoremove 1apt autoclean è¿™æ ·å°±å¤§ä½“å®Œæˆäº†, æˆ‘éœ€è¦è¿›è¡Œæœ€åçš„é‡å¯ 1reboot å‡çº§ç³»ç»Ÿåˆ°Debian Testing å‡çº§åˆ° Debian 11 å, æˆ‘åˆçº ç»“åˆ°äº†è½¯ä»¶ç‰ˆæœ¬é‡Œ, å› ä¸ºæˆ‘çš„ç›®çš„æ˜¯æŠŠè¿™ä¸ªæœåŠ¡å™¨å½“ä½œå¼€å‘æµ‹è¯•ä½¿ç”¨, æ‰€ä»¥æˆ‘éœ€è¦æ›´æ–°çš„è½¯ä»¶ç‰ˆæœ¬, Debian 11 çš„ Golang æ‰ 1.13 , ç°åœ¨æ­£å¸¸çš„æœ€æ–°å·²ç»æ˜¯ 1.17.2 å½“ç„¶, æ›´æ–°åˆ° Testing çš„å‰ææ˜¯å…ˆæ›´æ–°åˆ°æœ€æ–°çš„ stable, ç°åœ¨ä¹Ÿå°±æ˜¯ 11 ä¸å‡çº§åˆ° 11 å·®ä¸å¤š, æ­¥éª¤æ˜¯ä¸€æ ·çš„, åªæ˜¯ä»“åº“çš„é“¾æ¥æ›´æ–°åˆ° Testing, å½“ç„¶è¿˜æ˜¯ USTC 1vim /etc/apt/sources.list å†…å®¹ä¸º 12345678deb https://mirrors.ustc.edu.cn/debian/ bookworm main contrib non-freedeb-src https://mirrors.ustc.edu.cn/debian/ bookworm main contrib non-freedeb https://mirrors.ustc.edu.cn/debian/ bookworm-updates main contrib non-freedeb-src https://mirrors.ustc.edu.cn/debian/ bookworm-updates main contrib non-freedeb https://mirrors.ustc.edu.cn/debian-security/ bookworm-security main contrib non-freedeb-src https://mirrors.ustc.edu.cn/debian-security/ bookworm-security main contrib non-free å‰©ä¸‹çš„æ­¥éª¤ä¸ä¸Šé¢çš„ä¸€è‡´, ä¸å¤šèµ˜è¿°äº† å®‰è£…ç›¸å…³çš„å¼€å‘ç¯å¢ƒ python3 1apt install -y python3 1apt install -y python3-pip æœç„¶ Testing ç‰ˆæœ¬çš„ python æ˜¯ 3.9.8, æ¯”ç¨³å®šç‰ˆé«˜. è€Œä¸”ä»–çš„æ›´æ–°ä¹Ÿæ˜¯å¾ˆå¿«çš„ golang 1apt install golang æ­¤æ—¶çš„ golang ç‰ˆæœ¬æ˜¯ 1.17.1 , ç›¸ä¿¡å¾ˆå¿«ä¼šæ›´æ–°å‡º 1.17.2 rust rustä¸æ˜¯é€šè¿‡ apt è¿›è¡Œå®‰è£…, è€Œæ˜¯æ ¹æ® rust å®˜ç½‘çš„æŒ‡å¯¼ å®‰è£… Rust - Rust ç¨‹åºè®¾è®¡è¯­è¨€ (rust-lang.org) æ‰§è¡Œå‘½ä»¤ 1curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh ä»¤äººé«˜å…´çš„æ˜¯, è¿™ä¸ªè„šæœ¬éœ€è¦ä¸‹è½½çš„èµ„æºåœ¨å›½å†…ä¹Ÿæœ‰é€Ÿåº¦, å¤§æ¦‚ 300kb/s å·¦å³ ä»¥åæ›´æ–° rust ä½¿ç”¨å‘½ä»¤ 1rustup update","link":"/2021/11/11/tencent_cloud/"},{"title":"æµ…è°ˆåŒé‡è®¤è¯","text":"ä»€ä¹ˆæ˜¯åŒé‡è®¤è¯ ä¸¤æ­¥è®¤è¯æ˜¯ä¸€ä¸ªæ¦‚å¿µ, å¹¶ä¸æ˜¯æŒ‡å¿…é¡»ç»è¿‡æŸç§æ–¹å¼å»å®ç°, è€Œæ˜¯æŒ‡å¯¹äºé‰´æƒæ¥è®², åœ¨ä¹‹å‰çš„é€šè¿‡è´¦å·å¯†ç çš„æ–¹å¼å†åŠ ä¸€å±‚æ ¡éªŒ, è‡³äºæ€ä¹ˆåŠ , åŠ çš„æ–¹å¼æ˜¯ä»€ä¹ˆå¹¶ä¸æ˜¯è§„å®šçš„, å½“ç„¶, ç›®å‰å›½å¤–æ¯”è¾ƒé€šç”¨çš„æ˜¯ä½¿ç”¨ è°·æ­Œèº«ä»½éªŒè¯å™¨/å¾®è½¯è®¤è¯å™¨ ç­‰æ¥åš, å›½å†…çš„æœ‰ä½¿ç”¨çŸ­ä¿¡çš„, æœ¬æ–‡ç€é‡æ¥è¯´ è°·æ­Œèº«ä»½éªŒè¯å™¨/å¾®è½¯è®¤è¯å™¨ ç­‰ä¸€äº›å›½å¤–çš„è®¤è¯æµç¨‹, å› ä¸ºä»–ä»¬éƒ½éµå¾ªäº†ç»Ÿä¸€çš„æ ‡å‡†(ç»Ÿä¸€çš„ç®—æ³•) ä¸ºä»€ä¹ˆéœ€è¦åŒé‡è®¤è¯ ä¼ ç»Ÿçš„ä¸€æ­¥è®¤è¯ä¸€èˆ¬æ˜¯è´¦å·å¯†ç , å› ä¸ºè´¦å·å¯†ç æ˜¯å›ºå®šçš„, æ‰€ä»¥å¦‚æœå¯†ç æ³„éœ², åŸºæœ¬è¿™ä¸ªè´¦æˆ·çš„ä¸€åˆ‡éƒ½ä¸å†å±äºä½ , è€ŒåŒé‡è®¤è¯çš„åŸç†å†³å®šäº†ä»–æ˜¯åŠ¨æ€çš„, æ˜¯æ¯ä¸€æ®µæ—¶é—´å˜åŒ–ä¸€æ¬¡çš„(ä¸€èˆ¬30ç§’), æ‰€ä»¥ä»–ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå®‰å…¨, å¦‚æœä½ çš„å¯†ç æš´éœ²äº†ä½†æ˜¯äºŒæ¬¡è®¤è¯ç”Ÿæˆçš„Codeæ— æ³•è·å–åˆ°ç…§æ ·æ— æ³•è¿›è¡Œæ“ä½œ, æ‰€ä»¥åŒé‡è®¤è¯çš„å®‰å…¨æ€§æ›´é«˜ åŒé‡è®¤è¯æµç¨‹ ä¸€èˆ¬çš„åŒé‡è®¤è¯é‡‡ç”¨ TOTP ç®—æ³•, å…¶ç®—æ³•ä¿è¯äº†ç›¸åŒKeyçš„æƒ…å†µä¸‹æ¯ä¸€æ®µæ—¶é—´å†…éƒ½å¯ä»¥ç”ŸæˆåŒæ ·çš„ä¸€ä¸ª6ä½Code, TOTPç®—æ³•èµ„æ–™å¯çœ‹ ç™¾åº¦ç™¾ç§‘ wiki TOTPå…·ä½“å®ç°å¯çœ‹github ä»¥ atlassian ä¸ºä¾‹, æ¥æˆ‘ä»¬å¼€å¯èµ°æµç¨‹å¼€å¯åŒé‡è®¤è¯, å½“æˆ‘ä»¬é€‰æ‹©å¼€å¯æ—¶ å¯ä»¥çœ‹åˆ°è¯¥ç½‘ç«™æä¾›äº†ä¸€ä¸ªäºŒç»´ç ç»™æˆ‘ä»¬, æ­¤æ—¶æˆ‘ä»¬éœ€è¦åœ¨æ‰‹æœºä¸Šä¸‹è½½ è°·æ­Œèº«ä»½éªŒè¯å™¨ app, æ‰“å¼€å¯ä»¥çœ‹åˆ°æ·»åŠ ä¸€ä¸ªåŒé‡è®¤è¯çš„æ–¹å¼æœ‰ä¸¤ç§, æ‰«æäºŒç»´ç å’Œæ‰‹åŠ¨è¾“å…¥, æˆ‘ä»¬æ¥æå–è¿™ä¸ªäºŒç»´ç çš„ä¿¡æ¯, å‘ç°é‡Œé¢æ˜¯ä¸€ä¸ªé“¾æ¥, ç±»ä¼¼äº 1otpauth://totp/user@example.com?secret=PVKG6TZFHJUEMSK5ORYD3LI&amp;issuer=Atlassian æˆ‘ä»¬æŒ‰ç…§è§„åˆ™æ¥è§£æ, å®é™…ä¸Šæ˜¯ 1otpauth://totp/è®¤è¯é¡¹ç›®åç§°?secret=å”¯ä¸€KEY&amp;issuer=ç­¾å‘è€… éœ€è¦æ³¨æ„çš„æ˜¯, æˆ‘ä»¬æ¯æ¬¡é‡æ–°ç”³è¯·å¼€å¯åŒé‡è®¤è¯æ—¶å‡ºç°çš„äºŒç»´ç è§£æå‡ºçš„Keyéƒ½æ˜¯å˜åŒ–çš„ å½“æˆ‘ä»¬ä½¿ç”¨ è°·æ­Œèº«ä»½éªŒè¯å™¨ æ‰«æå, ä¼šå‡ºç°ä¸€æ¡æ–°çš„è®°å½• ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§æ­¤è§„åˆ™ç¼–å‡ºæ¥ä¸€ä¸ªé“¾æ¥é€šè¿‡ç”ŸæˆäºŒç»´ç çš„å°å·¥å…·è®©è½¯ä»¶æ‰«æ‰«çœ‹ æˆ‘ä»¬è¿˜åŸæ­¤è¿‡ç¨‹, å½“appæ‰«åˆ°ç ä¹‹å, è·å–åˆ°é¡¹ç›®åç§°å’ŒKeyä¸ç­¾å‘è€…, æŒ‰ç…§TOTPç®—æ³•ç”Ÿæˆ6ä½Code, å±•ç¤ºå‡ºæ¥, Codeæ˜¯30sä¸€å˜, ä½†æ˜¯æ³¨æ„, æ­¤æ—¶ç½‘ç«™ä¸Appå¹¶æ— è”ç³», Appä¹Ÿå¹¶ä¸è´Ÿè´£å¯¹Keyç­‰ä¿¡æ¯æ ¡éªŒçœŸå®æ€§ è€Œæˆ‘ä»¬éœ€è¦å°†ç”Ÿæˆçš„Codeè¾“å…¥è¿›ç½‘ç«™çš„ä¸‹æ–¹éªŒè¯ç è¿™é‡Œ, é€šè¿‡åæ‰ä¼šä¸Appå»ºç«‹ç»‘å®šå…³ç³»(ç½‘ç«™ç«¯å•çº¯çš„å»ºç«‹é€»è¾‘çš„ç»‘å®šå…³ç³») è¿˜åŸæ­¤è¿‡ç¨‹, ç½‘ç«™ç«¯å¹¶ä¸çŸ¥é“Appæœ‰æ²¡æœ‰ç”Ÿæˆ, ä½†æ˜¯å› ä¸ºAppéƒ½éµå¾ªç»Ÿä¸€çš„ TOTP ç®—æ³•, å› æ­¤ç½‘ç«™ç«¯ä¹Ÿå¯ä»¥ç”Ÿæˆå½“æ—¶çš„æ­£ç¡®Code, å½“æˆ‘ä»¬æäº¤çš„Codeä¸ç½‘ç«™ç«¯ç”Ÿæˆçš„Codeç›¸ç¬¦æ—¶, å³ç½‘ç«™å°†è¯¥Keyç»‘å®š(ä¹Ÿå°±æ˜¯å›¾ä¸Šè¯´çš„ è¿æ¥åï¼Œæˆ‘ä»¬ä¼šè®°ä½æ‚¨çš„æ‰‹æœºï¼Œä»¥ä¾¿æ‚¨æ¯æ¬¡ç™»å½•æ—¶éƒ½å¯ä»¥ä½¿ç”¨ã€‚), ç»‘å®šå, ç½‘ç«™å¯¹è¿™ä¸ªé€šè¿‡çš„Keyè¿›è¡Œè®°å½•, æ¯æ¬¡éœ€è¦éªŒè¯æ—¶ç½‘ç«™æ ¹æ®Keyç”ŸæˆCode, ä¸ç”¨æˆ·æäº¤çš„Codeæ¯”å¯¹, é€šè¿‡å³å¯ é€šè¿‡ä¸Šè¿°æµç¨‹, æˆ‘ä»¬å¯ä»¥å‘ç°, å®é™…ä¸ŠAppç«¯åªæŒæ¡äº†ä¸€ä¸ªKey, ä½†æ˜¯Appæœ¬èº«å¹¶ä¸çŸ¥é“Keyæ˜¯å¦æ˜¯æ­£ç¡®çš„, ä»–ä»¬ä¸¤ä¸ªå®é™…ä¸Šæ°¸è¿œæ²¡æœ‰äº¤æµ, è¿™æ ·å°±å¾ˆå®‰å…¨ ç»æµ‹è¯•, ç½‘ç«™ä¸€èˆ¬ä¼šåªå…è®¸ä¸€ä¸ªKeyå­˜æ´», ä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬é‡æ–°ç”³è¯·ä¸€ä¸ªKey, åŸå…ˆçš„Keyåˆ™å¤±æ•ˆ, å½“ç„¶å¯¹äºAppæ˜¯ä¸çŸ¥é“çš„, ä½†æ˜¯å½“æˆ‘ä»¬æäº¤è®¤è¯æ—¶ç½‘ç«™å°±ä¼šæŠ¥é”™.","link":"/2021/09/04/two_auth/"},{"title":"Vue3 ä»å…¥é—¨åˆ°å…¥åœŸ(TypeScriptå…¥é—¨)","text":"å‰è¨€ å…¬å¸éœ€è¦å†™ä¸€äº›ç®€å•çš„å‰ç«¯ä»£ç , è¯´èµ·å‰ç«¯, é‚£å¯å°±å¤§äº†å»äº†, æˆ‘ä¸æ˜¯ä¸“ä¸šçš„, ä¹Ÿæ²¡æ‰“ç®—å¹²è¿™ä¸ª, åªèƒ½è¯´æŒ‘ä¸€ä¸ªç®€å•èƒ½ç”¨çš„æ¡†æ¶æ¥å­¦äº†. åœ¨å¾ˆæ—©ä¹‹å‰, å†™è¿‡ä¸€äº›å‰ç«¯, é‚£æ—¶å€™è¿˜æ˜¯ Bootstrap ä¸€æŠŠæ¢­, å°è±¡æ¯”è¾ƒæ·±çš„å°±æ˜¯è‡ªé€‚åº”æ …æ ¼, ç°åœ¨çš„è¯, ç”¨çš„æ¯”è¾ƒå¤šçš„åº”è¯¥æ˜¯ Vue äº†, å¸Œæœ›ä¸€åˆ‡é¡ºåˆ©. æœ¬æ¬¡ Vue çš„å­¦ä¹ è¿‡ç¨‹, ä¸»è¦æ˜¯å‚è€ƒäº†è§†é¢‘ å°šç¡…è°·Vue.JSæ•™ç¨‹å¿«é€Ÿå…¥é—¨åˆ°é¡¹ç›®å®æˆ˜ï¼ˆVue3/VueJSæŠ€æœ¯è¯¦è§£ï¼‰_å“”å“©å“”å“©_bilibili, è§†é¢‘è‡ªå¸¦çš„æ–‡æ¡£åœ¨ Vue3+TS å¿«é€Ÿä¸Šæ‰‹ (24kcs.github.io) , åœ¨æ­¤å¯¹ä½œè€…å’Œè§†é¢‘ç½‘ç«™æå‡ºæ„Ÿè°¢!, è¿™ä¸ªæ–‡æ¡£ä¸€çœ¼çœ‹å»å°±æ˜¯ Vueprocess æ­å»ºçš„, ä½œä¸ºæŸä¸€ä¸ªä¸“é—¨çš„çŸ¥è¯†åˆ†äº«, ç¡®å®å¾ˆä¸é”™, ä¹‹å‰åšå®¢ä½¿ç”¨è¿‡è¿™ç§æ–¹å¼, ç¼ºç‚¹æ˜¯ä½œä¸ºåšå®¢ä½¿ç”¨çš„è¯, å¤ªè¿‡ç®€æ´äº†. ä»€ä¹ˆæ˜¯ TypeScript ç®€ç§°ä¸º TS, æˆ‘ä»¬ä¹‹å‰çŸ¥é“ JS, è€Œ TS æ˜¯ JS çš„ä¸€ä¸ªè¶…é›†, TS æœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆ JS ä»£ç  å¯ä»¥ç®€å•çš„ç†è§£ä¸º, TS åŒ…æ‹¬ JS, ä½†æ˜¯åˆä¸æ­¢ JS, TS æœ¬èº«æœ‰è‡ªå·±çš„æ–°ç‰¹æ€§, æ¯”å¦‚æ³›å‹/ æ¥å£/ å¼ºåˆ¶ç±»å‹, æ­£æ˜¯å› ä¸ºå¦‚æ­¤, TS æ¯” JS æ›´åŠ çš„å¼ºå¤§ TS çš„ä»£ç . éœ€è¦é€šè¿‡ TS è‡ªå·±çš„ç¼–è¯‘å™¨, ç¼–è¯‘æˆ JS ä»£ç , å› ä¸ºæµè§ˆå™¨æ”¯æŒçš„æœ€å¥½çš„è¿˜æ˜¯ JS ä»£ç , å½“ç„¶, ä¸æ’é™¤ä»¥åæµè§ˆå™¨ä¼šå®Œå–„å¯¹ TS çš„æ”¯æŒ TS ç”±å¾®è½¯å‘å¸ƒ(2013å¹´), æœ¬èº«æ˜¯è·¨å¹³å°çš„è¯­è¨€ TypeScript çš„ä¼˜ç‚¹ TS çš„ä¼˜ç‚¹(ç‰¹ç‚¹)ä¸»è¦æœ‰3ç§ å®Œç¾çš„å…¼å®¹ JS: TS å¯ä»¥ç¼–è¯‘æˆ JS ä»£ç , å¯ä»¥åœ¨ä»»ä½•æ”¯æŒ JS çš„æµè§ˆå™¨ä¸Šè¿è¡Œ å¼ºå¤§çš„ç±»å‹ç³»ç»Ÿ: å…è®¸å¼€å‘è€…åœ¨å¼€å‘æ—¶, æŒ‡å®šå˜é‡çš„ç±»å‹, æé«˜å¼€å‘æ•ˆç‡, å‡å°‘ BUG å…ˆè¿›çš„ JS: TS å®Œç¾å…¼å®¹ JS, åŒ…æ‹¬ JS æœ€æ–°çš„ç‰¹å¾å’Œä»¥åçš„æ–°ç‰¹å¾ å®‰è£… TS éœ€è¦å…ˆå®‰è£… NodeJS, å®‰è£… NodeJS æŸ¥çœ‹ ä¸­æ–‡ç½‘ Node.js ä¸­æ–‡ç½‘ (nodejs.cn) å®‰è£…å®Œæˆ NodeJS å, ä½¿ç”¨ npm å®‰è£… TS(-g ä¸ºå…¨å±€å®‰è£…) 1npm install -g typescript å½“ç„¶, å¦‚æœä½ æ˜¯ mac. ç›´æ¥ä½¿ç”¨ brew æ›´æ–¹ä¾¿ 1brew install typescript å®‰è£…å®Œæˆå, æ‰§è¡Œå‘½ä»¤æ‰“å°å‡º TS ç‰ˆæœ¬. æˆåŠŸå³å¯ 12âœ ~ tsc -VVersion 4.6.3 ç¬¬ä¸€ä¸ª TS ç¨‹åº åšä¸»æ—¥å¸¸å¼€å‘çš„è¯éƒ½ä½¿ç”¨ VSCode, å¹¸å¥½ UP ä¸»ä¹Ÿæ˜¯ VsCode éœ€è¦å®‰è£…æ’ä»¶ JavaScript and TypeScript Nightly - Visual Studio Marketplace, ä»¥æä¾›å¯¹ TS æ–‡ä»¶çš„æ”¯æŒ hello_world.ts æ–°å»ºä¸€ä¸ªç›®å½•, ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªä»¥ ts ç»“å°¾çš„æ–‡ä»¶, ä¾‹å¦‚hello_world.ts, ç¼–å†™ä»£ç å¦‚ä¸‹ 123456789101112(()=&gt;{ // åˆ›å»ºå‡½æ•° helloWorld // ä¼ å…¥å‚æ•° name, ç±»å‹ä¸º string function helloWorld(name: string){ // å°†å‚æ•° name å’Œ hello æ‹¼æ¥è¿”å› return \"hello \"+name } // åˆ›å»ºå˜é‡ w å€¼ä¸º world let w = 'world' // è°ƒç”¨å‡½æ•°, å°† w ä¼ å…¥, åŒæ—¶æ‰“å°ç»“æœ console.log(helloWorld(w))})() // è‡ªåˆ¶æ€§å‡½æ•°(ç±»ä¼¼äºåŒ¿åå‡½æ•°ç«‹å³æ‰§è¡Œ) å½“ç„¶æˆ‘ä»¬çŸ¥é“, JS è¦æƒ³åœ¨æµè§ˆå™¨è¿è¡Œ, ä¹Ÿéœ€è¦åœ¨ html ä¸­å¼•å…¥æ‰è¡Œ, äºæ˜¯æˆ‘ä»¬åœ¨åŒçº§ç›®å½•ä¸‹æ–°å¢æ–‡ä»¶ index.html, ç¼–å†™å¦‚ä¸‹ åœ¨ VSCode ä¸­, ä½¿ç”¨ html5 å¯ç”Ÿæˆ html5çš„åŸºæœ¬ä»£ç  12345678910111213&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- å¼•å…¥æœ¬åœ°çš„ ts æ–‡ä»¶ --&gt; &lt;script src=\"./hello_world.ts\"&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; æ­¤æ—¶æˆ‘ä»¬å³é”®, é€‰æ‹©åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€(æ²¡æœ‰çš„, ä¸‹è½½æ’ä»¶ open in browser - Visual Studio Marketplace) æ‰“å¼€çš„åº”è¯¥æ˜¯ä¸€ä¸ªç©ºç™½é¡µé¢, å› ä¸º html ä¸­æ²¡æœ‰ä»»ä½•å†…å®¹, åªæ˜¯å¼•å…¥äº† TS æ–‡ä»¶, æ­¤æ—¶æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨çš„ f12è°ƒè¯•çš„æ§åˆ¶å°, å‘ç°æœ‰ä¸ªæŠ¥é”™ 1Uncaught SyntaxError: Unexpected token ':' è¿™æ˜¯å› ä¸º, æˆ‘ä»¬ä¸Šé¢è¯´è¿‡. ç›®å‰æµè§ˆå™¨è¿˜ä¸ç›´æ¥æ”¯æŒ TS ä»£ç , è€Œåœ¨ JS ä¸­, ä¸å¯ä»¥æŒ‡å®šå˜é‡çš„ç±»å‹, å› æ­¤, ä»£ç function helloWorld(name: string){ä¸­çš„:stringæ— æ³•è¯†åˆ«, æˆ‘ä»¬å°è¯•æŠŠTS ä»£ç ä¿®æ”¹ä¸º 123456789101112(()=&gt;{ // åˆ›å»ºå‡½æ•° helloWorld // ä¼ å…¥å‚æ•° name, ç±»å‹ä¸º string function helloWorld(name){ // å°†å‚æ•° name å’Œ hello æ‹¼æ¥è¿”å› return \"hello \"+name } // åˆ›å»ºå˜é‡ w å€¼ä¸º world let w = 'world' // è°ƒç”¨å‡½æ•°, å°† w ä¼ å…¥, åŒæ—¶æ‰“å°ç»“æœ console.log(helloWorld(w))})() // è‡ªåˆ¶æ€§å‡½æ•°(ç±»ä¼¼äºåŒ¿åå‡½æ•°ç«‹å³æ‰§è¡Œ) é‡æ–°åˆ·æ–°é¡µé¢, å‘ç°å°±å¯ä»¥æ­£å¸¸çš„è¾“å‡º 1hello world å½“ç„¶, æˆ‘ä»¬ä¹‹å‰ä¹Ÿè¯´è¿‡, TS å¯ä»¥ç¼–è¯‘ä¸º JS ä»£ç , æˆ‘ä»¬çš„ç›®çš„ä¹Ÿä¸æ˜¯è®©å¤§å®¶å†™ JS ä»£ç  æ‰‹åŠ¨ç¼–è¯‘ ts æ–‡ä»¶åˆ° js ä»£ç  æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨çš„ç¼–è¯‘ä»£ç ä¸º JS, åœ¨å‘½ä»¤è¡Œä¸­, è¿›å…¥æˆ‘ä»¬ ts ä»£ç çš„æ‰€åœ¨ç›®å½•, æ‰§è¡Œ 1tsc hello_world.ts å¯ä»¥å‘ç°, è¿è¡Œå®Œæˆå, åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹, ç”Ÿæˆäº† hello_world.js, é‡Œé¢ä»£ç å¦‚ä¸‹ 123456789101112(function () { // åˆ›å»ºå‡½æ•° helloWorld // ä¼ å…¥å‚æ•° name, ç±»å‹ä¸º string function helloWorld(name) { // å°†å‚æ•° name å’Œ hello æ‹¼æ¥è¿”å› return \"hello \" + name; } // åˆ›å»ºå˜é‡ w å€¼ä¸º world var w = 'world'; // è°ƒç”¨å‡½æ•°, å°† w ä¼ å…¥, åŒæ—¶æ‰“å°ç»“æœ console.log(helloWorld(w));})(); // è‡ªåˆ¶æ€§å‡½æ•°(ç±»ä¼¼äºåŒ¿åå‡½æ•°ç«‹å³æ‰§è¡Œ) å·²ç»ç”Ÿæˆäº† JS æ ¼å¼çš„ä»£ç , ç„¶å HTML ä¸­å¼•å…¥ä¿®æ”¹ä¸ºç”Ÿæˆçš„ JS ä»£ç , ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œäº† TSçš„ç±»å‹æ³¨è§£ python çš„3.8ä¹‹åä¹Ÿæœ‰è¿™ä¸ª ç±»å‹æ³¨è§£æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ä¸ºå‡½æ•°å’Œå˜é‡å¢åŠ çš„çº¦æŸ, å®é™…ä¸Šå°±æ˜¯å¢åŠ ä¸€ä¸ªç±»å‹å£°æ˜. å£°æ˜è¿™ä¸ªå˜é‡æ˜¯ä»€ä¹ˆç±»å‹, ä¾›å¼€å‘è€…å’Œ IDE è¿›è¡Œè¾¨è®¤å’Œå¤„ç† ä¾‹å¦‚, æˆ‘ä»¬å°†hello_world.tsä»£ç ä¿®æ”¹ä¸º 1234567891011121314(()=&gt;{ // åˆ›å»ºå‡½æ•° helloWorld // ä¼ å…¥å‚æ•° name, ç±»å‹ä¸º string function helloWorld(name: string){ // å°†å‚æ•° name å’Œ hello æ‹¼æ¥è¿”å› return \"hello \"+name } // åˆ›å»ºå˜é‡ w å€¼ä¸º world // let w = 'world' // è¿™é‡Œä¿®æ”¹ w çš„å€¼ä¸ºæ•°å­— let w = 123 // è°ƒç”¨å‡½æ•°, å°† w ä¼ å…¥, åŒæ—¶æ‰“å°ç»“æœ console.log(helloWorld(w))})() // è‡ªåˆ¶æ€§å‡½æ•°(ç±»ä¼¼äºåŒ¿åå‡½æ•°ç«‹å³æ‰§è¡Œ) å¯ä»¥çœ‹åˆ°, æˆ‘ä»¬åœ¨å‡½æ•°helloWorldä¸­, æŒ‡å®šäº†å˜é‡nameçš„ç±»å‹ä¸ºstring, è€Œæ­¤æ—¶æŠŠvalueä¸ºnumberçš„å€¼ä¼ å…¥, ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢? é¦–å…ˆæ˜¯ VSCode è‡ªå·±ä¼šé£˜çº¢, åœ¨ è°ƒç”¨å‡½æ•°çš„ä½ç½®, æç¤ºä½  1ç±»å‹â€œnumberâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œstringâ€çš„å‚æ•°ã€‚ts(2345) æˆ‘ä»¬åœ¨å°è¯•å°† TS è½¬æˆ JS æ—¶ä¹Ÿä¼šæŠ¥é”™ 12345678hello_world.ts:12:28 - error TS2345: Argument of type 'number' is not assignable to parameter of type 'string'.12 console.log(helloWorld(w)) ~Found 1 error in hello_world.ts:12 è¿™å°±æ˜¯ç±»å‹æ³¨è§£çš„å¥½å¤„, å¦‚æœä½ æ²¡æœ‰çœŸæ­£ç¼–å†™é¡¹ç›®çš„å¼€å‘ç»éªŒ, ä½ å¯èƒ½è®¤ä¸ºåè€Œéº»çƒ¦äº†, è€Œå¦‚æœä½ çœŸæ­£çš„å†™è¿‡ä¸šåŠ¡, ä½ å°±ä¼šæ˜ç™½ä¸ºä»€ä¹ˆè¿™æ ·æ›´å¥½, ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯, ä»–ä¼šåœ¨ç¼–è¯‘æˆ–è€…å¼€å‘é˜¶æ®µå°±å°†é”™è¯¯æ’æŸ¥å‡ºæ¥, ä»¥å…åœ¨è¿è¡Œæ—¶å‘ç”Ÿå‡ºä¹æ„æ–™çš„ç»“æœ(BUG), æ‰¾ BUG æ˜¯æœ€ç—›è‹¦çš„. å¹¶ä¸”, è¿˜å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§. æ¥å£ æ¥å£å¯ä»¥çœ‹ä½œæ˜¯è‹¥å¹²ç±»å‹æ³¨è§£çš„é›†åˆ, ç±»ä¼¼äº golang çš„ç»“æ„ä½“ 123456789101112131415161718192021// æ¥å£ä¹Ÿæ˜¯ä¸€ç§çº¦æŸ(()=&gt;{ // å®šä¹‰ä¸€ä¸ªæ¥å£ Person interface Person{ firstName: string, // å§“ lastName: string, // å } // è¾“å‡ºå§“åçš„å‡½æ•° // æ¥æ”¶å‚æ•° p, ç±»å‹ä¸ºæ¥å£ Person // è¿”å› string function showFullName(p: Person) { return p.firstName+\"_\"+p.lastName } // å®šä¹‰å¯¹è±¡, å…¶ç±»å‹ä¸º Person const userA: Person = { firstName: \"AF\", lastName: \"AL\", } // ä¼ å…¥å‚æ•° console.log(showFullName(userA))})() æ¥å£çš„å­˜åœ¨, å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„è¿›è¡Œå¼€å‘å’Œçº¦æŸ éœ€è¦æ³¨æ„çš„æ˜¯, ä¸éµå®ˆæ¥å£è§„èŒƒ, æ¯”å¦‚ä¼ é€’ä¸€ä¸ªå…¶ä»–çš„æ¥å£ç±»å‹, æˆ–è€…æ¥å£ä¸­çš„æŸä¸€ä¸ªå±æ€§ä¸è®¾ç½®, åœ¨ç›´æ¥è¿è¡Œ TS æ—¶ä¼šå‡ºç°é—®é¢˜, ä½†æ˜¯åœ¨è½¬åˆ° JS æ—¶å¯ä»¥æ­£å¸¸è½¬, è¿™æ˜¯å› ä¸º JS æœ¬èº«å¾ˆéšä¾¿ å½“ç„¶, æˆ‘æ›´æ¨èæŒ‰ç…§æ ‡å‡†å»å†™, è¿™æ ·èƒ½æé«˜ä»£ç çš„å¥å£®æ€§, å¦‚æœä½ ä½¿ç”¨ TS, ä½ å°±åº”è¯¥éµå®ˆå…¶è§„åˆ™ ç±» ç±»è¿™ä¸ªæ¦‚å¿µ, å¦‚æœæ˜¯åç«¯å¼€å‘, æƒ³å¿…ä¼šéå¸¸ç†Ÿæ‚‰, æˆ‘ç›´æ¥ä¸Šä»£ç  123456789101112131415161718192021222324252627282930// æ¥å£ä¹Ÿæ˜¯ä¸€ç§çº¦æŸ(()=&gt;{ // å®šä¹‰ä¸€ä¸ªæ¥å£ Person interface Person{ firstName: string, // å§“ lastName: string, // å } // å®šä¹‰ä¸€ä¸ªç±» User class User{ firstName: string // å§“ lastName: string // å fullName: string // å…¨ç§° // ç±»çš„æ„é€ å‡½æ•°, åœ¨ç±»åˆ›å»ºæ—¶æ‰§è¡Œ constructor(firstName: string, lastName: string){ this.firstName = firstName this.lastName = lastName this.fullName = this.firstName+\"_\"+this.lastName } } // åˆ›å»ºç±»çš„å¯¹è±¡ function greeter (person: Person) { return 'Hello, ' + person.firstName + ' ' + person.lastName } // åˆ›å»º user å¯¹è±¡ let user = new User('Yee', 'Huang') // å› ä¸º ç±» User å±æ€§åŒ…æ‹¬äº†æ¥å£ Person, æ‰€ä»¥ä¹Ÿå¯ä»¥ä½¿ç”¨ console.log(greeter(user))})() è¿™é‡Œçš„æ¥å£å’Œå¯¹è±¡çš„ä½¿ç”¨, æœ‰äº›äººå¯èƒ½ä¼šæ„Ÿè§‰åˆ°ç–‘æƒ‘, å…¶å®æ¥å£æ˜¯æŠ½è±¡çš„æ¦‚å¿µ, ä»»ä½•ç»“æ„, åªè¦æœ‰æ¥å£çš„å¯¹åº”å­—æ®µ, å°±å¯ä»¥è°ƒç”¨æ¥å£, æ¯”å¦‚ 123456789101112131415161718192021222324252627// æ¥å£ä¹Ÿæ˜¯ä¸€ç§çº¦æŸ(()=&gt;{ // å®šä¹‰ä¸€ä¸ªæ¥å£ Person interface Person{ firstName: string, // å§“ lastName: string, // å } interface P1{ firstName: string, // å§“ lastName: string, // å } // è¾“å‡ºå§“åçš„å‡½æ•° // æ¥æ”¶å‚æ•° p, ç±»å‹ä¸ºæ¥å£ Person // è¿”å› string function showFullName(p: Person) { return p.firstName+\"_\"+p.lastName } // å®šä¹‰å¯¹è±¡, å…¶ç±»å‹ä¸º P1 const userA: P1 = { firstName: \"AF\", lastName: \"AL\", } // ä¼ å…¥å‚æ•° // ä¹Ÿå¯ä»¥æ­£å¸¸çš„ä½¿ç”¨ // å› ä¸ºæ¥å£æ˜¯æŠ½è±¡çš„ console.log(showFullName(userA))})() webpack æ‰“åŒ… TS é¡¹ç›® ä¸€ä¸ªé¡¹ç›®, è‚¯å®šä¸æ­¢ä¸€ä¸ªæ–‡ä»¶, éƒ½æ˜¯ç”±ç‰¹å®šçš„è§„åˆ™å’Œç›®å½•ç»„æˆ åˆå§‹åŒ– åœ¨å†™ä¸€ä¸ªæ–°é¡¹ç›®ä¹‹å‰, æ‰¾ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹, æ‰§è¡Œ npm init -y ä¼šåœ¨æœ€ä¸Šå±‚ç›®å½•ç”Ÿæˆ package.json, è¿™é‡Œæ˜¯ npm çš„é…ç½®æ–‡ä»¶ å†æ‰§è¡Œ tsc --init å‘½ä»¤, ç”Ÿæˆ tsconfig.json æ–‡ä»¶, è¿™ä¸ªæ˜¯ TS çš„é…ç½® éšåæˆ‘ä»¬æ–°å»ºå‡ ä¸ªæ–‡ä»¶, ç›®å½•å¦‚ä¸‹ 1234567891011.â”œâ”€â”€ buildâ”‚ â””â”€â”€ webpack.config.jsâ”œâ”€â”€ package.jsonâ”œâ”€â”€ publicâ”‚ â””â”€â”€ index.htmlâ”œâ”€â”€ srcâ”‚ â””â”€â”€ main.tsâ””â”€â”€ tsconfig.json3 directories, 5 files ç›®å½•ç»“æ„å’Œä»£ç  å…¶ä¸­, srcç›®å½•ä¸­å­˜æ”¾å…·ä½“çš„ä»£ç , æˆ‘ä»¬è¿™é‡Œå°±å•ç‹¬æ”¾ä¸€ä¸ªmain.ts, å†…å®¹å¦‚ä¸‹ è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯, åœ¨è§†é¢‘ä¸­, è®²è§£äººè¿™é‡Œä»£ç æ˜¯document.write('Hello Webpack TS!'), å¯ä»¥åœ¨ html ä¸­åŠ¨æ€çš„æ·»åŠ æ•°æ®, ä½†æ˜¯æ–°çš„æµè§ˆå™¨, é»˜è®¤æ˜¯ç¦æ­¢å¼‚æ­¥åŠ è½½çš„ js ä¿®æ”¹ document ç»“æ„çš„, éœ€è¦é¢å¤–è®¾ç½®, è¿™é‡Œä¸ºäº†ä¸“å¿ƒå­¦ä¹ æ‰“åŒ…, é€‰æ‹©äº† console.log 1console.log(\"webpack\") publicç›®å½•å­˜æ”¾ htmlå’Œå…¶ä»–é™æ€èµ„æºç­‰, è¿™é‡Œçš„index.htmlå†…å®¹ä¸º 123456789101112&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;/body&gt;&lt;/html&gt; buildç›®å½•å­˜æ”¾æ‰“åŒ…æ„å»ºæ—¶çš„æ–‡ä»¶, è¿™é‡Œå­˜æ”¾ä¸€ä¸ª webpack æ‰“åŒ…æ—¶éœ€è¦çš„é…ç½®æ–‡ä»¶webpack.config.js, å†…å®¹ä¸º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152const {CleanWebpackPlugin} = require('clean-webpack-plugin')const HtmlWebpackPlugin = require('html-webpack-plugin')const path = require('path')const isProd = process.env.NODE_ENV === 'production' // æ˜¯å¦ç”Ÿäº§ç¯å¢ƒfunction resolve (dir) { return path.resolve(__dirname, '..', dir)}module.exports = { mode: isProd ? 'production' : 'development', entry: { app: './src/main.ts' // TS çš„èµ·å§‹æ–‡ä»¶ä½ç½® }, output: { path: resolve('dist'), // æ‰“åŒ…åçš„æ–‡ä»¶ä¿å­˜ç›®å½• filename: '[name].[contenthash:8].js' // æ–‡ä»¶åæ ¼å¼ }, module: { rules: [ { test: /\\.tsx?$/, use: 'ts-loader', include: [resolve('src')] } ] }, plugins: [ new CleanWebpackPlugin({ }), new HtmlWebpackPlugin({ template: './public/index.html' }) ], resolve: { extensions: ['.ts', '.tsx', '.js'] }, devtool: 'eval-cheap-module-source-map', // è¿™é‡Œå…¼å®¹ webpack æ–°ç‰ˆæœ¬, ä¿®æ”¹äº†å‚æ•° devServer: { host: 'localhost', // ä¸»æœºå port: 8081, // ç«¯å£ open: true // è‡ªåŠ¨æ‰“å¼€ç«¯å£ },} å®‰è£…å¿…è¦ä¾èµ– è€Œå, æˆ‘ä»¬éœ€è¦ä¸ºé¡¹ç›®å®‰è£…å‡ ä¸ªä¾èµ– 123456yarn add -D typescript # TS ä¾èµ–yarn add -D webpack webpack-cli # webpack æ‰“åŒ…yarn add -D webpack-dev-server # dev ç¯å¢ƒæµ‹è¯•yarn add -D html-webpack-plugin clean-webpack-plugin # åˆ é™¤ä¹‹å‰æ‰“åŒ…çš„æ–‡ä»¶yarn add -D ts-loader # tsyarn add -D cross-env # è·¨å¹³å°æ‰“åŒ… å®‰è£…å®Œæˆå, ä¼šæ–°å¢åŠ ä¸€ä¸ªç›®å½•node_models, å­˜æ”¾ç€è‹¥å¹²ä¸ªä¾èµ–æ–‡ä»¶, è¿™é‡Œçš„ä¸œè¥¿ä¸éœ€è¦è‡ªå·±ä¿®æ”¹ ä¿®æ”¹package.json, ä¸»è¦æ˜¯ä¿®æ”¹å¯åŠ¨æ—¶çš„å‚æ•°(json çš„ scripts éƒ¨åˆ†), åŒæ—¶ä¹Ÿå¯ä»¥å‘ç°, åˆšæ‰ add çš„å‡ ä¸ªä¾èµ–, ä¹Ÿå·²ç»è‡ªåŠ¨åŠ å…¥åˆ°äº† json æ–‡ä»¶ä¸­ 123456789101112131415161718192021222324{ \"name\": \"01\", \"version\": \"1.0.0\", \"description\": \"\", \"main\": \"index.js\", \"scripts\": { \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\", \"dev\": \"cross-env NODE_ENV=development webpack-dev-server --config build/webpack.config.js\", \"build\": \"cross-env NODE_ENV=production webpack --config build/webpack.config.js\" }, \"keywords\": [], \"author\": \"\", \"license\": \"ISC\", \"devDependencies\": { \"clean-webpack-plugin\": \"^4.0.0\", \"cross-env\": \"^7.0.3\", \"html-webpack-plugin\": \"^5.5.0\", \"ts-loader\": \"^9.2.8\", \"typescript\": \"^4.6.3\", \"webpack\": \"^5.71.0\", \"webpack-cli\": \"^4.9.2\", \"webpack-dev-server\": \"^4.7.4\" }} è¿è¡Œ dev ç¯å¢ƒ 1yarn dev ä¼šè‡ªåŠ¨å”¤é†’æµè§ˆå™¨, æ‰“å¼€é¡µé¢, æ‰“å¼€è°ƒè¯•, å‘ç°æ‰“å°å‡ºäº†webpack è¿è¡Œ build 1yarn build å®Œæˆå, ä¼šç”Ÿæˆæ–‡ä»¶å¤¹dist, å…¶ä¸­å­˜æ”¾äº†æ‰“åŒ…å¥½çš„ä»£ç  12345.â”œâ”€â”€ app.7e4f7be0.jsâ””â”€â”€ index.html0 directories, 2 files è¿™é‡Œçš„ä»£ç éƒ½å·²ç»è¢«å‹ç¼©è¿‡äº†, ç›®çš„æ˜¯å‡å°‘ç½‘ç»œä¼ è¾“æ—¶é—´, æœ‰å…´è¶£çš„å¯ä»¥è‡ªè¡Œæ ¼å¼åŒ–æŸ¥çœ‹","link":"/2022/03/27/vue_01_helloWorld/"},{"title":"Vue3 ä»å…¥é—¨åˆ°å…¥åœŸ(TypeScriptæ•°æ®ç±»å‹)","text":"æ•°å­—/å­—ç¬¦ä¸²/å¸ƒå°” 123456789101112131415161718192021222324// åŸºç¡€ç±»å‹(()=&gt;{ // let å˜é‡å: å˜é‡ç±»å‹ = å€¼ // å¯¹äºå·²ç»å®šä¹‰äº†ç±»å‹çš„å˜é‡, å¯ä»¥é‡å¤èµ‹å€¼ä¸ºç›¸åŒç±»å‹çš„å€¼, ä½†æ˜¯ä¸èƒ½èµ‹å€¼ä¸ºä¸åŒç±»å‹ // bool let ok: boolean = true // æ•°å­— // å¯ä»¥å­˜æ”¾å››ç§è¿›åˆ¶, ä½†æ˜¯åœ¨æ‰“å°æ—¶éƒ½ä¼šè½¬æˆåè¿›åˆ¶ let count0: number = 10 // åè¿›åˆ¶ let count1: number = 0b1010 // äºŒè¿›åˆ¶ let count2: number = 0o12 // å…«è¿›åˆ¶ let count3: number = 0xa // åå…­è¿›åˆ¶ // å­—ç¬¦ä¸²ç±»å‹ let str0: string = \"str0\" let str1: string = \"str1\" // å­—ç¬¦ä¸² format console.log(`${str0}, ${str1}, ${count0}`) // å­—ç¬¦ä¸²å’Œæ•°å­—æ‹¼æ¥ console.log(str0+count1) // str010})() undefined/null 12345678 // åŸºç¡€ç±»å‹(()=&gt;{ // undefined å’Œ null æ˜¯ä¸åŒçš„ç±»å‹ // é»˜è®¤çš„æ—¶å€™, undefined å’Œ null æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ let u: undefined = undefined let n: null = null // é»˜è®¤æƒ…å†µä¸‹, ä¸èƒ½å°†å…¶ä»–ç±»å‹çš„å˜é‡èµ‹å€¼ä¸º undefined æˆ–è€… null})() æ•°ç»„ç±»å‹ 12345678910111213141516171819// åŸºç¡€ç±»å‹(()=&gt;{ // æ•°ç»„ç±»å‹ // æ•°ç»„é‡Œçš„æ¯ä¸ªå˜é‡ç±»å‹å¿…é¡»ç›¸åŒ, ä¸”ç¬¦åˆå®šä¹‰æ•°ç»„æ—¶è®¾ç½®çš„æ•°æ®ç±»å‹ // æ•°æ®ç±»å‹[] // number[] ä»£è¡¨ä¸€ä¸ªæ•°ç»„, é‡Œé¢çš„ç±»å‹ä¸º number let arr0: number[] = [1, 2, 3, 4, 5, 6] // æ•°ç»„ç±»å‹çš„å¦ä¸€ç§å®šä¹‰æ–¹æ³• // Array&lt;æ•°æ®ç±»å‹&gt; let arr1: Array&lt;number&gt; = [1, 2, 3] // å…ƒç»„ç±»å‹ // å…ƒç»„å¯ä»¥å­˜å‚¨ä¸åŒçš„æ•°æ®ç±»å‹, ä½†æ˜¯å¿…é¡»åœ¨å®šä¹‰æ—¶è®¾ç½®å¥½å…ƒç»„çš„é•¿åº¦å’Œæ¯ä¸ªçš„ç±»å‹ // [å…ƒç»„0ä½çš„ç±»å‹, å…ƒç»„1ä½çš„ç±»å‹, ....] let arr3: [string, number, boolean] = [\"s\", 0, false]})() æšä¸¾ 12345678910111213141516171819202122232425262728293031323334// åŸºç¡€ç±»å‹(()=&gt;{ // æšä¸¾ // æšä¸¾ä¸­çš„æ¯ä¸€ä¸ªæ•°æ®å€¼éƒ½å¯ä»¥å«åšå…ƒç´ , æ¯ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„ç¼–å·, é»˜è®¤ç¼–å·ä»0å¼€å§‹, ä¾æ¬¡é€’å¢+1 enum Color{ red, // 0 green, // 1 blue, // 2 } let color: Color = Color.red // 0 // æšä¸¾å¯ä»¥æŒ‡å®šå…¶æ¯ä¸ªå…ƒç´ çš„å€¼, ä½†æ˜¯å¿…é¡»æ˜¯ number ç±»å‹ enum Color1{ red = 100, // 100 green, // 101 blue, // 102 } enum Color2{ red, // 0 green = 100, // 100 blue, // 101 } enum Color3{ red = 1, // 1 green = 3, // 3 blue = 100, // 100 } // ä»å…ƒç´ æ‹¿åˆ°å€¼ console.log(Color2.red) // 0 // ä»å€¼æ‹¿åˆ°å…ƒç´  console.log(Color2[100]) // green})() any 1234567891011// åŸºç¡€ç±»å‹(()=&gt;{ // any // any å¯¹åº”ä»»æ„ç±»å‹, åœ¨ä¸ç¡®å®šå½“å‰æ˜¯ä»€ä¹ˆç±»ä¼¼æ—¶ä½¿ç”¨ // å› ä¸ºç¼–è¯‘å™¨å¹¶ä¸èƒ½ç¡®å®šå…·ä½“çš„ç±»å‹, æ‰€ä»¥è¦æ…ç”¨ any, any å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯åœ¨è¿è¡Œæ—¶æ‰æš´éœ²å‡ºæ¥ let str: any = 100 str = \"string\" str = false let arr: any[] = [100, \"str\", false]})() void 123456789101112// åŸºç¡€ç±»å‹(()=&gt;{ // void // void ä¸€èˆ¬åœ¨å‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ä½¿ç”¨, æ ‡è¯†è¯¥å‡½æ•°æ— è¿”å›å€¼ function show():void{ console.log(\"func show\") } show() // void ä¸ undefined // void ç±»å‹çš„å˜é‡, å¯ä»¥æ¥å—ä¸€ä¸ª undefined çš„å€¼, ä¸€èˆ¬ä¸ä½¿ç”¨ let vd:void = undefined})() object 1234567891011121314151617// åŸºç¡€ç±»å‹(()=&gt;{ // object // objectç±»å‹ function getObject(obj:object):object{ console.log(obj) return { name: \"18\", age: 19, } } console.log(getObject({ age: 18, name: \"text\" }))})() è”åˆç±»å‹/ç±»å‹æ–­è¨€ 12345678910111213141516171819202122232425262728293031323334// åŸºç¡€ç±»å‹(()=&gt;{ // è”åˆç±»å‹ // ç±»ä¼¼æ³›å‹ // è”åˆç±»å‹è¡¨ç¤ºå–å€¼ä¸ºå¤šç§ç±»å‹ä¸­çš„æŸä¸€ç§ // å®šä¹‰å‡½æ•°getStræ¥æ”¶å‚æ•° str, ç±»å‹ä¸º number æˆ– string, è¿”å› string function getStr(str:number|string):string{ return str.toString() // å°†å‚æ•°è½¬æˆ string ç±»å‹è¿”å› } console.log(getStr(1)) console.log(getStr(\"tttt\")) // é…åˆç±»å‹æ–­è¨€ä½¿ç”¨ // ç±»å‹æ–­è¨€, å‘Šè¯‰ç¼–è¯‘å™¨, è¿™ä¸ªå˜é‡æ˜¯ä»€ä¹ˆç±»å‹ // (&lt;ç±»å‹&gt;å˜é‡) åˆ™ä»£è¡¨å‘Šè¯‰ç¼–è¯‘å™¨, x æ˜¯ string ç±»å‹ function getLen(x:number|string):number{ if ((&lt;string&gt;x).length){ // åªæœ‰ string æœ‰.length æ–¹æ³•, è¿™é‡Œå¦‚æœæ²¡æœ‰, åˆ™æ˜¯ number ç±»å‹ return (&lt;string&gt;x).length }else{ // number ç±»å‹ éœ€è¦ toString å†è¾“å‡ºé•¿åº¦ return x.toString().length } } // ç±»å‹æ–­è¨€çš„ç¬¬2ç§è¯­æ³• // ç­‰åŒäºæ–¹æ³•1 function getLen1(x:number|string):number{ if ((x as string).length){ // åªæœ‰ string æœ‰.length æ–¹æ³•, è¿™é‡Œå¦‚æœæ²¡æœ‰, åˆ™æ˜¯ number ç±»å‹ return (x as string).length }else{ // number ç±»å‹ éœ€è¦ toString å†è¾“å‡ºé•¿åº¦ return x.toString().length } }})() ç±»å‹æ¨æ–­ 123456789// åŸºç¡€ç±»å‹(()=&gt;{ // ç±»å‹æ¨æ–­ // ç±»å‹æ¨æ–­, TS åœ¨æ²¡æœ‰æ˜ç¡®çš„è‡ªåŠ¨ç±»å‹æ—¶æ¨æµ‹å‡ºä¸€ä¸ªç±»å‹, ç¼–è¯‘å™¨è‡ªå·±ä¼šè¿›è¡Œç±»å‹æ¨æ–­, è‡ªåŠ¨åˆ¤æ–­å‡ºå˜é‡çš„ç±»å‹ // å½“å®šä¹‰å˜é‡ä¸”èµ‹å€¼æ—¶, ä¼šæ ¹æ®å€¼è¿›è¡Œæ¨æ–­ç±»å‹ // å½“å®šä¹‰å˜é‡ä½†æ˜¯ä¸èµ‹å€¼æ—¶, æ¨æ–­ä¸º any ç±»å‹ let t = 100 // ç¼–è¯‘å™¨è‡ªå·±æ¨æ–­æˆ number let a; // è‡ªå·±æ¨æ–­æˆ any})()","link":"/2022/04/03/vue_02/"},{"title":"Vue3 ä»å…¥é—¨åˆ°å…¥åœŸ(TypeScriptæ¥å£)","text":"å‰è¨€ åœ¨ä¸Šä¸€ç« , æˆ‘ä»¬å°±å†™è¿‡ç®€å•çš„æ¥å£, æœ¬ç« æ›´æ·±å…¥çš„äº†è§£æ¥å£ æ¥å£æ˜¯å¯¹è±¡çš„çŠ¶æ€(å±æ€§)å’Œè¡Œä¸º(æ–¹æ³•)çš„æŠ½è±¡(æè¿°) æ¥å£ ä»¥ä¾‹å­æ¥äº†è§£, æˆ‘ä»¬æœ‰è¿™æ ·çš„éœ€æ±‚ 12345å®šä¹‰ä¸€ä¸ªå¯¹è±¡å­˜æ”¾ç”¨æˆ·ä¿¡æ¯, æœ‰å››ç§å±æ€§- id æ˜¯ number ç±»å‹, å¿…é¡»æœ‰, å¹¶ä¸”åªè¯»- age æ˜¯ number ç±»å‹, å¿…é¡»æœ‰- name æ˜¯ string ç±»å‹, å¿…é¡»æœ‰- sex æ˜¯ string ç±»å‹, å¯ä»¥æ²¡æœ‰ å¯é€‰/åªè¯»å±æ€§ 1234567891011121314151617181920212223242526(()=&gt;{ // æ¥å£æ˜¯ä¸€ç§ç±»å‹/è§„èŒƒ/è§„åˆ™/èƒ½åŠ›/çº¦æŸ // å®šä¹‰ä¸€ä¸ªæ¥å£ IUser // æ¥å£ä¸€èˆ¬ä»¥ I å¼€å¤´ interface IUser{ readonly id: number, // åœ¨å®šä¹‰æ—¶, æŒ‡å®š readonly ä»£è¡¨è¿™ä¸ªå±æ€§æ˜¯åªè¯»çš„ name: string, age: number, sex?: string, // åœ¨å®šä¹‰æ—¶, æŒ‡å®š ? ä»£è¡¨è¿™ä¸ªå±æ€§æ˜¯å¯ä¸ºç©ºçš„, ä¸æŒ‡å®šé»˜è®¤å¿…é¡»å­˜åœ¨ } // å®šä¹‰ä¸€ä¸ªå¯¹è±¡ const u1:IUser={ id: 1, name: \"u1\", age: 18, } const u2:IUser={ id: 2, name: \"u2\", age: 19, sex: \"ç”·\", } // u2.id = 3 // åœ¨å®ä¾‹åŒ–å, æ— æ³•å¯¹åªè¯»å±æ€§è¿›è¡Œé‡æ–°èµ‹å€¼})() å‡½æ•°ç±»å‹ ä¸Šé¢çš„æ¥å£éƒ½æ˜¯ä½œä¸ºå¯¹è±¡ä½¿ç”¨, å…¶å®ä»–ä¹Ÿå¯ä»¥ä½œä¸ºå‡½æ•°çš„ç±»å‹ä½¿ç”¨ 123456789101112131415(()=&gt;{ // æ¥å£æ˜¯ä¸€ç§ç±»å‹/è§„èŒƒ/è§„åˆ™/èƒ½åŠ›/çº¦æŸ // å®šä¹‰ä¸€ä¸ªæ¥å£ SearchFunc, ä½œä¸ºå‡½æ•°çº¦æŸä½¿ç”¨ interface SearchFunc{ // ä¼ å…¥ä¸¤ä¸ªå‚æ•°, éƒ½æ˜¯å­—ç¬¦ä¸², è¿”å› bool (source: string, subString: string): boolean } // å®šä¹‰ä¸€ä¸ªå‡½æ•°, mySearch, éµå®ˆæ¥å£ SearchFunc const mySearch: SearchFunc = function(source: string, sub: string): boolean{ return source.search(sub) &gt; -1 } console.log(mySearch(\"abcd\", \"bc\"))})() ç±»å®ç°æ¥å£ 123456789101112131415161718192021222324252627282930313233343536373839404142(()=&gt;{ // æ¥å£æ˜¯ä¸€ç§ç±»å‹/è§„èŒƒ/è§„åˆ™/èƒ½åŠ›/çº¦æŸ // ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ // ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ // å®šä¹‰æ¥å£ Alarm interface Alarm{ // å®ç° alert æ–¹æ³• alert(): any; } // å®šä¹‰æ¥å£ Light interface Light{ // å®ç° lightOn æ–¹æ³• lightOn(): void; // å®ç° lightOff æ–¹æ³• lightOff(): void; } // å®šä¹‰ç±» Car, å®ç°æ¥å£ Alarm // implements å…³é”®å­—, æŒ‡å®šç»§æ‰¿æ¥å£ Alarm class Car implements Alarm{ // ç»§æ‰¿åå¿…é¡»å®ç°æ¥å£å®šä¹‰çš„æ–¹æ³• alert() { console.log(\"alert\"); } } // å®šä¹‰ç±» Car1, å®ç°æ¥å£ Alarm å’Œ Light class Car1 implements Alarm, Light{ // å¿…é¡»åŒæ—¶å®ç°æ¥å£ Alarm å’Œ Light çš„æ–¹æ³• alert() { console.log(\"alert\"); } lightOff(): void { console.log(\"off\"); } lightOn(): void { console.log(\"on\"); } }})() æ¥å£ç»§æ‰¿æ¥å£ 12345678910111213141516171819202122232425262728293031323334353637383940(()=&gt;{ // æ¥å£æ˜¯ä¸€ç§ç±»å‹/è§„èŒƒ/è§„åˆ™/èƒ½åŠ›/çº¦æŸ // æ¥å£ç»§æ‰¿æ¥å£ // å®šä¹‰æ¥å£ Alarm interface Alarm{ // å®ç° alert æ–¹æ³• alert(): any; } // å®šä¹‰æ¥å£ Light interface Light{ // å®ç° lightOn æ–¹æ³• lightOn(): void; // å®ç° lightOff æ–¹æ³• lightOff(): void; } // æ¥å£ LightAlarm ç»§æ‰¿ Alarm å’Œ Light interface LightAlarm extends Alarm, Light{ simple(): void; } // å®šä¹‰ç±» Car1, å®ç°æ¥å£ LightAlarm class Car1 implements LightAlarm{ // å¿…é¡»åŒæ—¶å®ç°æ¥å£ Alarm å’Œ Light å’Œ LightAlarm çš„æ–¹æ³• alert() { console.log(\"alert\"); } lightOff(): void { console.log(\"off\"); } lightOn(): void { console.log(\"on\"); } simple(): void{ console.log(\"simple\") } }})()","link":"/2022/04/04/vue_03_interface/"},{"title":"å¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„-ç¬”è®°(1)","text":"å¤§å‹ä¸šåŠ¡çš„ç³»ç»Ÿç‰¹ç‚¹ é«˜å¹¶å‘ å¤§æµé‡ é«˜å¯ç”¨ æµ·é‡æ•°æ® ç”¨æˆ·åˆ†å¸ƒå¹¿æ³› ç½‘ç»œæƒ…å†µè´Ÿè½½ å®‰å…¨ç¯å¢ƒæ¶åŠ£ éœ€æ±‚å¿«é€Ÿå˜æ›´ å¿«é€Ÿè¿­ä»£ æœ€åˆçš„å°å‹ä¸šåŠ¡çš„æ¶æ„ LAMP = Linux+Apache+MySQL+PHP ç½‘ç«™çš„æ¶æ„å˜åŒ– ä¸€å°æœåŠ¡å™¨æ”¾ç½®LAMP ä¸‰å°æœåŠ¡å™¨å­˜æ”¾ åº”ç”¨/æ–‡ä»¶æœåŠ¡/æ•°æ®åº“æœåŠ¡ å¢åŠ æœ¬åœ°ç¼“å­˜/åˆ†å¸ƒå¼ç¼“å­˜æœåŠ¡å™¨ åº”ç”¨æœåŠ¡å™¨å¢åŠ é›†ç¾¤ æ•°æ®åº“è¯»å†™åˆ†ç¦» CDNå’Œåå‘ä»£ç† åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå’Œåˆ†å¸ƒå¼æ•°æ®åº“ ä½¿ç”¨NOSQLå’ŒES å°†ä¸šåŠ¡è¿›è¡Œæ‹†åˆ† æ ¹æ®ä¸šåŠ¡æ¥ç¡®å®šç½‘ç«™æ¶æ„, å¤šå¤§çš„ä¸šåŠ¡é‡å†³å®šä½¿ç”¨ä»€ä¹ˆæ¶æ„, åˆé€‚çš„æ‰æ˜¯æœ€å¥½çš„ æŠ€æœ¯æ¶æ„ä¸ºä¸šåŠ¡æœåŠ¡, åˆ‡å‹¿æœ¬æœ«å€’ç½® ç½‘ç«™æ¶æ„çš„è®¾è®¡è¯¯åŒº ä¸€å‘³è¿½å¯»å¤§å…¬å¸çš„è§£å†³æ–¹æ¡ˆ ä¸ºäº†æŠ€æœ¯è€ŒæŠ€æœ¯, è„±ç¦»å®é™…æƒ…å†µ ä¼å›¾ä½¿ç”¨æŠ€æœ¯è§£å†³æ‰€æœ‰é—®é¢˜(ä¸ºä»€ä¹ˆä¸è¯•è¯•è°ƒæ•´ä¸šåŠ¡å‘¢?) ç½‘ç«™æ¶æ„æ¨¡å¼ åˆ†å±‚ åº”ç”¨å±‚: è´Ÿè´£å…·ä½“ä¸šåŠ¡å’Œè§†å›¾å±•ç¤º, ç½‘ç«™é¦–é¡µå’Œæœç´¢è¾“å…¥å’Œç»“æœå±•ç¤º(å‰æ®µ) æœåŠ¡å±‚: ä¸ºåº”ç”¨å±‚æä¾›æœåŠ¡æ”¯æŒ, ç”¨æˆ·ç®¡ç†æœåŠ¡, è´­ç‰©è½¦æœåŠ¡(æ¥å£) æ•°æ®å±‚: æ•°æ®çš„å­˜å‚¨å’Œè®¿é—®æœåŠ¡, æ•°æ®åº“/ç¼“å­˜/æ–‡ä»¶/æœç´¢(æ•°æ®) åˆ†å‰² å°†ç½‘ç«™æŒ‰ç…§æ¨¡å—è¿›è¡Œåˆ†å‰², é€»è¾‘ä¸ç‰©ç†éƒ½åˆ†å‰², æé«˜å¹¶å‘å¤„ç†èƒ½åŠ›å’ŒåŠŸèƒ½æ‰©å±•èƒ½åŠ› åˆ†å¸ƒå¼ å°†åˆ†å‰²åçš„æ¨¡å—è¿›è¡Œåˆ†å¸ƒå¼éƒ¨ç½² å¥½å¤„ æé«˜å¹¶å‘ä¸æ•°æ®å¤„ç†èƒ½åŠ› é—®é¢˜ ç½‘ç»œé€šè®¯é€ æˆçš„æ€§èƒ½æŸè€— æŸä¸€ä¸ªæœåŠ¡å™¨å®•æœºé€ æˆçš„ç½‘ç«™å¯ç”¨æ€§é™ä½ æ•°æ®åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ äº‹åŠ¡é—®é¢˜ ç½‘ç«™ä¾èµ–å…³ç³»å¤æ‚, å¼€å‘/ç®¡ç†/ç»´æŠ¤å›°éš¾ åˆ†å¸ƒå¼æ–¹æ¡ˆ åˆ†å¸ƒå¼åº”ç”¨å’ŒæœåŠ¡: å°†åˆ†å‰²åçš„æ¥å£è¿›è¡Œåˆ†å¸ƒå¼éƒ¨ç½², å¯ä»¥æ”¹å–„ç½‘ç«™æ€§èƒ½å’Œå¹¶å‘æ€§,æœ‰åˆ©äºä¸šåŠ¡åŠŸèƒ½æ‰©å±•, å¯¹äºå¼€å‘è¿™ä¸ªæ¨¡å—çš„äººæ¥è¯´, å¯ä»¥åŠ å¿«å¼€å‘é€Ÿåº¦ åˆ†å¸ƒå¼é™æ€èµ„æº: å°†é™æ€èµ„æºç‹¬ç«‹åˆ†å¸ƒå¼éƒ¨ç½², åŠ¨é™åˆ†ç¦», åŠ å¿«åŠ è½½é€Ÿåº¦, ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ åˆ†å¸ƒå¼æ•°æ®å’Œå­˜å‚¨: å°†æ•°æ®åˆ†å¸ƒå¼å­˜å‚¨, æé«˜æ•ˆç‡ åˆ†å¸ƒå¼è®¡ç®—: å°†å¯¹è®¡ç®—è¦æ±‚é«˜çš„é€»è¾‘ä½¿ç”¨åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶åˆ†é…åˆ°å…¶ä»–æœºå™¨è¿›è¡Œè®¡ç®—, æé«˜æ•ˆç‡ ç¼“å­˜ CDN: å°†ä¸€äº›é™æ€èµ„æºå’Œè¾ƒå°‘å˜åŒ–çš„æ•°æ®å’Œçƒ­ç‚¹æ•°æ®å­˜æ”¾åœ¨ç¼“å­˜ä¸­, ç”¨æˆ·è®¿é—®æ—¶ä¼˜å…ˆè®¿é—®ç¼“å­˜ åå‘ä»£ç†: åå‘ä»£ç†æœåŠ¡é…ç½®ç¼“å­˜ æœ¬åœ°ç¼“å­˜: åœ¨åº”ç”¨ç¨‹åºè®¾è®¡çš„æœ¬åœ°å­˜æ”¾ç¼“å­˜, ä¸€èˆ¬æ˜¯å­˜æ”¾åœ¨å†…å­˜ä¸­ åˆ†å¸ƒå¼ç¼“å­˜: å°†ç¼“å­˜å­˜æ”¾åœ¨åˆ†å¸ƒå¼ç¼“å­˜é›†ç¾¤ä¸­ ä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨ç¼“å­˜: éœ€è¦é¢‘ç¹è®¿é—®çš„æ•°æ®/åœ¨æŸä¸ªæ—¶æ®µå†…æœ‰æ•ˆçš„æ•°æ® å¼‚æ­¥ å°†è¦å¤„ç†çš„æ•°æ®å­˜æ”¾è¿›é˜Ÿåˆ—ä¸­, ç”±æ¶ˆè´¹è€…å»æ¶ˆè´¹ æé«˜ç³»ç»Ÿå¯ç”¨æ€§: æ¶ˆè´¹è€…å‘ç”Ÿé—®é¢˜æ—¶ç”Ÿäº§è€…å¯ä»¥ç»§ç»­å…¥é˜Ÿ åŠ å¿«å“åº”é€Ÿåº¦: è€—æ—¶çš„æ“ä½œä¸éœ€è¦ç­‰å¾…å³å¯è¿”å›, å‡å°‘å“åº”å»¶è¿Ÿ æ¶ˆé™¤å¹¶å‘è®¿é—®é«˜å³°: è®¿é—®é‡å¤§çš„æ—¶å€™ä¹Ÿç”±æ¶ˆè´¹è€…ä¾æ¬¡å¤„ç†, å‡è½»å‹åŠ› å¼‚æ­¥è¦å’Œäº§å“çš„ä¸šåŠ¡ç›¸å…³, æœ‰äº›æ—¶å€™æ— æ³•ä½¿ç”¨å¼‚æ­¥ å†—ä½™ æŸä¸ªæœåŠ¡å™¨å®•æœºæ—¶ä¸€å®šè¦ä¿æŒé‡è¦æ•°æ®çš„ä¸ä¸¢å¤±, æ‰€ä»¥éœ€è¦ä¸€å®šæ•°é‡çš„æœåŠ¡å™¨ å†—ä½™è¿è¡Œ, ç›®çš„æ˜¯åœ¨æ­£å¸¸æƒ…å†µä¸‹, è¿™äº›æœåŠ¡å™¨æ˜¯ä¸å‚ä¸æ­£å¸¸çš„ä¸šåŠ¡æµç¨‹çš„, å½“çº¿ä¸Šçš„æœåŠ¡å™¨å‘ç”Ÿæ•…éšœæ—¶, å†å¯åŠ¨å¯¹åº”çš„å†—ä½™æœåŠ¡å™¨æ‰¿æ¥ä¸šåŠ¡, ä¿è¯æœåŠ¡çš„æ­£å¸¸è¿è¡Œ, ä¸€èˆ¬çš„, åƒç½‘å…³ä¹‹ç±»çš„(ä¸€å°æœåŠ¡å™¨å³å¯, ä½†æ˜¯æŒ‚æ‰å¯¹æ•´ä¸ªæ¶æ„çš„å½±å“è¾ƒå¤§)æœåŠ¡å¿…é¡»è¦è®¾ç½®å†—ä½™ å†—ä½™å¯ä»¥å®ç°æœåŠ¡çš„é«˜å¯ç”¨ å¤‡ä»½ å†·å¤‡ä»½:æ•°æ®åº“ä¸­çš„æ•°æ®ä¹Ÿéœ€è¦å®šæ—¶å¤‡ä»½ä¸å­˜æ¡£, è¿™å«æ•°æ®å†·å¤‡ä»½ çƒ­å¤‡ä»½:æ•°æ®åº“çš„é«˜å¯ç”¨å°±æ˜¯æ€»ä»åˆ†ç¦», æ•°æ®åº“ä¼šè¿›è¡ŒåŒæ­¥æ›´æ–°æ•°æ®, è¿™ç§éšæ—¶æ›´æ”¹éšæ—¶åŒæ­¥çš„æ–¹æ³•å«çƒ­å¤‡ä»½ ç¾å¤‡æ•°æ®ä¸­å¿ƒ:ç‰¹åˆ«å¤§çš„ä¸šåŠ¡, ä¸ºäº†æŠµå¾¡é‡åˆ°å¤§åœç”µ/åœ°éœ‡/æµ·å•¸ç­‰ä¸å¯æŠ—åŠ›å¯¼è‡´çš„ä¸šåŠ¡ç˜«ç—ª, åœ¨å„åœ°æœ‰ç¾å¤‡æ•°æ®ä¸­å¿ƒ, å°½å¯èƒ½çš„å‡å°‘æŸå¤± è‡ªåŠ¨åŒ– å‘å¸ƒè¿‡ç¨‹è‡ªåŠ¨åŒ–: è‡ªåŠ¨åŒ–å‘å¸ƒç³»ç»Ÿ, å‡å°‘å‘å¸ƒè¿‡ç¨‹å› ä¸ºäººä¸ºå¤±è¯¯å¯¼è‡´çš„é—®é¢˜ è‡ªåŠ¨åŒ–ä»£ç ç®¡ç†: ä»£ç ç‰ˆæœ¬æ§åˆ¶/åˆ†æ”¯æ§åˆ¶ç­‰è‡ªåŠ¨åŒ– è‡ªåŠ¨åŒ–æµ‹è¯•: æäº¤æµ‹è¯•åç”±ç³»ç»Ÿè¿›è¡Œè‡ªåŠ¨åŒ–ç”¨ä¾‹æµ‹è¯• è‡ªåŠ¨åŒ–å®‰å…¨æ£€æµ‹: é€šè¿‡å®‰å…¨æ£€æµ‹å·¥å…·æ£€æµ‹ä»£ç  è‡ªåŠ¨åŒ–éƒ¨ç½²: è‡ªåŠ¨éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒ è‡ªåŠ¨åŒ–ç›‘æ§: å¯¹çº¿ä¸Šçš„å„é¡¹æŒ‡æ ‡è¿›è¡Œç›‘æ§, é€šè¿‡æœåŠ¡ä¸­å¿ƒå¯¹é›†ç¾¤æœºå™¨æ€§èƒ½è¿›è¡Œç›‘æ§ è‡ªåŠ¨åŒ–æŠ¥è­¦: æ£€æµ‹åˆ°æŒ‡æ ‡è¾¾åˆ°æŸä¸€ä¸ªé˜€å€¼æ—¶è‡ªåŠ¨å‘ç›¸å…³äººå‘˜é€šè¿‡çŸ­ä¿¡/æ‰‹æœºç­‰æ–¹å¼æŠ¥è­¦ è‡ªåŠ¨åŒ–å¤±æ•ˆè½¬ç§»: æ£€æµ‹åˆ°é›†ç¾¤çš„æŸä¸ªæœåŠ¡å™¨æŒ‚æ‰åè‡ªåŠ¨å°†å…¶å‰¥ç¦»å‡ºä¸šåŠ¡, ç­‰å¾…å¼€å‘äººå‘˜ä¿®å¤ è‡ªåŠ¨åŒ–å¤±æ•ˆæ¢å¤: ç›‘æµ‹åˆ°æœåŠ¡æ­£å¸¸åè‡ªåŠ¨åŠ å…¥åˆ°ä¸šåŠ¡ä¸­ è‡ªåŠ¨åŒ–é™çº§: ç½‘ç«™æŒç»­å‘Šè­¦æ—¶, å…³é—­ä¸€äº›ä¸é‡è¦çš„æœåŠ¡, å°†èµ„æºé‡Šæ”¾å‡ºæ¥çµ¦é‡è¦çš„æœåŠ¡ä¿éšœä¸šåŠ¡çš„å®‰å…¨å¯ç”¨ æ ¸å¿ƒæ¶æ„è¦ç´  æ€§èƒ½ ä¸€ä¸ªæ‰“å¼€ç¼“æ…¢çš„ç½‘ç«™ä¼šå¯¼è‡´ä¸¥é‡çš„ç”¨æˆ·æµå¤±, é™¤éæ˜¯æ²¡çš„é€‰æ‹© ä¼˜åŒ–æªæ–½: å‰ç«¯åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜/é¡µé¢å‹ç¼©/åˆç†å¸ƒå±€é¡µé¢/å‡å°‘cookieä¼ è¾“æ¥æ”¹å–„æ€§èƒ½ æ¶æ„ä½¿ç”¨CDN/åå‘ä»£ç†/ç¼“å­˜çƒ­ç‚¹æ–‡ä»¶æ¥åŠ å¿«å“åº”é€Ÿåº¦å‡è½»æœåŠ¡å™¨å‹åŠ› åç«¯ä½¿ç”¨æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜åŠ å¿«è¯·æ±‚å¤„ç†è¿‡ç¨‹,å‡è½»æ•°æ®åº“å‹åŠ› æ˜¯å¦å¯ä»¥å°†ä¸šåŠ¡ä¿®æ”¹ä¸ºå¼‚æ­¥ é›†ç¾¤/å¤šçº¿ç¨‹/SQLä¼˜åŒ–ç­‰ å¯ç”¨æ€§ ç½‘ç«™å®•æœº/æœåŠ¡ä¸å¯ç”¨å±äºé‡å¤§å¤±è¯¯, è½»åˆ™å½±å“ç½‘ç«™å£°èª‰, é‡åˆ™æ‘Šä¸Šå®˜å¸. è€Œä¸”å¤§æ¦‚ç‡ä¼šæŸå¤±é‡‘é’±å’Œç”¨æˆ· ä¼˜åŒ–æªæ–½: å†—ä½™, åº”ç”¨éƒ¨ç½²åœ¨å¤šä¸ªæœåŠ¡å™¨åŒæ—¶æä¾›æœåŠ¡, æ•°æ®åœ¨å¤šä¸ªæœåŠ¡å™¨äº’ç›¸å¤‡ä»½ æœåŠ¡é›†ç¾¤, è´Ÿè½½å‡è¡¡, å‰ææ˜¯åº”ç”¨æœåŠ¡å™¨ä¸èƒ½ä¿å­˜è¯·æ±‚çš„ä¼šè¯ä¿¡æ¯ä»¥å…å‡ºç°é—®é¢˜åˆ‡æ¢åˆ°å¦ä¸€å°æœºå™¨æ—¶æ— æ³•å®Œæˆä¸šåŠ¡å¤„ç† æ•°æ®åº“é›†ç¾¤, æ•°æ®é‡‡ç”¨å†·å¤‡ä»½å’Œçƒ­å¤‡ä»½åŒæ—¶è¿è¡Œçš„æ–¹å¼ ä¼¸ç¼©æ€§ ä¼¸ç¼©æ€§æŒ‡é€šè¿‡ä¸æ–­å‘é›†ç¾¤ä¸­åŠ å…¥æœåŠ¡å™¨æ¥ç¼“è§£ä¸æ–­ä¸Šå‡çš„ä¸šåŠ¡é‡å’Œæ•°æ®å­˜å‚¨éœ€æ±‚ è¡¡é‡ä¼¸ç¼©æ€§çš„ä¸»è¦æ ‡å‡†å°±æ˜¯æ˜¯å¦å¯ä»¥ä½¿ç”¨å •èƒæœåŠ¡å™¨æ„å»ºé›†ç¾¤, æ˜¯å¦å®¹æ˜“å‘é›†ç¾¤ä¸­æ·»åŠ æ–°çš„æœåŠ¡å™¨, åŠ å…¥æ–°çš„æœåŠ¡å™¨åæ˜¯å¦å¯ä»¥æé«˜å’ŒåŸæ¥çš„æœåŠ¡å™¨æ— å·®åˆ«çš„æœåŠ¡, é›†ç¾¤ä¸­å¯ä»¥å®¹çº³çš„æ€»æœåŠ¡å™¨æ•°é‡æ˜¯å¦æœ‰é™åˆ¶ åº”ç”¨æœåŠ¡å™¨é›†ç¾¤: æœåŠ¡å™¨ä¸Šä¸ä¿å­˜æ•°æ®, æ‰€æœ‰æœåŠ¡å™¨éƒ½æ˜¯å¯¹ç­‰çš„, é€šè¿‡ä½¿ç”¨åˆé€‚çš„è´Ÿè½½å‡è¡¡è®¾å¤‡å°±å¯ä»¥å‘é›†ç¾¤ä¸­ä¸æ–­åŠ å…¥æœåŠ¡å™¨ ç¼“å­˜æœåŠ¡å™¨é›†ç¾¤: åŠ å…¥æ–°çš„æœåŠ¡å™¨å¯èƒ½å¯¼è‡´ç¼“å­˜è·¯ç”±å¤±è´¥, å¯¼è‡´é›†ç¾¤ä¸­å¤§éƒ¨åˆ†ç¼“å­˜æ•°æ®æ— æ³•è®¿é—®. è™½ç„¶ç¼“å­˜çš„æ•°æ®å¯ä»¥é€šè¿‡æ•°æ®åº“é‡æ–°åŠ è½½, ä½†æ˜¯å¦‚æœåº”ç”¨ä¸¥é‡ä¾èµ–ç¼“å­˜, å¯èƒ½ä¼šå¯¼è‡´æ•´ä¸ªç½‘ç«™å´©æºƒ, éœ€è¦æ”¹è¿›ç¼“å­˜çš„è·¯ç”±ç®—æ³•ä¿è¯ç¼“å­˜æ•°æ®çš„å¯è®¿é—®æ€§ å…³ç³»å‹æ•°æ®åº“: æ•°æ®åº“æœ¬èº«å¾ˆéš¾åšåˆ°å¤§è§„æ¨¡é›†ç¾¤çš„å¯ä¼¸ç¼©æ€§,æ‰€ä»¥å¿…é¡»åœ¨æ•°æ®åº“å¤–å®ç°, ä¾‹å¦‚é€šè¿‡é€»è¾‘åˆ†åŒºå°†æŸä¸€éƒ¨åˆ†é€»è¾‘çš„å¤šä¸ªæ•°æ®åº“æœåŠ¡å™¨ç»„æˆé›†ç¾¤ NoSQL: å¤©ç”Ÿå°±ä¸ºæµ·é‡çš„æ•°æ®è€Œç”Ÿ, å› æ­¤å¯¹ä¼¸ç¼©æ€§æ”¯æŒå¾ˆå¥½ æ‰©å±•æ€§ ç½‘ç«™çš„æ‰©å±•æ€§æ¶æ„ç›´æ¥å…³æ³¨ç½‘ç«™çš„åŠŸèƒ½éœ€æ±‚, ç½‘ç«™çš„åŠŸèƒ½å¿«é€Ÿè¿­ä»£, æ‰©å±•æ€§çš„æé«˜å¯ä»¥ä½¿å…¶å¿«é€Ÿå“åº”éœ€æ±‚çš„å˜åŒ– è¡¡é‡ç½‘ç«™æ¶æ„æ€§çš„æ ‡å‡†æ˜¯åœ¨ç½‘ç«™å¢åŠ æ–°çš„ä¸šåŠ¡äº§å“æ—¶, æ˜¯å¦å½±å“ç°æœ‰äº§å“, æ˜¯å¦ä¸éœ€è¦æ”¹åŠ¨æˆ–å¾ˆå°‘æ”¹åŠ¨ç°æœ‰äº§å“å³å¯ä¸Šçº¿æ–°çš„äº§å“, ä¸åŒäº§å“ä¹‹é—´æ˜¯å¦å¾ˆå°‘è€¦åˆ, ä¸€ä¸ªäº§å“çš„æ”¹åŠ¨æ˜¯å¦å¯¹å…¶ä»–äº§å“æœ‰å½±å“, å…¶ä»–äº§å“æ˜¯å¦ä¸éœ€è¦æ”¹åŠ¨ ä¼˜åŒ–æªæ–½: äº‹ä»¶é©±åŠ¨æ¶æ„: äº‹ä»¶é©±åŠ¨é€šå¸¸ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å®ç°, æ¶ˆæ¯äº§ç”ŸååŠ å…¥é˜Ÿåˆ—, ç”±æ¶ˆè´¹è€…æœåŠ¡è¿›è¡Œæ¶ˆè´¹, é€šè¿‡è¿™ç§æ–¹å¼å°†æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…åˆ†å¼€, é€æ˜çš„å¢åŠ æ–°çš„ç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€… åˆ†å¸ƒå¼æœåŠ¡: å°†ä¸šåŠ¡å’Œå¯å¤ç”¨æœåŠ¡åˆ†ç¦», é€šè¿‡åˆ†å¸ƒå¼æ¡†æ¶è°ƒç”¨, æ–°å¢äº§å“é€šè¿‡è°ƒç”¨å¯å¤ç”¨çš„æœåŠ¡å®ç°è‡ªèº«çš„ä¸šåŠ¡é€»è¾‘, å¯¹ç°æœ‰çš„äº§å“æ²¡æœ‰ä»»ä½•å½±å“. å¯å¤ç”¨æœåŠ¡å‡çº§æ—¶è¦æ³¨æ„å¤šç‰ˆæœ¬çš„å…¼å®¹, å®ç°é€æ˜å‡çº§ å¤§çš„ç½‘ç«™ä¸ºäº†ä¿æŒå¸‚åœºåœ°ä½å’Œè¦†ç›–ç‡, ä¼šæä¾›å¼€æ”¾å¹³å°æ¥å£ä¾›ç¬¬ä¸‰æ–¹å¼€å‘è€…è°ƒç”¨ å®‰å…¨æ€§ äº’è”ç½‘æ˜¯å¼€æ”¾çš„, ä»»ä½•äººåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®ç½‘ç«™, ç½‘ç«™çš„å®‰å…¨æ¶æ„å°±æ˜¯ä¿æŠ¤ç½‘ç«™ä¸å—æ¶æ„è®¿é—®å’Œæ”»å‡», ä¿æŠ¤é‡è¦æ•°æ®ä¸è¢«çªƒå–","link":"/2021/09/04/website_architecture(1)/"},{"title":"å¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„-ç¬”è®°(2)","text":"ç¬æ—¶å“åº”: ç½‘ç«™çš„é«˜æ€§èƒ½æ¶æ„ Aç½‘ç«™åœ¨100å¹¶å‘çš„æ—¶å€™, æ¥å£å“åº”æ—¶é—´æ˜¯1s, 200å¹¶å‘æ—¶æ˜¯10s Bç½‘ç«™åœ¨100å¹¶å‘æ—¶æ˜¯1.5s, 200å¹¶å‘æ˜¯è¿˜æ˜¯1.5s è¿™ç§æƒ…å†µä¸‹, ç”¨æˆ·è®¤ä¸ºå“ªä¸ªç½‘ç«™è®¿é—®å¿«å‘¢? ç½‘ç«™æ€§èƒ½æ˜¯å®¢è§‚çš„æŒ‡æ ‡, å¯ä»¥å…·ä½“åˆ°å“åº”æ—¶é—´/ååé‡ç­‰æŠ€æœ¯å¯ä»¥è¡¡é‡çš„æŠ€æœ¯æŒ‡æ ‡, åŒæ—¶ä¹Ÿæ˜¯ä½¿ç”¨è€…çš„ä¸»è§‚æ„Ÿå—, æ„Ÿå—è¿™ä¸ªä¸œè¥¿å°±æ¯”è¾ƒå¾®å¦™, ä¸å¥½ç”¨æŠ€æœ¯æŒ‡æ ‡æ¥ç»Ÿè®¡ ç½‘ç«™æ€§èƒ½æµ‹è¯• æ€§èƒ½æµ‹è¯•æ˜¯æ€§èƒ½ä¼˜åŒ–çš„å‰æå’ŒåŸºç¡€, ä¹Ÿæ˜¯æ€§èƒ½ä¼˜åŒ–ç»“æœçš„æ£€æŸ¥çš„åº¦é‡æ ‡å‡†. ä¸åŒè§†è§’ä¸‹çš„ç½‘ç«™æ€§èƒ½æœ‰ä¸åŒæ ‡å‡†å’Œä¼˜åŒ–æ‰‹æ®µ ç”¨æˆ·è§†è§’ ä»ç”¨æˆ·è§’åº¦, ç½‘ç«™æ€§èƒ½æŒ‡ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸Šç›´è§‚çš„æ„Ÿå—æ…¢è¿˜æ˜¯å¿«, é‚£ä¹ˆ, ç”¨æˆ·æ„Ÿå—åˆ°çš„æ—¶é—´, å…¶å®æµç¨‹æ˜¯: ç”¨æˆ·ç‚¹å‡»é¼ æ ‡ &gt; è®¡ç®—æœºæµè§ˆå™¨è§£ææŒ‡ä»¤ &gt; æ‰¾åˆ°éœ€è¦å‘ç”Ÿçš„è¯·æ±‚ - å‘èµ·è¯·æ±‚ &gt; ç½‘ç»œé€šä¿¡ &gt; æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°è¯·æ±‚ &gt; è¿”å›ç»“æœ &gt; ç½‘ç»œé€šä¿¡ &gt; æµè§ˆå™¨æ¥æ”¶åˆ°ç»“æœ &gt; è§£æç»“æœ &gt; å±•ç¤ºåˆ°æµè§ˆå™¨ä¸Š æ‰€ä»¥, ä¸åŒçš„æµè§ˆå™¨/ä¸åŒçš„è®¡ç®—æœº/ä¸åŒçš„ç½‘ç»œæƒ…å†µ å¯èƒ½å¯¼è‡´ç”¨æˆ·æ„Ÿå—åˆ°çš„å»¶è¿Ÿè¿œè¿œå¤§äºæœåŠ¡å™¨è¯·æ±‚çš„è€—æ—¶. åœ¨å®é™…æƒ…å†µ, è€ƒè™‘ä½¿ç”¨å‰ç«¯æ‰‹æ®µä¼˜åŒ–é€Ÿåº¦, æ¯”å¦‚ ä¼˜åŒ–HTMLæ ·å¼ åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ ä½¿ç”¨CDN/åå‘ä»£ç† ç›®çš„æ˜¯ä½¿æµè§ˆå™¨æ›´å¿«æ˜¾ç¤ºç”¨æˆ·æ„Ÿå…´è¶£çš„å†…å®¹, å°½å¯èƒ½è¿‘çš„è·å–é¡µé¢å†…å®¹, å³ä½¿ä¸ä¼˜åŒ–ç¨‹åºå’Œæ¶æ„, ä¹Ÿå¯ä»¥å¾ˆå¤§ç¨‹åº¦æ”¹å–„ç”¨æˆ·è§†è§’ä¸‹çš„ç½‘ç«™æ€§èƒ½ å¼€å‘äººå‘˜è§†è§’ å¼€å‘äººå‘˜ä¸»è¦è€ƒè™‘ç¨‹åºæœ¬èº«åŠç›¸å…³å­ç³»ç»Ÿçš„æ€§èƒ½, åŒ…æ‹¬ å“åº”å»¶è¿Ÿ/ç³»ç»Ÿååé‡/å¹¶å‘å¤„ç†èƒ½åŠ›/ç³»ç»Ÿç¨³å®šæ€§ ç­‰æŠ€æœ¯æŒ‡æ ‡. åœ¨å®é™…æƒ…å†µ, è€ƒè™‘ä½¿ç”¨æŠ€æœ¯æ–¹é¢çš„ä¼˜åŒ–æ‰‹æ®µ, æ¯”å¦‚ ä½¿ç”¨ç¼“å­˜åŠ é€Ÿæ•°æ®è¯»å– ä½¿ç”¨é›†ç¾¤æé«˜åå ä½¿ç”¨å¼‚æ­¥åŠ å¿«è¯·æ±‚å“åº”ä¸å®ç°å‰Šå³° ä½¿ç”¨ä»£ç ä¼˜åŒ–æ‰‹æ®µ è¿ç»´äººå‘˜è§†è§’ è¿ç»´äººå‘˜æ›´å…³å¿ƒåŸºç¡€è®¾æ–½çš„æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡, æ¯”å¦‚ç½‘ç»œå¸¦å®½/æœåŠ¡å™¨ç¡¬ä»¶é…ç½®/æ•°æ®ä¸­å¿ƒç½‘ç»œæ¶æ„/æœåŠ¡å™¨/èµ„æºåˆ©ç”¨ç‡ ä¼˜åŒ–æ‰‹æ®µæœ‰: å»ºè®¾éª¨å¹²ç½‘ç»œæé«˜å¸¦å®½ ä½¿ç”¨é«˜æ€§ä»·æ¯”æœåŠ¡å™¨ åˆ©ç”¨è™šæ‹ŸåŒ–æŠ€æœ¯æé«˜èµ„æºåˆ©ç”¨ç‡ æ€§èƒ½æµ‹è¯•æŒ‡æ ‡ ä¸åŒè§†è§’ä¸‹æœ‰ä¸åŒçš„æ€§èƒ½æ ‡å‡†, ä¸åŒæ ‡å‡†æœ‰ä¸åŒçš„æŒ‡æ ‡ å“åº”æ—¶é—´ ä¸€èˆ¬æŒ‡æ‰§è¡Œä¸€ä¸ªæ“ä½œéœ€è¦çš„æ—¶é—´, ä»è¯·æ±‚å‘é€åˆ°æ”¶åˆ°æœ€åçš„å“åº”éœ€è¦çš„æ—¶é—´, æ˜¯é‡è¦çš„æŒ‡æ ‡, ç›´æ¥åæ˜ ç³»ç»Ÿçš„â€˜å¿«æ…¢â€™ æµ‹è¯•å“åº”æ—¶é—´éœ€è¦è¯·æ±‚å¾ˆå¤šæ¬¡, æ¯”å¦‚ä¸€ä¸‡æ¬¡, è®¡ç®—å…¶å¹³å‡å€¼ å¹¶å‘æ•° æŒ‡ç³»ç»ŸåŒæ—¶å¤„ç†è¯·æ±‚çš„æ•°ç›®, å¯åæ˜ ç³»ç»Ÿçš„è´Ÿè½½ç‰¹æ€§ æµ‹è¯•å¹¶å‘æ•°æ—¶ä¸€èˆ¬é€šè¿‡å¤šçº¿ç¨‹æ¨¡æ‹Ÿå¤šä¸ªç”¨æˆ·æ¥æ¨¡æ‹Ÿç”¨æˆ·è¿›è¡Œæ“ä½œ, ä¸ºäº†æ›´åŠ çœŸå®, é€šå¸¸åœ¨ä¸¤ä¸ªè¯·æ±‚é—´åŠ å…¥ä¸€ä¸ªéšæœºçš„ç­‰å¾…æ—¶é—´, è¿™ä¸ªæ—¶é—´è¢«ç§°ä½œæ€è€ƒæ—¶é—´ ååé‡ æŒ‡å•ä½æ—¶é—´å†…ç³»ç»Ÿå¤„ç†çš„è¯·æ±‚æ•°é‡, ä½“ç°ç³»ç»Ÿçš„æ•´ä½“å¤„ç†èƒ½åŠ›. å¸¸ç”¨çš„é‡åŒ–æŒ‡æ ‡æœ‰: TPS-æ¯ç§’äº‹åŠ¡æ•°-äº‹åŠ¡æŒ‡ä¸€ç³»åˆ—æ­£å¸¸æ“ä½œ(æœ€å¸¸ç”¨) HPS-æ¯ç§’HTTPè¯·æ±‚æ•°-å¹¶å‘ QPS-æ¯ç§’æŸ¥è¯¢æ•° åœ¨ç³»ç»Ÿå¹¶å‘æ•°ç”±å°åˆ°å¤§çš„è¿‡ç¨‹ä¸­. æœåŠ¡å™¨èµ„æºæ¶ˆè€—ä¹Ÿé€æ¸å¢å¤§, ä¸€èˆ¬çš„, ç³»ç»Ÿååé‡åº”è¯¥å…ˆé€æ¸å¢åŠ , åˆ°ä¸€å®šæé™åç»§ç»­å¢åŠ ä¼šå¯¼è‡´ååé‡ä¸‹é™, ç„¶ååˆ°è¾¾å´©æºƒç‚¹åèµ„æºè€—å°½, ååé‡ä¸º0 å¯¹åº”çš„, å“åº”æ—¶é—´å…ˆæ˜¯å°å¹…åº¦çš„ä¸Šå‡, åˆ°è¾¾ååé‡æé™åå¿«é€Ÿçš„ä¸Šå‡, åˆ°è¾¾å´©æºƒç‚¹åå¤±å»å“åº” ç½‘ç«™ä¼˜åŒ–éœ€è¦å°½é‡æé«˜ç³»ç»Ÿååé‡, æœ€å¤§é™åº¦åˆ©ç”¨æœåŠ¡å™¨èµ„æº æ€§èƒ½è®¡æ•°å™¨ æ˜¯æè¿°æœåŠ¡å™¨å’Œæ“ä½œç³»ç»Ÿæ€§èƒ½çš„ä¸€äº›æŒ‡æ ‡, åŒ…æ‹¬ çº¿ç¨‹æ•°é‡/å†…å­˜ä½¿ç”¨/CPUä½¿ç”¨/ç½‘ç»œIO/ç£ç›˜å ç”¨ ç­‰æŒ‡æ ‡, å½“å‘ç°æŒ‡æ ‡è¶…è¿‡é¢„å®šçš„æŠ¥è­¦é˜€å€¼æ—¶åº”åŠæ—¶è”ç³»è¿ç»´ä¸å¼€å‘äººå‘˜å¤„ç† æ€§èƒ½æµ‹è¯•æ–¹æ³• æ€§èƒ½æµ‹è¯• ä»¥ç³»ç»Ÿè®¾è®¡æ—¶çš„æ€§èƒ½æŒ‡æ ‡ä¸ºç›®æ ‡, å¯¹ç³»ç»Ÿä¸æ–­æ–½åŠ å‹åŠ›, éªŒè¯ç³»ç»Ÿåœ¨èµ„æºçš„å¯æ¥å—èŒƒå›´å†…æ˜¯å¦èƒ½è¾¾åˆ°æ€§èƒ½é¢„æœŸ è´Ÿè½½æµ‹è¯• å‘ç³»ç»Ÿä¸æ–­çš„å¢åŠ å¹¶å‘è¯·æ±‚æ¥å¢åŠ ç³»ç»Ÿå‹åŠ›, ä¸€ç›´åˆ°ç³»ç»Ÿçš„æŸé¡¹æˆ–è€…å¤šé¡¹æ€§èƒ½æŒ‡æ ‡è¾¾åˆ°å®‰å…¨ä¸´ç•Œå€¼, å®‰å…¨ä¸´ç•Œå€¼çš„è¡¨ç°ä¸ºè¶…è¿‡è¯¥å€¼ä¹‹åç³»ç»Ÿå¤„ç†èƒ½åŠ›ä¼šä¸‹é™ å‹åŠ›æµ‹è¯• è¶…è¿‡å®‰å…¨è´Ÿè½½çš„æƒ…å†µä¸‹ç»§ç»­å¯¹ç³»ç»Ÿæ–½åŠ å‹åŠ›, ç›´åˆ°ç³»ç»Ÿå´©æºƒ ç¨³å®šæ€§æµ‹è¯• è¢«æµ‹è¯•çš„ç³»ç»Ÿåœ¨æŒ‡å®šçš„ ç¡¬ä»¶/è½¯ä»¶/ç½‘ç»œç¯å¢ƒ ä¸‹, ç»™ç³»ç»ŸåŠ è½½ä¸€å®šçš„ä¸šåŠ¡å‹åŠ›, ä½¿ç³»ç»Ÿè¿è¡Œè¾ƒé•¿æ—¶é—´æ¥è§‚æµ‹ç³»ç»Ÿæ˜¯å¦ç¨³å®š æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ é—®é¢˜åˆ†æ å¦‚æœæœ‰ç”¨æˆ·ä¸ŠæŠ¥ç½‘ç«™ä½¿ç”¨èµ·æ¥â€˜æ…¢â€™, å¿…é¡»å¯¹è¯·æ±‚ç»å†çš„å„ä¸ªç¯èŠ‚è¿›è¡Œæ’æŸ¥, å®šä½é—®é¢˜ å¿…é¡»æ£€æŸ¥è¯·æ±‚å¤„ç†çš„å„ä¸ªç¯èŠ‚çš„æ—¥å¿—, åˆ†æå“åº”æ—¶é—´, æ£€æŸ¥ç›‘æ§æ•°æ®, åˆ†æé—®é¢˜æ˜¯ä»£ç é—®é¢˜è¿˜æ˜¯ç¡¬ä»¶æˆ–è€…ç½‘ç»œé—®é¢˜ Webå‰ç«¯ä¼˜åŒ– ä¸€èˆ¬æŒ‡ç½‘ç«™ä¸šåŠ¡é€»è¾‘å‰çš„éƒ¨åˆ†, æ¯”å¦‚: æµè§ˆå™¨åŠ è½½/ç½‘ç«™è§†å›¾æ¨¡å‹/å›¾ç‰‡æœåŠ¡/CDNæœåŠ¡ ç­‰ å‡å°‘HTTPè¯·æ±‚ - HTTPæ˜¯æ— çŠ¶æ€çš„åº”ç”¨å±‚åè®®, æ¯æ¬¡HTTPéƒ½è¦å»å»ºç«‹é“¾æ¥å’Œä¼ è¾“, æ‰€ä»¥å‡å°‘HTTPè¯·æ±‚æ•°é‡å¯æé«˜æ€§èƒ½, æ¯”å¦‚åˆå¹¶ CSS/JS/å›¾ç‰‡ ç­‰èµ„æº ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜ - ä¸€èˆ¬çš„, CSS/JS/ICON ç­‰é™æ€èµ„æºæ–‡ä»¶æ›´æ–°é¢‘ç‡è¾ƒæ…¢, å°†è¿™äº›æ–‡ä»¶ç¼“å­˜åœ¨æµè§ˆå™¨ä¸­å¯ä»¥å¾ˆå¤§çš„æ”¹å–„æ€§èƒ½. å¯ä»¥è®¾ç½® HTTP å¤´çš„ Cache-Control å’Œ Exprise å±æ€§æ¥æ§åˆ¶. è¿˜è¦ä¿è¯åœ¨å‘ç”Ÿæ›´æ”¹æ—¶éœ€è¦åŠæ—¶åŒæ­¥åˆ°ç”¨æˆ·çš„å®¢æˆ·ç«¯ä¸­(ä¸ä½¿ç”¨ç¼“å­˜), å¯æ”¾ç½®ä¸€ä¸ªæ–°çš„JSå¹¶æ›´æ”¹ä¸»é¡µé¢çš„HTMLçš„JSå¼•ç”¨å°†å…¶å¼•ç”¨åˆ°æ–°çš„JSä¸­, éœ€è¦æ›´æ–°Nä¸ªJSæ—¶, æœ€å¥½ä¸€æ¬¡æ›´æ–°å‡ ä¸ªæˆ–ä¸€ä¸ªé¿å…è®¿é—®é‡æ¿€å¢é€ æˆçš„ç½‘ç»œå µå¡ å¯ç”¨å‹ç¼© - å¯¹æ–‡ä»¶(JS/CSS/HTMLâ€¦)è¿›è¡Œå‹ç¼©, åœ¨æµè§ˆå™¨ç«¯è¿›è¡Œè§£å‹ç¼©å¯å‡å°‘ç½‘ç»œä¼ è¾“æ—¶é—´, ä½†æ˜¯ä¼šå¯¹æœåŠ¡å™¨å’Œæµè§ˆå™¨äº§ç”Ÿä¸€å®šçš„å‹åŠ› CSSæ”¾åœ¨é¡µé¢æœ€ä¸Šé¢, JSæ”¾åœ¨é¡µé¢æœ€ä¸‹é¢ - æµè§ˆå™¨åœ¨ä¸‹è½½å®ŒCSSæ‰ä¼šå¯¹é¡µé¢è¿›è¡Œæ¸²æŸ“, æ‰€ä»¥å°†CSSæ”¾ç½®åœ¨é¡µé¢æœ€ä¸Šæ–¹è®©æµè§ˆå™¨å°½å¿«ä¸‹è½½, JSåœ¨åŠ è½½åç«‹åˆ»æ‰§è¡Œ, æœ‰å¯èƒ½å¯¹é¡µé¢è¿›è¡Œé˜»å¡, é€ æˆé¡µé¢æ˜¾ç¤ºç¼“æ…¢, å› æ­¤JSæ”¾åœ¨é¡µé¢æœ€ä¸‹é¢. ä¾‹å¤–æ˜¯é¡µé¢è§£æéœ€è¦ä½¿ç”¨JS, é‚£ä¹ˆå°±ä¸è¦æ”¾ç½®åœ¨åº•éƒ¨ å‡å°‘Cookieä¼ æ’­ - Cookieä¸€èˆ¬ä¿å­˜ä¸€äº›ç”¨æˆ·çš„ä¿¡æ¯, æœ‰å¯èƒ½æ¯”è¾ƒå¤§, ä¼šå¯¹æ•°æ®çš„ä¼ è¾“é€ æˆè´Ÿæ‹…, å› æ­¤è¦å¯¹å†™å…¥Cookieçš„æ•°æ®è¿›è¡Œæ…é‡è€ƒè™‘, åŒæ—¶ä¸ºäº†é¿å…è®¿é—®é™æ€èµ„æºæ—¶ä¹Ÿæºå¸¦Cookieé€ æˆæ— æ„ä¹‰çš„æŸè€—, å¯å°†é™æ€èµ„æºè®¾ç½®æˆç‹¬ç«‹åŸŸåé¿å…è¯·æ±‚é™æ€èµ„æºæ—¶å‘ç”ŸCookie CDNåŠ é€Ÿ CDN(å†…å®¹åˆ†å‘ç½‘ç»œ)çš„æœ¬è´¨æ˜¯ä¸€ä¸ªç¼“å­˜, å°†ç¼“å­˜æ”¾ç½®åœ¨ç¦»ç”¨æˆ·æœ€è¿‘çš„åœ°æ–¹(ç‰©ç†), ä½¿ç”¨æˆ·æœ€å¿«çš„è·å–æ•°æ® CDNéƒ¨ç½²åœ¨ç½‘ç»œè¿è¥å•†çš„æœºæˆ¿, è¿è¥å•†åˆæ˜¯ç»ˆç«¯ç”¨æˆ·çš„ç½‘ç»œæœåŠ¡æä¾›å•†, å› æ­¤ç”¨æˆ·è¯·æ±‚æ•°æ®ä¼šå…ˆåˆ°è¾¾CDNæœåŠ¡å™¨, å½“CDNå­˜åœ¨ç”¨æˆ·éœ€è¦çš„æ•°æ®æ—¶ç›´æ¥ä»CDNè¿”å›, è¿™æ ·å¯ä»¥åŠ å¿«ç”¨æˆ·è®¿é—®é€Ÿåº¦, åŒæ—¶å‡å°‘æ•°æ®ä¸­å¿ƒçš„è´Ÿè½½ CDNä¸€èˆ¬ç¼“å­˜é™æ€èµ„æº, æ¯”å¦‚å›¾ç‰‡/æ–‡ä»¶/css/JSç­‰, å°†å…¶ç¼“å­˜åˆ°CDNä¼šæå¤§æ”¹å–„ç½‘é¡µé€Ÿåº¦ åå‘ä»£ç† ç”¨æˆ·çš„è¯·æ±‚å‘é€åˆ°åå‘ä»£ç†æœåŠ¡å™¨, åå‘ä»£ç†æœåŠ¡å™¨å†è½¬å‘åˆ°å†…éƒ¨çš„æœåŠ¡, å› æ­¤, åå‘ä»£ç†æœåŠ¡å™¨ä¹Ÿå¯ä»¥ä¿æŠ¤ç½‘ç«™çš„å®‰å…¨, æ¥è‡ªäºäº’è”ç½‘çš„è¯·æ±‚å¿…é¡»ç»è¿‡ä»£ç†æœåŠ¡å™¨, ç›¸å½“äºåœ¨WebæœåŠ¡å™¨å’Œç½‘ç»œä¹‹é—´å»ºç«‹äº†ä¸€å µå¢™, ç°åœ¨ä¸€èˆ¬ä½¿ç”¨ Nginx ä½œä¸ºåå‘ä»£ç†çš„æœåŠ¡, å¯ä»¥å®Œæˆå¤šä¸ªæ“ä½œ, æ¯”å¦‚ ä½¿ç”¨ç¼“å­˜ - ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®é™æ€èµ„æºæ—¶å°†è¯¥èµ„æºç¼“å­˜åˆ°åå‘ä»£ç†æœåŠ¡å™¨ä¸­, å¦ä¸€ä½ç”¨æˆ·è®¿é—®æ—¶ç›´æ¥ä»ä»£ç†æœåŠ¡å™¨è¿”å›, ä¹Ÿå¯ä»¥å°†å¼±åŠ¨æ€æ•°æ®(åšå®¢/å¸–å­/è¯æ¡ç­‰ä¸€äº›å®æ—¶æ€§ä¸å¼ºçš„æ•°æ®)å­˜å‚¨åœ¨ç¼“å­˜ä¸­, å½“æœ‰æ•°æ®å˜åŒ–æ—¶å†…éƒ¨é€šçŸ¥åå‘ä»£ç†æœåŠ¡å™¨å°†è¯¥ç¼“å­˜å¤±æ•ˆ è´Ÿè½½å‡è¡¡ - å¦‚æŸä¸ªåŠŸèƒ½æœ‰å¤šå°æœåŠ¡å™¨å¤„ç†, å¯å°†è¯·æ±‚æŒ‰ç…§è§„åˆ™è½¬å‘åˆ°æŸä¸€å°æœåŠ¡å™¨, æé«˜ç³»ç»Ÿå¤„ç†èƒ½åŠ›å’Œæ€§èƒ½ åº”ç”¨æœåŠ¡å™¨æ€§èƒ½ä¼˜åŒ– åˆ†å¸ƒå¼ç¼“å­˜ ç¼“å­˜ä¸€èˆ¬æŒ‡å°†æ•°æ®å­˜å‚¨åœ¨è®¿é—®é€Ÿåº¦ç›¸å¯¹è¾ƒé«˜çš„å­˜å‚¨ä»‹è´¨ä¸­ä¾›ç³»ç»Ÿä½¿ç”¨, ç¼“å­˜çš„è®¿é—®é€Ÿåº¦å¿«, å¯ä»¥å‡å°‘æ•°æ®çš„è®¿é—®æ—¶é—´, å¦ä¸€æ–¹é¢å¦‚æœç¼“å­˜çš„æ•°æ®æ˜¯ç»è¿‡è®¡ç®—å¾—åˆ°çš„, é‚£ä¹ˆè¯¥æ•°æ®æ— éœ€æ¯æ¬¡é‡æ–°è®¡ç®—å³å¯ç›´æ¥ä½¿ç”¨, è¿˜èµ·åˆ°äº†å‡å°‘è®¡ç®—æ—¶é—´çš„ä½œç”¨ ä½†æ˜¯ä»¥ä¸‹å‡ ç§æƒ…å†µä¸é€‚åˆä½¿ç”¨ç¼“å­˜ é¢‘ç¹ä¿®æ”¹çš„æ•°æ® - ä¸€èˆ¬æ¥è¯´æ•°æ®çš„è¯»å†™æ¯”åœ¨2:1ä»¥ä¸Šæ‰éœ€è¦åŠ å…¥ç¼“å­˜ æ²¡æœ‰çƒ­ç‚¹çš„è®¿é—® - è®¿é—®é‡ä¸å¤§çš„æ•°æ®æ²¡å¿…è¦æ”¾ç½®è¿›ç¼“å­˜ æ•°æ®ä¸ä¸€è‡´/è„è¯» - ç¼“å­˜æœ‰è¿‡æœŸæ—¶é—´, æœ‰å¯èƒ½ä¼šå‡ºç°ç¼“å­˜è¿˜æ²¡æœ‰è¿‡æœŸæ—¶å®é™…çš„æ•°æ®å·²ç»æ›´æ–°çš„æƒ…å†µ, æ‰€ä»¥ç¼“å­˜çš„è¿‡æœŸæ—¶é—´éœ€æ ¹æ®å®é™…æƒ…å†µç¡®å®š, æœ‰ä¸€ç§ç­–ç•¥æ˜¯æ•°æ®æ›´æ–°æ—¶ç«‹å³æ›´æ–°ç¼“å­˜, è¿™ä¼šå¸¦æ¥æ›´å¤šç³»ç»Ÿå¼€é”€å’Œäº‹åŠ¡ä¸€è‡´æ€§çš„é—®é¢˜ ç¼“å­˜å¯ç”¨æ€§ ç¼“å­˜çš„ç›®çš„æ˜¯æé«˜æ•°æ®è¯»å–æ€§èƒ½, ç†è®ºä¸Šè®², ç¼“å­˜æ•°æ®çš„ä¸¢å¤±æˆ–è€…ä¸å¯ç”¨ä¸ä¼šå½±å“åˆ°ç¨‹åºçš„å¤„ç† ä½†æ˜¯éšç€ä¸šåŠ¡çš„å‘å±•, ç¼“å­˜ä¼šæ‰¿æ‹…å¤§éƒ¨åˆ†çš„æ•°æ®è®¿é—®å‹åŠ›, æ­¤æ—¶æ•°æ®åº“çš„æ¶æ„æœ‰å¯èƒ½ä¼šæ›´å¤šçš„ä¾èµ–ç¼“å­˜, å¦‚æœç¼“å­˜æœåŠ¡å´©æºƒ, æ•°æ®ä»æ•°æ®åº“è¯»å–, æ•°æ®åº“å¯èƒ½ä¼šå› ä¸ºå·¨å¤§çš„å‹åŠ›è€Œå®•æœº, è¿™ç§ä¸€èˆ¬å«åšç¼“å­˜é›ªå´© ä¸ºé¿å…è¿™ç§æƒ…å†µ, æœ‰çš„æ–¹æ³•æ˜¯å¯¹ç¼“å­˜è¿›è¡Œçƒ­å¤‡, ä½†æ˜¯è¿™ç§è®¾è®¡æœ¬æœ«å€’ç½®, ç¼“å­˜æœ¬æ¥å°±ä¸åº”è¯¥å½“ä½œå¯é çš„æ•°æ®æºä½¿ç”¨ æ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯å»ºç«‹åˆ†å¸ƒå¼ç¼“å­˜æœåŠ¡é›†ç¾¤, å°†ç¼“å­˜æ•°æ®åˆ†å¸ƒå¼å­˜å‚¨. å°±ç®—å…¶ä¸­ä¸€å°å®•æœºä¹Ÿä¸ä¼šå¯¹æ•°æ®åº“äº§ç”Ÿå¤šå¤§å‹åŠ› äº§å“åœ¨è®¾è®¡ä¹‹åˆå°±éœ€è¦ä¸€ä¸ªæ˜ç¡®çš„å®šä½, ä»€ä¹ˆäº§å“å®ç°ä»€ä¹ˆåŠŸèƒ½, ä»€ä¹ˆä¸æ˜¯äº§å“çš„ç‰¹å¾, åœ¨äº§å“çš„ç”Ÿå‘½å‘¨æœŸä¸­, ä¼šæœ‰å¾ˆå¤šå›°éš¾å’Œè¯±æƒ‘æ¥ä¿®æ”¹äº§å“çš„å‘å±•æ–¹å‘. å·¦å³æ‘‡æ‘†/ä»€ä¹ˆéƒ½æƒ³åš çš„äº§å“, æœ€åå¾ˆæœ‰å¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªæ²¡æœ‰ç”Ÿå‘½åŠ›çš„å››ä¸åƒ ç¼“å­˜é¢„çƒ­ ç¼“å­˜ä¸­å­˜æ”¾çƒ­ç‚¹æ•°æ®, çƒ­ç‚¹æ•°æ®æ˜¯ç¼“å­˜ç³»ç»Ÿä½¿ç”¨LRU(æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•)å¯¹æ•°æ®ç­›é€‰æ·˜æ±°å‡ºæ¥çš„, è¿™ä¸ªè¿‡ç¨‹æ—¶é—´è¾ƒä¹…, æ–°å¯åŠ¨çš„ç¼“å­˜ç³»ç»Ÿåœ¨é‡å»ºç¼“å­˜æ•°æ®çš„è¿‡ç¨‹ä¸­, å¯¹æ€§èƒ½å’Œæ•°æ®åº“çš„æå‡éƒ½ä¸é«˜, æ‰€ä»¥æœ€å¥½åœ¨ç¼“å­˜ç³»ç»Ÿå¯åŠ¨æ—¶æŠŠçƒ­ç‚¹æ•°æ®åŠ è½½å¥½, è¿™ç§æ‰‹æ®µå« ç¼“å­˜é¢„çƒ­, æ¯”å¦‚ çœå¸‚åŒºä¸‰çº§è”åŠ¨/ç±»ç›®ä¿¡æ¯ ç­‰, å¯ä»¥åœ¨ç¼“å­˜ç³»ç»Ÿå¯åŠ¨æ—¶åŠ è½½åˆ°ç³»ç»Ÿä¸­ ç¼“å­˜ç©¿é€ å¯¹äºä¸æ°å½“çš„ä¸šåŠ¡, æˆ–è€…é­å—åˆ°äº†æ¶æ„çš„æ”»å‡», æŒç»­çš„é«˜å¹¶å‘çš„è¯·æ±‚æŸä¸ªä¸å­˜åœ¨çš„æ•°æ®, ç¼“å­˜æ²¡æœ‰è·å–åˆ°è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®, é‚£ä¹ˆä¼šåˆ°æ•°æ®åº“æ£€ç´¢, å¯¼è‡´æ•°æ®åº“å‹åŠ›å¤§, ä¸€èˆ¬çš„å¯¹ç­–æ˜¯åœ¨è¿™ä¸ªé¢‘ç¹è®¿é—®çš„æ•°æ®åˆ°è¾¾é˜€å€¼åå°†è¯¥æ•°æ®ä¹ŸåŠ å…¥ç¼“å­˜, å…¶Valueä¸ºNull Memcached https://www.memcached.org/ Memcached æ˜¯éå¸¸å‡ºåçš„åˆ†å¸ƒå¼ç¼“å­˜æ¡†æ¶, è¢«å¤§é‡ç½‘ç«™ä½¿ç”¨. ä»–çš„ä¼˜ç‚¹æ˜¯ è®¾è®¡ç®€å•/æœåŠ¡å™¨é›†ç¾¤é—´äº’ä¸é€šä¿¡/æµ·é‡æ•°æ®å¯ä¼¸ç¼© é€šä¿¡åè®® Memcachedä½¿ç”¨TCPåè®®è¿›è¡Œé€šä¿¡, å…¶åºåˆ—åŒ–åè®®æ˜¯åŸºäºæ–‡æœ¬çš„è‡ªå®šä¹‰åè®®, éå¸¸ç®€å•, å¤§æ¦‚æ˜¯ä»¥ä¸€ä¸ªå‘½ä»¤å…³é”®å­—å¼€å¤´, åé¢æ˜¯å‘½ä»¤æ“ä½œ ä¸°å¯Œçš„å®¢æˆ·ç«¯ å› å…¶é€šä¿¡åè®®å¾ˆç®€å•, å› æ­¤ä¸»æµçš„è¯­è¨€éƒ½æœ‰å¯¹åº”çš„å®¢æˆ·ç«¯, å¼€å‘å¾ˆæ–¹ä¾¿ é«˜æ€§èƒ½çš„ç½‘ç»œé€šä¿¡ æœåŠ¡ç«¯çš„é€šä¿¡æ¨¡å—åŸºäº Libevent, Libeventæ˜¯ä¸€ä¸ªæ”¯æŒäº‹ä»¶è§¦å‘çš„ç½‘ç»œé€šä¿¡åº“Â©, å…¶æœ‰ ç¨³å®š/è½»é‡/å¿«é€Ÿ ç­‰ç‰¹ç‚¹ é«˜æ•ˆçš„å†…å­˜ç®¡ç† ä½¿ç”¨å›ºå®šå†…å­˜åˆ†é…, é¿å…äº†å†…å­˜ç¢ç‰‡ç®¡ç†çš„é—®é¢˜ é›†ç¾¤æ¶æ„äº’ä¸é€šä¿¡ å…¶åˆ†å¸ƒå¼æ¶æ„, å¤šå°èŠ‚ç‚¹ä¹‹é—´äº’ä¸é€šä¿¡, ç”±å®¢æˆ·ç«¯åˆ†å¸ƒå¼ç®—æ³•æ¥ç¡®å®šç¼“å­˜å­˜æ”¾åœ¨å“ªä¸ªèŠ‚ç‚¹, å–æ—¶æ ¹æ®keyç¡®å®šå­˜å‚¨æœºå™¨å†è¿›è¡Œè·å–, æˆ‘ä»¬å¯ä»¥å°†å…¶æ¯”å–»æˆä¸€ä¸ªåœ†, æœ‰ä¸¤ä¸ªèŠ‚ç‚¹å°±ç›¸å½“äºå°†è¿™ä¸ªåœ†åˆ†ä¸¤åŠ, é€šè¿‡å®¢æˆ·ç«¯hashä¸€è‡´æ€§ç®—æ³•è®¡ç®—å‡ºæ¥keyæ˜¯å“ªä¸€ä¸ªåŒºé—´. å½“æ·»åŠ æˆ–è€…å‡å°‘æŸä¸ªèŠ‚ç‚¹, ä¹Ÿåªå½±å“è¿™ä¸ªèŠ‚ç‚¹ç›¸å…³çš„ä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ® å¼‚æ­¥æ“ä½œ ä»»ä½•å¯ä»¥æ™šç‚¹åšçš„äº‹æƒ…éƒ½åº”è¯¥æ™šç‚¹å†åš å¼‚æ­¥ä¸€èˆ¬æ­é…æ¶ˆæ¯é˜Ÿåˆ—, ä¸ä»…å¯æ”¹å–„ç½‘ç«™çš„æ‰©å±•æ€§. è¿˜å¯ä»¥æ”¹å–„ç½‘ç«™çš„æ€§èƒ½. éœ€è¦æ³¨æ„çš„æ˜¯, ç”¨æˆ·åœ¨æ¥æ”¶åˆ°è¿”å›æ—¶å¯èƒ½åªæ˜¯å…¥äº†é˜Ÿåˆ—è¿˜æœªæ‰§è¡Œå®Œæˆ, å› æ­¤ä¸šåŠ¡è¦ç›¸åº”çš„è¿›è¡Œè°ƒæ•´ ä½¿ç”¨é›†ç¾¤ å°†ä¸šåŠ¡æ­è½½åœ¨é›†ç¾¤ä¸­, ç”±è´Ÿè½½å‡è¡¡æœåŠ¡è¿›è¡Œä»»åŠ¡çš„åˆ†é…, æ¯”å¦‚æˆ‘æœ‰ä¸‰å°æœºå™¨è¿›è¡Œè´Ÿè½½å‡è¡¡, é‚£ä¹ˆæ¯å°æœºå™¨çš„å‹åŠ›åˆ™ä¸ºå…¨éƒ¨çš„ 3/1, èƒ½æœ‰æ•ˆæé«˜æ•ˆç‡å’Œå‡å°‘è´Ÿè½½ ä»£ç ä¼˜åŒ– å¤šçº¿ç¨‹ å¤šçº¿ç¨‹å¸¦æ¥çš„æ˜¯æ•ˆç‡çš„æå‡, ä½†æ˜¯éšä¹‹è€Œæ¥çš„æ˜¯BUGçš„éš¾ä»¥è°ƒè¯•å’Œçº¿ç¨‹å®‰å…¨é—®é¢˜, çº¿ç¨‹å®‰å…¨çš„è§£å†³ä¸€èˆ¬å¦‚ä¸‹ å°†å¯¹è±¡è®¾è®¡ä¸ºæ— çŠ¶æ€ ä½¿ç”¨å±€éƒ¨å¯¹è±¡ å¹¶å‘è®¿é—®èµ„æºæ—¶ä½¿ç”¨é” èµ„æºå¤ç”¨ ç³»ç»Ÿè¿è¡Œæ—¶, ä¸€å®šè¦å‡å°‘å¼€é”€å¾ˆå¤§çš„ç³»ç»Ÿèµ„æºçš„åˆ›å»ºå’Œé”€æ¯, æ¯”å¦‚ æ•°æ®åº“çš„è¿æ¥/ç½‘ç»œé€šä¿¡è¿æ¥/çº¿ç¨‹/å¤æ‚å¯¹è±¡ ç­‰, èµ„æºå¤ç”¨æœ‰ä¸¤ç§æ¨¡å¼ å•ä¾‹æ¨¡å¼ å¯¹è±¡æ±  æ•°æ®ç»“æ„ pass åƒåœ¾å›æ”¶ ç°åœ¨å¥½å¤šè¯­è¨€è‡ªå·±å¤„ç†åƒåœ¾å›æ”¶ å­˜å‚¨æ€§èƒ½ä¼˜åŒ– ä½¿ç”¨SSD(å›ºæ€ç¡¬ç›˜), ä½†æ˜¯æˆæœ¬ä¼šæé«˜","link":"/2021/09/04/website_architecture(2)/"},{"title":"å¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„-ç¬”è®°(3)","text":"ç½‘ç«™å¯ç”¨æ€§åº¦é‡ ä¸šç•Œé€šè¿‡ç”¨å¤šå°‘ä¸ª9æ¥è¡¡é‡ç½‘ç«™çš„å¯ç”¨æ€§ ç½‘ç«™ä¸å¯ç”¨æ—¶é—´ = æ•…éšœä¿®å¤æ—¶é—´ç‚¹ - æ•…éšœå‘ç°(æŠ¥å‘Š)æ—¶é—´ç‚¹ ç½‘ç«™å¹´åº¦å¯ç”¨æ€§æŒ‡æ ‡ = (1 - ç½‘ç«™ä¸å¯ç”¨æ—¶é—´ / å¹´åº¦æ€»æ—¶é—´) x 100% è¾¾åˆ°4ä¸ª9å°±å¾ˆéš¾äº†(99.99%) é«˜å¯ç”¨çš„ç½‘ç«™æ¶æ„ å…¸å‹çš„ç½‘ç«™è®¾è®¡é€šå¸¸ä¸ºä¸‰å±‚çš„æ¶æ„æ¨¡å‹, å³ åº”ç”¨å±‚/æœåŠ¡å±‚/æ•°æ®å±‚ (ä»ä¸Šåˆ°ä¸‹) å„å±‚ä¹‹é—´å…·æœ‰ç›¸å¯¹ç‹¬ç«‹æ€§ åº”ç”¨å±‚è´Ÿè´£å…·ä½“ä¸šåŠ¡é€»è¾‘çš„å¤„ç† æœåŠ¡å±‚è´Ÿè´£æä¾›å¯å¤ç”¨çš„æœåŠ¡ æ•°æ®å±‚è´Ÿè´£æ•°æ®çš„å­˜å‚¨ä¸è®¿é—® å¤§å‹ç½‘ç«™çš„åˆ†å±‚æ¶æ„åŠç‰©ç†æœåŠ¡å™¨çš„åˆ†å¸ƒå¼éƒ¨ç½²ä½¿å¾—ä½äºä¸åŒå±‚æ¬¡çš„æœåŠ¡å™¨å…·æœ‰ä¸åŒçš„å¯ç”¨æ€§, å…³é—­æœåŠ¡å™¨æˆ–è€…å®•æœºæ—¶äº§ç”Ÿçš„å½±å“ä¹Ÿä¸ä¸€æ ·. é«˜å¯ç”¨çš„è§£å†³æ–¹æ¡ˆä¹Ÿå·®å¼‚å¾ˆå¤§ åº”ç”¨å±‚ - é€šè¿‡è´Ÿè½½å‡è¡¡å°†ä¸€ç»„æœåŠ¡å™¨ç»„æˆé›†ç¾¤å¯¹å¤–æä¾›æœåŠ¡, å½“è´Ÿè½½å‡è¡¡è®¾å¤‡é€šè¿‡å¿ƒè·³ç­‰æ–¹å¼æ£€æµ‹åˆ°æŸå°æœåŠ¡å™¨ä¸å¯ç”¨æ—¶å°†å…¶ä»é›†ç¾¤åˆ—è¡¨ä¸­å‰”é™¤æ¥å®ç°é«˜å¯ç”¨ æœåŠ¡å±‚ - é€šè¿‡é›†ç¾¤æ–¹å¼å®ç°é«˜å¯ç”¨, åªæ˜¯è¿™äº›æœåŠ¡è¢«ä¸Šå±‚çš„åº”ç”¨å±‚è°ƒç”¨, åˆ†å¸ƒå¼æœåŠ¡è°ƒç”¨æ¡†æ¶ä¼šåœ¨åº”ç”¨å±‚å®¢æˆ·ç«¯å†…å®ç°è½¯ä»¶è´Ÿè½½å‡è¡¡, å¹¶é€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒå¯¹æä¾›æœåŠ¡çš„æœåŠ¡å™¨è¿›è¡Œå¿ƒè·³æ£€æµ‹, å¦‚æœåŠ¡ä¸å¯ç”¨åˆ™é€šçŸ¥å®¢æˆ·ç«¯ç¨‹åºä¿®æ”¹æœåŠ¡è®¿é—®åˆ—è¡¨, å°†ä¸å¯ç”¨çš„æœåŠ¡å™¨å‰”é™¤ æ•°æ®å±‚ - ä¸ºä¿è¯æ•°æ®ä¸ä¸¢å¤±, éœ€è¦åœ¨æ•°æ®å†™å…¥æ—¶è¿›è¡Œæ•°æ®çš„åŒæ­¥å¤åˆ¶, å°†æ•°æ®å†™å…¥åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šå®ç°å†—ä½™å¤‡ä»½. æœåŠ¡å™¨å®•æœºæ—¶åˆ‡æ¢åˆ°å¤‡ä»½æœåŠ¡å™¨ é«˜å¯ç”¨åº”ç”¨ åº”ç”¨å±‚å¤„ç†ç½‘ç«™åº”ç”¨çš„ä¸šåŠ¡é€»è¾‘, æ‰€ä»¥ä¹Ÿæœ‰äººå«ä¸šåŠ¡é€»è¾‘å±‚, åº”ç”¨çš„ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹æ˜¯åº”ç”¨åˆ°çš„æ— çŠ¶æ€æ€§ æ— çŠ¶æ€æ€§æŒ‡åº”ç”¨æœåŠ¡å™¨ä¸ä¿å­˜ä¸šåŠ¡çš„ä¸Šä¸‹æ–‡ä¿¡æ¯, è€Œæ˜¯æ ¹æ®æ¯æ¬¡è¯·æ±‚æäº¤çš„æ•°æ®è¿›è¡Œä¸šåŠ¡å¤„ç†, å¤šä¸ªæœåŠ¡å™¨ä¹‹é—´å®Œå…¨å¯¹ç­‰, è¯·æ±‚æäº¤åˆ°ä»»ä½•æœåŠ¡å™¨, å¤„ç†çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ é€šè¿‡è´Ÿè½½å‡è¡¡è¿›è¡Œæ— çŠ¶æ€æœåŠ¡çš„å¤±æ•ˆè½¬ç§» å¯¹äºæ— çŠ¶æ€æœåŠ¡æ¥è¯´, å°†æŸä¸ªè¯·æ±‚äº¤ç»™å“ªä¸ªæœåŠ¡å™¨éƒ½æ˜¯ä¸€æ ·çš„å¤„ç†ç»“æœ, é‚£ä¹ˆ, æˆ‘ä»¬å¯ä»¥é€šè¿‡æ­å»ºé›†ç¾¤æ¥è¿›è¡Œè´Ÿè½½å‡è¡¡, åŒæ—¶, å½“æŸå°æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶, è´Ÿè½½å‡è¡¡æœåŠ¡å™¨é€šè¿‡å¿ƒè·³æ£€æµ‹å‘ç°è¯¥æœåŠ¡å™¨å¼‚å¸¸, å°†å…¶ä»æä¾›æœåŠ¡çš„åˆ—è¡¨ä¸­åˆ é™¤, å› ä¸ºæœåŠ¡æ˜¯æ— çŠ¶æ€çš„æ‰€ä»¥ä¸ä¼šå½±å“æœ€ç»ˆçš„å¤„ç†ç»“æœ è´Ÿè½½å‡è¡¡å®é™…ä¸Šåœ¨åº”ç”¨å±‚èµ·åˆ°äº†é«˜å¯ç”¨çš„æ¶æ„, å› æ­¤å¥å…¨çš„æ¶æ„åº”è¯¥æ˜¯å³ä½¿æŸä¸ªæœåŠ¡è®¿é—®é‡éå¸¸å°‘, ä¸€å°æœåŠ¡å™¨è¶³å¤Ÿå¤„ç†, ä¹Ÿæœ€å¥½è‡³å°‘éƒ¨ç½²ä¸¤å°æœåŠ¡å™¨åŠ ä¸Šè´Ÿè½½å‡è¡¡æŠ€æœ¯æ„å»ºä¸€ä¸ªå°å‹çš„é›†ç¾¤ é›†ç¾¤æ¶æ„çš„Sessionç®¡ç† åº”ç”¨æœåŠ¡å™¨çš„é«˜å¯ç”¨æ¶æ„ä¸»è¦åŸºäºæœåŠ¡æ— çŠ¶æ€è¿™ä¸€ç‰¹å¾, ä½†æ˜¯å®é™…ä¸­ä¸šåŠ¡æ€»æ˜¯æœ‰çŠ¶æ€çš„, æ¯”å¦‚è¯´æœ‰çš„ç”µå•†ç½‘ç«™å¯èƒ½ä¼šæœ‰æœåŠ¡æ˜¯è´­ç‰©è½¦å•†å“çš„åŠ å‡ç­‰, è¿™ç§å¤šæ¬¡è¯·æ±‚ä¿®æ”¹ä½¿ç”¨çš„ä¸Šä¸‹æ–‡å¯¹è±¡ç§°ä¹‹ä¸ºä¼šè¯(Session), åœ¨è´Ÿè½½å‡è¡¡ä¸­, ç”±äºè´Ÿè½½å‡è¡¡æœåŠ¡ä¼šå°†è¯·æ±‚åˆ†å‘åˆ°é›†ç¾¤ä¸­çš„ä»»ä½•ä¸€å°æœåŠ¡å™¨ä¸Š, æ‰€ä»¥å¯¹Sessionçš„å¤„ç†æ¯”å•æœºå¤æ‚å¾—å¤š, ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³• Sessionå¤åˆ¶ æ—©æœŸçš„åº”ç”¨ç³»ç»Ÿä½¿ç”¨è¾ƒå¤šçš„æ˜¯åœ¨é›†ç¾¤é‡Œçš„æœåŠ¡å™¨ä¹‹é—´å¼€å¯Sessionçš„åŒæ­¥æœºåˆ¶, è¾¾åˆ°åœ¨æ¯å°æœåŠ¡å™¨ä¹‹é—´éƒ½ä¿å­˜æ‰€æœ‰ç”¨æˆ·çš„Sessionä¿¡æ¯, å³ä½¿è¯·æ±‚åˆ†é…åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¹Ÿä¸ä¼šå¯¹ç»“æœäº§ç”Ÿå½±å“ è¿™ç§æ–¹æ³•è™½ç„¶ç®€å•ç²—æš´, ä»æœ¬æœºç›´æ¥è·å–Sessionä¹Ÿæ˜¯æœ€å¿«çš„é€”å¾„, ä½†æ˜¯å¦‚æœé›†ç¾¤çš„è§„æ¨¡å˜å¤§æ—¶æœåŠ¡å™¨é—´ä»…ä»…åŒæ­¥Sessionå°±éœ€è¦å ç”¨å¾ˆå¤§çš„èµ„æºå’Œå¸¦å®½, ç³»ç»Ÿä¸å ªé‡è´Ÿ, è€Œä¸”æ¯å°æœåŠ¡å™¨éƒ½ä¿å­˜äº†è¿™ä¸ªé›†ç¾¤æ¯ä¸ªç”¨æˆ·çš„Session, ä¹Ÿå¯èƒ½ä¼šå‡ºç°å†…å­˜ä¸å¤Ÿç”¨çš„æƒ…å†µ, è€Œä¸”åŒæ­¥éœ€è¦è€—è´¹æ—¶é—´, æœ‰å¯èƒ½å‡ºç°åŒæ­¥ä¸åŠæ—¶å¯¼è‡´çš„å¼‚å¸¸æƒ…å†µ Sessionç»‘å®š è´Ÿè½½å‡è¡¡æœåŠ¡ä¸€èˆ¬è‡ªå¸¦çš„æœ‰æ ¹æ®æ¥æºåœ°å€Hashç®—æ³•æ¥å°†åŒä¸€æ¥æºçš„IPè¯·æ±‚åˆ†å‘åˆ°åŒä¸€å°æœåŠ¡å™¨, ä¹Ÿå¯ä»¥æ ¹æ®Cookieè¯†åˆ«, è¿™ä¸ªæ—¶å€™è´Ÿè½½å‡è¡¡æœåŠ¡å¿…é¡»å·¥ä½œåœ¨HTTPåè®®å±‚ä¹‹ä¸Š, è¿™æ ·é›†ç¾¤ä¸­çš„æŸä¸ªæœåŠ¡å™¨åªéœ€ä¿å­˜åˆ°è¾¾æœ¬æœºçš„Sessionå³å¯. è¿™ç§åˆè¢«ç§°ä½œ ä¼šè¯ç²˜æ» ä½†æ˜¯å¦‚æœé›†ç¾¤ä¸­çš„æŸä¸ªæœåŠ¡å™¨å®•æœºåˆ™è¯¥æœºå™¨ä¸Šé¢çš„Sessionåˆ™ä¸¢å¤±, åŸæœ‰çš„ç”¨æˆ·è¢«åˆ†é…åˆ°æ–°çš„æœåŠ¡å™¨, æ­¤æ—¶Sessionä¸¢å¤±, å¯¹ä¸šåŠ¡å°±äº§ç”Ÿäº†å½±å“ åˆ©ç”¨Cookieè®°å½•Session ä¹Ÿæœ‰æ–¹æ³•æ˜¯å°†Sessionä¿å­˜åœ¨å®¢æˆ·ç«¯ä¸­(ä»¥Cookieçš„å½¢å¼), åœ¨è¯·æ±‚æ—¶æºå¸¦çµ¦æœåŠ¡ç«¯ è¿™æ ·æ¯æ¬¡éƒ½éœ€è¦æºå¸¦Cookie, å½±å“æ€§èƒ½, åŒæ—¶æµè§ˆå™¨å¯æ‰‹åŠ¨é˜»æ­¢Cookieçš„ä¼ è¾“é€ æˆè¯·æ±‚ä¸æ­£å¸¸. SessionæœåŠ¡å™¨ æ¨èçš„æ–¹æ³•æ˜¯éƒ¨ç½²ä¸€å¥—SessionæœåŠ¡å™¨(æœ€å¥½æ˜¯é›†ç¾¤)æ¥ç®¡ç†Session, æ¯æ¬¡è¯·æ±‚è¿›å…¥ä¸šåŠ¡æœåŠ¡å™¨åæœåŠ¡å™¨æ ¹æ®é€»è¾‘å»SessionæœåŠ¡å™¨è¯·æ±‚è·å–Sessionå†è¿›è¡Œé€»è¾‘å¤„ç†å³å¯ å¯¹äºSessionæœåŠ¡å™¨, ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜(redis/â€¦)å®ç°. ä½†æ˜¯å¦‚æœå¯¹Sessionç®¡ç†æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚, æ¯”å¦‚SSO(å•ç‚¹ç™»å½•)ç­‰å¯èƒ½éœ€è¦å¼€å‘ä¸“é—¨çš„SessionæœåŠ¡å¹³å° é«˜å¯ç”¨æœåŠ¡ å¯¹äºåŸºç¡€çš„å…¬å…±æœåŠ¡, å¤§å‹ç½‘ç«™ä¸­é€šå¸¸å°†å…¶ç‹¬ç«‹å‡ºæ¥åˆ†å¸ƒå¼éƒ¨ç½²æ¥è¢«å…·ä½“çš„é€»è¾‘åº”ç”¨è¿œç¨‹è°ƒç”¨, å¯å¤ç”¨çš„æœåŠ¡ä¹Ÿæ˜¯æ— çŠ¶æ€çš„, æ‰€ä»¥å¯ä»¥ä½¿ç”¨è´Ÿè½½å‡è¡¡æŠ€æœ¯çš„å¤±æ•ˆè½¬ç§»æ¥å®ç°é«˜å¯ç”¨ åˆ†çº§ç®¡ç† åœ¨æœåŠ¡éƒ¨ç½²æ—¶, å°†æ ¸å¿ƒçš„åº”ç”¨å’ŒæœåŠ¡ä¼˜å…ˆåˆ†é…ç»™æ›´å¥½çš„ç¡¬ä»¶, åœ¨è¿ç»´è¿‡ç¨‹ä¸­ä¼˜å…ˆçº§ä¹Ÿæ›´é«˜, æ¯”å¦‚è´­ç‰©ç½‘ç«™, ä»˜æ¬¾æ¯”è¯„è®ºä¼˜å…ˆçº§æ›´é«˜ åŒæ—¶åœ¨æœåŠ¡çš„éƒ¨ç½²ä¸Šä¹Ÿè¿›è¡Œå¿…è¦çš„éš”ç¦», é¿å…å‘ç”Ÿè¿é”ååº”. æ¯”å¦‚å°†ä½ä¼˜å…ˆçº§çš„æœåŠ¡éƒ¨ç½²åœ¨è™šæ‹Ÿæœºä¸Š, é«˜ä¼˜å…ˆçº§çš„éƒ¨ç½²åœ¨ç‰©ç†æœºä¸Šç­‰ è¶…æ—¶è®¾ç½® è®¾ç½®è°ƒç”¨çš„è¶…æ—¶, å¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…è¢«è°ƒç”¨çš„æœåŠ¡æ²¡æœ‰å“åº”, æ­¤æ—¶é€šä¿¡æ¡†æ¶åº”æŠ›å‡ºå¼‚å¸¸, æ ¹æ®æœåŠ¡è°ƒåº¦ç­–ç•¥é‡è¯•æ¼·è¯·æ±‚è½¬ç§» å¼‚æ­¥è°ƒç”¨ å¯¹äºæŸäº›ä¸šåŠ¡, æ¯”å¦‚æ³¨å†Œ, èƒŒåå¯èƒ½éœ€è¦å¤šæ­¥æ“ä½œ, æ¯”å¦‚åƒç”¨æˆ·é‚®ç®±å‘é€æ³¨å†ŒæˆåŠŸé‚®ä»¶, å¼€é€šå¯¹åº”æƒé™ç­‰, å…¶ä¸­é‚®ä»¶æœåŠ¡ä¸€èˆ¬æ˜¯ä¸å…·æœ‰åŒæ­¥æ€§çš„. æ­¤æ—¶åº”å°†é‚®ä»¶æœåŠ¡è®¾ç½®ä¸ºå¼‚æ­¥è°ƒç”¨, ä¸å¯¹æ•´ä½“çš„æœåŠ¡äº§ç”Ÿå½±å“ å¹¶ä¸æ˜¯æ‰€æœ‰çš„ä¸šåŠ¡éƒ½èƒ½é€šè¿‡å¼‚æ­¥æ¥å®Œæˆ, å› æ­¤æ˜¯å¦ä½¿ç”¨éœ€è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡æ¥åˆ¤æ–­ æœåŠ¡é™çº§ åœ¨ç½‘ç«™è®¿é—®çš„é«˜å³°æœŸ, æœåŠ¡å¯èƒ½ä¼šå› ä¸ºå¤§é‡çš„è¯·æ±‚è€Œå¯¼è‡´æ€§èƒ½çš„ä¸‹é™, ä¸¥é‡æ—¶å¯èƒ½ä¼šå¼•å‘å®•æœº. æ‰€ä»¥ä¸ºäº†ä¿è¯é«˜å³°æ—¶æ ¸å¿ƒåº”ç”¨å’ŒæœåŠ¡çš„æ­£å¸¸è¿è¡Œ, éœ€è¦å¯¹æœåŠ¡è¿›è¡Œé™çº§, ä¸€èˆ¬æœ‰æ‹’ç»æœåŠ¡å’Œå…³é—­æœåŠ¡ä¸¤ç§ æ‹’ç»æœåŠ¡ æ‹’ç»ä½ä¼˜å…ˆçº§çš„åº”ç”¨è°ƒç”¨, å‡å°‘è°ƒç”¨å¹¶å‘æ•°é‡, ç¡®ä¿æ ¸å¿ƒåº”ç”¨çš„æ­£å¸¸ä½¿ç”¨. å½“è¾¾åˆ°å¹¶å‘æ•°é‡é™åˆ¶æ—¶æ–°è¿›å…¥çš„è¯·æ±‚è¿”å›é”™è¯¯ç»™å®¢æˆ·ç«¯. æˆ–è€…æ˜¯éšæœºæ‹’ç»è¯·æ±‚, éšæœºbanæ‰ä¸€äº›è¯·æ±‚ç»™å®¢æˆ·ç«¯, Twitterå–œæ¬¢è¿™æ · å…³é—­åŠŸèƒ½ ç›´æ¥å°†æœåŠ¡çš„å…¥å£å…³é—­, æˆ–åœ¨æœåŠ¡å†…éƒ¨å…³é—­, è®©æ‰€æœ‰ç”¨æˆ·éƒ½æ— æ³•è®¿é—®è¯¥åŠŸèƒ½, æ·˜å®åœ¨åŒ11æ—¶ä¼šå…³é—­ è¯„ä»·/ç¡®è®¤æ”¶è´§ ç­‰åŠŸèƒ½ä¿è¯æ ¸å¿ƒæœåŠ¡é¡ºåˆ©å®Œæˆ å¹‚ç­‰æ€§è®¾è®¡ å½“åº”ç”¨è°ƒç”¨æœåŠ¡å¤±è´¥æ—¶, ä¼šå°†è°ƒç”¨è¯·æ±‚é‡æ–°å‘é€åˆ°å…¶ä»–æœåŠ¡å™¨, ä½†æ˜¯è¿™ä¸ªè°ƒç”¨å¤±è´¥æœ‰å¯èƒ½å¤±è´¥åœ¨äº†ä¸­é—´ä¸€æ­¥, æœ‰å¯èƒ½é€»è¾‘å·²ç»èµ°äº†ä¸€åŠ, æ­¤æ—¶å‘é€åˆ°å…¶ä»–æœåŠ¡å™¨, å…¶ä»–æœåŠ¡å™¨é‡æ–°æ‰§è¡Œæµç¨‹å¯èƒ½ä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„é—®é¢˜ ä½†æ˜¯æœåŠ¡çš„é‡å¤è°ƒç”¨æ˜¯æ— æ³•é¿å…çš„, åº”ç”¨å±‚ä¹Ÿä¸éœ€è¦å…³å¿ƒæœåŠ¡æ˜¯å¦çœŸçš„å¤±è´¥äº†, åªè¦æ²¡æœ‰æ¥æ”¶åˆ°è°ƒç”¨æˆåŠŸçš„å“åº”å³è®¤ä¸ºå¤±è´¥, å› æ­¤å¿…é¡»åœ¨æœåŠ¡å±‚ä¿è¯æœåŠ¡é‡å¤è°ƒç”¨å’Œè°ƒç”¨ä¸€æ¬¡äº§ç”Ÿçš„ç»“æœç›¸åŒ, å³æœåŠ¡å…·æœ‰ å¹‚ç­‰æ€§ é«˜å¯ç”¨çš„æ•°æ® æ•°æ®æ˜¯æœ€å®è´µçš„ç‰©è´¨èµ„äº§, ä¿æŠ¤ç½‘ç«™çš„æ•°æ®å°±æ˜¯ä¿æŠ¤ç½‘ç«™çš„å‘½è„‰ å› æ­¤æ•°æ®çš„å­˜å‚¨å’Œé«˜å¯ç”¨å¯¹ç½‘ç«™å¾ˆé‡è¦, å¯¹äºæ•°æ®çš„ä¿å­˜, ä¸€èˆ¬ä½¿ç”¨ä¸“é—¨çš„æ•°æ®å­˜å‚¨æœåŠ¡å™¨, å½“è¿™ä¸ªæ•°æ®å­˜å‚¨æœåŠ¡å™¨å®•æœºæ—¶, æ•°æ®çš„è®¿é—®è¯·æ±‚ä¸€èˆ¬ä¸èƒ½ä»»æ„çš„åˆ‡æ¢åˆ°å…¶ä»–çš„æ•°æ®æœåŠ¡å™¨ä¸Š å¯¹äºæ•°æ®å­˜å‚¨æ¥è®², ä¸€èˆ¬ä½¿ç”¨æ•°æ®çš„å¤‡ä»½å’Œå¤±æ•ˆè½¬ç§»æœºåˆ¶, æ•°æ®å¤‡ä»½å³ä¿è¯ä¸€ä»½æ•°æ®æœ‰å¤šä¸ªå‰¯æœ¬, ä»»æ„å‰¯æœ¬çš„å¤±æ•ˆéƒ½ä¸ä¼šå¯¼è‡´æ•°æ®çš„æ°¸ä¹…ä¸¢å¤±. ä»è€Œå®ç°æ•°æ®å®Œå…¨çš„æŒä¹…åŒ–, å¤±æ•ˆè½¬ç§»å³å½“ä¸€ä¸ªæ•°æ®å‰¯æœ¬ä¸å¯è®¿é—®æ—¶, å¯ä»¥å¿«é€Ÿåˆ‡æ¢è®¿é—®æ•°æ®çš„å…¶ä»–å‰¯æœ¬ä¿è¯ç³»ç»Ÿå¯ç”¨. å¯¹äºç¼“å­˜æœåŠ¡æ¥è¯´, ä¸šå†…æœ‰ä¸¤ç§è§‚ç‚¹, ä¸€ç§æ˜¯éšç€ç¼“å­˜çš„å¤§é‡ä½¿ç”¨, ç¼“å­˜çš„æ•°æ®ä¹Ÿæˆä¸ºäº†ç½‘ç«™æ•°æ®çš„ä¸€éƒ¨åˆ†, å› æ­¤ç¼“å­˜ä¹Ÿéœ€è¦å’Œæ•°æ®ä¸€æ ·å®ç°é«˜å¯ç”¨ ä¸€ç§æ˜¯ç¼“å­˜éƒ¨ç½²æ•°æ®å­˜å‚¨æœåŠ¡, ç¼“å­˜æœåŠ¡å™¨å®•æœºå¼•å‘ç¼“å­˜æ•°æ®ä¸¢å¤±å¯¼è‡´æœåŠ¡å™¨å‹åŠ›é«˜åº”è¯¥é€šè¿‡å…¶ä»–æ‰‹æ®µè§£å†³, å› ä¸ºç¼“å­˜æœ¬æ¥å°±æ˜¯åªä½œç”¨äºæé«˜è®¿é—®é€Ÿåº¦, è€Œä¸æ˜¯å­˜å‚¨æ•°æ® CAPåŸç† åœ¨è®¨è®ºé«˜å¯ç”¨æ•°æ®æœåŠ¡æ¶æ„ä¹‹å‰, å¿…é¡»å…ˆçŸ¥é“, ä¸ºäº†ä¿è¯æ•°æ®çš„é«˜å¯ç”¨, ç½‘ç«™é€šå¸¸ä¼šç‰ºç‰²ä¸€å®šçš„æ•°æ®ä¸€è‡´æ€§ ä»€ä¹ˆæ˜¯é«˜å¯ç”¨? æ•°æ®æŒä¹…æ€§ ä¿è¯æ•°æ®å¯ä»¥æŒä¹…çš„å­˜å‚¨, åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šä¸¢å¤±æ•°æ®, å³åœ¨å†™å…¥æ•°æ®æ—¶å†™å…¥åˆ°æŒä¹…æ€§çš„å­˜å‚¨ç¡¬ä»¶ä¸­, åŒæ—¶å°†æ•°æ®å¤‡ä»½åˆ°å¤šä¸ªå‰¯æœ¬ä¸­, å­˜æ”¾åœ¨ä¸åŒçš„ç‰©ç†ç¡¬ä»¶ä¸Šä¿è¯æ•°æ®ä¸ä¸¢å¤± æ•°æ®å¯è®¿é—®æ€§ å¦‚æœä¸€ä¸ªæ•°æ®å­˜å‚¨è®¾å¤‡æŸå, éœ€è¦å°½å¿«å°†æ•°æ®è®¿é—®åˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªå­˜å‚¨è®¾å¤‡ä¸Š, åœ¨åˆ‡æ¢æœŸé—´, è¯¥æ•°æ®æ— æ³•è¢«è®¿é—® æ•°æ®ä¸€è‡´æ€§ åœ¨æ•°æ®æœ‰å¤šä¸ªå‰¯æœ¬çš„æƒ…å†µä¸‹, å¦‚æœç½‘ç»œå‡ºç°æ•…éšœ, å¯¼è‡´éƒ¨åˆ†å‰¯æœ¬æ•°æ®å†™å…¥æˆåŠŸ, éƒ¨åˆ†å‰¯æœ¬å¤±è´¥, å°±ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜. CAPçš„Cä¸ºæ•°æ®ä¸€è‡´æ€§, Aä¸ºæ•°æ®å¯ç”¨æ€§, Pä¸ºåˆ†åŒºè€å—æ€§(è·¨ç½‘ç»œåˆ†åŒºçš„ä¼¸ç¼©æ€§) éœ€è¦çŸ¥é“çš„æ˜¯, CAPä¸å¯èƒ½é¢é¢ä¿±åˆ° å…·ä½“æ¥è¯´, æ•°æ®ä¸€è‡´æ€§åˆ†ä¸ºä¸‹é¢å‡ ç§ æ•°æ®å¼ºä¸€è‡´æ€§ å„ä¸ªå‰¯æœ¬çš„æ•°æ®åœ¨ç‰©ç†å­˜å‚¨ä¸­æ€»æ˜¯ä¸€è‡´çš„, æ•°æ®çš„æ›´æ–°æ“ä½œç»“æœå’Œæ“ä½œå“åº”æ€»æ˜¯ä¸€è‡´çš„, å³æ“ä½œå“åº”é€šçŸ¥æ›´æ–°å¤±è´¥æ—¶æ•°æ®ä¸€å®šæ²¡æœ‰æ›´æ–°, è€Œä¸æ˜¯å¤„äºä¸ç¡®å®šçš„çŠ¶æ€ æ•°æ®ç”¨æˆ·ä¸€è‡´ æ•°æ®åœ¨ç‰©ç†å­˜å‚¨ä¸­çš„å„ä¸ªå‰¯æœ¬çš„æ•°æ®ä¸ä¸€å®šæ˜¯ä¸€è‡´çš„, ä½†æ˜¯ç”¨æˆ·è®¿é—®æ—¶é€šè¿‡çº é”™å’Œæ ¡éªŒæœºåˆ¶, å¯ä»¥ç¡®å®šä¸€ä¸ªä¸€è‡´çš„æ­£ç¡®çš„æ•°æ®è¿”å›ç»™ç”¨æˆ· æ•°æ®æœ€ç»ˆä¸€è‡´ è¿™æ˜¯æ•°æ®ä¸€è‡´æ€§ä¸­æ¯”è¾ƒå¼±çš„ä¸€ç§, å³ç‰©ç†å­˜å‚¨çš„æ•°æ®å¯èƒ½æ˜¯ä¸ä¸€è‡´çš„, ç»ˆç«¯ç”¨æˆ·è®¿é—®åˆ°çš„æ•°æ®ä¹Ÿå¯èƒ½æ˜¯ä¸ä¸€è‡´çš„, ä½†æ˜¯ç³»ç»Ÿç»è¿‡ä¸€æ®µæ—¶é—´çš„è‡ªæˆ‘ä¿®æ­£åæ•°æ®ä¼šæœ€ç»ˆä¸€è‡´ å› ä¸ºç°å®æƒ…å†µé‡Œå¾ˆéš¾æ»¡è¶³æ•°æ®çš„å¼ºä¸€è‡´æ€§, æ‰€ä»¥ç½‘ç«™é€šå¸¸ä¼šç»¼åˆæˆæœ¬/æŠ€æœ¯/ä¸šåŠ¡åœºæ™¯ç­‰æ¡ä»¶ç»¼åˆè€ƒè™‘æ¥ä¿éšœæ•°æ®çš„æ­£ç¡®æ€§ æ•°æ®å¤‡ä»½ æ•°æ®å¤‡ä»½æ˜¯æœ€æœ‰æ•ˆçš„æ•°æ®ä¿æŠ¤æ‰‹æ®µ, æ—©æœŸçš„æ•°æ®å¤‡ä»½æ‰‹æ®µæ˜¯å†·å¤‡ä»½, å³å®šæœŸå°†æ•°æ®å¤åˆ¶åˆ°æŸç§ç‰©ç†çš„å­˜å‚¨ä»‹è´¨ä¸­å¹¶å­˜æ¡£ä¿ç®¡, å¦‚æœç³»ç»Ÿå­˜å‚¨æŸåæ³½ä»å†·å¤‡ä»½çš„æ•°æ®ä¸­æ¢å¤ å†·å¤‡çš„ä¼˜ç‚¹æ˜¯ç®€å•å’Œå»‰ä»·, æˆæœ¬å’ŒæŠ€æœ¯éš¾åº¦éƒ½è¾ƒä½, ç¼ºç‚¹åˆ™æ˜¯æ— æ³•ä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§, ç”±äºæ•°æ®æ˜¯å®šæœŸå¤åˆ¶, å¯¼è‡´å¤‡ä»½ä¸­çš„ç«é€Ÿå¥æ°¸è¿œæ¯”ç³»ç»Ÿçš„æ•°æ®é™ˆæ—§. å¦‚æœç³»ç»Ÿçš„æ•°æ®ä¸¢å¤±, é‚£ä¹ˆä»ä¸Šæ¬¡å¤‡ä»½åˆ°ç³»ç»Ÿæ•°æ®æŸåä¸­çš„æ•°æ®ä¼šæ°¸ä¹…ä¸¢å¤±, ä¸èƒ½ä»å¤‡ä»½ä¸­æ¢å¤. åŒæ—¶ä¹Ÿæ— æ³•ä¿è¯æ•°æ®å¯ç”¨æ€§, è€Œä¸”ä»å†·å¤‡ä»½ä¸­æ¢å¤æ•°æ®éœ€è¦æ—¶é—´è¾ƒé•¿, å¹¶ä¸”æ¢å¤ä¸­æ—¶æ— æ³•è®¿é—®æ•°æ®, ç³»ç»Ÿä¹Ÿä¸å¯ç”¨ å› æ­¤, æ•°æ®çš„å†·å¤‡ä»½ä½œä¸ºä¸€ç§ä¼ ç»Ÿçš„æ–¹æ¡ˆ, ä¾ç„¶åœ¨ä½¿ç”¨, ä½†æ˜¯è¿˜éœ€è¦çƒ­å¤‡ä»½åŒç®¡é½ä¸‹ä»¥æé«˜æ•°æ®çš„å¯ç”¨æ€§ çƒ­å¤‡ä»½å¯åˆ†ä¸ºä¸¤ç§: å¼‚æ­¥çƒ­å¤‡ä»½ä¸åŒæ­¥çƒ­å¤‡ä»½ å¼‚æ­¥çƒ­å¤‡ å¼‚æ­¥æŒ‡å¤šä»½æ•°æ®å‰¯æœ¬çš„å†™å…¥æ“ä½œå¼‚æ­¥å®Œæˆ, åº”ç”¨ç¨‹åºæ”¶åˆ°æ•°æ®æœåŠ¡ç³»ç»Ÿè¿”å›æˆåŠŸæ—¶, å®é™…ä¸Šåªå†™æˆäº†ä¸€ä»½, ç„¶åå†å¼‚æ­¥çš„åŒæ­¥åˆ°å…¶ä»–å‰¯æœ¬ä¸­(ä¹Ÿæœ‰å¯èƒ½ä¼šå¤±è´¥) åœ¨å¼‚æ­¥çš„æƒ…å†µä¸‹, å­˜å‚¨æœåŠ¡å™¨åˆ†ä¸ºä¸»å­˜å‚¨å’Œä»å­˜å‚¨, æ­£å¸¸æƒ…å†µä¸‹åº”ç”¨åªé“¾æ¥ä¸»å­˜å‚¨æœåŠ¡å™¨, æ•°æ®å†™å…¥æ—¶å†™å…¥åˆ°ä¸»å­˜å‚¨ä¸­, ç„¶åè¿”å›æˆåŠŸ, å†å¼‚æ­¥çš„åŒæ­¥åˆ°ä»å­˜å‚¨æœåŠ¡å™¨ä¸­ åŒæ­¥çƒ­å¤‡ æ¯ä»½æ•°æ®å‰¯æœ¬åŒæ—¶å†™å…¥æˆåŠŸåå†è¿”å›æˆåŠŸ, ä¹Ÿæœ‰å¯èƒ½å‡ºç°å†™å…¥å¤±è´¥å…¶å®å·²ç»æœ‰å‡ ä¸ªæˆåŠŸçš„æƒ…å†µ ä¸ºäº†æé«˜é€Ÿåº¦, åº”ç”¨ç¨‹åºåœ¨æ¥æ”¶åˆ°æŒ‡ä»¤ååŒæ—¶å‘å¤šä¸ªå­˜å‚¨æœåŠ¡å™¨å†™å…¥æ•°æ®, ç­‰å¾…æ‰€æœ‰å­˜å‚¨æœåŠ¡å™¨éƒ½è¿”å›æˆåŠŸåå†é€šçŸ¥ç¨‹åºå†™å…¥æˆåŠŸ æ­¤ç§æƒ…å†µä¸‹, å­˜å‚¨æœåŠ¡å™¨ä¹‹é—´æ²¡æœ‰ä¸»æ¬¡ä¹‹åˆ†, å®Œå…¨å¯¹ç­‰, ä¾¿äºç®¡ç†å’Œç»´æŠ¤. å¤±æ•ˆè½¬ç§» è‹¥æ•°æ®æœåŠ¡å™¨é›†ç¾¤ä¸­çš„å…¶ä¸­ä¸€ä¸ªæœåŠ¡å™¨å®•æœº, é‚£ä¹ˆåº”ç”¨ç¨‹åºé’ˆå¯¹è¿™ä¸ªæœåŠ¡å™¨çš„æ‰€æœ‰è¯»å†™æ“ä½œéƒ½éœ€è¦é‡æ–°è·¯ç”±åˆ°å…¶ä»–çš„æœºå™¨, ä¿è¯æ•°æ®è®¿é—®ä¸å¤±è´¥, è¿™ä¸ªè¿‡ç¨‹å«åšå¤±æ•ˆè½¬ç§», å¤±æ•ˆè½¬ç§»ä¸€èˆ¬åˆ†ä¸‹é¢å‡ æ­¥ å¤±æ•ˆç¡®è®¤ ç³»ç»Ÿé¦–å…ˆè¦ç¡®è®¤è¿™ä¸ªæœåŠ¡å™¨æ˜¯å¦å®•æœº, å¤§å¤šæ˜¯æœ‰ä¸¤ç§: å¿ƒè·³æ£€æµ‹å’Œåº”ç”¨ç¨‹åºè®¿é—®å¤±è´¥æŠ¥å‘Š ä¸€èˆ¬çš„, å¦‚æœåº”ç”¨ç¨‹åºæŠ¥å‘Šè®¿é—®å¤±è´¥, æ§åˆ¶ä¸­å¿ƒè¿˜éœ€è¦å‘é€ä¸€æ¬¡å¿ƒè·³è¿›è¡Œç¡®è®¤, é¿å…ä¸€æ¬¡é”™è¯¯çš„åˆ¤æ–­å¯¼è‡´è§¦å‘å¤±æ•ˆè½¬ç§», å› ä¸ºå¤±æ•ˆè½¬ç§»è¿‡ç¨‹å¤æ‚ è®¿é—®è½¬ç§» ç¡®è®¤æŸå°æœåŠ¡å™¨å®•æœºå, å°±éœ€è¦å°†æ•°æ®è¯»å†™çš„è®¿é—®è¯·æ±‚é‡æ–°è·¯ç”±åˆ°å…¶ä»–æ­£å¸¸çš„æœåŠ¡å™¨ä¸Š, å¦‚æœå­˜å‚¨æœåŠ¡å™¨ä¹‹é—´å®Œå…¨å¯¹ç­‰, å…¶ä¸­ä¸€å°å®•æœºå¯æ ¹æ®é…ç½®é‡æ–°åˆ‡æ¢åˆ°å¯¹ç­‰çš„æœåŠ¡å™¨ä¸Š. å¦‚æœå­˜å‚¨ä¸å¯¹ç­‰, åˆ™éœ€è¦é‡æ–°è®¡ç®—å‡ºå¯¹ç­‰çš„è·¯ç”±é€‰æ‹©å­˜å‚¨æœåŠ¡å™¨ æ•°æ®æ¢å¤ æŸå°æœåŠ¡å™¨å®•æœºå, æ•°æ®å­˜å‚¨çš„å‰¯æœ¬æ•°é‡ -1, åº”å½“åœ¨åç»­å°†å‰¯æœ¬çš„æ•°é‡æ¢å¤ä¸Š, æ‰èƒ½ä¿è¯è®¿é—®è½¬ç§» é«˜å¯ç”¨çš„ç½‘ç«™è½¯ä»¶è´¨é‡ä¿è¯ åœ¨ç½‘ç«™çš„å®è·µä¸­, é™¤äº†ç¡¬ä»¶å¯èƒ½å¯¼è‡´çš„é£é™©å¤–, è¿˜æœ‰è½¯ä»¶æœ¬èº«çš„é—®é¢˜ ç½‘ç«™å‘å¸ƒ ç½‘ç«™é€šå¸¸éœ€è¦ä¿è¯ 7X24 çš„é«˜å¯ç”¨è¿è¡Œ, åŒæ—¶ç½‘ç«™éœ€è¦ä¸æ–­çš„å‘å¸ƒæ–°åŠŸèƒ½æ¥å¸å¼•ç”¨æˆ·ä»¥ç»´æŒè¿è¥, å¾ˆå¤šç½‘ç«™éœ€è¦ä¸€å‘¨å‘å¸ƒä¸€åˆ°ä¸¤ä¸ªç‰ˆæœ¬, åœ¨åˆšä¸Šçº¿çš„æ—¶æœŸå¯èƒ½æ›´åŠ çš„é¢‘ç¹ ä¸ç®¡å‘å¸ƒçš„åŠŸèƒ½æ˜¯ä¿®æ”¹äº†ä¸€ä¸ªæŒ‰é’®å¸ƒå±€è¿˜æ˜¯å¢åŠ ä¸€ä¸ªä¸šåŠ¡, éƒ½éœ€è¦å…³é—­åŸæœ‰çš„åº”ç”¨åœ¨é‡æ–°éƒ¨ç½²æ–°çš„åº”ç”¨å†å¯åŠ¨, ç›¸å½“äºç»™é£è¡Œä¸­çš„é£æœºæ›´æ¢ä¸€ä¸ªå¼•æ“, æ—¢ä¸èƒ½è®©é£æœºæœ‰å‰§çƒˆçš„æ™ƒåŠ¨(å½±å“ç”¨æˆ·ä½“éªŒ), ä¹Ÿä¸èƒ½è®©é£æœºé™è½(åœæœºç»´æŠ¤), ä¹Ÿä¸èƒ½è®©é£æœºå æ¯(å®•æœº) ç½‘ç«™çš„å‘å¸ƒçš„è¿‡ç¨‹å…¶å®å’Œç½‘ç«™çš„æœåŠ¡å™¨å®•æœºæ•ˆæœä¸€è‡´, å¯¹å…¶ç³»ç»Ÿå¯ç”¨æ€§çš„å½±å“ä¹Ÿå·®ä¸å¤š, æ‰€ä»¥åœ¨è®¾è®¡ä¹‹åˆå°±éœ€è¦è€ƒè™‘æœåŠ¡å™¨å®•æœºå…¶å®ä¸æ˜¯æ¦‚ç‡ä¸Šçš„ä¸€å¹´ä¸€ä¸¤æ¬¡, è€Œæ˜¯å¿«é€Ÿè¿­ä»£é€ æˆçš„ä¸€å‘¨ä¸€ä¸¤æ¬¡, é‚£ä¹ˆç”¨æˆ·å¯ä»¥æ¥å—ä¸€å‘¨ä¸€ä¸¤æ¬¡çš„å®•æœºå—? å¯¹äºç½‘ç«™çš„å‘å¸ƒæ¥è¯´, åœ¨å‘å¸ƒä¹‹å‰è‚¯å®šå¯ä»¥æå‰é¢„çŸ¥åˆ°æœåŠ¡å™¨ä¼šå®•æœº, æ‰€ä»¥é’ˆå¯¹å‘å¸ƒ, æˆ‘ä»¬å¯ä»¥é¢„å…ˆåˆ¶å®šå¥½æµç¨‹æ¥å°½é‡å‡å°‘å¯¹ç”¨æˆ·çš„å½±å“ ä¸€åŠé‡‡ç”¨åˆ†æ‰¹æ›´æ–°çš„ç­–ç•¥, ä¸€æ¬¡æ›´æ–°ä¸€å°æ‰¹æœåŠ¡å™¨, æ›´æ–°å®Œæˆåå†å°†å…¶é‡æ–°åŠ å…¥åˆ°è´Ÿè½½å‡è¡¡ä¸­ä¾›ä½¿ç”¨ è‡ªåŠ¨åŒ–æµ‹è¯• ä»£ç åœ¨å‘å¸ƒåˆ°çº¿ä¸Šä¹‹å‰éœ€è¦è¿›è¡Œä¸¥æ ¼çš„æµ‹è¯•, æµ‹è¯•ä¸€èˆ¬éœ€è¦çš„æ—¶é—´å’ŒäººåŠ›è¾ƒå¤š, æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•æ¥å‡å°‘ä¸€äº›äººå·¥çš„å·¥ä½œé‡ ç›®å‰å¤§éƒ¨åˆ†ç½‘ç«™éƒ½é€‚ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•æŠ€æœ¯, æ¯”å¦‚ç½‘ç«™ç«¯ä½¿ç”¨ Selenium æŠ€æœ¯æ¨¡æ‹Ÿè®¿é—®å’Œç‚¹å‡», å¤§å‹ç½‘ç«™ä¹Ÿä¼šè‡ªå·±å¼€å‘æµ‹è¯•å·¥å…· é¢„å‘å¸ƒéªŒè¯ åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•å’Œæµ‹è¯•äººå‘˜æµ‹è¯•å®Œæˆå, è¿˜éœ€è¦è¿›è¡Œé¢„å‘å¸ƒéªŒè¯, å› ä¸ºçº¿ä¸Šç¯å¢ƒå¤šç§å¤šæ ·, å¹¶ä¸èƒ½ä¿è¯ä¸€å®šä¸å‡ºé—®é¢˜, æ‰€ä»¥ä¹Ÿéœ€è¦é¢„å‘å¸ƒéªŒè¯çš„æ­¥éª¤ åœ¨ç½‘ç«™å‘å¸ƒæ—¶, å¹¶ä¸æ˜¯ç›´æ¥å‘å¸ƒåˆ°çº¿ä¸ŠæœåŠ¡å™¨, è€Œæ˜¯å…ˆå‘å¸ƒåˆ°é¢„å‘å¸ƒæœåŠ¡å™¨, ç”±å¼€å‘å·¥ç¨‹å¸ˆå’Œæµ‹è¯•å·¥ç¨‹å¸ˆè¿›è¡ŒéªŒè¯, å³æ‰§è¡Œä¸€äº›å…¸å‹çš„ä¸šåŠ¡æµç¨‹, ç¡®å®šæ— é—®é¢˜å†å‘å¸ƒ é¢„å‘å¸ƒæœåŠ¡å™¨åº”ä¸æ­£å¼æœåŠ¡å™¨ä¸€è‡´, å”¯ä¸€çš„ä¸åŒå°±æ˜¯é¢„å‘å¸ƒæœåŠ¡å™¨æ— æ³•è¢«å¤–ç½‘ç”¨æˆ·è®¿é—® å› ä¸ºé¢„å‘å¸ƒç¯å¢ƒä¸æ­£å¼ç¯å¢ƒè¿æ¥çš„åŒä¸€ä¸ªæ•°æ®åº“, ä¸€äº›æ“ä½œå¯èƒ½ä¼šå¼•èµ·æ­£å¼ç¯å¢ƒçš„æ•°æ®å‡ºç°é—®é¢˜, å› æ­¤å¿…é¡»æ³¨æ„ ä»£ç æ§åˆ¶ å¯¹äºå¤§å‹ç½‘ç«™, æ ¸å¿ƒåº”ç”¨ç³»ç»Ÿå’Œå…¬ç”¨ä¸šåŠ¡ç³»ç»Ÿæ¶‰åŠåˆ°å¤šä¸ªå›¢é˜Ÿå’Œå¼€å‘å·¥ç¨‹å¸ˆ, å¾ˆå¤§æ¦‚ç‡ä¼šä¸€ä¸ªé¡¹ç›®ç”±å¤šä¸ªå›¢é˜Ÿå‚ä¸çš„æƒ…å†µ, å¦‚æœä»£ç æ§åˆ¶ç¯èŠ‚å‡ºç°é—®é¢˜ä¼šå¯¼è‡´ç³»ç»Ÿæ•…éšœ ç½‘ç«™ä»£ç æ§åˆ¶æ ¸å¿ƒæ˜¯å¦‚ä½•è¿›è¡Œä»£ç ç®¡ç†, å³èƒ½ä¿è¯ä»£ç ç¨³å®šåˆèƒ½ä¿è¯ä¸åŒå›¢é˜Ÿç›´æ¥å¼€å‘äº’ä¸å½±å“ ä¸€èˆ¬çš„ä½¿ç”¨GITæ¥è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ ä¸€èˆ¬ä½¿ç”¨ git flow çš„å½¢å¼æ¥è¿›è¡Œç‰ˆæœ¬ç®¡ç† è‡ªåŠ¨å‘å¸ƒ ç½‘ç«™çš„ç‰ˆæœ¬å‘å¸ƒé¢‘ç¹, å‘å¸ƒè¿‡ç¨‹éœ€è¦å¾ˆå¤šå›¢é˜Ÿä¸€èµ·åˆä½œ, é¦–å…ˆåœ¨å‘å¸ƒå‰å¯èƒ½ä¼šå‡ºç°ä»£ç å†²çª, å…¶æ¬¡, å„ä¸ªå›¢é˜Ÿä¹‹é—´çš„é€»è¾‘ä¹Ÿå¯èƒ½å‡ºç°äº†å˜åŒ–, å‘å¸ƒåˆç›¸å½“äºä¸€æ¬¡å®•æœºäº‹æ•…, å› æ­¤ç½‘ç«™çš„å‘å¸ƒè¿‡ç¨‹é™©è±¡ç¯ç”Ÿ ä¸€èˆ¬çš„ä¼šå°†æ›´æ–°æ—¥æœŸæ”¾åœ¨å‘¨ä¸‰æˆ–å‘¨å››, è¿™æ˜¯å› ä¸ºå‘å¸ƒä¹‹å‰çš„æ—¶é—´å¯ä»¥ç”¨æ¥å‡†å¤‡, å‘å¸ƒåç•™æœ‰ä¸€åˆ°ä¸¤å¤©æ—¶é—´å¯ä»¥ä¿®å¤é—®é¢˜ æœ‰äººæå‡ºäº†ä¸€ä¸ª ç«è½¦å‘å¸ƒæ¨¡å‹ ,å³å°†æ¯ä¸€æ¬¡å‘å¸ƒéƒ½çœ‹ä½œæ˜¯ä¸€æ¬¡ç«è½¦æ—…è¡Œ, æ¯ä¸ªä¿®æ”¹çš„åŠŸèƒ½ç‚¹è§†ä½œæ—…è¡Œé—´çš„ç«™å°, å‘å¸ƒæ—¶å¯¹æ¯ä¸€ç«™éƒ½è¿›è¡Œæ£€æŸ¥, ä¸é€šè¿‡çš„åˆ™ä¸å‘è½¦ä¸Šè£…è½½, ç¡®ä¿åˆ°è¾¾ç»ˆç‚¹æ—¶è½¦ä¸Šéƒ½æ˜¯é€šè¿‡æ£€æŸ¥çš„åŠŸèƒ½ ç„¶è€Œç†æƒ³å¾ˆç¾å¥½, ç°å®ä¸­æœ‰å¯èƒ½ä¼šå‡ºç°æ‰€æœ‰éƒ½æœ‰é—®é¢˜çš„ç°è±¡, æˆ–è€…æŸä¸ªåŠŸèƒ½ç‚¹æ˜¯é¢†å¯¼è¿«åˆ‡éœ€è¦çš„, å…¶ä»–çš„å¿…é¡»ç­‰ç€ä»–ç­‰ç­‰é—®é¢˜ å› ä¸ºç«è½¦å‘å¸ƒæ¨¡å‹æ˜¯åŸºäºè§„åˆ™çš„, æ‰€ä»¥è¿™ä¸ªæµç¨‹å¯ä»¥åšåˆ°è‡ªåŠ¨åŒ–, è‡ªåŠ¨æ„å»ºä»£ç åˆ†æ”¯æ¥è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•å’Œåˆå¹¶ ç°åº¦å‘å¸ƒ è‡ªåŠ¨åŒ–æµ‹è¯•å¹¶ä¸æ˜¯ä¸‡èƒ½çš„, æœ‰çš„é—®é¢˜åªæœ‰åˆ°äº†çº¿ä¸Šæ‰èƒ½æš´éœ²å‡ºæ¥, è¿™ä¸ªæ—¶å€™å°±éœ€è¦å›æ»š, å³å°†è€çš„ç‰ˆæœ¬ä¸Šçº¿, ç­‰å¾…å¼€å‘äººå‘˜ä¿®å¤é—®é¢˜, ä½†æ˜¯å¤§å‹ç½‘ç«™çš„é›†ç¾¤è§„æ¨¡åºå¤§, å›æ»šæ˜¯å¾ˆéš¾çš„äº‹æƒ…, æ‰€ä»¥ä¸€èˆ¬ä¼šè¿›è¡Œç°åº¦å‘å¸ƒ å³å°†é›†ç¾¤åˆ†ä¸ºå¾ˆå¤šéƒ¨åˆ†, ç¬¬ä¸€æ¬¡ä¸Šä¸€ç‚¹ç‚¹æœåŠ¡å™¨, æŸ¥çœ‹é—®é¢˜æ˜¯å¦å‡ºç°, æ²¡å‘ç°é—®é¢˜å†ä¸Šå¦ä¸€ç‚¹ç‚¹æœåŠ¡å™¨, ä¸€ç›´åˆ°ç¨³å®šåå†å…¨éƒ¨æ›´æ–°, å¦‚æœå‘ç°é—®é¢˜å›æ»šçš„æœºå™¨å°±ä¸å¤šäº† æœ‰æ—¶å€™, ä¸Šçº¿ä¸€ä¸ªæ–°çš„åŠŸèƒ½, å¯èƒ½æœ‰å¤šä¸ªç‰ˆæœ¬, éœ€è¦æŸ¥çœ‹ç”¨æˆ·çš„åé¦ˆå†å†³å®šä¸Šå“ªä¸€ä¸ªç‰ˆæœ¬,æ­¤æ—¶å°±éœ€è¦ç»™ä¸€éƒ¨åˆ†äººçœ‹æŸä¸ªç‰ˆæœ¬, è¿™ä¹Ÿæ˜¯å°æ‰¹é‡çš„, ä¸šå†…ç§°ä¸º AB æµ‹è¯•, å…¶é€»è¾‘å’Œç°åº¦å·®ä¸å¤š ç½‘ç«™è¿è¡Œç›‘æ§ ç½‘ç«™çš„è¿è¡Œç›‘æ§å¯¹äºç½‘ç«™çš„ç»“æ„å’Œè¿ç»´æä¸ºé‡è¦ ç›‘æ§æ•°æ®é‡‡é›† ç½‘ç«™ç›‘æ§æ˜¯ä¸€ä¸ªå¹¿ä¹‰çš„æ¦‚å¿µ, å…¶åŒ…æ‹¬äº†å¾ˆå¤šç§ç±» ç”¨æˆ·è¡Œä¸ºæ—¥å¿— æŒ‡ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸Šåšçš„æ‰€æœ‰æ“ä½œåŠå…¶æ‰€åœ¨çš„ç¯å¢ƒ,åŒ…æ‹¬ æµè§ˆå™¨ç‰ˆæœ¬/OS/IP/åœ°å€/ç½‘ç»œè¿è¥å•†/è®¿é—®è·¯å¾„/åœç•™æ—¶é—´ ç­‰ç­‰,è¿™äº›æ•°æ®å¯ä»¥ç»Ÿè®¡å‡º PV/UV, åˆ†æç”¨æˆ·è¡Œä¸º, ä¼˜åŒ–ç½‘ç«™è®¾è®¡ç­‰, æœé›†æ—¥å¿—åˆ†ä¸ºä¸¤ä¸ªé€”å¾„ æœåŠ¡ç«¯æœé›†: è´Ÿè½½å‡è¡¡éƒ½å¸¦æœ‰æ—¥å¿—ç³»ç»Ÿ, æ‰€ä»¥å¾ˆç®€å•, ä½†æ˜¯æœ‰äº›ä¿¡æ¯å¹¶ä¸æ˜¯çœŸå®çš„, æ¯”å¦‚çˆ¬è™«å¯ä»¥ä¼ªé€ è¯·æ±‚å‚æ•° å®¢æˆ·ç«¯æœé›†: ä¸€èˆ¬ä½¿ç”¨JSæ¥è®°å½•å’Œå›ä¼ , ä½†æ˜¯è¿™æ ·å¯¹æœåŠ¡å™¨çš„å‹åŠ›å¾ˆå¤§, å› ä¸ºæ˜¯å®¢æˆ·ç«¯æœé›†æ‰€ä»¥æ¯”æœåŠ¡ç«¯å¯é æ€§é«˜, å› ä¸ºå¹¶å‘å¾ˆå¤§æ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨åˆ†å¸ƒå¼å®æ—¶è®¡ç®—æ¡†æ¶ Strom æ¥åšæˆ–è€…æ˜¯åŸºäº Storm è‡ªå·±å¼€å‘ æœåŠ¡å™¨æ€§èƒ½ç›‘æ§ æœé›†æœåŠ¡å™¨çš„å®æ—¶ å†…å­˜/CPU ç­‰ä¿¡æ¯, æ–¹ä¾¿è¿ç»´äººå‘˜æŸ¥çœ‹, ä¸€èˆ¬å¸¦æœ‰è‡ªåŠ¨æŠ¥è­¦æœºåˆ¶ æ¯”è¾ƒå‡ºåçš„æ¡†æ¶æœ‰ Ganglia è¿è¡Œæ•°æ®æŠ¥å‘Š æ¯”å¦‚ç¼“å­˜å‘½ä¸­ç‡/å¹³å‡å“åº”æ—¶é—´ç­‰æ•°æ®,ä¸€èˆ¬ç”±è¿ç»´äººå‘˜éƒ¨ç½² ç›‘æ§ç®¡ç† ç›‘æ§çš„ç›®çš„å¹¶ä¸æ˜¯ç®€å•çš„çœ‹, è¿˜éœ€è¦æ›´åŠ è‡ªåŠ¨åŒ– ç³»ç»ŸæŠ¥è­¦ å½“ç›‘æ§ç³»ç»Ÿæ£€æµ‹åˆ°æŸä¸ªæŒ‡æ ‡è¶…å‡ºé˜€å€¼, ä¼šå‘æŒ‡å®šçš„é‚®ç®±å‘é€å‘Šè­¦é‚®ä»¶, æ›´é«˜çº§çš„è¿˜æœ‰æ‰‹æœºçŸ­ä¿¡/è¯­è¨€ç­‰ å¤±æ•ˆè½¬ç§» å½“æŸä¸ªæœåŠ¡å™¨å‘ç”Ÿé—®é¢˜æ—¶, è‡ªåŠ¨çš„é€šçŸ¥è°ƒåº¦ç³»ç»Ÿå°†æ­¤æœåŠ¡å™¨ä¸‹çº¿ è‡ªåŠ¨é™çº§ å½“è´Ÿè½½å¾ˆé«˜æ—¶, é€šçŸ¥è°ƒåº¦ç³»ç»Ÿå°†å…¶æœåŠ¡é™çº§æˆ–è€…æš‚æ—¶å…³é—­","link":"/2021/09/04/website_architecture(3)/"},{"title":"zapåŒ…ç®€å•ä½¿ç”¨","text":"zap æ˜¯ uber å¼€æºçš„ä¸€ä¸ªæ—¥å¿—è®°å½•çš„åŒ…, uber åœ¨ go çš„é¢†åŸŸå»ºæ ‘é¢‡å¤š, zap æ›´æ˜¯ä¼˜ç§€, ç›¸æ¯”äºè‡ªå¸¦çš„ log ,ä»–æœ‰æ›´å¤šçš„åŠŸèƒ½, å½“ç„¶, æœ€æ˜¾çœ¼çš„è¿˜æ˜¯ä»–å¾ˆå¿«, æœ¬æ–‡ä»‹ç» zap æ¨¡å—çš„åŸºæœ¬ä½¿ç”¨ ç®€å•ä½¿ç”¨ zapçš„ä½¿ç”¨ç”± ç¼–ç å™¨ å’Œ åˆå§‹åŒ– ç»„æˆ, ç¼–ç å™¨è¡¨ç¤ºè¾“å‡ºçš„æ ¼å¼, DEMOå¦‚ä¸‹(ä½¿ç”¨é»˜è®¤çš„ç¼–ç å™¨) 1234567891011package toolimport ( \"go.uber.org/zap\" \"go.uber.org/zap/zapcore\")// Log zapLogå¯¹è±¡var Log *zap.LoggerLog, _ = zap.NewProduction() ä½¿ç”¨æ–¹æ³•ä¸ºç›´æ¥è°ƒç”¨ç”Ÿæˆçš„ Log, æ¯”å¦‚ 123456_, err := tools.DB.Exec(sqlStr, formPassWord, time.Now(), formPhone)if err != nil { tools.Log.Error(\"1002\", zap.Error(err)) // log tools.FormatError(c, 1002, \"error\") return} å°†æ—¥å¿—ä¿å­˜åœ¨æœ¬åœ° å¦‚æœé¡¹ç›®æœ‰æ—¥å¿—æœåŠ¡è¿›è¡Œæ—¥å¿—æ”¶é›†é‚£ä¹ˆåˆ°è¿™é‡Œå°±ç»“æŸäº†, å¦‚æœéœ€è¦å°†æ—¥å¿—å†™åœ¨æœ¬åœ°ä½ è¿˜éœ€è¦çœ‹ä¸‹å» æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœ lumberjack è¯¥åŒ…å¯ä»¥è‡ªå·±è¿›è¡Œæ—¥å¿—çš„åˆ‡å‰², é¿å…æ—¥å¿—æ¨æŒ¤è¿‡å¤š, å½“ç„¶ä½ ä¸éœ€è¦æ—¥å¿—åˆ‡å‰²ç­‰é«˜çº§åŠŸèƒ½çš„è¯ä½ å®Œå…¨å¯ä»¥ç›´æ¥ä½¿ç”¨ os.Create æ¥é€‚é… ç»“åˆ zap ä½¿ç”¨å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041package toolsimport ( \"github.com/natefinch/lumberjack\" \"go.uber.org/zap\" \"go.uber.org/zap/zapcore\")// Log zapLogå¯¹è±¡var Log *zap.Logger// æ—¥å¿—åˆ‡å‰²è®¾ç½®func getLogWriter() zapcore.WriteSyncer { lumberJackLogger := &amp;lumberjack.Logger{ Filename: \"api.log\", // æ—¥å¿—æ–‡ä»¶ä½ç½® MaxSize: 10, // æ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°(MB) MaxBackups: 5, // ä¿ç•™æ—§æ–‡ä»¶æœ€å¤§æ•°é‡ MaxAge: 30, // ä¿ç•™æ—§æ–‡ä»¶æœ€é•¿å¤©æ•° Compress: false, // æ˜¯å¦å‹ç¼©æ—§æ–‡ä»¶ } return zapcore.AddSync(lumberJackLogger)}// ç¼–ç å™¨func getEncoder() zapcore.Encoder { // ä½¿ç”¨é»˜è®¤çš„JSONç¼–ç  encoderConfig := zap.NewProductionEncoderConfig() encoderConfig.EncodeTime = zapcore.ISO8601TimeEncoder encoderConfig.EncodeLevel = zapcore.CapitalLevelEncoder return zapcore.NewJSONEncoder(encoderConfig)}// InitLogger åˆå§‹åŒ–Loggerfunc InitLogger() { writeSyncer := getLogWriter() encoder := getEncoder() core := zapcore.NewCore(encoder, writeSyncer, zapcore.DebugLevel) Log = zap.New(core, zap.AddCaller())} ä½¿ç”¨æ–¹æ³•ä¸ä¸Šæ–¹ä¸€è‡´ Log.Error ä»£è¡¨ç”Ÿæˆä¸€æ¡ Error çš„log, å‚æ•°ä¸€æ˜¯ msg å†…å®¹, è¿™ä¸ªæ˜¯è‡ªå®šä¹‰çš„, æ ¹æ®å›¢é˜Ÿçš„è§„èŒƒæ¥, å‚æ•°äºŒæ˜¯ err ä¿¡æ¯, ä½¿ç”¨ zap.Error åŒ…è£…å¯ç”Ÿæˆé¢å¤–çš„ä¿¡æ¯æ¯”å¦‚æŠ¥é”™çš„è·¯å¾„/æ–‡ä»¶/è¡Œ ç­‰ä¿¡æ¯, è¾“å‡ºçš„æ—¥å¿—ç±»ä¼¼ 1{\"level\":\"ERROR\",\"ts\":\"2020-04-19T12:38:14.587+0800\",\"caller\":\"property/view.go:464\",\"msg\":\"1002\",\"error\":\"Error 1054: Unknown column 'propertyid' in 'on clause'\"}","link":"/2021/09/04/zap/"},{"title":"èº«ä»½è¯å·ç ç¼©å°æ–¹æ¡ˆ","text":"å‰è¨€ æœ€è¿‘æ‹¿åˆ°äº†æ¯”è¾ƒå¿ƒæ€¡çš„ offer, è‹å·æŸæ—…æ¸¸é›†å›¢çš„, æ„Ÿè§‰å¯¹è‡ªå·±çš„æˆé•¿è¾ƒå¤§, è¿˜æ˜¯ç›¸å¯¹æ»¡æ„çš„ å½“ç„¶äº†, æˆé•¿å¤§, å…¶å®ä¹Ÿæ˜¯æŒ‘æˆ˜å¤§, æ‰€ä»¥ä»¥åè¦æ›´åŠ çš„åŠªåŠ›äº†, åŠ æ²¹ æœ¬ç¯‡æ–‡ç« æ˜¯æ°´ç¾¤é‡Œæœ‰äººé—®æ€ä¹ˆæŠŠèº«ä»½è¯å·(18ä½)å‹ç¼©æˆæ›´å°‘çš„ä½æ•°, ç¾¤é‡Œå¤§ä½¬çœŸçš„ç‰›æ‰¹, è¯´èƒ½å‹åˆ°6ä½, å¹¶å¤§è‡´ç®€è¿°äº†ä¸€ä¸‹æ€è·¯, æˆ‘è§‰å¾—è¿˜æ˜¯å¯è¡Œçš„. äºæ˜¯è‡ªå·±æŠ„è¢­æ€è·¯å®ç°äº†ä¸€ä¸‹åŠŸèƒ½, æµ‹è¯•äº†ä¸€ä¸‹, å¯ä»¥å‹ç¼©åˆ°6-7ä½, åº”è¯¥æœ‰æ›´å¥½çš„å‹ç¼©æ–¹æ³•, è¿™é‡Œåªæ˜¯è®°å½•ä¸€ä¸‹æˆ‘è‡ªå·±çš„ç‰ˆæœ¬ å±€é™ è¿™é‡Œæˆ‘æƒ³æå‰è¯´çš„æ˜¯, åœ¨çœŸæ­£çš„å¼€å‘ä¸­, æå°‘æ•°éœ€è¦å¯¹èº«ä»½è¯å·ç è¿›è¡Œå‹ç¼©çš„, å› ä¸ºèŠ‚çœäº†ç©ºé—´, å¸¦æ¥çš„æ˜¯å¾ˆå·®çš„å¯è¯»æ€§, è€Œä¸”å¯¹äºä¸€äº›æ•°æ®ç­›é€‰æ›´æ˜¯å›°éš¾, è¿™é‡Œä¹Ÿä»…ä»…æ˜¯åšå‚è€ƒå’Œç¤ºä¾‹ä½¿ç”¨ æ€è·¯ å·ç ç»“æ„ å¯¹äºèº«ä»½è¯å·ç , ç™¾åº¦ä¸Šæœ‰å¾ˆå¤šç»„æˆéƒ¨åˆ†çš„è§£æ, è¿™é‡Œæ‘˜æŠ„ä¸€ä¸‹ç™¾åº¦ç™¾ç§‘å…¬æ°‘èº«ä»½è¯å·ç _ç™¾åº¦ç™¾ç§‘ (baidu.com) 1ï¼å·ç çš„ç»“æ„ å…¬æ°‘èº«ä»½å·ç æ˜¯ç‰¹å¾ç»„åˆç ï¼Œç”±åä¸ƒä½æ•°å­—æœ¬ä½“ç å’Œä¸€ä½æ ¡éªŒç ç»„æˆã€‚æ’åˆ—é¡ºåºä»å·¦è‡³å³ä¾æ¬¡ä¸ºï¼šå…­ä½æ•°å­—åœ°å€ç ï¼Œå…«ä½æ•°å­—å‡ºç”Ÿæ—¥æœŸç ï¼Œä¸‰ä½æ•°å­—é¡ºåºç å’Œä¸€ä½æ•°å­—æ ¡éªŒç ã€‚ 2ï¼åœ°å€ç  è¡¨ç¤ºç¼–ç å¯¹è±¡å¸¸ä½æˆ·å£æ‰€åœ¨å¿ï¼ˆå¸‚ã€æ——ã€åŒºï¼‰çš„è¡Œæ”¿åŒºåˆ’ä»£ç ï¼ŒæŒ‰GB/T2260çš„è§„å®šæ‰§è¡Œã€‚ 3ï¼å‡ºç”Ÿæ—¥æœŸç  è¡¨ç¤ºç¼–ç å¯¹è±¡å‡ºç”Ÿçš„å¹´ã€æœˆã€æ—¥ï¼ŒæŒ‰GB/T7408çš„è§„å®šæ‰§è¡Œï¼Œå¹´ã€æœˆã€æ—¥ä»£ç ä¹‹é—´ä¸ç”¨åˆ†éš”ç¬¦ã€‚ 4ï¼é¡ºåºç  è¡¨ç¤ºåœ¨åŒä¸€åœ°å€ç æ‰€æ ‡è¯†çš„åŒºåŸŸèŒƒå›´å†…ï¼Œå¯¹åŒå¹´ã€åŒæœˆã€åŒæ—¥å‡ºç”Ÿçš„äººç¼–å®šçš„é¡ºåºå·ï¼Œé¡ºåºç çš„å¥‡æ•°åˆ†é…ç»™ç”·æ€§ï¼Œå¶æ•°åˆ†é…ç»™å¥³æ€§ã€‚ 5ï¼æ ¡éªŒç  æ ¹æ®å‰é¢åä¸ƒä½æ•°å­—ç ï¼ŒæŒ‰ç…§ISO 7064:1983.MOD 11-2æ ¡éªŒç è®¡ç®—å‡ºæ¥çš„æ£€éªŒç ã€‚ ä»¥èº«ä»½è¯å·ç 130424200208110128 æ¥è®², å…¶åˆ†ä¸ºå‡ éƒ¨åˆ†: 130424: åœ°å€ç  20020811: å‡ºç”Ÿå¹´æœˆæ—¥ 012: å‡ºç”Ÿé¡ºåºå’Œæ€§åˆ« 8: æ ¡éªŒç  åœ°å€ç  æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥å°è¯•å‹ç¼©, é¦–å…ˆæ˜¯åœ°å€ç , åœ°å€ç åœ¨èº«ä»½è¯å·ç ä¸­å æ®äº†6ä½, åœ°å€ç æ—¢ç„¶æ˜¯æ ‡è®°äº†å‡ºç”Ÿåœ°, é‚£ä¹ˆå°±ä¸å¯èƒ½æ˜¯éšæœºçš„, å…¶å®ä¸­å›½å¾ˆå¤§, æˆ‘ç›¸ä¿¡åœ°å€ç ä¹Ÿä¸ä¼šæœ‰999999ä¸ª, äºæ˜¯æˆ‘æŸ¥è¯¢äº†ç›¸å…³èµ„æ–™, æ‰¾åˆ°äº†æ°‘æ”¿éƒ¨çš„å…¬å¼€èµ„æ–™www.mca.gov.cn/article/sj/xzqh/2020/20201201.html, ç¨å¾®æŸ¥çœ‹äº†ä¸€ä¸‹æœ‰ä¸è¶…è¿‡4000ä¸ª, å› æ­¤, å¦‚æœæˆ‘ä»¬è‡ªå·±è®¾ç½®ä¸€ä¸ªæ˜ å°„å…³ç³», æ¯”å¦‚å°†åœ°å€ç 654202åœ¨æ•°æ®åº“ä¸­è®¾ç½®ä¸€ä¸ªå”¯ä¸€ id, å› ä¸ºæ€»å…±ä¸è¶…è¿‡4000ä¸ª, å› æ­¤ id æœ€é•¿ä¹Ÿ4ä½, è¿™æ ·å°±å¯ä»¥å‡å°‘2ä½ ###å‡ºç”Ÿæ—¥æœŸç  å‡ºç”Ÿæ—¥æœŸ, åœ¨èº«ä»½è¯ä¸­å æ®äº†6ä½, åˆ†åˆ«æ˜¯YYYYMMDD, è¿™ä¸ªæ€ä¹ˆå»ä¼˜åŒ–å‘¢? æœ‰å¤§ä½¬è®¤ä¸ºå¯ä»¥å°†å¹´çš„å‰ä¸¤ä½åˆ†ä¸º2ç§19/20, ç„¶åæœˆçš„ç¬¬ä¸€ä½åªæœ‰ä¸¤ç§0/1, æ—¥çš„ç¬¬ä¸€ä½åªæœ‰0/1/2/3, è¿™å‡ ä¸ªå¯ä»¥æŒ‰ä½å­˜å‚¨ æˆ‘è®¤ä¸º, è¿™æ ·æ¯”è¾ƒå¤æ‚, è€Œä¸”19/20èŒƒå›´å¤ªå°äº†, æˆ‘çš„æ€è·¯æ˜¯, å°†å…¶æŒ‰ç…§å¤©æ•°å­˜å‚¨, ä¾‹å¦‚, 19000102å¯ä»¥å­˜å‚¨ä¸º0000001, å³å­˜å‚¨ä»1900å¹´0101å¼€å§‹åˆ°è¯¥ç”¨æˆ·å‡ºç”Ÿæ—¥æœŸçš„å¤©æ•°, è®¾è®¡ä¸ºæœ€é•¿7ä½, æˆ‘æµ‹è¯•äº†ä¸€ä¸‹, æ”¯æŒåˆ°8888å¹´ä¹Ÿæ²¡æœ‰é—®é¢˜, è¿™æ ·æå¤§çš„æé«˜äº†å…¼å®¹æ€§, è¿™é‡Œå‡å°‘1ä½ é¡ºåºç  é¡ºåºç , è®°å½•äº†é¡ºåºå’Œæ€§åˆ«, æ€è€ƒäº†ä¸€ä¸‹, æ„Ÿè§‰è¿™é‡Œæ— ä»ä¸‹æ‰‹, äºæ˜¯é¡ºåºç æ²¡æœ‰è¿›è¡Œç®€åŒ– æ ¡éªŒç  æ ¡éªŒç æœ¬èº«å ç”¨ä¸€ä½, ä½†æ˜¯æ ¡éªŒç æˆ‘æŸ¥çœ‹äº†ä¸€ä¸‹, æ˜¯é€šè¿‡å‰17ä½æ•°å­—è®¡ç®—å¾—æ¥çš„, è®¡ç®—è§„åˆ™ä¸ºèº«ä»½è¯æ ¡éªŒç è®¡ç®—å…¬å¼åŠå®ä¾‹è®¡ç®—-ç™¾åº¦ç»éªŒ (baidu.com): ç¬¬ä¸€æ­¥ï¼šå°†èº«ä»½è¯å·ç çš„ç¬¬1ä½æ•°å­—ä¸7ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬2ä½æ•°å­—ä¸9ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬3ä½æ•°å­—ä¸10ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬4ä½æ•°å­—ä¸5ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬5ä½æ•°å­—ä¸8ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬6ä½æ•°å­—ä¸4ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬7ä½æ•°å­—ä¸2ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬8ä½æ•°å­—ä¸1ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬9ä½æ•°å­—ä¸6ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬10ä½æ•°å­—ä¸3ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬11ä½æ•°å­—ä¸7ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬12ä½æ•°å­—ä¸9ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬13ä½æ•°å­—ä¸10ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬14ä½æ•°å­—ä¸5ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬15ä½æ•°å­—ä¸8ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬16ä½æ•°å­—ä¸4ç›¸ä¹˜ï¼›å°†èº«ä»½è¯å·ç çš„ç¬¬17ä½æ•°å­—ä¸2ç›¸ä¹˜ã€‚ ç¬¬äºŒæ­¥ï¼šå°†ç¬¬ä¸€æ­¥èº«ä»½è¯å·ç 1~17ä½ç›¸ä¹˜çš„ç»“æœæ±‚å’Œï¼Œå…¨éƒ¨åŠ èµ·æ¥ã€‚ ç¬¬ä¸‰æ­¥ï¼šç”¨ç¬¬äºŒæ­¥è®¡ç®—å‡ºæ¥çš„ç»“æœé™¤ä»¥11ï¼Œè¿™æ ·å°±ä¼šå‡ºç°ä½™æ•°ä¸º0ï¼Œä½™æ•°ä¸º1ï¼Œä½™æ•°ä¸º2ï¼Œä½™æ•°ä¸º3ï¼Œä½™æ•°ä¸º4ï¼Œä½™æ•°ä¸º5ï¼Œä½™æ•°ä¸º6ï¼Œä½™æ•°ä¸º7ï¼Œä½™æ•°ä¸º8ï¼Œä½™æ•°ä¸º9ï¼Œä½™æ•°ä¸º10å…±11ç§å¯èƒ½æ€§ã€‚ ç¬¬å››æ­¥ï¼šå¦‚æœä½™æ•°ä¸º0ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º1ï¼›å¦‚æœä½™æ•°ä¸º1ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º0ï¼›å¦‚æœä½™æ•°ä¸º2ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸ºXï¼›å¦‚æœä½™æ•°ä¸º3ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º9ï¼›å¦‚æœä½™æ•°ä¸º4ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º8ï¼›å¦‚æœä½™æ•°ä¸º5ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º7ï¼›å¦‚æœä½™æ•°ä¸º6ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º6ï¼›å¦‚æœä½™æ•°ä¸º7ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º5ï¼›å¦‚æœä½™æ•°ä¸º8ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º4ï¼›å¦‚æœä½™æ•°ä¸º9ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º3ï¼›å¦‚æœä½™æ•°ä¸º10ï¼Œé‚£å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º2ã€‚ æ—¢ç„¶æ˜¯è®¡ç®—çš„, é‚£ä¹ˆè¿™é‡Œçš„æ ¡éªŒä½å­˜å‚¨æ—¶å¯ä»¥èˆå», ç­‰è¿˜åŸæ—¶å†è¿›è¡Œè®¡ç®—å’Œå¡«å……, è¿™é‡Œå‡å°‘1ä½ è¿›åˆ¶è½¬æ¢ èµ°åˆ°è¿™é‡Œ, æˆ‘ä»¬å‘ç°, åªå‡å°‘äº†4ä½, å‰©ä¸‹14ä½, è¿˜è¦æ€ä¹ˆå‹ç¼©å‘¢? è¿™é‡Œä½¿ç”¨å¤§æ€å™¨, è¿›åˆ¶è½¬æ¢ ä¼—æ‰€å‘¨çŸ¥, ä»ä½è¿›åˆ¶å‘é«˜è¿›åˆ¶è¿›è¡Œè½¬æ¢, å¯ä»¥å‡å°‘ä½æ•°, å› ä¸ºé«˜è¿›åˆ¶æ¯ä¸€ä½å¯ä»¥è¡¨ç¤ºæ›´å¤šç§æ•°æ®å¯èƒ½, è¿™é‡Œä¸è€ƒè™‘æ•°æ®åº“ç­‰ç­‰çš„å…¼å®¹æ€§, ç›´æ¥ä½¿ç”¨ ascii çš„æ‰€æœ‰å¯è§å­—ç¬¦, 94ä¸ª, ä¹Ÿå°±æ˜¯è¯´å°†èº«ä»½è¯å·ç è½¬æ¢ä¸º94è¿›åˆ¶, è¾¾åˆ°å‹ç¼©çš„ç›®çš„ ä»£ç  å½“ç„¶æ˜¯å†™å®Œä»£ç æ‰æœ‰çš„è¿™ä¸€ä¸ªåšå®¢è¾“å‡ºçš„å–½, åœ°å€ç  åœ°å€ç è¿™é‡Œ, è™½ç„¶ç¿»çœ‹äº† github ä¸Šæœ‰åˆ«äººæŠ“å¥½çš„æ•°æ®, ä½†æ˜¯çœ‹æ›´æ–°æ—¥å¿—æœ‰äº›å¹´å¤´äº†, äºæ˜¯æˆ‘è‡ªå·±å†™äº†ä¸€ä¸ª py è„šæœ¬, è¿›è¡Œæ•°æ®æŠ“å–å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ sqlite æ–‡ä»¶ä¸­, py æ–‡ä»¶å¦‚ä¸‹(è„šæœ¬ä¾èµ– python3) ä¾èµ–å¦‚ä¸‹: 12beautifulsoup4==4.10.0requests==2.27.0 è„šæœ¬ä»£ç å¦‚ä¸‹: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485import codeimport loggingimport sqlite3import requestsfrom bs4 import BeautifulSoup# ä¸­åäººæ°‘å…±å’Œå›½æ°‘æ”¿éƒ¨å®˜ç½‘-&gt;æ°‘æ”¿æ•°æ®-&gt;è¡Œæ”¿åŒºåˆ’ä»£ç mca_url = \"http://www.mca.gov.cn/article/sj/xzqh/2020/20201201.html\"logger = logging.getLogger()logger.setLevel(logging.DEBUG)def get_response(): # è·å–è¡Œæ”¿åŒºåˆ’ç½‘é¡µæ•°æ® response = requests.get(url=mca_url) if response.status_code != 200: logger.warning(\"è·å–æ•°æ®æ—¶å‡ºç°é—®é¢˜, ç½‘é¡µè¿”å›çŠ¶æ€ç : %s\" % response.status_code) return return response.contentdef parse_response(content: str): # è§£æresponse soup = BeautifulSoup(content, \"html.parser\") tab = soup.find(name=\"table\") if not tab: logger.warning(\"è§£æå¤±è´¥, æ²¡æœ‰æ‰¾åˆ° table å…ƒç´ \") return trs = tab.find_all(name=\"tr\") if len(trs) == 0: logger.warning(\"è§£æå¤±è´¥, æ²¡æœ‰æ‰¾åˆ° tr å…ƒç´ \") return codes = [] for i in range(len(trs)): if i &lt;= 2: # å‰3è¡Œæ˜¯æ ‡é¢˜ continue tds = trs[i].find_all(name=\"td\") if len(tds) &lt; 2: continue code = tds[1].get_text().strip() # çœŸå®çš„åŒºåŸŸç  if not code: continue code = int(code) name = tds[2].get_text().strip() # åŒºåŸŸå id = i-2 # id codes.append((id, code, name)) return codesdef insert_db(codes: list): con = sqlite3.connect(\"area.sqlite\") cur = con.cursor() sql = \"\"\" CREATE TABLE \"area\" ( \"id\" INTEGER NOT NULL, \"code\" integer, \"name\" TEXT, PRIMARY KEY (\"id\") ); \"\"\" cur.execute(sql) sql = \"\"\" CREATE UNIQUE INDEX \"code\" ON \"area\" ( \"code\" ); \"\"\" cur.execute(sql) cur.executemany('INSERT INTO area VALUES (?,?,?)', codes) con.commit() # å…³é—­æ¸¸æ ‡ cur.close() # æ–­å¼€æ•°æ®åº“è¿æ¥ con.close()def main(): content = get_response() codes = parse_response(content) insert_db(codes)if __name__ == \"__main__\": main() ç®€å•çš„çˆ¬è™«è„šæœ¬, ä½†æ˜¯ç½‘é¡µä¸è§„èŒƒ(ZF ç½‘ç«™é€šç—…), å¯¼è‡´åšäº†å¾ˆå¤šçš„å…¼å®¹å¤„ç† æ‰§è¡Œå®Œæˆå, ä¼šåœ¨æœ¬åœ°ç”Ÿæˆarea.sqliteæ–‡ä»¶ è€Œæˆ‘ä»¬ä½¿ç”¨ go è¿›è¡Œ sqlite æ–‡ä»¶çš„è¯»å–, çº¯çº¯çš„è¯»å–è€Œä¸æ˜¯ä¿®æ”¹å’Œæ’å…¥, å¯¹äºè¯»å–, éœ€è¦æœ‰ä¸¤ä¸ªæ–¹æ³•, å½“å‹ç¼©æ—¶, æˆ‘ä»¬éœ€è¦é€šè¿‡åœ°å€ç æ¥è·å–å¯¹åº”çš„ id, åœ¨è§£å‹æ—¶, éœ€è¦é€šè¿‡ id è·å–å¯¹åº”çš„åœ°å€ç , ä¸‹é¢æ˜¯area.go: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package mainimport ( \"database/sql\" \"fmt\" _ \"github.com/mattn/go-sqlite3\")// sqlitetype SqliteConn struct { file string conn *sql.DB}// åˆå§‹åŒ–func InitSqlite(file string) (*SqliteConn, error) { return &amp;SqliteConn{ file: file, }, nil}// è¿æ¥func (c *SqliteConn) Conn() error { db, err := sql.Open(\"sqlite3\", c.file) if err != nil { return err } c.conn = db return nil}// å…³é—­è¿æ¥func (c *SqliteConn) Close() { c.conn.Close()}// è·å– codefunc (c *SqliteConn) GetCode(id int) (int, error) { code := 0 sql := \"SELECT code FROM area WHERE id=?\" row := c.conn.QueryRow(sql, id) if row.Err() != nil { return code, fmt.Errorf(\"æœªæŸ¥è¯¢åˆ°æ•°æ®\") } if err := row.Scan(&amp;code); err != nil { return code, fmt.Errorf(\"æ•°æ®è§£æé”™è¯¯\") } return code, nil}// è·å– IDfunc (c *SqliteConn) GetID(code int) (int, error) { id := 0 sql := \"SELECT id FROM area WHERE code=?\" row := c.conn.QueryRow(sql, code) if row.Err() != nil { return id, fmt.Errorf(\"æœªæŸ¥è¯¢åˆ°æ•°æ®\") } if err := row.Scan(&amp;id); err != nil { return id, fmt.Errorf(\"æ•°æ®è§£æé”™è¯¯\") } return id, nil} å‡ºç”Ÿæ—¥æœŸç  å‡ºç”Ÿæ—¥æœŸç , ä¹Ÿæ˜¯ä¸¤ä¸ªæ–¹æ³•, ä¸€ä¸ªæ˜¯å°†æ—¥æœŸè½¬æˆä»19700101åˆ°æŒ‡å®šæ—¥æœŸçš„å¤©æ•°, ä¸€ä¸ªæ˜¯æ ¹æ®å¤©æ•°ç®—å‡ºæ—¥æœŸ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯, ä½¿ç”¨Subæ–¹æ³•, ä¸èƒ½è¿›è¡Œå¾ˆé•¿çš„æ—¶é—´é—´éš”è®¡ç®—, å…¶æ–‡æ¡£æ‰€è¿°Sub returns the duration t-u. If the result exceeds the maximum (or minimum) value that can be stored in a Duration, the maximum (or minimum) duration will be returned. To compute t-d for a duration d, use t.Add(-d)., æ‰€ä»¥è¿™é‡ŒæŒ‰ç…§250å¹´è¿›è¡Œåˆ‡åˆ†, è§£å†³æ—¥æœŸå·®è·è¿‡é•¿å¯¼è‡´çš„è®¡ç®—é”™è¯¯ time2.goæ–‡ä»¶å¦‚ä¸‹: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667package mainimport ( \"fmt\" \"strconv\" \"time\")func time2Day(startTime, endTime time.Time) int { // å› ä¸ºå®˜æ–¹çš„ time.Add/Sub æœ€å¤šåªèƒ½29X å¹´, æ‰€ä»¥è‡ªå·±å®ç°ä¸€ä¸ª, 250å¹´ä¸€ä¸ªå¾ªç¯ maxYear := 250 day := 0 for { middleTime := startTime.AddDate(maxYear, 0, 0) if endTime.Sub(middleTime).Hours() &gt; 0 { // è¿˜æ²¡æœ‰åˆ° day += int(middleTime.Sub(startTime).Hours()) / 24 startTime = middleTime } else { // åˆ°äº† day += int(endTime.Sub(startTime).Hours()) / 24 break } } return day}func Time2Day(Y, M, D string) (int, error) { // è½¬æ¢æ—¶é—´ // å°†æ—¶é—´è½¬æ¢æˆä»1900å¹´1æœˆ1æ—¥ä¹‹åçš„å¤©æ•° eTm, err := time.Parse(\"2006-01-02\", fmt.Sprintf(\"%v-%v-%v\", Y, M, D)) if err != nil { return 0, err } sTm, err := time.Parse(\"2006-01-02\", \"1900-01-01\") if err != nil { return 0, err } subD := time2Day(sTm, eTm) if subD &gt; 9999999 { // é˜²æ­¢ç‰¹åˆ«å¤§åšçš„å¤©æ•°é™åˆ¶ return 0, fmt.Errorf(\"year exceeding the limit\") } return subD, nil}func Day2Time(d string) (string, error) { // è½¬æ¢æ—¶é—´ // ä»1900å¹´1æœˆ1æ—¥ä¹‹åçš„å¤©æ•°è½¬æ¢æˆæ—¶é—´ sTm, err := time.Parse(\"2006-01-02\", \"1900-01-01\") if err != nil { return \"\", err } subD, _ := strconv.Atoi(d) nTm := sTm.AddDate(0, 0, subD) snTm := fmt.Sprintf(\"%v%v%v\", nTm.Year(), func(ntm time.Time) string { if int(nTm.Month()) &lt; 10 { // å¯¹1ä½æœˆä»½å…¼å®¹ return fmt.Sprintf(\"0%v\", int(ntm.Month())) } return fmt.Sprintf(\"%v\", int(ntm.Month())) }(nTm), func(ntm time.Time) string { if nTm.Day() &lt; 10 { // å¯¹1ä½æ—¥æœŸåšå…¼å®¹ return fmt.Sprintf(\"0%v\", ntm.Day()) } return fmt.Sprintf(\"%v\", ntm.Day()) }(nTm)) return snTm, nil} æ ¡éªŒç è®¡ç®— æ ¡éªŒç è®¡ç®—æŒ‰ç…§ä¸Šé¢çš„ç™¾åº¦è¯´çš„æ–¹å¼, å…ˆè¿›è¡Œç›¸ä¹˜, ç„¶åè¿›è¡Œæ•´é™¤, æ±‚ä½™æ•°è¿›è¡Œå¯¹åº” validate.goä»£ç å¦‚ä¸‹ 1234567891011121314151617181920package mainimport \"fmt\"var validate = [11]string{\"1\", \"0\", \"X\", \"9\", \"8\", \"7\", \"6\", \"5\", \"4\", \"3\", \"2\"}var base = [17]int{7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2}func CalculteValidateCode(IDCard string) (string, error) { validateCode := \"\" count := 0 if len(IDCard) != len(base) { return validateCode, fmt.Errorf(\"not find on base\") } for i, v := range IDCard { bv := base[i] count += bv * int(v-48) } return validate[count%11], nil} è¿™é‡Œæœ‰è¶£çš„æ˜¯, åˆ©ç”¨éå†å­—ç¬¦ä¸², æ¯ä¸ªå…ƒç´ æ˜¯å…¶ASCIIçš„ç¼–å·çš„ç‰¹å¾, ä½¿å…¶-48æ¥è®¡ç®—å¾—å‡ºçœŸå®çš„æ•°å­— è¿›åˆ¶è½¬æ¢ go è™½ç„¶æœ¬èº«è‡ªå¸¦äº†è¿›åˆ¶è½¬æ¢, ä½†æ˜¯æœ€é«˜æ”¯æŒ32ä½, å¹¶ä¸æ”¯æŒ94ä½, å…¶å®è¿›åˆ¶è½¬æ¢è¶…è¿‡32ä½ä¹Ÿä¸å¸¸è§, æ®æˆ‘æ‰€çŸ¥åªæœ‰çŸ­ç½‘å€ç”Ÿæˆéœ€è¦64è¿›åˆ¶, è¿™é‡Œåªèƒ½è‡ªå·±å®ç°ä¸€ä¸ª 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package mainimport ( \"fmt\" \"math\" \"strings\")// æ‹¼æ¥ ascii å­—ç¬¦ä¸²func initAsciiString(start, end int) (string, error) { compare := \"\" if start &gt; end { return compare, fmt.Errorf(\"error\") } for i := start; i &lt;= end; i++ { compare = compare + fmt.Sprintf(\"%v\", string(rune(i))) } return compare, nil}type Conver struct { asciiString string len int}func InitConver(asciiString string) (*Conver, error) { return &amp;Conver{ asciiString: asciiString, len: len(asciiString), }, nil}// åè¿›åˆ¶è½¬ä»»æ„è¿›åˆ¶func (c *Conver) Num2BHex(num int) string { num_str := \"\" for num != 0 { yu := num % c.len num_str = string(c.asciiString[yu]) + num_str num = num / c.len } return num_str}// ä»»æ„è¿›åˆ¶è½¬åè¿›åˆ¶func (c *Conver) BHex2Num(str string) int { v := 0.0 length := len(str) for i := 0; i &lt; length; i++ { s := string(str[i]) index := strings.Index(c.asciiString, s) v += float64(index) * math.Pow(float64(c.len), float64(length-1-i)) // å€’åº } return int(v)} å‹ç¼© ä¸ºäº†ä¸€å®šç¨‹åº¦çš„è§„èŒƒä»£ç , æˆ‘ä¼šå°†èº«ä»½è¯å…ˆè¿›è¡Œåˆ†å‰², ä¿å­˜åˆ°ç»“æ„ä½“ä¸­, å‹ç¼©çš„ä¸»è¦æµç¨‹, åœ¨complex2simple.goä¸­ åœ¨ç¼–å†™ä»£ç ä¸­, é‡åˆ°è¿‡ä¸¤ä¸ªé—®é¢˜: åœ°åŒºå¯¹åº”ç¼–å·å¯èƒ½ä¸è¶³4ä½ æ¯”å¦‚è¯´ç¼–å·110101, å¯¹åº”çš„æ˜¯åŒ—äº¬å¸‚ä¸œåŸåŒº, ä»–çš„ id æ˜¯2, ä½†æ˜¯ id æœ€é•¿æœ‰å¯èƒ½æ˜¯4ä½, ä¸è¶³çš„è¯åœ¨å‰é¢å¡«å……0åˆæ„Ÿè§‰éº»çƒ¦(æ¯”å¦‚2å˜æˆ0002), äºæ˜¯æŸ¥çœ‹äº†ä¸€ä¸‹ç›®å‰çš„æ•°æ®ä¸º3209æ¡, å°† id å­˜å‚¨æ—¶å˜ä¸º5000-id, è¿™æ ·ä¿è¯æ°¸è¿œå ç”¨4ä½, è§£ç æ—¶è®°å¾—å¤„ç†å³å¯ å‹ç¼©æ—¥æœŸè¿™é‡Œ, æœ‰å¯èƒ½ä¸è¶³7ä½ å¯¹äºæ¯”è¾ƒå°çš„æ—¥æœŸ, ç®—å‡ºæ¥å¤©æ•°, æœ‰å¯èƒ½ä¸è¶³7ä½, å¦‚æœåœ¨å‰åŠ å…¥0å¡«å……, åˆç¨å¾®éº»çƒ¦ç‚¹, è®¾ç½®æœ€é«˜å€¼ä¹Ÿå¯ä»¥, ä½†æ˜¯æœ‰ä¸€ç§åŠæ³•æ›´çœåŠ›, é‚£å°±æ˜¯æŠŠæ—¥æœŸæŒªåˆ°æœ€å, åœ°åŒºç¡®å®š4ä½, é¡ºåºç 3ä½, å‰©ä¸‹çš„å…¨éƒ¨éƒ½æ˜¯å¤©æ•° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182package mainimport ( \"fmt\" \"strconv\")type IDCardSplit struct { AreaCode string Year string Month string Day string Order string Validate string}// åˆ‡åˆ†èº«ä»½è¯func splitID(ID string) (IDCardSplit, error) { // åˆ‡åˆ†åŸå§‹èº«ä»½è¯, å‰¥ç¦»å‡ºåœ°åŒºç å’Œæ ¡éªŒç  IDS := IDCardSplit{} for i, v := range ID { switch { case i &lt;= 5: IDS.AreaCode += string(v) case i &gt; 5 &amp;&amp; i &lt;= 9: IDS.Year += string(v) case i &gt; 9 &amp;&amp; i &lt;= 11: IDS.Month += string(v) case i &gt; 11 &amp;&amp; i &lt;= 13: IDS.Day += string(v) case i &gt; 13 &amp;&amp; i &lt;= 16: IDS.Order += string(v) case i == 17: IDS.Validate = string(v) } } return IDS, nil}func Complex2Simple(IDC string) (string, error) { sID, _ := splitID(IDC) simpleSID := \"\" // åˆå§‹åŒ– sqlite æ•°æ®åº“ con, err := InitSqlite(\"area.sqlite\") if err != nil { fmt.Println(err) return simpleSID, err } // è¿æ¥æ•°æ®åº“ if err := con.Conn(); err != nil { fmt.Println(err) return simpleSID, err } defer con.Close() // è½¬æ¢åœ°åŒºç ä¸º int areaCode, err := strconv.Atoi(sID.AreaCode) if err != nil { fmt.Println(err) return simpleSID, err } // è·å– areaID areaID, err := con.GetID(areaCode) if err != nil { fmt.Println(err) return simpleSID, err } d, err := Time2Day(sID.Year, sID.Month, sID.Day) if err != nil { return simpleSID, err } simpleSID = fmt.Sprintf(\"%v%v%v\", maxAreaID-areaID, sID.Order, d) simpleID, _ := strconv.Atoi(simpleSID) asciiString, err := initAsciiString(33, 126) // æ‰€æœ‰å¯è§ ascii, 94ä¸ª if err != nil { fmt.Println(err) return simpleSID, err } conver, _ := InitConver(asciiString) s := conver.Num2BHex(simpleID) return s, nil} è§£å‹ç¼© ä¸å‹ç¼©åŸºæœ¬ç›¸å, éœ€è¦æ³¨æ„çš„æ˜¯é¡ºåºå‘ç”Ÿäº†è°ƒæ•´, å¦å¤–, åœ¨é€šè¿‡ id è·å–åœ°åŒºç æ—¶, æ³¨æ„è¦å…ˆä½¿ç”¨5000-idå¾—å‡ºçœŸæ­£çš„ id simple2complex.go 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677package mainimport ( \"fmt\" \"strconv\")type IDCardSimpleSplit struct { AreaID string SubDay string Order string}// åˆ‡åˆ†simple å­—ç¬¦ä¸²func splitSimple(simple string) (IDCardSimpleSplit, error) { // åˆ‡åˆ† simple IDS := IDCardSimpleSplit{} for i, v := range simple { switch { case i &lt;= 3: IDS.AreaID += string(v) case i &gt; 3 &amp;&amp; i &lt;= 6: IDS.Order += string(v) case i &gt; 6: IDS.SubDay += string(v) } } return IDS, nil}func Simple2Complex(simpleID string) (string, error) { complexID := \"\" asciiString, err := initAsciiString(33, 126) // æ‰€æœ‰å¯è§ ascii, 94ä¸ª if err != nil { fmt.Println(err) return complexID, err } conver, _ := InitConver(asciiString) s := conver.BHex2Num(simpleID) sID, err := splitSimple(fmt.Sprintf(\"%v\", s)) if err != nil { fmt.Println(err) return complexID, err } // åˆå§‹åŒ– sqlite æ•°æ®åº“ con, err := InitSqlite(\"area.sqlite\") if err != nil { fmt.Println(err) return complexID, err } // è¿æ¥æ•°æ®åº“ if err := con.Conn(); err != nil { fmt.Println(err) return complexID, err } defer con.Close() // è½¬æ¢åœ°åŒºç ä¸º int areaSID, err := strconv.Atoi(sID.AreaID) if err != nil { fmt.Println(err) return complexID, err } // è·å– areaID areaID, err := con.GetCode(maxAreaID - areaSID) if err != nil { fmt.Println(err) return complexID, err } snTm, err := Day2Time(sID.SubDay) if err != nil { return complexID, err } complexID = fmt.Sprintf(\"%v%v%v\", areaID, snTm, sID.Order) validate, _ := CalculteValidateCode(complexID) complexID = complexID + validate return complexID, nil} æµ‹è¯• main.goå¦‚ä¸‹ 12345678910111213141516171819package mainimport ( \"fmt\" _ \"github.com/mattn/go-sqlite3\")var maxAreaID = 5000func main() { IDC := \"411503211208110123\" // åŸå§‹çš„èº«ä»½è¯å·ç  simple, err := Complex2Simple(IDC) fmt.Println(err) fmt.Println(simple) c, err := Simple2Complex(simple) fmt.Println(err) fmt.Println(c)} è¿è¡Œ 12345âœ task_test go run .&lt;nil&gt;NtnBRM&lt;nil&gt;411503211208110123 å†™åœ¨æœ€å è™½ç„¶æƒ³æ³•æ¯”è¾ƒç®€å•, ä½†æ˜¯å®ç°èµ·æ¥è¿˜æ˜¯æœ‰äº›å¤æ‚çš„, åŒ…æ‹¬æ—¥æœŸçš„è½¬æ¢, è¿›åˆ¶è®¡ç®—è¿™äº›, ä¹Ÿç®—æ˜¯å—ç›Šè‰¯å¤š ä¸‹æ¬¡å®ç°ä¸€ä¸ª64è¿›åˆ¶çš„çŸ­ç½‘å€ DEMO å§","link":"/2022/03/08/zip_id_card/"}],"tags":[{"name":"æ¶æ„","slug":"æ¶æ„","link":"/tags/%E6%9E%B6%E6%9E%84/"},{"name":"Golang","slug":"Golang","link":"/tags/Golang/"},{"name":"Python","slug":"Python","link":"/tags/Python/"},{"name":"æºç åˆ†æ","slug":"æºç åˆ†æ","link":"/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"},{"name":"åšå¥½è‡ªå·±","slug":"åšå¥½è‡ªå·±","link":"/tags/%E5%81%9A%E5%A5%BD%E8%87%AA%E5%B7%B1/"},{"name":"å¿ƒç†å­¦","slug":"å¿ƒç†å­¦","link":"/tags/%E5%BF%83%E7%90%86%E5%AD%A6/"},{"name":"é€»è¾‘å­¦","slug":"é€»è¾‘å­¦","link":"/tags/%E9%80%BB%E8%BE%91%E5%AD%A6/"},{"name":"LeetCode","slug":"LeetCode","link":"/tags/LeetCode/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"DB","slug":"DB","link":"/tags/DB/"},{"name":"Rust","slug":"Rust","link":"/tags/Rust/"},{"name":"å¥½ç©çš„æŠ€æœ¯","slug":"å¥½ç©çš„æŠ€æœ¯","link":"/tags/%E5%A5%BD%E7%8E%A9%E7%9A%84%E6%8A%80%E6%9C%AF/"},{"name":"Vue","slug":"Vue","link":"/tags/Vue/"}],"categories":[{"name":"ç¼–ç¨‹","slug":"ç¼–ç¨‹","link":"/categories/%E7%BC%96%E7%A8%8B/"},{"name":"äººç”Ÿ","slug":"äººç”Ÿ","link":"/categories/%E4%BA%BA%E7%94%9F/"}]}